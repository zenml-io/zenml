
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.58.2/integration_code_docs/integrations-kubeflow/">
      
      <link rel="icon" href="../../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>Kubeflow - ZenML API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  analytics.page();
  }}();
</script>
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kubeflow" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ZenML API Reference" class="md-header__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kubeflow
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZenML API Reference" class="md-nav__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZenML API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        ZenML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-_hub/" class="md-nav__link">
        Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-alerter/" class="md-nav__link">
        Alerter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-annotators/" class="md-nav__link">
        Annotators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifact_stores/" class="md-nav__link">
        Artifact Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client_lazy_loader/" class="md-nav__link">
        Client Lazy Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-code_repositories/" class="md-nav__link">
        Code Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-config/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-console/" class="md-nav__link">
        Console
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-container_registries/" class="md-nav__link">
        Container Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-data_validators/" class="md-nav__link">
        Data Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-entrypoints/" class="md-nav__link">
        Entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-enums/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_hub/" class="md-nav__link">
        Event Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_sources/" class="md-nav__link">
        Event Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-experiment_trackers/" class="md-nav__link">
        Experiment Trackers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-feature_stores/" class="md-nav__link">
        Feature Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-image_builders/" class="md-nav__link">
        Image Builders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-lineage_graph/" class="md-nav__link">
        Lineage Graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logger/" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-materializers/" class="md-nav__link">
        Materializers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_deployers/" class="md-nav__link">
        Model Deployers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_registries/" class="md-nav__link">
        Model Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-new/" class="md-nav__link">
        New
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-orchestrators/" class="md-nav__link">
        Orchestrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-post_execution/" class="md-nav__link">
        Post Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-secret/" class="md-nav__link">
        Secret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-service_connectors/" class="md-nav__link">
        Service Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-stack/" class="md-nav__link">
        Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-step_operators/" class="md-nav__link">
        Step Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-steps/" class="md-nav__link">
        Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_server/" class="md-nav__link">
        Zen Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_stores/" class="md-nav__link">
        Zen Stores
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Integration code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Integration code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-argilla/" class="md-nav__link">
        Argilla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bentoml/" class="md-nav__link">
        Bentoml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bitbucket/" class="md-nav__link">
        Bitbucket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-comet/" class="md-nav__link">
        Comet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-deepchecks/" class="md-nav__link">
        Deepchecks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-discord/" class="md-nav__link">
        Discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-evidently/" class="md-nav__link">
        Evidently
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-facets/" class="md-nav__link">
        Facets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gcp/" class="md-nav__link">
        Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gitlab/" class="md-nav__link">
        Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-great_expectations/" class="md-nav__link">
        Great Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-huggingface/" class="md-nav__link">
        Huggingface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-hyperai/" class="md-nav__link">
        Hyperai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-integration/" class="md-nav__link">
        Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kaniko/" class="md-nav__link">
        Kaniko
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Kubeflow
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Kubeflow
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow" class="md-nav__link">
    kubeflow
  </a>
  
    <nav class="md-nav" aria-label="kubeflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.KubeflowIntegration" class="md-nav__link">
    KubeflowIntegration
  </a>
  
    <nav class="md-nav" aria-label="KubeflowIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.KubeflowIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor" class="md-nav__link">
    kubeflow_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="kubeflow_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig" class="md-nav__link">
    KubeflowOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="KubeflowOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_local" class="md-nav__link">
    is_local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_synchronous" class="md-nav__link">
    is_synchronous
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor" class="md-nav__link">
    KubeflowOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="KubeflowOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorSettings" class="md-nav__link">
    KubeflowOrchestratorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator" class="md-nav__link">
    kubeflow_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="kubeflow_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeClientKFPClient" class="md-nav__link">
    KubeClientKFPClient
  </a>
  
    <nav class="md-nav" aria-label="KubeClientKFPClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeClientKFPClient.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator" class="md-nav__link">
    KubeflowOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="KubeflowOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.pipeline_directory" class="md-nav__link">
    pipeline_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.root_directory" class="md-nav__link">
    root_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_kubernetes_contexts" class="md-nav__link">
    get_kubernetes_contexts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_pipeline_run_metadata" class="md-nav__link">
    get_pipeline_run_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.prepare_or_run_pipeline--how-it-works" class="md-nav__link">
    How it works:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils" class="md-nav__link">
    local_deployment_utils
  </a>
  
    <nav class="md-nav" aria-label="local_deployment_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.add_hostpath_to_kubeflow_pipelines" class="md-nav__link">
    add_hostpath_to_kubeflow_pipelines()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.check_prerequisites" class="md-nav__link">
    check_prerequisites()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.create_k3d_cluster" class="md-nav__link">
    create_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.delete_k3d_cluster" class="md-nav__link">
    delete_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.deploy_kubeflow_pipelines" class="md-nav__link">
    deploy_kubeflow_pipelines()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.k3d_cluster_exists" class="md-nav__link">
    k3d_cluster_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.k3d_cluster_running" class="md-nav__link">
    k3d_cluster_running()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.kubeflow_pipelines_ready" class="md-nav__link">
    kubeflow_pipelines_ready()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.start_k3d_cluster" class="md-nav__link">
    start_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.start_kfp_ui_daemon" class="md-nav__link">
    start_kfp_ui_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.stop_k3d_cluster" class="md-nav__link">
    stop_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.stop_kfp_ui_daemon" class="md-nav__link">
    stop_kfp_ui_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.wait_until_kubeflow_pipelines_ready" class="md-nav__link">
    wait_until_kubeflow_pipelines_ready()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.write_local_registry_yaml" class="md-nav__link">
    write_local_registry_yaml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.utils.apply_pod_settings" class="md-nav__link">
    apply_pod_settings()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-label_studio/" class="md-nav__link">
        Label Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-langchain/" class="md-nav__link">
        Langchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-llama_index/" class="md-nav__link">
        Llama Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-mlflow/" class="md-nav__link">
        Mlflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neptune/" class="md-nav__link">
        Neptune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neural_prophet/" class="md-nav__link">
        Neural Prophet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-openai/" class="md-nav__link">
        Openai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pigeon/" class="md-nav__link">
        Pigeon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pillow/" class="md-nav__link">
        Pillow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-polars/" class="md-nav__link">
        Polars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-prodigy/" class="md-nav__link">
        Prodigy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pycaret/" class="md-nav__link">
        Pycaret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch_lightning/" class="md-nav__link">
        Pytorch Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-scipy/" class="md-nav__link">
        Scipy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-seldon/" class="md-nav__link">
        Seldon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-sklearn/" class="md-nav__link">
        Sklearn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot/" class="md-nav__link">
        Skypilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_aws/" class="md-nav__link">
        Skypilot Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_azure/" class="md-nav__link">
        Skypilot Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_gcp/" class="md-nav__link">
        Skypilot Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_lambda/" class="md-nav__link">
        Skypilot Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tekton/" class="md-nav__link">
        Tekton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorboard/" class="md-nav__link">
        Tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-wandb/" class="md-nav__link">
        Wandb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-whylogs/" class="md-nav__link">
        Whylogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-xgboost/" class="md-nav__link">
        Xgboost
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow" class="md-nav__link">
    kubeflow
  </a>
  
    <nav class="md-nav" aria-label="kubeflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.KubeflowIntegration" class="md-nav__link">
    KubeflowIntegration
  </a>
  
    <nav class="md-nav" aria-label="KubeflowIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.KubeflowIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor" class="md-nav__link">
    kubeflow_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="kubeflow_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig" class="md-nav__link">
    KubeflowOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="KubeflowOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_local" class="md-nav__link">
    is_local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_synchronous" class="md-nav__link">
    is_synchronous
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor" class="md-nav__link">
    KubeflowOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="KubeflowOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorSettings" class="md-nav__link">
    KubeflowOrchestratorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator" class="md-nav__link">
    kubeflow_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="kubeflow_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeClientKFPClient" class="md-nav__link">
    KubeClientKFPClient
  </a>
  
    <nav class="md-nav" aria-label="KubeClientKFPClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeClientKFPClient.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator" class="md-nav__link">
    KubeflowOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="KubeflowOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.pipeline_directory" class="md-nav__link">
    pipeline_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.root_directory" class="md-nav__link">
    root_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_kubernetes_contexts" class="md-nav__link">
    get_kubernetes_contexts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_pipeline_run_metadata" class="md-nav__link">
    get_pipeline_run_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.prepare_or_run_pipeline--how-it-works" class="md-nav__link">
    How it works:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils" class="md-nav__link">
    local_deployment_utils
  </a>
  
    <nav class="md-nav" aria-label="local_deployment_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.add_hostpath_to_kubeflow_pipelines" class="md-nav__link">
    add_hostpath_to_kubeflow_pipelines()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.check_prerequisites" class="md-nav__link">
    check_prerequisites()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.create_k3d_cluster" class="md-nav__link">
    create_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.delete_k3d_cluster" class="md-nav__link">
    delete_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.deploy_kubeflow_pipelines" class="md-nav__link">
    deploy_kubeflow_pipelines()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.k3d_cluster_exists" class="md-nav__link">
    k3d_cluster_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.k3d_cluster_running" class="md-nav__link">
    k3d_cluster_running()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.kubeflow_pipelines_ready" class="md-nav__link">
    kubeflow_pipelines_ready()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.start_k3d_cluster" class="md-nav__link">
    start_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.start_kfp_ui_daemon" class="md-nav__link">
    start_kfp_ui_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.stop_k3d_cluster" class="md-nav__link">
    stop_k3d_cluster()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.stop_kfp_ui_daemon" class="md-nav__link">
    stop_kfp_ui_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.wait_until_kubeflow_pipelines_ready" class="md-nav__link">
    wait_until_kubeflow_pipelines_ready()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.orchestrators.local_deployment_utils.write_local_registry_yaml" class="md-nav__link">
    write_local_registry_yaml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubeflow.utils.apply_pod_settings" class="md-nav__link">
    apply_pod_settings()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/zenml-io/zenml/docs/integration_code_docs/integrations-kubeflow.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="kubeflow">Kubeflow</h1>


  <div class="doc doc-object doc-module">



<h2 id="zenml.integrations.kubeflow" class="doc doc-heading">
        <code>zenml.integrations.kubeflow</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents first">

      <p>Initialization of the Kubeflow integration for ZenML.</p>
<p>The Kubeflow integration sub-module powers an alternative to the local
orchestrator. You can enable it by registering the Kubeflow orchestrator with
the CLI tool.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="zenml.integrations.kubeflow.KubeflowIntegration" class="doc doc-heading">
        <code>
KubeflowIntegration            (<a class="autorefs autorefs-internal" title="zenml.integrations.integration.Integration" href="../integrations-integration/#zenml.integrations.integration.Integration">Integration</a>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>Definition of Kubeflow Integration for ZenML.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubeflowIntegration</span><span class="p">(</span><span class="n">Integration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Definition of Kubeflow Integration for ZenML.&quot;&quot;&quot;</span>

    <span class="n">NAME</span> <span class="o">=</span> <span class="n">KUBEFLOW</span>
    <span class="n">REQUIREMENTS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kfp==1.8.22&quot;</span><span class="p">]</span>  <span class="c1"># Only 1.x version that supports pyyaml 6</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the Kubeflow integration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of stack component flavors for this integration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.kubeflow.flavors</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">KubeflowOrchestratorFlavor</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">KubeflowOrchestratorFlavor</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h4 id="zenml.integrations.kubeflow.KubeflowIntegration.flavors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">flavors</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Declare the stack component flavors for the Kubeflow integration.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[Type[zenml.stack.flavor.Flavor]]</code></td>
      <td><p>List of stack component flavors for this integration.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the Kubeflow integration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of stack component flavors for this integration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.integrations.kubeflow.flavors</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">KubeflowOrchestratorFlavor</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">KubeflowOrchestratorFlavor</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubeflow.flavors" class="doc doc-heading">
        <code>flavors</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Kubeflow integration flavors.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor" class="doc doc-heading">
        <code>kubeflow_orchestrator_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>Kubeflow orchestrator flavor.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig" class="doc doc-heading">
        <code>
KubeflowOrchestratorConfig            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig">BaseOrchestratorConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorSettings" href="#zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorSettings">KubeflowOrchestratorSettings</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Configuration for the Kubeflow orchestrator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kubeflow_hostname</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The hostname to use to talk to the Kubeflow Pipelines
API. If not set, the hostname will be derived from the Kubernetes
API proxy. Mandatory when connecting to a multi-tenant Kubeflow
Pipelines deployment.</p></td>
      </tr>
      <tr>
        <td><code>kubeflow_namespace</code></td>
        <td><code>str</code></td>
        <td><p>The Kubernetes namespace in which Kubeflow
Pipelines is deployed. Defaults to <code>kubeflow</code>.</p></td>
      </tr>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of a kubernetes context to run
pipelines in. Not applicable when connecting to a multi-tenant
Kubeflow Pipelines deployment (i.e. when <code>kubeflow_hostname</code> is
set) or if the stack component is linked to a Kubernetes service
connector.</p></td>
      </tr>
      <tr>
        <td><code>local</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the orchestrator will assume it is connected to a
local kubernetes cluster and will perform additional validations and
operations to allow using the orchestrator in combination with other
local stack components that store data in the local filesystem
(i.e. it will mount the local stores directory into the pipeline
containers).</p></td>
      </tr>
      <tr>
        <td><code>skip_local_validations</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the local validations will be
skipped.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/flavors/kubeflow_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubeflowOrchestratorConfig</span><span class="p">(</span>  <span class="c1"># type: ignore[misc] # https://github.com/pydantic/pydantic/issues/4173</span>
    <span class="n">BaseOrchestratorConfig</span><span class="p">,</span> <span class="n">KubeflowOrchestratorSettings</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for the Kubeflow orchestrator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        kubeflow_hostname: The hostname to use to talk to the Kubeflow Pipelines</span>
<span class="sd">            API. If not set, the hostname will be derived from the Kubernetes</span>
<span class="sd">            API proxy. Mandatory when connecting to a multi-tenant Kubeflow</span>
<span class="sd">            Pipelines deployment.</span>
<span class="sd">        kubeflow_namespace: The Kubernetes namespace in which Kubeflow</span>
<span class="sd">            Pipelines is deployed. Defaults to `kubeflow`.</span>
<span class="sd">        kubernetes_context: Name of a kubernetes context to run</span>
<span class="sd">            pipelines in. Not applicable when connecting to a multi-tenant</span>
<span class="sd">            Kubeflow Pipelines deployment (i.e. when `kubeflow_hostname` is</span>
<span class="sd">            set) or if the stack component is linked to a Kubernetes service</span>
<span class="sd">            connector.</span>
<span class="sd">        local: If `True`, the orchestrator will assume it is connected to a</span>
<span class="sd">            local kubernetes cluster and will perform additional validations and</span>
<span class="sd">            operations to allow using the orchestrator in combination with other</span>
<span class="sd">            local stack components that store data in the local filesystem</span>
<span class="sd">            (i.e. it will mount the local stores directory into the pipeline</span>
<span class="sd">            containers).</span>
<span class="sd">        skip_local_validations: If `True`, the local validations will be</span>
<span class="sd">            skipped.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">kubeflow_hostname</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">kubeflow_namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;kubeflow&quot;</span>
    <span class="n">kubernetes_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># TODO: Potential setting</span>
    <span class="n">local</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">skip_local_validations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_deprecated_attrs</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pydantic root_validator for deprecated attributes.</span>

<span class="sd">        This root validator is used for backwards compatibility purposes. E.g.</span>
<span class="sd">        it handles attributes that are no longer available or that have become</span>
<span class="sd">        mandatory in the meantime.</span>

<span class="sd">        Args:</span>
<span class="sd">            values: Values passed to the object constructor</span>

<span class="sd">        Returns:</span>
<span class="sd">            Values passed to the object constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">provisioning_attrs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;skip_cluster_provisioning&quot;</span><span class="p">,</span>
            <span class="s2">&quot;skip_ui_daemon_provisioning&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kubeflow_pipelines_ui_port&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="c1"># remove deprecated attributes from values dict</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">provisioning_attrs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">values</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running remotely.</span>

<span class="sd">        This designation is used to determine if the stack component can be</span>
<span class="sd">        used with a local ZenML database or if it requires a remote ZenML</span>
<span class="sd">        server.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a remote component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">local</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_local</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running locally.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a local component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">local</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_synchronous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether the orchestrator runs synchronous or not.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Whether the orchestrator runs synchronous or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_local" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_local</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running locally.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a local component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_remote" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_remote</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running remotely.</p>
<p>This designation is used to determine if the stack component can be
used with a local ZenML database or if it requires a remote ZenML
server.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a remote component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig.is_synchronous" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_synchronous</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Whether the orchestrator runs synchronous or not.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the orchestrator runs synchronous or not.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor" class="doc doc-heading">
        <code>
KubeflowOrchestratorFlavor            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor">BaseOrchestratorFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubeflow orchestrator flavor.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/flavors/kubeflow_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubeflowOrchestratorFlavor</span><span class="p">(</span><span class="n">BaseOrchestratorFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubeflow orchestrator flavor.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KUBEFLOW_ORCHESTRATOR_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">service_connector_requirements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorRequirements</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Service connector resource requirements for service connectors.</span>

<span class="sd">        Specifies resource requirements that are used to filter the available</span>
<span class="sd">        service connector types that are compatible with this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Requirements for compatible service connectors, if a service</span>
<span class="sd">            connector is required for this flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceConnectorRequirements</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/orchestrator/kubeflow.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">KubeflowOrchestratorConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns `KubeflowOrchestratorConfig` config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">                The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KubeflowOrchestratorConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KubeflowOrchestrator&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class for this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.kubeflow.orchestrators</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">KubeflowOrchestrator</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">KubeflowOrchestrator</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">kubeflow</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">kubeflow_orchestrator_flavor</span><span class="o">.</span><span class="n">KubeflowOrchestratorConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns <code>KubeflowOrchestratorConfig</code> config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">KubeflowOrchestrator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class for this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[KubeflowOrchestrator]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorFlavor.service_connector_requirements" class="doc doc-heading">
<code class="highlight language-python"><span class="n">service_connector_requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">v2</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">service_connector_type</span><span class="o">.</span><span class="n">ServiceConnectorRequirements</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Service connector resource requirements for service connectors.</p>
<p>Specifies resource requirements that are used to filter the available
service connector types that are compatible with this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.models.v2.misc.service_connector_type.ServiceConnectorRequirements]</code></td>
      <td><p>Requirements for compatible service connectors, if a service
connector is required for this flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorSettings" class="doc doc-heading">
        <code>
KubeflowOrchestratorSettings            (<a class="autorefs autorefs-internal" title="zenml.config.base_settings.BaseSettings" href="../../core_code_docs/core-config/#zenml.config.base_settings.BaseSettings">BaseSettings</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Settings for the Kubeflow orchestrator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>synchronous</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the client running a pipeline using this
orchestrator waits until all steps finish running. If <code>False</code>,
the client returns immediately and the pipeline is executed
asynchronously. Defaults to <code>True</code>. This setting only
has an effect when specified on the pipeline and will be ignored if
specified on steps.</p></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>How many seconds to wait for synchronous runs.</p></td>
      </tr>
      <tr>
        <td><code>client_args</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Arguments to pass when initializing the KFP client.</p></td>
      </tr>
      <tr>
        <td><code>client_username</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Username to generate a session cookie for the kubeflow client. Both <code>client_username</code></p></td>
      </tr>
      <tr>
        <td><code>client_password</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Password to generate a session cookie for the kubeflow client. Both <code>client_username</code></p></td>
      </tr>
      <tr>
        <td><code>user_namespace</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The user namespace to use when creating experiments
and runs.</p></td>
      </tr>
      <tr>
        <td><code>node_selectors</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Deprecated: Node selectors to apply to KFP pods.</p></td>
      </tr>
      <tr>
        <td><code>node_affinity</code></td>
        <td><code>Dict[str, List[str]]</code></td>
        <td><p>Deprecated: Node affinities to apply to KFP pods.</p></td>
      </tr>
      <tr>
        <td><code>pod_settings</code></td>
        <td><code>Optional[zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings]</code></td>
        <td><p>Pod settings to apply.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/flavors/kubeflow_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubeflowOrchestratorSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Settings for the Kubeflow orchestrator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        synchronous: If `True`, the client running a pipeline using this</span>
<span class="sd">            orchestrator waits until all steps finish running. If `False`,</span>
<span class="sd">            the client returns immediately and the pipeline is executed</span>
<span class="sd">            asynchronously. Defaults to `True`. This setting only</span>
<span class="sd">            has an effect when specified on the pipeline and will be ignored if</span>
<span class="sd">            specified on steps.</span>
<span class="sd">        timeout: How many seconds to wait for synchronous runs.</span>
<span class="sd">        client_args: Arguments to pass when initializing the KFP client.</span>
<span class="sd">        client_username: Username to generate a session cookie for the kubeflow client. Both `client_username`</span>
<span class="sd">        and `client_password` need to be set together.</span>
<span class="sd">        client_password: Password to generate a session cookie for the kubeflow client. Both `client_username`</span>
<span class="sd">        and `client_password` need to be set together.</span>
<span class="sd">        user_namespace: The user namespace to use when creating experiments</span>
<span class="sd">            and runs.</span>
<span class="sd">        node_selectors: Deprecated: Node selectors to apply to KFP pods.</span>
<span class="sd">        node_affinity: Deprecated: Node affinities to apply to KFP pods.</span>
<span class="sd">        pod_settings: Pod settings to apply.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">synchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1200</span>

    <span class="n">client_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">client_username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">()</span>
    <span class="n">client_password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">()</span>
    <span class="n">user_namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">node_selectors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">node_affinity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">pod_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KubernetesPodSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@root_validator</span>
    <span class="k">def</span> <span class="nf">_validate_and_migrate_pod_settings</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates settings and migrates pod settings from older version.</span>

<span class="sd">        Args:</span>
<span class="sd">            values: Dict representing user-specified runtime settings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Validated settings.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: If old and new settings are used together.</span>
<span class="sd">            ValueError: If username and password are not specified together.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">has_pod_settings</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pod_settings&quot;</span><span class="p">))</span>

        <span class="n">node_selectors</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;node_selectors&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="p">)</span>
        <span class="n">node_affinity</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;node_affinity&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="p">)</span>

        <span class="n">has_old_settings</span> <span class="o">=</span> <span class="nb">any</span><span class="p">([</span><span class="n">node_selectors</span><span class="p">,</span> <span class="n">node_affinity</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">has_old_settings</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;The attributes `node_selectors` and `node_affinity` of the &quot;</span>
                <span class="s2">&quot;Kubeflow settings will be deprecated soon. Use the &quot;</span>
                <span class="s2">&quot;attribute `pod_settings` instead.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">has_pod_settings</span> <span class="ow">and</span> <span class="n">has_old_settings</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span>
                <span class="s2">&quot;Got Kubeflow pod settings using both the deprecated &quot;</span>
                <span class="s2">&quot;attributes `node_selectors` and `node_affinity` as well as &quot;</span>
                <span class="s2">&quot;the new attribute `pod_settings`. Please specify Kubeflow &quot;</span>
                <span class="s2">&quot;pod settings only using the new `pod_settings` attribute.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">has_old_settings</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kubernetes</span> <span class="kn">import</span> <span class="n">client</span> <span class="k">as</span> <span class="n">k8s_client</span>

            <span class="n">affinity</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">node_affinity</span><span class="p">:</span>
                <span class="n">match_expressions</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1NodeSelectorRequirement</span><span class="p">(</span>
                        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                        <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;In&quot;</span><span class="p">,</span>
                        <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">node_affinity</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="p">]</span>

                <span class="n">affinity</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Affinity</span><span class="p">(</span>
                    <span class="n">node_affinity</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1NodeAffinity</span><span class="p">(</span>
                        <span class="n">required_during_scheduling_ignored_during_execution</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1NodeSelector</span><span class="p">(</span>
                            <span class="n">node_selector_terms</span><span class="o">=</span><span class="p">[</span>
                                <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1NodeSelectorTerm</span><span class="p">(</span>
                                    <span class="n">match_expressions</span><span class="o">=</span><span class="n">match_expressions</span>
                                <span class="p">)</span>
                            <span class="p">]</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="n">pod_settings</span> <span class="o">=</span> <span class="n">KubernetesPodSettings</span><span class="p">(</span>
                <span class="n">node_selectors</span><span class="o">=</span><span class="n">node_selectors</span><span class="p">,</span> <span class="n">affinity</span><span class="o">=</span><span class="n">affinity</span>
            <span class="p">)</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;pod_settings&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pod_settings</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;node_affinity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;node_selectors&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Validate username and password for auth cookie logic</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_username&quot;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_password&quot;</span><span class="p">)</span>
        <span class="n">client_creds_error</span> <span class="o">=</span> <span class="s2">&quot;`client_username` and `client_password` both need to be set together.&quot;</span>
        <span class="k">if</span> <span class="n">username</span> <span class="ow">and</span> <span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">client_creds_error</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password</span> <span class="ow">and</span> <span class="n">username</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">client_creds_error</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






















  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubeflow.orchestrators" class="doc doc-heading">
        <code>orchestrators</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialization of the Kubeflow ZenML orchestrator.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator" class="doc doc-heading">
        <code>kubeflow_orchestrator</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the Kubeflow orchestrator.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeClientKFPClient" class="doc doc-heading">
        <code>
KubeClientKFPClient            (<span title="kfp.Client">Client</span>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>KFP client initialized from a Kubernetes client.</p>
<p>This is a workaround for the fact that the native KFP client does not
support initialization from an existing Kubernetes client.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubeClientKFPClient</span><span class="p">(</span><span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">):</span>  <span class="c1"># type: ignore[misc]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;KFP client initialized from a Kubernetes client.</span>

<span class="sd">    This is a workaround for the fact that the native KFP client does not</span>
<span class="sd">    support initialization from an existing Kubernetes client.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes the KFP client from a Kubernetes client.</span>

<span class="sd">        Args:</span>
<span class="sd">            client: pre-configured Kubernetes client.</span>
<span class="sd">            args: standard KFP client positional arguments.</span>
<span class="sd">            kwargs: standard KFP client keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the KFP configuration.</span>

<span class="sd">        Initializes the KFP configuration from the Kubernetes client.</span>

<span class="sd">        Args:</span>
<span class="sd">            args: standard KFP client positional arguments.</span>
<span class="sd">            kwargs: standard KFP client keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The KFP configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">kfp_server_api.configuration</span> <span class="kn">import</span> <span class="n">Configuration</span>

        <span class="n">kube_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span><span class="o">.</span><span class="n">configuration</span>

        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">kube_config</span><span class="o">.</span><span class="n">host</span>
            <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">KUBE_PROXY_PATH</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;namespace&quot;</span><span class="p">,</span> <span class="s2">&quot;kubeflow&quot;</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
            <span class="n">api_key_prefix</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">api_key_prefix</span><span class="p">,</span>
            <span class="n">username</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
            <span class="n">discard_unknown_keys</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">discard_unknown_keys</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Extra attributes not present in the Configuration constructor</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ssl_ca_cert&quot;</span><span class="p">,</span> <span class="s2">&quot;cert_file&quot;</span><span class="p">,</span> <span class="s2">&quot;key_file&quot;</span><span class="p">,</span> <span class="s2">&quot;verify_ssl&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kube_config</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">kube_config</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">config</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeClientKFPClient.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Initializes the KFP client from a Kubernetes client.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>client</code></td>
        <td><code>kubernetes.client.ApiClient</code></td>
        <td><p>pre-configured Kubernetes client.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td><code>Any</code></td>
        <td><p>standard KFP client positional arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>standard KFP client keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the KFP client from a Kubernetes client.</span>

<span class="sd">    Args:</span>
<span class="sd">        client: pre-configured Kubernetes client.</span>
<span class="sd">        args: standard KFP client positional arguments.</span>
<span class="sd">        kwargs: standard KFP client keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">client</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator" class="doc doc-heading">
        <code>
KubeflowOrchestrator            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.containerized_orchestrator.ContainerizedOrchestrator" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.containerized_orchestrator.ContainerizedOrchestrator">ContainerizedOrchestrator</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Orchestrator responsible for running pipelines using Kubeflow.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubeflowOrchestrator</span><span class="p">(</span><span class="n">ContainerizedOrchestrator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Orchestrator responsible for running pipelines using Kubeflow.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KubeflowOrchestratorConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the `KubeflowOrchestratorConfig` config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">KubeflowOrchestratorConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_kubernetes_contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of configured Kubernetes contexts and the active context.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple containing the list of configured Kubernetes contexts and</span>
<span class="sd">            the active context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">contexts</span><span class="p">,</span> <span class="n">active_context</span> <span class="o">=</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">list_kube_config_contexts</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">config_exception</span><span class="o">.</span><span class="n">ConfigException</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[],</span> <span class="kc">None</span>

        <span class="n">context_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contexts</span><span class="p">]</span>
        <span class="n">active_context_name</span> <span class="o">=</span> <span class="n">active_context</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">context_names</span><span class="p">,</span> <span class="n">active_context_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">KubeflowOrchestratorSettings</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Settings class for the Kubeflow orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The settings class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KubeflowOrchestratorSettings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StackValidator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates that the stack contains a container registry.</span>

<span class="sd">        Also check that requirements are met for local components.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A `StackValidator` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; Kubeflow orchestrator error: &quot;</span>

        <span class="k">def</span> <span class="nf">_validate_kube_context</span><span class="p">(</span>
            <span class="n">kubernetes_context</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
            <span class="n">contexts</span><span class="p">,</span> <span class="n">active_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_kubernetes_contexts</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">kubernetes_context</span> <span class="ow">and</span> <span class="n">kubernetes_context</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">contexts</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">could not find a Kubernetes context named &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">&#39; in the local Kubernetes &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;configuration. Please make sure that the Kubernetes &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;cluster is running and that the kubeconfig file is &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;configured correctly. To list all configured &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;contexts, run:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;  `kubectl config get-contexts`</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">kubernetes_context</span>
                <span class="ow">and</span> <span class="n">active_context</span>
                <span class="ow">and</span> <span class="n">kubernetes_context</span> <span class="o">!=</span> <span class="n">active_context</span>
            <span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubernetes context &#39;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">&#39; &quot;</span>  <span class="c1"># nosec</span>
                    <span class="sa">f</span><span class="s2">&quot;configured for the Kubeflow orchestrator is not the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;same as the active context in the local Kubernetes &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;configuration. If this is not deliberate, you should &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;update the orchestrator&#39;s `kubernetes_context` field by &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;running:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;  `zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;--kubernetes_context=</span><span class="si">{</span><span class="n">active_context</span><span class="si">}</span><span class="s2">`</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;To list all configured contexts, run:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;  `kubectl config get-contexts`</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;To set the active context to be the same as the one &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;configured in the Kubeflow orchestrator and silence &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;this warning, run:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;  `kubectl config use-context &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">`</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_validate_local_requirements</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
            <span class="n">container_registry</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

            <span class="c1"># should not happen, because the stack validation takes care of</span>
            <span class="c1"># this, but just in case</span>
            <span class="k">assert</span> <span class="n">container_registry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="n">kubernetes_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="n">kubernetes_context</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span>
                <span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubeflow orchestrator is incompletely &quot;</span>
                        <span class="s2">&quot;configured. For a multi-tenant Kubeflow deployment, &quot;</span>
                        <span class="s2">&quot;you must set the `kubeflow_hostname` attribute in the &quot;</span>
                        <span class="s2">&quot;orchestrator configuration. For a single-tenant &quot;</span>
                        <span class="s2">&quot;deployment, you must either set the &quot;</span>
                        <span class="s2">&quot;`kubernetes_context` attribute in the orchestrator &quot;</span>
                        <span class="s2">&quot;configuration to the name of the Kubernetes config &quot;</span>
                        <span class="s2">&quot;context pointing to the cluster where you would like &quot;</span>
                        <span class="s2">&quot;to run pipelines or link this stack component to a &quot;</span>
                        <span class="s2">&quot;Kubernetes cluster via a service connector (see the &quot;</span>
                        <span class="s2">&quot;&#39;zenml orchestrator connect&#39; CLI command).&quot;</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">kubernetes_context</span><span class="p">:</span>
                    <span class="n">valid</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">_validate_kube_context</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">err</span>

            <span class="n">silence_local_validations_msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;To silence this warning, set the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`skip_local_validations` attribute to True in the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;orchestrator configuration by running:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;  &#39;zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;--skip_local_validations=True&#39;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">skip_local_validations</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span>
            <span class="p">):</span>
                <span class="c1"># if the orchestrator is not running in a local k3d cluster,</span>
                <span class="c1"># we cannot have any other local components in our stack,</span>
                <span class="c1"># because we cannot mount the local path into the container.</span>
                <span class="c1"># This may result in problems when running the pipeline,</span>
                <span class="c1"># because the local components will not be available inside the</span>
                <span class="c1"># Kubeflow containers.</span>

                <span class="c1"># go through all stack components and identify those that</span>
                <span class="c1"># advertise a local path where they persist information that</span>
                <span class="c1"># they need to be available when running pipelines.</span>
                <span class="k">for</span> <span class="n">stack_comp</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="n">local_path</span> <span class="o">=</span> <span class="n">stack_comp</span><span class="o">.</span><span class="n">local_path</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">local_path</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubeflow orchestrator is configured to run &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;pipelines in a remote Kubernetes cluster but the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> is a &quot;</span>
                        <span class="s2">&quot;local stack component and will not be available in &quot;</span>
                        <span class="s2">&quot;the Kubeflow pipeline step.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="s2">&quot;Please ensure that you always use non-local &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;stack components with a remote Kubeflow &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;orchestrator, otherwise you may run into pipeline &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;execution problems. You should use a flavor of &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> other than &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2">&#39;.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="n">silence_local_validations_msg</span>
                    <span class="p">)</span>

                <span class="c1"># if the orchestrator is remote, the container registry must</span>
                <span class="c1"># also be remote.</span>
                <span class="k">if</span> <span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubeflow orchestrator is configured to run &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;pipelines in a remote Kubernetes cluster, but the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; container registry URI &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;points to a local container registry. Please ensure &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;that you always use non-local stack components with &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;a remote Kubeflow orchestrator, otherwise you will &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;run into problems. You should use a flavor of &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;container registry other than &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2">&#39;.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="n">silence_local_validations_msg</span>
                    <span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">StackValidator</span><span class="p">(</span>
            <span class="n">required_components</span><span class="o">=</span><span class="p">{</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">CONTAINER_REGISTRY</span><span class="p">,</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">IMAGE_BUILDER</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_validation_function</span><span class="o">=</span><span class="n">_validate_local_requirements</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">root_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Path to the root directory for all files concerning this orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path to the root directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">io_utils</span><span class="o">.</span><span class="n">get_global_config_directory</span><span class="p">(),</span>
            <span class="s2">&quot;kubeflow&quot;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns path to a directory in which the kubeflow pipeline files are stored.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path to the pipeline directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_directory</span><span class="p">,</span> <span class="s2">&quot;pipelines&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_configure_container_op</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">container_op</span><span class="p">:</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">KubeflowOrchestratorSettings</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Makes changes in place to the configuration of the container op.</span>

<span class="sd">        Configures persistent mounted volumes for each stack component that</span>
<span class="sd">        writes to a local path. Adds some labels to the container_op and applies</span>
<span class="sd">        some functions to ir.</span>

<span class="sd">        Args:</span>
<span class="sd">            container_op: The kubeflow container operation to configure.</span>
<span class="sd">            settings: Orchestrator settings for this step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">volumes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Volume</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">stack</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
            <span class="n">stack</span><span class="o">.</span><span class="n">check_local_paths</span><span class="p">()</span>

            <span class="n">local_stores_path</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">local_stores_path</span>

            <span class="n">host_path</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1HostPathVolumeSource</span><span class="p">(</span>
                <span class="n">path</span><span class="o">=</span><span class="n">local_stores_path</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;Directory&quot;</span>
            <span class="p">)</span>

            <span class="n">volumes</span><span class="p">[</span><span class="n">local_stores_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Volume</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;local-stores&quot;</span><span class="p">,</span>
                <span class="n">host_path</span><span class="o">=</span><span class="n">host_path</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Adding host path volume for the local ZenML stores (path: </span><span class="si">%s</span><span class="s2">) &quot;</span>
                <span class="s2">&quot;in kubeflow pipelines container.&quot;</span><span class="p">,</span>
                <span class="n">local_stores_path</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
                <span class="c1"># File permissions are not checked on Windows. This if clause</span>
                <span class="c1"># prevents mypy from complaining about unused &#39;type: ignore&#39;</span>
                <span class="c1"># statements</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Run KFP containers in the context of the local UID/GID</span>
                <span class="c1"># to ensure that the local stores can be shared</span>
                <span class="c1"># with the local pipeline runs.</span>
                <span class="n">container_op</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">security_context</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1SecurityContext</span><span class="p">(</span>
                        <span class="n">run_as_user</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getuid</span><span class="p">(),</span>
                        <span class="n">run_as_group</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getgid</span><span class="p">(),</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Setting security context UID and GID to local user/group &quot;</span>
                    <span class="s2">&quot;in kubeflow pipelines container.&quot;</span>
                <span class="p">)</span>

            <span class="n">container_op</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_env_variable</span><span class="p">(</span>
                <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">ENV_ZENML_LOCAL_STORES_PATH</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">local_stores_path</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="n">container_op</span><span class="o">.</span><span class="n">add_pvolumes</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span>

        <span class="c1"># Add some pod labels to the container_op</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">KFP_POD_LABELS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">container_op</span><span class="o">.</span><span class="n">add_pod_label</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">pod_settings</span><span class="p">:</span>
            <span class="n">apply_pod_settings</span><span class="p">(</span>
                <span class="n">container_op</span><span class="o">=</span><span class="n">container_op</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">pod_settings</span>
            <span class="p">)</span>

        <span class="c1"># Disable caching in KFP v1 only works like this, replace by the second</span>
        <span class="c1"># line in the future</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">execution_options</span><span class="o">.</span><span class="n">caching_strategy</span><span class="o">.</span><span class="n">max_cache_staleness</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;P0D&quot;</span>
        <span class="p">)</span>
        <span class="c1"># container_op.set_caching_options(enable_caching=False)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_configure_container_resources</span><span class="p">(</span>
        <span class="n">container_op</span><span class="p">:</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">,</span>
        <span class="n">resource_settings</span><span class="p">:</span> <span class="s2">&quot;ResourceSettings&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds resource requirements to the container.</span>

<span class="sd">        Args:</span>
<span class="sd">            container_op: The kubeflow container operation to configure.</span>
<span class="sd">            resource_settings: The resource settings to use for this</span>
<span class="sd">                container.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">resource_settings</span><span class="o">.</span><span class="n">cpu_count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">container_op</span> <span class="o">=</span> <span class="n">container_op</span><span class="o">.</span><span class="n">set_cpu_limit</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">resource_settings</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_settings</span><span class="o">.</span><span class="n">gpu_count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">container_op</span> <span class="o">=</span> <span class="n">container_op</span><span class="o">.</span><span class="n">set_gpu_limit</span><span class="p">(</span>
                <span class="n">resource_settings</span><span class="o">.</span><span class="n">gpu_count</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_settings</span><span class="o">.</span><span class="n">memory</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">memory_limit</span> <span class="o">=</span> <span class="n">resource_settings</span><span class="o">.</span><span class="n">memory</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">container_op</span> <span class="o">=</span> <span class="n">container_op</span><span class="o">.</span><span class="n">set_memory_limit</span><span class="p">(</span><span class="n">memory_limit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
        <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a kfp yaml file.</span>

<span class="sd">        This functions as an intermediary representation of the pipeline which</span>
<span class="sd">        is then deployed to the kubeflow pipelines instance.</span>

<span class="sd">        How it works:</span>
<span class="sd">        -------------</span>
<span class="sd">        Before this method is called the `prepare_pipeline_deployment()`</span>
<span class="sd">        method builds a docker image that contains the code for the</span>
<span class="sd">        pipeline, all steps the context around these files.</span>

<span class="sd">        Based on this docker image a callable is created which builds</span>
<span class="sd">        container_ops for each step (`_construct_kfp_pipeline`).</span>
<span class="sd">        To do this the entrypoint of the docker image is configured to</span>
<span class="sd">        run the correct step within the docker image. The dependencies</span>
<span class="sd">        between these container_ops are then also configured onto each</span>
<span class="sd">        container_op by pointing at the downstream steps.</span>

<span class="sd">        This callable is then compiled into a kfp yaml file that is used as</span>
<span class="sd">        the intermediary representation of the kubeflow pipeline.</span>

<span class="sd">        This file, together with some metadata, runtime configurations is</span>
<span class="sd">        then uploaded into the kubeflow pipelines cluster for execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            deployment: The pipeline deployment to prepare or run.</span>
<span class="sd">            stack: The stack the pipeline will run on.</span>
<span class="sd">            environment: Environment variables to set in the orchestration</span>
<span class="sd">                environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If trying to run a pipeline in a notebook</span>
<span class="sd">                environment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># First check whether the code running in a notebook</span>
        <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;The Kubeflow orchestrator cannot run pipelines in a notebook &quot;</span>
                <span class="s2">&quot;environment. The reason is that it is non-trivial to create &quot;</span>
                <span class="s2">&quot;a Docker image of a notebook. Please consider refactoring &quot;</span>
                <span class="s2">&quot;your notebook cells into separate scripts in a Python module &quot;</span>
                <span class="s2">&quot;and run the code outside of a notebook when using this &quot;</span>
                <span class="s2">&quot;orchestrator.&quot;</span>
            <span class="p">)</span>

        <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

        <span class="c1"># Create a callable for future compilation into a dsl.Pipeline.</span>
        <span class="k">def</span> <span class="nf">_construct_kfp_pipeline</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Create a container_op for each step.</span>

<span class="sd">            This should contain the name of the docker image and configures the</span>
<span class="sd">            entrypoint of the docker image to run the step.</span>

<span class="sd">            Additionally, this gives each container_op information about its</span>
<span class="sd">            direct downstream steps.</span>

<span class="sd">            If this callable is passed to the `_create_and_write_workflow()`</span>
<span class="sd">            method of a KFPCompiler all dsl.ContainerOp instances will be</span>
<span class="sd">            automatically added to a singular dsl.Pipeline instance.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Dictionary of container_ops index by the associated step name</span>
            <span class="n">step_name_to_container_op</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span>
                    <span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span>
                <span class="p">)</span>

                <span class="c1"># The command will be needed to eventually call the python step</span>
                <span class="c1"># within the docker container</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">StepEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>

                <span class="c1"># The arguments are passed to configure the entrypoint of the</span>
                <span class="c1"># docker container when the step is called.</span>
                <span class="n">arguments</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">StepEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
                        <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span> <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">id</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="c1"># Create a container_op - the kubeflow equivalent of a step. It</span>
                <span class="c1"># contains the name of the step, the name of the docker image,</span>
                <span class="c1"># the command to use to run the step entrypoint</span>
                <span class="c1"># (e.g. `python -m zenml.entrypoints.step_entrypoint`)</span>
                <span class="c1"># and the arguments to be passed along with the command. Find</span>
                <span class="c1"># out more about how these arguments are parsed and used</span>
                <span class="c1"># in the base entrypoint `run()` method.</span>
                <span class="n">container_op</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                    <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                    <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
                    <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
                    <span class="n">KubeflowOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_configure_container_op</span><span class="p">(</span>
                    <span class="n">container_op</span><span class="o">=</span><span class="n">container_op</span><span class="p">,</span>
                    <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requires_resources_in_orchestration_environment</span><span class="p">(</span><span class="n">step</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_configure_container_resources</span><span class="p">(</span>
                        <span class="n">container_op</span><span class="o">=</span><span class="n">container_op</span><span class="p">,</span>
                        <span class="n">resource_settings</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">resource_settings</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">environment</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">container_op</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_env_variable</span><span class="p">(</span>
                        <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

                <span class="c1"># Find the upstream container ops of the current step and</span>
                <span class="c1"># configure the current container op to run after them</span>
                <span class="k">for</span> <span class="n">upstream_step_name</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span><span class="p">:</span>
                    <span class="n">upstream_container_op</span> <span class="o">=</span> <span class="n">step_name_to_container_op</span><span class="p">[</span>
                        <span class="n">upstream_step_name</span>
                    <span class="p">]</span>
                    <span class="n">container_op</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">upstream_container_op</span><span class="p">)</span>

                <span class="c1"># Update dictionary of container ops with the current one</span>
                <span class="n">step_name_to_container_op</span><span class="p">[</span><span class="n">step_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">container_op</span>

        <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
        <span class="p">)</span>

        <span class="c1"># Get a filepath to use to save the finished yaml to</span>
        <span class="n">fileio</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">)</span>
        <span class="n">pipeline_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orchestrator_run_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
        <span class="p">)</span>

        <span class="c1"># write the argo pipeline yaml</span>
        <span class="n">KFPCompiler</span><span class="p">()</span><span class="o">.</span><span class="n">_create_and_write_workflow</span><span class="p">(</span>
            <span class="n">pipeline_func</span><span class="o">=</span><span class="n">_construct_kfp_pipeline</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">package_path</span><span class="o">=</span><span class="n">pipeline_file_path</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Writing Kubeflow workflow definition to `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">pipeline_file_path</span>
        <span class="p">)</span>

        <span class="c1"># using the kfp client uploads the pipeline to kubeflow pipelines and</span>
        <span class="c1"># runs it there</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upload_and_run_pipeline</span><span class="p">(</span>
            <span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span>
            <span class="n">pipeline_file_path</span><span class="o">=</span><span class="n">pipeline_file_path</span><span class="p">,</span>
            <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_upload_and_run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
        <span class="n">pipeline_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">run_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tries to upload and run a KFP pipeline.</span>

<span class="sd">        Args:</span>
<span class="sd">            deployment: The pipeline deployment.</span>
<span class="sd">            pipeline_file_path: Path to the pipeline definition file.</span>
<span class="sd">            run_name: The Kubeflow run name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If Kubeflow API returns an error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">KubeflowOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">user_namespace</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">user_namespace</span>

        <span class="n">kubernetes_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kubernetes_context</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Running in kubernetes context &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                    <span class="n">kubernetes_context</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Running on Kubeflow deployment &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Running with Kubernetes credentials from connector &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">),</span>
                <span class="p">)</span>

            <span class="c1"># upload the pipeline to Kubeflow and start it</span>

            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_kfp_client</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">experiment</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_experiment</span><span class="p">(</span>
                        <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">user_namespace</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;A recurring run has already been created with this &quot;</span>
                        <span class="s2">&quot;pipeline. Creating new recurring run now..&quot;</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ApiException</span><span class="p">):</span>
                    <span class="n">experiment</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">(</span>
                        <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">user_namespace</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;Creating a new recurring run for pipeline &#39;</span><span class="si">%s</span><span class="s2">&#39;.. &quot;</span><span class="p">,</span>
                        <span class="n">pipeline_name</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;You can see all recurring runs under the &#39;</span><span class="si">%s</span><span class="s2">&#39; experiment.&quot;</span><span class="p">,</span>
                    <span class="n">pipeline_name</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">interval_seconds</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">interval_second</span><span class="o">.</span><span class="n">seconds</span>
                    <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">interval_second</span>
                    <span class="k">else</span> <span class="kc">None</span>
                <span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_recurring_run</span><span class="p">(</span>
                    <span class="n">experiment_id</span><span class="o">=</span><span class="n">experiment</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">job_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
                    <span class="n">pipeline_package_path</span><span class="o">=</span><span class="n">pipeline_file_path</span><span class="p">,</span>
                    <span class="n">enable_caching</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">cron_expression</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span><span class="p">,</span>
                    <span class="n">start_time</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">utc_start_time</span><span class="p">,</span>
                    <span class="n">end_time</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">utc_end_time</span><span class="p">,</span>
                    <span class="n">interval_second</span><span class="o">=</span><span class="n">interval_seconds</span><span class="p">,</span>
                    <span class="n">no_catchup</span><span class="o">=</span><span class="ow">not</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">catchup</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Started recurring run with ID &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;No schedule detected. Creating a one-off pipeline run..&quot;</span>
                <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_run_from_pipeline_package</span><span class="p">(</span>
                        <span class="n">pipeline_file_path</span><span class="p">,</span>
                        <span class="n">arguments</span><span class="o">=</span><span class="p">{},</span>
                        <span class="n">run_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
                        <span class="n">enable_caching</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">namespace</span><span class="o">=</span><span class="n">user_namespace</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">ApiException</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed to create </span><span class="si">{</span><span class="n">run_name</span><span class="si">}</span><span class="s2"> on kubeflow! &quot;</span>
                        <span class="s2">&quot;Please check stack component settings and &quot;</span>
                        <span class="s2">&quot;configuration!&quot;</span>
                    <span class="p">)</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Started one-off pipeline run with ID &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">run_id</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">synchronous</span><span class="p">:</span>
                    <span class="n">client</span><span class="o">.</span><span class="n">wait_for_run_completion</span><span class="p">(</span>
                        <span class="n">run_id</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">timeout</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kubernetes_context</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Please make sure your kubernetes config is present and &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;the &#39;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">&#39; kubernetes context is &quot;</span>
                    <span class="s2">&quot;configured correctly.&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Please check that the &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="si">}</span><span class="s2">&#39; connector &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;linked to this component is configured correctly with &quot;</span>
                    <span class="s2">&quot;valid credentials.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to upload Kubeflow pipeline: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the active orchestrator run id.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the environment variable specifying the run id</span>
<span class="sd">                is not set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The orchestrator run id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_KFP_RUN_ID</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_KFP_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_kfp_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">KubeflowOrchestratorSettings</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a KFP client instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings: Settings which can be used to</span>
<span class="sd">                configure the client instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A KFP client instance.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the linked Kubernetes connector behaves</span>
<span class="sd">                unexpectedly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">connector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">()</span>
        <span class="n">client_args</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">client_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># The kube_context, host and namespace are stack component</span>
        <span class="c1"># configurations that refer to the Kubeflow deployment. We don&#39;t want</span>
        <span class="c1"># these overwritten on a run by run basis by user settings</span>
        <span class="n">client_args</span><span class="p">[</span><span class="s2">&quot;namespace&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_namespace</span>

        <span class="k">if</span> <span class="n">connector</span><span class="p">:</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Expected a k8s_client.ApiClient while trying to use the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;linked connector, but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>

            <span class="n">kfp_client</span> <span class="o">=</span> <span class="n">KubeClientKFPClient</span><span class="p">(</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
                <span class="o">**</span><span class="n">client_args</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">kfp_client</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span><span class="p">:</span>
            <span class="n">client_args</span><span class="p">[</span><span class="s2">&quot;kube_context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span><span class="p">:</span>
            <span class="n">client_args</span><span class="p">[</span><span class="s2">&quot;host&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span>

            <span class="c1"># Handle username and password, ignore the case if one is passed and</span>
            <span class="c1"># not the other. Also do not attempt to get cookie if cookie is</span>
            <span class="c1"># already passed in client_args</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">client_username</span> <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">client_password</span><span class="p">:</span>
                <span class="c1"># If cookie is already set, then ignore</span>
                <span class="k">if</span> <span class="s2">&quot;cookie&quot;</span> <span class="ow">in</span> <span class="n">client_args</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Cookie already set in `client_args`, ignoring &quot;</span>
                        <span class="s2">&quot;`client_username` and `client_password`...&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">session_cookie</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_session_cookie</span><span class="p">(</span>
                        <span class="n">username</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">client_username</span><span class="p">,</span>
                        <span class="n">password</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">client_password</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="n">client_args</span><span class="p">[</span><span class="s2">&quot;cookies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">session_cookie</span>

        <span class="k">return</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="o">**</span><span class="n">client_args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_session_cookie</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets session cookie from username and password.</span>

<span class="sd">        Args:</span>
<span class="sd">            username: Username for kubeflow host.</span>
<span class="sd">            password: Password for kubeflow host.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the cookie fetching failed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Cookie with the prefix `authsession=`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;You must configure the Kubeflow orchestrator &quot;</span>
                <span class="s2">&quot;with the `kubeflow_hostname` parameter which usually ends &quot;</span>
                <span class="s2">&quot;with `/pipeline` (e.g. `https://mykubeflow.com/pipeline`). &quot;</span>
                <span class="s2">&quot;Please update the current kubeflow orchestrator with: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;--kubeflow_hostname=&lt;MY_KUBEFLOW_HOST&gt;`&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Get cookie</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Attempting to fetch session cookie from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;with supplied username and password...&quot;</span>
        <span class="p">)</span>
        <span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span><span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span>
            <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">,</span>
            <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">ConnectionError</span><span class="p">,</span>
            <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">Timeout</span><span class="p">,</span>
            <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error while trying to fetch kubeflow cookie: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;login&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">errh</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error while trying to fetch kubeflow cookie: </span><span class="si">{</span><span class="n">errh</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">cookie_dict</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">get_dict</span><span class="p">()</span>  <span class="c1"># type: ignore[no-untyped-call]</span>

        <span class="k">if</span> <span class="s2">&quot;authservice_session&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cookie_dict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Invalid username and/or password!&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Session cookie fetched successfully!&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;authservice_session=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cookie_dict</span><span class="p">[</span><span class="s2">&quot;authservice_session&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_pipeline_run_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get general component-specific metadata for a pipeline run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: The ID of the pipeline run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hostname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hostname</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">hostname</span> <span class="o">=</span> <span class="n">hostname</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="n">pipeline_suffix</span> <span class="o">=</span> <span class="s2">&quot;/pipeline&quot;</span>
        <span class="k">if</span> <span class="n">hostname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">pipeline_suffix</span><span class="p">):</span>
            <span class="n">hostname</span> <span class="o">=</span> <span class="n">hostname</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">pipeline_suffix</span><span class="p">)]</span>

        <span class="n">run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>

        <span class="n">settings_key</span> <span class="o">=</span> <span class="n">settings_utils</span><span class="o">.</span><span class="n">get_stack_component_setting_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">run_settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_class</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span>
            <span class="n">run</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">settings_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">user_namespace</span> <span class="o">=</span> <span class="n">run_settings</span><span class="o">.</span><span class="n">user_namespace</span>

        <span class="k">if</span> <span class="n">user_namespace</span><span class="p">:</span>
            <span class="n">run_url</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">/_/pipeline/?ns=</span><span class="si">{</span><span class="n">user_namespace</span><span class="si">}</span><span class="s2">#&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;/runs/details/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_orchestrator_run_id</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">:</span> <span class="n">Uri</span><span class="p">(</span><span class="n">run_url</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">:</span> <span class="n">Uri</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
            <span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">KubeflowOrchestratorConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the <code>KubeflowOrchestratorConfig</code> config.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>KubeflowOrchestratorConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.pipeline_directory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_directory</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns path to a directory in which the kubeflow pipeline files are stored.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Path to the pipeline directory.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.root_directory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">root_directory</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Path to the root directory for all files concerning this orchestrator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Path to the root directory.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.settings_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">settings_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">kubeflow</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">kubeflow_orchestrator_flavor</span><span class="o">.</span><span class="n">KubeflowOrchestratorSettings</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Settings class for the Kubeflow orchestrator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.kubeflow.flavors.kubeflow_orchestrator_flavor.KubeflowOrchestratorSettings]</code></td>
      <td><p>The settings class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">stack_validator</span><span class="o">.</span><span class="n">StackValidator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Validates that the stack contains a container registry.</p>
<p>Also check that requirements are met for local components.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.stack.stack_validator.StackValidator]</code></td>
      <td><p>A <code>StackValidator</code> instance.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_kubernetes_contexts" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_kubernetes_contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get the list of configured Kubernetes contexts and the active context.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[List[str], Optional[str]]</code></td>
      <td><p>A tuple containing the list of configured Kubernetes contexts and
the active context.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_kubernetes_contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the list of configured Kubernetes contexts and the active context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple containing the list of configured Kubernetes contexts and</span>
<span class="sd">        the active context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">contexts</span><span class="p">,</span> <span class="n">active_context</span> <span class="o">=</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">list_kube_config_contexts</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">config_exception</span><span class="o">.</span><span class="n">ConfigException</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="kc">None</span>

    <span class="n">context_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contexts</span><span class="p">]</span>
    <span class="n">active_context_name</span> <span class="o">=</span> <span class="n">active_context</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">context_names</span><span class="p">,</span> <span class="n">active_context_name</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_orchestrator_run_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Returns the active orchestrator run id.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the environment variable specifying the run id
is not set.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The orchestrator run id.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the active orchestrator run id.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the environment variable specifying the run id</span>
<span class="sd">            is not set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The orchestrator run id.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_KFP_RUN_ID</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_KFP_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.get_pipeline_run_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_run_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get general component-specific metadata for a pipeline run.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>run_id</code></td>
        <td><code>UUID</code></td>
        <td><p>The ID of the pipeline run.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, MetadataType]</code></td>
      <td><p>A dictionary of metadata.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_run_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get general component-specific metadata for a pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: The ID of the pipeline run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary of metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hostname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubeflow_hostname</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hostname</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">hostname</span> <span class="o">=</span> <span class="n">hostname</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="n">pipeline_suffix</span> <span class="o">=</span> <span class="s2">&quot;/pipeline&quot;</span>
    <span class="k">if</span> <span class="n">hostname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">pipeline_suffix</span><span class="p">):</span>
        <span class="n">hostname</span> <span class="o">=</span> <span class="n">hostname</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">pipeline_suffix</span><span class="p">)]</span>

    <span class="n">run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>

    <span class="n">settings_key</span> <span class="o">=</span> <span class="n">settings_utils</span><span class="o">.</span><span class="n">get_stack_component_setting_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">run_settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_class</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span>
        <span class="n">run</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">settings_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">user_namespace</span> <span class="o">=</span> <span class="n">run_settings</span><span class="o">.</span><span class="n">user_namespace</span>

    <span class="k">if</span> <span class="n">user_namespace</span><span class="p">:</span>
        <span class="n">run_url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">/_/pipeline/?ns=</span><span class="si">{</span><span class="n">user_namespace</span><span class="si">}</span><span class="s2">#&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;/runs/details/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_orchestrator_run_id</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">:</span> <span class="n">Uri</span><span class="p">(</span><span class="n">run_url</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">:</span> <span class="n">Uri</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.prepare_or_run_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_or_run_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Creates a kfp yaml file.</p>
<p>This functions as an intermediary representation of the pipeline which
is then deployed to the kubeflow pipelines instance.</p>
<h6 id="zenml.integrations.kubeflow.orchestrators.kubeflow_orchestrator.KubeflowOrchestrator.prepare_or_run_pipeline--how-it-works">How it works:</h6>
<p>Before this method is called the <code>prepare_pipeline_deployment()</code>
method builds a docker image that contains the code for the
pipeline, all steps the context around these files.</p>
<p>Based on this docker image a callable is created which builds
container_ops for each step (<code>_construct_kfp_pipeline</code>).
To do this the entrypoint of the docker image is configured to
run the correct step within the docker image. The dependencies
between these container_ops are then also configured onto each
container_op by pointing at the downstream steps.</p>
<p>This callable is then compiled into a kfp yaml file that is used as
the intermediary representation of the kubeflow pipeline.</p>
<p>This file, together with some metadata, runtime configurations is
then uploaded into the kubeflow pipelines cluster for execution.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>deployment</code></td>
        <td><code>PipelineDeploymentResponse</code></td>
        <td><p>The pipeline deployment to prepare or run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack the pipeline will run on.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>environment</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Environment variables to set in the orchestration
environment.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If trying to run a pipeline in a notebook
environment.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/kubeflow_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a kfp yaml file.</span>

<span class="sd">    This functions as an intermediary representation of the pipeline which</span>
<span class="sd">    is then deployed to the kubeflow pipelines instance.</span>

<span class="sd">    How it works:</span>
<span class="sd">    -------------</span>
<span class="sd">    Before this method is called the `prepare_pipeline_deployment()`</span>
<span class="sd">    method builds a docker image that contains the code for the</span>
<span class="sd">    pipeline, all steps the context around these files.</span>

<span class="sd">    Based on this docker image a callable is created which builds</span>
<span class="sd">    container_ops for each step (`_construct_kfp_pipeline`).</span>
<span class="sd">    To do this the entrypoint of the docker image is configured to</span>
<span class="sd">    run the correct step within the docker image. The dependencies</span>
<span class="sd">    between these container_ops are then also configured onto each</span>
<span class="sd">    container_op by pointing at the downstream steps.</span>

<span class="sd">    This callable is then compiled into a kfp yaml file that is used as</span>
<span class="sd">    the intermediary representation of the kubeflow pipeline.</span>

<span class="sd">    This file, together with some metadata, runtime configurations is</span>
<span class="sd">    then uploaded into the kubeflow pipelines cluster for execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment: The pipeline deployment to prepare or run.</span>
<span class="sd">        stack: The stack the pipeline will run on.</span>
<span class="sd">        environment: Environment variables to set in the orchestration</span>
<span class="sd">            environment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If trying to run a pipeline in a notebook</span>
<span class="sd">            environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># First check whether the code running in a notebook</span>
    <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The Kubeflow orchestrator cannot run pipelines in a notebook &quot;</span>
            <span class="s2">&quot;environment. The reason is that it is non-trivial to create &quot;</span>
            <span class="s2">&quot;a Docker image of a notebook. Please consider refactoring &quot;</span>
            <span class="s2">&quot;your notebook cells into separate scripts in a Python module &quot;</span>
            <span class="s2">&quot;and run the code outside of a notebook when using this &quot;</span>
            <span class="s2">&quot;orchestrator.&quot;</span>
        <span class="p">)</span>

    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

    <span class="c1"># Create a callable for future compilation into a dsl.Pipeline.</span>
    <span class="k">def</span> <span class="nf">_construct_kfp_pipeline</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a container_op for each step.</span>

<span class="sd">        This should contain the name of the docker image and configures the</span>
<span class="sd">        entrypoint of the docker image to run the step.</span>

<span class="sd">        Additionally, this gives each container_op information about its</span>
<span class="sd">        direct downstream steps.</span>

<span class="sd">        If this callable is passed to the `_create_and_write_workflow()`</span>
<span class="sd">        method of a KFPCompiler all dsl.ContainerOp instances will be</span>
<span class="sd">        automatically added to a singular dsl.Pipeline instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Dictionary of container_ops index by the associated step name</span>
        <span class="n">step_name_to_container_op</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span>
                <span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span>
            <span class="p">)</span>

            <span class="c1"># The command will be needed to eventually call the python step</span>
            <span class="c1"># within the docker container</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">StepEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>

            <span class="c1"># The arguments are passed to configure the entrypoint of the</span>
            <span class="c1"># docker container when the step is called.</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">StepEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
                    <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span> <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">id</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Create a container_op - the kubeflow equivalent of a step. It</span>
            <span class="c1"># contains the name of the step, the name of the docker image,</span>
            <span class="c1"># the command to use to run the step entrypoint</span>
            <span class="c1"># (e.g. `python -m zenml.entrypoints.step_entrypoint`)</span>
            <span class="c1"># and the arguments to be passed along with the command. Find</span>
            <span class="c1"># out more about how these arguments are parsed and used</span>
            <span class="c1"># in the base entrypoint `run()` method.</span>
            <span class="n">container_op</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
                <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
                <span class="n">KubeflowOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_configure_container_op</span><span class="p">(</span>
                <span class="n">container_op</span><span class="o">=</span><span class="n">container_op</span><span class="p">,</span>
                <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requires_resources_in_orchestration_environment</span><span class="p">(</span><span class="n">step</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_configure_container_resources</span><span class="p">(</span>
                    <span class="n">container_op</span><span class="o">=</span><span class="n">container_op</span><span class="p">,</span>
                    <span class="n">resource_settings</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">resource_settings</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">environment</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">container_op</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_env_variable</span><span class="p">(</span>
                    <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

            <span class="c1"># Find the upstream container ops of the current step and</span>
            <span class="c1"># configure the current container op to run after them</span>
            <span class="k">for</span> <span class="n">upstream_step_name</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span><span class="p">:</span>
                <span class="n">upstream_container_op</span> <span class="o">=</span> <span class="n">step_name_to_container_op</span><span class="p">[</span>
                    <span class="n">upstream_step_name</span>
                <span class="p">]</span>
                <span class="n">container_op</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">upstream_container_op</span><span class="p">)</span>

            <span class="c1"># Update dictionary of container ops with the current one</span>
            <span class="n">step_name_to_container_op</span><span class="p">[</span><span class="n">step_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">container_op</span>

    <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>

    <span class="c1"># Get a filepath to use to save the finished yaml to</span>
    <span class="n">fileio</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">)</span>
    <span class="n">pipeline_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orchestrator_run_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
    <span class="p">)</span>

    <span class="c1"># write the argo pipeline yaml</span>
    <span class="n">KFPCompiler</span><span class="p">()</span><span class="o">.</span><span class="n">_create_and_write_workflow</span><span class="p">(</span>
        <span class="n">pipeline_func</span><span class="o">=</span><span class="n">_construct_kfp_pipeline</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">package_path</span><span class="o">=</span><span class="n">pipeline_file_path</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Writing Kubeflow workflow definition to `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">pipeline_file_path</span>
    <span class="p">)</span>

    <span class="c1"># using the kfp client uploads the pipeline to kubeflow pipelines and</span>
    <span class="c1"># runs it there</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_upload_and_run_pipeline</span><span class="p">(</span>
        <span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span>
        <span class="n">pipeline_file_path</span><span class="o">=</span><span class="n">pipeline_file_path</span><span class="p">,</span>
        <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils" class="doc doc-heading">
        <code>local_deployment_utils</code>



</h4>

    <div class="doc doc-contents ">

      <p>Utils for the local Kubeflow deployment behaviors.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.add_hostpath_to_kubeflow_pipelines" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_hostpath_to_kubeflow_pipelines</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">,</span> <span class="n">local_path</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Patches the Kubeflow Pipelines deployment to mount a local folder.</p>
<p>This folder serves as a hostpath for visualization purposes.</p>
<p>This function reconfigures the Kubeflow pipelines deployment to use a
shared local folder to support loading the TensorBoard viewer and other
pipeline visualization results from a local artifact store, as described
here:</p>
<p>https://github.com/kubeflow/pipelines/blob/master/docs/config/volume-support.md</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>str</code></td>
        <td><p>The kubernetes context on which Kubeflow Pipelines
should be patched.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>local_path</code></td>
        <td><code>str</code></td>
        <td><p>The path to the local folder to mount as a hostpath.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_hostpath_to_kubeflow_pipelines</span><span class="p">(</span>
    <span class="n">kubernetes_context</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">local_path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Patches the Kubeflow Pipelines deployment to mount a local folder.</span>

<span class="sd">    This folder serves as a hostpath for visualization purposes.</span>

<span class="sd">    This function reconfigures the Kubeflow pipelines deployment to use a</span>
<span class="sd">    shared local folder to support loading the TensorBoard viewer and other</span>
<span class="sd">    pipeline visualization results from a local artifact store, as described</span>
<span class="sd">    here:</span>

<span class="sd">    https://github.com/kubeflow/pipelines/blob/master/docs/config/volume-support.md</span>

<span class="sd">    Args:</span>
<span class="sd">        kubernetes_context: The kubernetes context on which Kubeflow Pipelines</span>
<span class="sd">            should be patched.</span>
<span class="sd">        local_path: The path to the local folder to mount as a hostpath.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Patching Kubeflow Pipelines to mount a local folder.&quot;</span><span class="p">)</span>

    <span class="n">pod_template</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;serviceAccountName&quot;</span><span class="p">:</span> <span class="s2">&quot;kubeflow-pipelines-viewer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;containers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;volumeMounts&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;mountPath&quot;</span><span class="p">:</span> <span class="n">local_path</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;local-artifact-store&quot;</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">&quot;volumes&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;hostPath&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">local_path</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Directory&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;local-artifact-store&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">],</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">pod_template_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">pod_template</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">config_map_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;viewer-pod-template.json&quot;</span><span class="p">:</span> <span class="n">pod_template_json</span><span class="p">}}</span>
    <span class="n">config_map_data_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config_map_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Adding host path volume for local path `</span><span class="si">%s</span><span class="s2">` to kubeflow pipeline&quot;</span>
        <span class="s2">&quot;viewer pod template configuration.&quot;</span><span class="p">,</span>
        <span class="n">local_path</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
            <span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="s2">&quot;-n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kubeflow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;patch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;configmap/ml-pipeline-ui-configmap&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--type&quot;</span><span class="p">,</span>
            <span class="s2">&quot;merge&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-p&quot;</span><span class="p">,</span>
            <span class="n">config_map_data_json</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">deployment_patch</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;containers&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ml-pipeline-ui&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;volumeMounts&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="p">{</span>
                                    <span class="s2">&quot;mountPath&quot;</span><span class="p">:</span> <span class="n">local_path</span><span class="p">,</span>
                                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;local-artifact-store&quot;</span><span class="p">,</span>
                                <span class="p">}</span>
                            <span class="p">],</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;volumes&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;hostPath&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">local_path</span><span class="p">,</span>
                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Directory&quot;</span><span class="p">,</span>
                            <span class="p">},</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;local-artifact-store&quot;</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">deployment_patch_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">deployment_patch</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Adding host path volume for local path `</span><span class="si">%s</span><span class="s2">` to the kubeflow UI&quot;</span><span class="p">,</span>
        <span class="n">local_path</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
            <span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="s2">&quot;-n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kubeflow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;patch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;deployment/ml-pipeline-ui&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--type&quot;</span><span class="p">,</span>
            <span class="s2">&quot;strategic&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-p&quot;</span><span class="p">,</span>
            <span class="n">deployment_patch_json</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">wait_until_kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="o">=</span><span class="n">kubernetes_context</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished patching Kubeflow Pipelines setup.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.check_prerequisites" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_prerequisites</span><span class="p">(</span><span class="n">skip_k3d</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip_kubectl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Checks prerequisites for a local kubeflow pipelines deployment.</p>
<p>It makes sure they are installed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>skip_k3d</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to skip the check for the k3d command.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>skip_kubectl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to skip the check for the kubectl command.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether all prerequisites are installed.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_prerequisites</span><span class="p">(</span>
    <span class="n">skip_k3d</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">skip_kubectl</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks prerequisites for a local kubeflow pipelines deployment.</span>

<span class="sd">    It makes sure they are installed.</span>

<span class="sd">    Args:</span>
<span class="sd">        skip_k3d: Whether to skip the check for the k3d command.</span>
<span class="sd">        skip_kubectl: Whether to skip the check for the kubectl command.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether all prerequisites are installed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">k3d_installed</span> <span class="o">=</span> <span class="n">skip_k3d</span> <span class="ow">or</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s2">&quot;k3d&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">kubectl_installed</span> <span class="o">=</span> <span class="n">skip_kubectl</span> <span class="ow">or</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s2">&quot;kubectl&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Local kubeflow deployment prerequisites: K3D - </span><span class="si">%s</span><span class="s2">, Kubectl - </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">k3d_installed</span><span class="p">,</span>
        <span class="n">kubectl_installed</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">k3d_installed</span> <span class="ow">and</span> <span class="n">kubectl_installed</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.create_k3d_cluster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">,</span> <span class="n">registry_name</span><span class="p">,</span> <span class="n">registry_config_path</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Creates a K3D cluster.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cluster_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster to create.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>registry_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the registry to create for this cluster.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>registry_config_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to the registry config file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_k3d_cluster</span><span class="p">(</span>
    <span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">registry_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">registry_config_path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a K3D cluster.</span>

<span class="sd">    Args:</span>
<span class="sd">        cluster_name: Name of the cluster to create.</span>
<span class="sd">        registry_name: Name of the registry to create for this cluster.</span>
<span class="sd">        registry_config_path: Path to the registry config file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating local K3D cluster &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">)</span>
    <span class="n">local_stores_path</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">local_stores_path</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;k3d&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cluster&quot;</span><span class="p">,</span>
            <span class="s2">&quot;create&quot;</span><span class="p">,</span>
            <span class="n">cluster_name</span><span class="p">,</span>
            <span class="s2">&quot;--image&quot;</span><span class="p">,</span>
            <span class="n">K3S_IMAGE_NAME</span><span class="p">,</span>
            <span class="s2">&quot;--registry-create&quot;</span><span class="p">,</span>
            <span class="n">registry_name</span><span class="p">,</span>
            <span class="s2">&quot;--registry-config&quot;</span><span class="p">,</span>
            <span class="n">registry_config_path</span><span class="p">,</span>
            <span class="s2">&quot;--volume&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">local_stores_path</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">local_stores_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished K3D cluster creation.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.delete_k3d_cluster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Deletes a K3D cluster with the given name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cluster_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster to delete.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">delete_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a K3D cluster with the given name.</span>

<span class="sd">    Args:</span>
<span class="sd">        cluster_name: Name of the cluster to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s2">&quot;k3d&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">,</span> <span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Deleted local k3d cluster &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.deploy_kubeflow_pipelines" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deploy_kubeflow_pipelines</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Deploys Kubeflow Pipelines.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>str</code></td>
        <td><p>The kubernetes context on which Kubeflow Pipelines
should be deployed.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deploy_kubeflow_pipelines</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deploys Kubeflow Pipelines.</span>

<span class="sd">    Args:</span>
<span class="sd">        kubernetes_context: The kubernetes context on which Kubeflow Pipelines</span>
<span class="sd">            should be deployed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Deploying Kubeflow Pipelines.&quot;</span><span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
            <span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-k&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;github.com/kubeflow/pipelines/manifests/kustomize/cluster-scoped-resources?ref=</span><span class="si">{</span><span class="n">KFP_VERSION</span><span class="si">}</span><span class="s2">&amp;timeout=5m&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
            <span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="s2">&quot;wait&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--timeout=60s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--for&quot;</span><span class="p">,</span>
            <span class="s2">&quot;condition=established&quot;</span><span class="p">,</span>
            <span class="s2">&quot;crd/applications.app.k8s.io&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
            <span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="s2">&quot;apply&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-k&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;github.com/kubeflow/pipelines/manifests/kustomize/env/platform-agnostic-pns?ref=</span><span class="si">{</span><span class="n">KFP_VERSION</span><span class="si">}</span><span class="s2">&amp;timeout=5m&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">wait_until_kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="o">=</span><span class="n">kubernetes_context</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished Kubeflow Pipelines setup.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.k3d_cluster_exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">k3d_cluster_exists</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Checks whether there exists a K3D cluster with the given name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cluster_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the cluster exists.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">k3d_cluster_exists</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether there exists a K3D cluster with the given name.</span>

<span class="sd">    Args:</span>
<span class="sd">        cluster_name: Name of the cluster to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the cluster exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;k3d&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;--output&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">clusters</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">clusters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cluster_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.k3d_cluster_running" class="doc doc-heading">
<code class="highlight language-python"><span class="n">k3d_cluster_running</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Checks whether the K3D cluster with the given name is running.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cluster_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the cluster is running.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">k3d_cluster_running</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether the K3D cluster with the given name is running.</span>

<span class="sd">    Args:</span>
<span class="sd">        cluster_name: Name of the cluster to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the cluster is running.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;k3d&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;--output&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">clusters</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">clusters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cluster_name</span><span class="p">:</span>
            <span class="n">server_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;serversCount&quot;</span><span class="p">]</span>
            <span class="n">servers_running</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;serversRunning&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">servers_running</span> <span class="o">==</span> <span class="n">server_count</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.kubeflow_pipelines_ready" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Returns whether all Kubeflow Pipelines pods are ready.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>str</code></td>
        <td><p>The kubernetes context in which the pods
should be checked.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether all Kubeflow Pipelines pods are ready.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns whether all Kubeflow Pipelines pods are ready.</span>

<span class="sd">    Args:</span>
<span class="sd">        kubernetes_context: The kubernetes context in which the pods</span>
<span class="sd">            should be checked.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether all Kubeflow Pipelines pods are ready.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
                <span class="n">kubernetes_context</span><span class="p">,</span>
                <span class="s2">&quot;--namespace&quot;</span><span class="p">,</span>
                <span class="s2">&quot;kubeflow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;wait&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--for&quot;</span><span class="p">,</span>
                <span class="s2">&quot;condition=ready&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--timeout=0s&quot;</span><span class="p">,</span>
                <span class="s2">&quot;pods&quot;</span><span class="p">,</span>
                <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
                <span class="s2">&quot;application-crd-id=kubeflow-pipelines&quot;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.start_k3d_cluster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">start_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Starts a K3D cluster with the given name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cluster_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster to start.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">start_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Starts a K3D cluster with the given name.</span>

<span class="sd">    Args:</span>
<span class="sd">        cluster_name: Name of the cluster to start.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s2">&quot;k3d&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Started local k3d cluster &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.start_kfp_ui_daemon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">start_kfp_ui_daemon</span><span class="p">(</span><span class="n">pid_file_path</span><span class="p">,</span> <span class="n">log_file_path</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">kubernetes_context</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Starts a daemon process that forwards ports.</p>
<p>This is so the Kubeflow Pipelines UI is accessible in the browser.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pid_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path where the file with the daemons process ID should
be written.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>log_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to a file where the daemon logs should be written.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>int</code></td>
        <td><p>Port on which the UI should be accessible.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>str</code></td>
        <td><p>The kubernetes context for the cluster where
Kubeflow Pipelines is running.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">start_kfp_ui_daemon</span><span class="p">(</span>
    <span class="n">pid_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">log_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">kubernetes_context</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Starts a daemon process that forwards ports.</span>

<span class="sd">    This is so the Kubeflow Pipelines UI is accessible in the browser.</span>

<span class="sd">    Args:</span>
<span class="sd">        pid_file_path: Path where the file with the daemons process ID should</span>
<span class="sd">            be written.</span>
<span class="sd">        log_file_path: Path to a file where the daemon logs should be written.</span>
<span class="sd">        port: Port on which the UI should be accessible.</span>
<span class="sd">        kubernetes_context: The kubernetes context for the cluster where</span>
<span class="sd">            Kubeflow Pipelines is running.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
        <span class="n">kubernetes_context</span><span class="p">,</span>
        <span class="s2">&quot;--namespace&quot;</span><span class="p">,</span>
        <span class="s2">&quot;kubeflow&quot;</span><span class="p">,</span>
        <span class="s2">&quot;port-forward&quot;</span><span class="p">,</span>
        <span class="s2">&quot;svc/ml-pipeline-ui&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">:80&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">networking_utils</span><span class="o">.</span><span class="n">port_available</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
        <span class="n">modified_command</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">modified_command</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;PORT:80&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Unable to port-forward Kubeflow Pipelines UI to local port </span><span class="si">%d</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;because the port is occupied. In order to access the Kubeflow &quot;</span>
            <span class="s2">&quot;Pipelines UI at http://localhost:PORT/, please run &#39;</span><span class="si">%s</span><span class="s2">&#39; in a &quot;</span>
            <span class="s2">&quot;separate command line shell (replace PORT with a free port of &quot;</span>
            <span class="s2">&quot;your choice).&quot;</span><span class="p">,</span>
            <span class="n">port</span><span class="p">,</span>
            <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">modified_command</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Daemon functionality not supported on Windows. &quot;</span>
            <span class="s2">&quot;In order to access the Kubeflow Pipelines UI at &quot;</span>
            <span class="s2">&quot;http://localhost:</span><span class="si">%d</span><span class="s2">/, please run &#39;</span><span class="si">%s</span><span class="s2">&#39; in a separate command &quot;</span>
            <span class="s2">&quot;line shell.&quot;</span><span class="p">,</span>
            <span class="n">port</span><span class="p">,</span>
            <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">zenml.utils</span> <span class="kn">import</span> <span class="n">daemon</span>

        <span class="k">def</span> <span class="nf">_daemon_function</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Port-forwards the Kubeflow Pipelines UI pod.&quot;&quot;&quot;</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="n">daemon</span><span class="o">.</span><span class="n">run_as_daemon</span><span class="p">(</span>
            <span class="n">_daemon_function</span><span class="p">,</span> <span class="n">pid_file</span><span class="o">=</span><span class="n">pid_file_path</span><span class="p">,</span> <span class="n">log_file</span><span class="o">=</span><span class="n">log_file_path</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Started Kubeflow Pipelines UI daemon (check the daemon logs at </span><span class="si">%s</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;in case you&#39;re not able to view the UI). The Kubeflow Pipelines &quot;</span>
            <span class="s2">&quot;UI should now be accessible at http://localhost:</span><span class="si">%d</span><span class="s2">/.&quot;</span><span class="p">,</span>
            <span class="n">log_file_path</span><span class="p">,</span>
            <span class="n">port</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.stop_k3d_cluster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Stops a K3D cluster with the given name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cluster_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster to stop.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stop_k3d_cluster</span><span class="p">(</span><span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stops a K3D cluster with the given name.</span>

<span class="sd">    Args:</span>
<span class="sd">        cluster_name: Name of the cluster to stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s2">&quot;k3d&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopped local k3d cluster &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.stop_kfp_ui_daemon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_kfp_ui_daemon</span><span class="p">(</span><span class="n">pid_file_path</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Stops the KFP UI daemon process if it is running.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pid_file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to the file with the daemons process ID.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stop_kfp_ui_daemon</span><span class="p">(</span><span class="n">pid_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stops the KFP UI daemon process if it is running.</span>

<span class="sd">    Args:</span>
<span class="sd">        pid_file_path: Path to the file with the daemons process ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pid_file_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
            <span class="c1"># Daemon functionality is not supported on Windows, so the PID</span>
            <span class="c1"># file won&#39;t exist. This if clause exists just for mypy to not</span>
            <span class="c1"># complain about missing functions</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">zenml.utils</span> <span class="kn">import</span> <span class="n">daemon</span>

            <span class="n">daemon</span><span class="o">.</span><span class="n">stop_daemon</span><span class="p">(</span><span class="n">pid_file_path</span><span class="p">)</span>
            <span class="n">fileio</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pid_file_path</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopped Kubeflow Pipelines UI daemon.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.wait_until_kubeflow_pipelines_ready" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_until_kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Waits until all Kubeflow Pipelines pods are ready.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>str</code></td>
        <td><p>The kubernetes context in which the pods
should be checked.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">wait_until_kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Waits until all Kubeflow Pipelines pods are ready.</span>

<span class="sd">    Args:</span>
<span class="sd">        kubernetes_context: The kubernetes context in which the pods</span>
<span class="sd">            should be checked.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Waiting for all Kubeflow Pipelines pods to be ready (this might &quot;</span>
        <span class="s2">&quot;take a few minutes).&quot;</span>
    <span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Current pod status:&quot;</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
                <span class="n">kubernetes_context</span><span class="p">,</span>
                <span class="s2">&quot;--namespace&quot;</span><span class="p">,</span>
                <span class="s2">&quot;kubeflow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;get&quot;</span><span class="p">,</span>
                <span class="s2">&quot;pods&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">kubeflow_pipelines_ready</span><span class="p">(</span><span class="n">kubernetes_context</span><span class="o">=</span><span class="n">kubernetes_context</span><span class="p">):</span>
            <span class="k">break</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;One or more pods not ready yet, waiting for 30 seconds...&quot;</span>
        <span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubeflow.orchestrators.local_deployment_utils.write_local_registry_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_local_registry_yaml</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">,</span> <span class="n">registry_name</span><span class="p">,</span> <span class="n">registry_uri</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Writes a K3D registry config file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>yaml_path</code></td>
        <td><code>str</code></td>
        <td><p>Path where the config file should be written to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>registry_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the registry.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>registry_uri</code></td>
        <td><code>str</code></td>
        <td><p>URI of the registry.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/orchestrators/local_deployment_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_local_registry_yaml</span><span class="p">(</span>
    <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">registry_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">registry_uri</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Writes a K3D registry config file.</span>

<span class="sd">    Args:</span>
<span class="sd">        yaml_path: Path where the config file should be written to.</span>
<span class="sd">        registry_name: Name of the registry.</span>
<span class="sd">        registry_uri: URI of the registry.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_content</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;mirrors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">registry_uri</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;endpoint&quot;</span><span class="p">:</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">registry_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]}}</span>
    <span class="p">}</span>
    <span class="n">yaml_utils</span><span class="o">.</span><span class="n">write_yaml</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">,</span> <span class="n">yaml_content</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubeflow.utils" class="doc doc-heading">
        <code>utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>KFP utilities.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.integrations.kubeflow.utils.apply_pod_settings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">apply_pod_settings</span><span class="p">(</span><span class="n">container_op</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Applies Kubernetes Pod settings to a KFP container.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>container_op</code></td>
        <td><code>ContainerOp</code></td>
        <td><p>The container to which to apply the settings.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>settings</code></td>
        <td><code>KubernetesPodSettings</code></td>
        <td><p>The settings to apply.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubeflow/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">apply_pod_settings</span><span class="p">(</span>
    <span class="n">container_op</span><span class="p">:</span> <span class="s2">&quot;ContainerOp&quot;</span><span class="p">,</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">KubernetesPodSettings</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Applies Kubernetes Pod settings to a KFP container.</span>

<span class="sd">    Args:</span>
<span class="sd">        container_op: The container to which to apply the settings.</span>
<span class="sd">        settings: The settings to apply.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">kubernetes.client.models</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">V1Affinity</span><span class="p">,</span>
        <span class="n">V1Toleration</span><span class="p">,</span>
        <span class="n">V1Volume</span><span class="p">,</span>
        <span class="n">V1VolumeMount</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">host_ipc</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Host IPC is set to `True` but not supported in this orchestrator. &quot;</span>
            <span class="s2">&quot;Ignoring...&quot;</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">node_selectors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">add_node_selector_constraint</span><span class="p">(</span><span class="n">label_name</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">affinity</span><span class="p">:</span>
        <span class="n">affinity</span><span class="p">:</span> <span class="n">V1Affinity</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">serialization_utils</span><span class="o">.</span><span class="n">deserialize_kubernetes_model</span><span class="p">(</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">affinity</span><span class="p">,</span> <span class="s2">&quot;V1Affinity&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">add_affinity</span><span class="p">(</span><span class="n">affinity</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">toleration_dict</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">tolerations</span><span class="p">:</span>
        <span class="n">toleration</span><span class="p">:</span> <span class="n">V1Toleration</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">serialization_utils</span><span class="o">.</span><span class="n">deserialize_kubernetes_model</span><span class="p">(</span>
                <span class="n">toleration_dict</span><span class="p">,</span> <span class="s2">&quot;V1Toleration&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">add_toleration</span><span class="p">(</span><span class="n">toleration</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">volumes</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">volumes</span><span class="p">:</span>
            <span class="n">volume</span><span class="p">:</span> <span class="n">V1Volume</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">serialization_utils</span><span class="o">.</span><span class="n">deserialize_kubernetes_model</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">&quot;V1Volume&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">container_op</span><span class="o">.</span><span class="n">add_volume</span><span class="p">(</span><span class="n">volume</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">volume_mounts</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">volume_mounts</span><span class="p">:</span>
            <span class="n">volume_mount</span><span class="p">:</span> <span class="n">V1VolumeMount</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">serialization_utils</span><span class="o">.</span><span class="n">deserialize_kubernetes_model</span><span class="p">(</span>
                    <span class="n">v</span><span class="p">,</span> <span class="s2">&quot;V1VolumeMount&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">container_op</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_volume_mount</span><span class="p">(</span><span class="n">volume_mount</span><span class="p">)</span>

    <span class="n">resource_requests</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;requests&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">resource_requests</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">add_resource_request</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">resource_limits</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;limits&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">resource_limits</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">add_resource_limit</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">container_op</span><span class="o">.</span><span class="n">add_pod_annotation</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../integrations-kaniko/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Kaniko" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Kaniko
            </div>
          </div>
        </a>
      
      
        
        <a href="../integrations-kubernetes/" class="md-footer__link md-footer__link--next" aria-label="Next: Kubernetes" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Kubernetes
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 ZenML GmbH  <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>