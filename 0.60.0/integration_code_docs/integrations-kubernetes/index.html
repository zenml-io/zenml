
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.60.0/integration_code_docs/integrations-kubernetes/">
      
      <link rel="icon" href="../../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-8.5.10">
    
    
      
        <title>Kubernetes - ZenML API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  analytics.page();
  }}();
</script>
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kubernetes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ZenML API Reference" class="md-header__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kubernetes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZenML API Reference" class="md-nav__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZenML API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        ZenML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-_hub/" class="md-nav__link">
        Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-alerter/" class="md-nav__link">
        Alerter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-annotators/" class="md-nav__link">
        Annotators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifact_stores/" class="md-nav__link">
        Artifact Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client_lazy_loader/" class="md-nav__link">
        Client Lazy Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-code_repositories/" class="md-nav__link">
        Code Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-config/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-console/" class="md-nav__link">
        Console
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-container_registries/" class="md-nav__link">
        Container Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-data_validators/" class="md-nav__link">
        Data Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-entrypoints/" class="md-nav__link">
        Entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-enums/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_hub/" class="md-nav__link">
        Event Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_sources/" class="md-nav__link">
        Event Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-experiment_trackers/" class="md-nav__link">
        Experiment Trackers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-feature_stores/" class="md-nav__link">
        Feature Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-image_builders/" class="md-nav__link">
        Image Builders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-lineage_graph/" class="md-nav__link">
        Lineage Graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logger/" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-materializers/" class="md-nav__link">
        Materializers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_deployers/" class="md-nav__link">
        Model Deployers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_registries/" class="md-nav__link">
        Model Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-new/" class="md-nav__link">
        New
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-orchestrators/" class="md-nav__link">
        Orchestrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-post_execution/" class="md-nav__link">
        Post Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-secret/" class="md-nav__link">
        Secret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-service_connectors/" class="md-nav__link">
        Service Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-stack/" class="md-nav__link">
        Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-step_operators/" class="md-nav__link">
        Step Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-steps/" class="md-nav__link">
        Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_server/" class="md-nav__link">
        Zen Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_stores/" class="md-nav__link">
        Zen Stores
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Integration code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Integration code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-argilla/" class="md-nav__link">
        Argilla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bentoml/" class="md-nav__link">
        Bentoml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bitbucket/" class="md-nav__link">
        Bitbucket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-comet/" class="md-nav__link">
        Comet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-deepchecks/" class="md-nav__link">
        Deepchecks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-discord/" class="md-nav__link">
        Discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-evidently/" class="md-nav__link">
        Evidently
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-facets/" class="md-nav__link">
        Facets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gcp/" class="md-nav__link">
        Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gitlab/" class="md-nav__link">
        Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-great_expectations/" class="md-nav__link">
        Great Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-huggingface/" class="md-nav__link">
        Huggingface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-hyperai/" class="md-nav__link">
        Hyperai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-integration/" class="md-nav__link">
        Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kaniko/" class="md-nav__link">
        Kaniko
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kubeflow/" class="md-nav__link">
        Kubeflow
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Kubernetes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes" class="md-nav__link">
    kubernetes
  </a>
  
    <nav class="md-nav" aria-label="kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.KubernetesIntegration" class="md-nav__link">
    KubernetesIntegration
  </a>
  
    <nav class="md-nav" aria-label="KubernetesIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.KubernetesIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor" class="md-nav__link">
    kubernetes_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig" class="md-nav__link">
    KubernetesOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_local" class="md-nav__link">
    is_local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_synchronous" class="md-nav__link">
    is_synchronous
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor" class="md-nav__link">
    KubernetesOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorSettings" class="md-nav__link">
    KubernetesOrchestratorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils" class="md-nav__link">
    kube_utils
  </a>
  
    <nav class="md-nav" aria-label="kube_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.PodPhase" class="md-nav__link">
    PodPhase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.create_edit_service_account" class="md-nav__link">
    create_edit_service_account()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.create_namespace" class="md-nav__link">
    create_namespace()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.get_pod" class="md-nav__link">
    get_pod()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.is_inside_kubernetes" class="md-nav__link">
    is_inside_kubernetes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.load_kube_config" class="md-nav__link">
    load_kube_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.pod_failed" class="md-nav__link">
    pod_failed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.pod_is_done" class="md-nav__link">
    pod_is_done()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.pod_is_not_pending" class="md-nav__link">
    pod_is_not_pending()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.sanitize_pod_name" class="md-nav__link">
    sanitize_pod_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.wait_pod" class="md-nav__link">
    wait_pod()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator" class="md-nav__link">
    kubernetes_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator" class="md-nav__link">
    KubernetesOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_kube_client" class="md-nav__link">
    get_kube_client()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_kubernetes_contexts" class="md-nav__link">
    get_kubernetes_contexts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint" class="md-nav__link">
    kubernetes_orchestrator_entrypoint
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator_entrypoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint.main" class="md-nav__link">
    main()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint.parse_args" class="md-nav__link">
    parse_args()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration" class="md-nav__link">
    kubernetes_orchestrator_entrypoint_configuration
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator_entrypoint_configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration" class="md-nav__link">
    KubernetesOrchestratorEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestratorEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_arguments" class="md-nav__link">
    get_entrypoint_arguments()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_command" class="md-nav__link">
    get_entrypoint_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_options" class="md-nav__link">
    get_entrypoint_options()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils" class="md-nav__link">
    manifest_utils
  </a>
  
    <nav class="md-nav" aria-label="manifest_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.add_local_stores_mount" class="md-nav__link">
    add_local_stores_mount()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.add_pod_settings" class="md-nav__link">
    add_pod_settings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_cluster_role_binding_manifest_for_service_account" class="md-nav__link">
    build_cluster_role_binding_manifest_for_service_account()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_cron_job_manifest" class="md-nav__link">
    build_cron_job_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_namespace_manifest" class="md-nav__link">
    build_namespace_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_pod_manifest" class="md-nav__link">
    build_pod_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_service_account_manifest" class="md-nav__link">
    build_service_account_manifest()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.pod_settings" class="md-nav__link">
    pod_settings
  </a>
  
    <nav class="md-nav" aria-label="pod_settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings" class="md-nav__link">
    KubernetesPodSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils" class="md-nav__link">
    serialization_utils
  </a>
  
    <nav class="md-nav" aria-label="serialization_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.deserialize_kubernetes_model" class="md-nav__link">
    deserialize_kubernetes_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.get_model_class" class="md-nav__link">
    get_model_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.is_model_class" class="md-nav__link">
    is_model_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.serialize_kubernetes_model" class="md-nav__link">
    serialize_kubernetes_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors" class="md-nav__link">
    service_connectors
  </a>
  
    <nav class="md-nav" aria-label="service_connectors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector" class="md-nav__link">
    kubernetes_service_connector
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_service_connector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesAuthenticationMethods" class="md-nav__link">
    KubernetesAuthenticationMethods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig" class="md-nav__link">
    KubernetesBaseConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerConfig" class="md-nav__link">
    KubernetesServerConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerCredentials" class="md-nav__link">
    KubernetesServerCredentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServiceConnector" class="md-nav__link">
    KubernetesServiceConnector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenConfig" class="md-nav__link">
    KubernetesTokenConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenCredentials" class="md-nav__link">
    KubernetesTokenCredentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordConfig" class="md-nav__link">
    KubernetesUserPasswordConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordCredentials" class="md-nav__link">
    KubernetesUserPasswordCredentials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-label_studio/" class="md-nav__link">
        Label Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-langchain/" class="md-nav__link">
        Langchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-llama_index/" class="md-nav__link">
        Llama Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-mlflow/" class="md-nav__link">
        Mlflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neptune/" class="md-nav__link">
        Neptune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neural_prophet/" class="md-nav__link">
        Neural Prophet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-openai/" class="md-nav__link">
        Openai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pigeon/" class="md-nav__link">
        Pigeon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pillow/" class="md-nav__link">
        Pillow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-polars/" class="md-nav__link">
        Polars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-prodigy/" class="md-nav__link">
        Prodigy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pycaret/" class="md-nav__link">
        Pycaret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch_lightning/" class="md-nav__link">
        Pytorch Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-scipy/" class="md-nav__link">
        Scipy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-seldon/" class="md-nav__link">
        Seldon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-sklearn/" class="md-nav__link">
        Sklearn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot/" class="md-nav__link">
        Skypilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_aws/" class="md-nav__link">
        Skypilot Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_azure/" class="md-nav__link">
        Skypilot Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_gcp/" class="md-nav__link">
        Skypilot Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_lambda/" class="md-nav__link">
        Skypilot Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tekton/" class="md-nav__link">
        Tekton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorboard/" class="md-nav__link">
        Tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-wandb/" class="md-nav__link">
        Wandb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-whylogs/" class="md-nav__link">
        Whylogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-xgboost/" class="md-nav__link">
        Xgboost
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes" class="md-nav__link">
    kubernetes
  </a>
  
    <nav class="md-nav" aria-label="kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.KubernetesIntegration" class="md-nav__link">
    KubernetesIntegration
  </a>
  
    <nav class="md-nav" aria-label="KubernetesIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.KubernetesIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor" class="md-nav__link">
    kubernetes_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig" class="md-nav__link">
    KubernetesOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_local" class="md-nav__link">
    is_local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_synchronous" class="md-nav__link">
    is_synchronous
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor" class="md-nav__link">
    KubernetesOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorSettings" class="md-nav__link">
    KubernetesOrchestratorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils" class="md-nav__link">
    kube_utils
  </a>
  
    <nav class="md-nav" aria-label="kube_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.PodPhase" class="md-nav__link">
    PodPhase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.create_edit_service_account" class="md-nav__link">
    create_edit_service_account()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.create_namespace" class="md-nav__link">
    create_namespace()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.get_pod" class="md-nav__link">
    get_pod()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.is_inside_kubernetes" class="md-nav__link">
    is_inside_kubernetes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.load_kube_config" class="md-nav__link">
    load_kube_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.pod_failed" class="md-nav__link">
    pod_failed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.pod_is_done" class="md-nav__link">
    pod_is_done()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.pod_is_not_pending" class="md-nav__link">
    pod_is_not_pending()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.sanitize_pod_name" class="md-nav__link">
    sanitize_pod_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kube_utils.wait_pod" class="md-nav__link">
    wait_pod()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator" class="md-nav__link">
    kubernetes_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator" class="md-nav__link">
    KubernetesOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_kube_client" class="md-nav__link">
    get_kube_client()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_kubernetes_contexts" class="md-nav__link">
    get_kubernetes_contexts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint" class="md-nav__link">
    kubernetes_orchestrator_entrypoint
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator_entrypoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint.main" class="md-nav__link">
    main()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint.parse_args" class="md-nav__link">
    parse_args()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration" class="md-nav__link">
    kubernetes_orchestrator_entrypoint_configuration
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_orchestrator_entrypoint_configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration" class="md-nav__link">
    KubernetesOrchestratorEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="KubernetesOrchestratorEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_arguments" class="md-nav__link">
    get_entrypoint_arguments()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_command" class="md-nav__link">
    get_entrypoint_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_options" class="md-nav__link">
    get_entrypoint_options()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils" class="md-nav__link">
    manifest_utils
  </a>
  
    <nav class="md-nav" aria-label="manifest_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.add_local_stores_mount" class="md-nav__link">
    add_local_stores_mount()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.add_pod_settings" class="md-nav__link">
    add_pod_settings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_cluster_role_binding_manifest_for_service_account" class="md-nav__link">
    build_cluster_role_binding_manifest_for_service_account()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_cron_job_manifest" class="md-nav__link">
    build_cron_job_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_namespace_manifest" class="md-nav__link">
    build_namespace_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_pod_manifest" class="md-nav__link">
    build_pod_manifest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.orchestrators.manifest_utils.build_service_account_manifest" class="md-nav__link">
    build_service_account_manifest()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.pod_settings" class="md-nav__link">
    pod_settings
  </a>
  
    <nav class="md-nav" aria-label="pod_settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings" class="md-nav__link">
    KubernetesPodSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils" class="md-nav__link">
    serialization_utils
  </a>
  
    <nav class="md-nav" aria-label="serialization_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.deserialize_kubernetes_model" class="md-nav__link">
    deserialize_kubernetes_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.get_model_class" class="md-nav__link">
    get_model_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.is_model_class" class="md-nav__link">
    is_model_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.serialization_utils.serialize_kubernetes_model" class="md-nav__link">
    serialize_kubernetes_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors" class="md-nav__link">
    service_connectors
  </a>
  
    <nav class="md-nav" aria-label="service_connectors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector" class="md-nav__link">
    kubernetes_service_connector
  </a>
  
    <nav class="md-nav" aria-label="kubernetes_service_connector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesAuthenticationMethods" class="md-nav__link">
    KubernetesAuthenticationMethods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig" class="md-nav__link">
    KubernetesBaseConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerConfig" class="md-nav__link">
    KubernetesServerConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerCredentials" class="md-nav__link">
    KubernetesServerCredentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServiceConnector" class="md-nav__link">
    KubernetesServiceConnector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenConfig" class="md-nav__link">
    KubernetesTokenConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenCredentials" class="md-nav__link">
    KubernetesTokenCredentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordConfig" class="md-nav__link">
    KubernetesUserPasswordConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordCredentials" class="md-nav__link">
    KubernetesUserPasswordCredentials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/zenml-io/zenml/docs/integration_code_docs/integrations-kubernetes.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="kubernetes">Kubernetes</h1>


  <div class="doc doc-object doc-module">



<h2 id="zenml.integrations.kubernetes" class="doc doc-heading">
        <code>zenml.integrations.kubernetes</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents first">

      <p>Kubernetes integration for Kubernetes-native orchestration.</p>
<p>The Kubernetes integration sub-module powers an alternative to the local
orchestrator. You can enable it by registering the Kubernetes orchestrator with
the CLI tool.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="zenml.integrations.kubernetes.KubernetesIntegration" class="doc doc-heading">
        <code>
KubernetesIntegration            (<a class="autorefs autorefs-internal" title="zenml.integrations.integration.Integration" href="../integrations-integration/#zenml.integrations.integration.Integration">Integration</a>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>Definition of Kubernetes integration for ZenML.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesIntegration</span><span class="p">(</span><span class="n">Integration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Definition of Kubernetes integration for ZenML.&quot;&quot;&quot;</span>

    <span class="n">NAME</span> <span class="o">=</span> <span class="n">KUBERNETES</span>
    <span class="n">REQUIREMENTS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kubernetes&gt;=21.7,&lt;26&quot;</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the Kubernetes integration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of new stack component flavors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.kubernetes.flavors</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">KubernetesOrchestratorFlavor</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">KubernetesOrchestratorFlavor</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h4 id="zenml.integrations.kubernetes.KubernetesIntegration.flavors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">flavors</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Declare the stack component flavors for the Kubernetes integration.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[Type[zenml.stack.flavor.Flavor]]</code></td>
      <td><p>List of new stack component flavors.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the Kubernetes integration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of new stack component flavors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.integrations.kubernetes.flavors</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">KubernetesOrchestratorFlavor</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">KubernetesOrchestratorFlavor</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubernetes.flavors" class="doc doc-heading">
        <code>flavors</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Kubernetes integration flavors.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor" class="doc doc-heading">
        <code>kubernetes_orchestrator_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>Kubernetes orchestrator flavor.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig" class="doc doc-heading">
        <code>
KubernetesOrchestratorConfig            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig">BaseOrchestratorConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorSettings" href="#zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorSettings">KubernetesOrchestratorSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Configuration for the Kubernetes orchestrator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>incluster</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the orchestrator will run the pipeline inside the
same cluster in which it itself is running. This requires the client
to run in a Kubernetes pod itself. If set, the <code>kubernetes_context</code>
config option is ignored. If the stack component is linked to a
Kubernetes service connector, this field is ignored.</p></td>
      </tr>
      <tr>
        <td><code>kubernetes_context</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of a Kubernetes context to run pipelines in.
If the stack component is linked to a Kubernetes service connector,
this field is ignored. Otherwise, it is mandatory.</p></td>
      </tr>
      <tr>
        <td><code>kubernetes_namespace</code></td>
        <td><code>str</code></td>
        <td><p>Name of the Kubernetes namespace to be used.
If not provided, <code>zenml</code> namespace will be used.</p></td>
      </tr>
      <tr>
        <td><code>local</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the orchestrator will assume it is connected to a
local kubernetes cluster and will perform additional validations and
operations to allow using the orchestrator in combination with other
local stack components that store data in the local filesystem
(i.e. it will mount the local stores directory into the pipeline
containers).</p></td>
      </tr>
      <tr>
        <td><code>skip_local_validations</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the local validations will be
skipped.</p></td>
      </tr>
      <tr>
        <td><code>parallel_step_startup_waiting_period</code></td>
        <td><code>Optional[float]</code></td>
        <td><p>How long to wait in between
starting parallel steps. This can be used to distribute server
load when running pipelines with a huge amount of parallel steps.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/flavors/kubernetes_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesOrchestratorConfig</span><span class="p">(</span>
    <span class="n">BaseOrchestratorConfig</span><span class="p">,</span> <span class="n">KubernetesOrchestratorSettings</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for the Kubernetes orchestrator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        incluster: If `True`, the orchestrator will run the pipeline inside the</span>
<span class="sd">            same cluster in which it itself is running. This requires the client</span>
<span class="sd">            to run in a Kubernetes pod itself. If set, the `kubernetes_context`</span>
<span class="sd">            config option is ignored. If the stack component is linked to a</span>
<span class="sd">            Kubernetes service connector, this field is ignored.</span>
<span class="sd">        kubernetes_context: Name of a Kubernetes context to run pipelines in.</span>
<span class="sd">            If the stack component is linked to a Kubernetes service connector,</span>
<span class="sd">            this field is ignored. Otherwise, it is mandatory.</span>
<span class="sd">        kubernetes_namespace: Name of the Kubernetes namespace to be used.</span>
<span class="sd">            If not provided, `zenml` namespace will be used.</span>
<span class="sd">        local: If `True`, the orchestrator will assume it is connected to a</span>
<span class="sd">            local kubernetes cluster and will perform additional validations and</span>
<span class="sd">            operations to allow using the orchestrator in combination with other</span>
<span class="sd">            local stack components that store data in the local filesystem</span>
<span class="sd">            (i.e. it will mount the local stores directory into the pipeline</span>
<span class="sd">            containers).</span>
<span class="sd">        skip_local_validations: If `True`, the local validations will be</span>
<span class="sd">            skipped.</span>
<span class="sd">        parallel_step_startup_waiting_period: How long to wait in between</span>
<span class="sd">            starting parallel steps. This can be used to distribute server</span>
<span class="sd">            load when running pipelines with a huge amount of parallel steps.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">incluster</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">kubernetes_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">kubernetes_namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;zenml&quot;</span>
    <span class="n">local</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">skip_local_validations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">parallel_step_startup_waiting_period</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running remotely.</span>

<span class="sd">        This designation is used to determine if the stack component can be</span>
<span class="sd">        used with a local ZenML database or if it requires a remote ZenML</span>
<span class="sd">        server.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a remote component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">local</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_local</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running locally.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a local component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">local</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_synchronous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether the orchestrator runs synchronous or not.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Whether the orchestrator runs synchronous or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_local" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_local</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running locally.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a local component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_remote" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_remote</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running remotely.</p>
<p>This designation is used to determine if the stack component can be
used with a local ZenML database or if it requires a remote ZenML
server.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a remote component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig.is_synchronous" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_synchronous</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Whether the orchestrator runs synchronous or not.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the orchestrator runs synchronous or not.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor" class="doc doc-heading">
        <code>
KubernetesOrchestratorFlavor            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor">BaseOrchestratorFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes orchestrator flavor.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/flavors/kubernetes_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesOrchestratorFlavor</span><span class="p">(</span><span class="n">BaseOrchestratorFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes orchestrator flavor.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KUBERNETES_ORCHESTRATOR_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">service_connector_requirements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorRequirements</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Service connector resource requirements for service connectors.</span>

<span class="sd">        Specifies resource requirements that are used to filter the available</span>
<span class="sd">        service connector types that are compatible with this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Requirements for compatible service connectors, if a service</span>
<span class="sd">            connector is required for this flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceConnectorRequirements</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/orchestrator/kubernetes.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">KubernetesOrchestratorConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns `KubernetesOrchestratorConfig` config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">                The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KubernetesOrchestratorConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KubernetesOrchestrator&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class for this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.kubernetes.orchestrators</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">KubernetesOrchestrator</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">KubernetesOrchestrator</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">kubernetes_orchestrator_flavor</span><span class="o">.</span><span class="n">KubernetesOrchestratorConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns <code>KubernetesOrchestratorConfig</code> config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">KubernetesOrchestrator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class for this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[KubernetesOrchestrator]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorFlavor.service_connector_requirements" class="doc doc-heading">
<code class="highlight language-python"><span class="n">service_connector_requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">v2</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">service_connector_type</span><span class="o">.</span><span class="n">ServiceConnectorRequirements</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Service connector resource requirements for service connectors.</p>
<p>Specifies resource requirements that are used to filter the available
service connector types that are compatible with this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.models.v2.misc.service_connector_type.ServiceConnectorRequirements]</code></td>
      <td><p>Requirements for compatible service connectors, if a service
connector is required for this flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.flavors.kubernetes_orchestrator_flavor.KubernetesOrchestratorSettings" class="doc doc-heading">
        <code>
KubernetesOrchestratorSettings            (<a class="autorefs autorefs-internal" title="zenml.config.base_settings.BaseSettings" href="../../core_code_docs/core-config/#zenml.config.base_settings.BaseSettings">BaseSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Settings for the Kubernetes orchestrator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>synchronous</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the client running a pipeline using this
orchestrator waits until all steps finish running. If <code>False</code>,
the client returns immediately and the pipeline is executed
asynchronously. Defaults to <code>True</code>.</p></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>How many seconds to wait for synchronous runs. <code>0</code> means
to wait for an unlimited duration.</p></td>
      </tr>
      <tr>
        <td><code>service_account_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of the service account to use for the
orchestrator pod. If not provided, a new service account with "edit"
permissions will be created.</p></td>
      </tr>
      <tr>
        <td><code>step_pod_service_account_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of the service account to use for the
step pods. If not provided, the default service account will be used.</p></td>
      </tr>
      <tr>
        <td><code>privileged</code></td>
        <td><code>bool</code></td>
        <td><p>If the container should be run in privileged mode.</p></td>
      </tr>
      <tr>
        <td><code>pod_settings</code></td>
        <td><code>Optional[zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings]</code></td>
        <td><p>Pod settings to apply to pods executing the steps.</p></td>
      </tr>
      <tr>
        <td><code>orchestrator_pod_settings</code></td>
        <td><code>Optional[zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings]</code></td>
        <td><p>Pod settings to apply to the pod which is
launching the actual steps.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/flavors/kubernetes_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesOrchestratorSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Settings for the Kubernetes orchestrator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        synchronous: If `True`, the client running a pipeline using this</span>
<span class="sd">            orchestrator waits until all steps finish running. If `False`,</span>
<span class="sd">            the client returns immediately and the pipeline is executed</span>
<span class="sd">            asynchronously. Defaults to `True`.</span>
<span class="sd">        timeout: How many seconds to wait for synchronous runs. `0` means</span>
<span class="sd">            to wait for an unlimited duration.</span>
<span class="sd">        service_account_name: Name of the service account to use for the</span>
<span class="sd">            orchestrator pod. If not provided, a new service account with &quot;edit&quot;</span>
<span class="sd">            permissions will be created.</span>
<span class="sd">        step_pod_service_account_name: Name of the service account to use for the</span>
<span class="sd">            step pods. If not provided, the default service account will be used.</span>
<span class="sd">        privileged: If the container should be run in privileged mode.</span>
<span class="sd">        pod_settings: Pod settings to apply to pods executing the steps.</span>
<span class="sd">        orchestrator_pod_settings: Pod settings to apply to the pod which is</span>
<span class="sd">            launching the actual steps.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">synchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">service_account_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">step_pod_service_account_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">privileged</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">pod_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KubernetesPodSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">orchestrator_pod_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KubernetesPodSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">



























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubernetes.orchestrators" class="doc doc-heading">
        <code>orchestrators</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Kubernetes-native orchestration.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.orchestrators.kube_utils" class="doc doc-heading">
        <code>kube_utils</code>



</h4>

    <div class="doc doc-contents ">

      <p>Utilities for Kubernetes related functions.</p>
<p>Internal interface: no backwards compatibility guarantees.
Adjusted from https://github.com/tensorflow/tfx/blob/master/tfx/utils/kube_utils.py.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.PodPhase" class="doc doc-heading">
        <code>
PodPhase            (<span title="enum.Enum">Enum</span>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Phase of the Kubernetes pod.</p>
<p>Pod phases are defined in
https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PodPhase</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Phase of the Kubernetes pod.</span>

<span class="sd">    Pod phases are defined in</span>
<span class="sd">    https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PENDING</span> <span class="o">=</span> <span class="s2">&quot;Pending&quot;</span>
    <span class="n">RUNNING</span> <span class="o">=</span> <span class="s2">&quot;Running&quot;</span>
    <span class="n">SUCCEEDED</span> <span class="o">=</span> <span class="s2">&quot;Succeeded&quot;</span>
    <span class="n">FAILED</span> <span class="o">=</span> <span class="s2">&quot;Failed&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
















  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.create_edit_service_account" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_edit_service_account</span><span class="p">(</span><span class="n">core_api</span><span class="p">,</span> <span class="n">rbac_api</span><span class="p">,</span> <span class="n">service_account_name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">cluster_role_binding_name</span><span class="o">=</span><span class="s1">&#39;zenml-edit&#39;</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create a new Kubernetes service account with "edit" rights.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>core_api</code></td>
        <td><code>kubernetes.client.CoreV1Api</code></td>
        <td><p>Client of Core V1 API of Kubernetes API.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>rbac_api</code></td>
        <td><code>kubernetes.client.RbacAuthorizationV1Api</code></td>
        <td><p>Client of Rbac Authorization V1 API of Kubernetes API.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>service_account_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the service account.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>Kubernetes namespace. Defaults to "default".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cluster_role_binding_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster role binding.
Defaults to "zenml-edit".</p></td>
        <td><code>&#39;zenml-edit&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_edit_service_account</span><span class="p">(</span>
    <span class="n">core_api</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">,</span>
    <span class="n">rbac_api</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">RbacAuthorizationV1Api</span><span class="p">,</span>
    <span class="n">service_account_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">cluster_role_binding_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;zenml-edit&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new Kubernetes service account with &quot;edit&quot; rights.</span>

<span class="sd">    Args:</span>
<span class="sd">        core_api: Client of Core V1 API of Kubernetes API.</span>
<span class="sd">        rbac_api: Client of Rbac Authorization V1 API of Kubernetes API.</span>
<span class="sd">        service_account_name: Name of the service account.</span>
<span class="sd">        namespace: Kubernetes namespace. Defaults to &quot;default&quot;.</span>
<span class="sd">        cluster_role_binding_name: Name of the cluster role binding.</span>
<span class="sd">            Defaults to &quot;zenml-edit&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">crb_manifest</span> <span class="o">=</span> <span class="n">build_cluster_role_binding_manifest_for_service_account</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">cluster_role_binding_name</span><span class="p">,</span>
        <span class="n">role_name</span><span class="o">=</span><span class="s2">&quot;edit&quot;</span><span class="p">,</span>
        <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">_if_not_exists</span><span class="p">(</span><span class="n">rbac_api</span><span class="o">.</span><span class="n">create_cluster_role_binding</span><span class="p">)(</span><span class="n">body</span><span class="o">=</span><span class="n">crb_manifest</span><span class="p">)</span>

    <span class="n">sa_manifest</span> <span class="o">=</span> <span class="n">build_service_account_manifest</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span>
    <span class="p">)</span>
    <span class="n">_if_not_exists</span><span class="p">(</span><span class="n">core_api</span><span class="o">.</span><span class="n">create_namespaced_service_account</span><span class="p">)(</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
        <span class="n">body</span><span class="o">=</span><span class="n">sa_manifest</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.create_namespace" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_namespace</span><span class="p">(</span><span class="n">core_api</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create a Kubernetes namespace.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>core_api</code></td>
        <td><code>kubernetes.client.CoreV1Api</code></td>
        <td><p>Client of Core V1 API of Kubernetes API.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>Kubernetes namespace. Defaults to "default".</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_namespace</span><span class="p">(</span><span class="n">core_api</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a Kubernetes namespace.</span>

<span class="sd">    Args:</span>
<span class="sd">        core_api: Client of Core V1 API of Kubernetes API.</span>
<span class="sd">        namespace: Kubernetes namespace. Defaults to &quot;default&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">manifest</span> <span class="o">=</span> <span class="n">build_namespace_manifest</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>
    <span class="n">_if_not_exists</span><span class="p">(</span><span class="n">core_api</span><span class="o">.</span><span class="n">create_namespace</span><span class="p">)(</span><span class="n">body</span><span class="o">=</span><span class="n">manifest</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.get_pod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pod</span><span class="p">(</span><span class="n">core_api</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Get a pod from Kubernetes metadata API.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>core_api</code></td>
        <td><code>kubernetes.client.CoreV1Api</code></td>
        <td><p>Client of <code>CoreV1Api</code> of Kubernetes API.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pod_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>The namespace of the pod.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>When it sees unexpected errors from Kubernetes API.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[kubernetes.client.V1Pod]</code></td>
      <td><p>The found pod object. None if it's not found.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pod</span><span class="p">(</span>
    <span class="n">core_api</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a pod from Kubernetes metadata API.</span>

<span class="sd">    Args:</span>
<span class="sd">        core_api: Client of `CoreV1Api` of Kubernetes API.</span>
<span class="sd">        pod_name: The name of the pod.</span>
<span class="sd">        namespace: The namespace of the pod.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: When it sees unexpected errors from Kubernetes API.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The found pod object. None if it&#39;s not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">core_api</span><span class="o">.</span><span class="n">read_namespaced_pod</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">ApiException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span> <span class="kn">from</span> <span class="nn">e</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.is_inside_kubernetes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_inside_kubernetes</span><span class="p">()</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Check whether we are inside a Kubernetes cluster or on a remote host.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if inside a Kubernetes cluster, else False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_inside_kubernetes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check whether we are inside a Kubernetes cluster or on a remote host.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if inside a Kubernetes cluster, else False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">k8s_config</span><span class="o">.</span><span class="n">load_incluster_config</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">ConfigException</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.load_kube_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_kube_config</span><span class="p">(</span><span class="n">incluster</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Load the Kubernetes client config.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>incluster</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to load the in-cluster config.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>context</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of the Kubernetes context. If not provided, uses the
currently active context. Will be ignored if <code>incluster</code> is True.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_kube_config</span><span class="p">(</span>
    <span class="n">incluster</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the Kubernetes client config.</span>

<span class="sd">    Args:</span>
<span class="sd">        incluster: Whether to load the in-cluster config.</span>
<span class="sd">        context: Name of the Kubernetes context. If not provided, uses the</span>
<span class="sd">            currently active context. Will be ignored if `incluster` is True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">incluster</span><span class="p">:</span>
        <span class="n">k8s_config</span><span class="o">.</span><span class="n">load_incluster_config</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">k8s_config</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.pod_failed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pod_failed</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Check if pod status is 'Failed'.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod</code></td>
        <td><code>kubernetes.client.V1Pod</code></td>
        <td><p>Kubernetes pod.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if pod status is 'Failed' else False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pod_failed</span><span class="p">(</span><span class="n">pod</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if pod status is &#39;Failed&#39;.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod: Kubernetes pod.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if pod status is &#39;Failed&#39; else False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">pod</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">phase</span> <span class="o">==</span> <span class="n">PodPhase</span><span class="o">.</span><span class="n">FAILED</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># type: ignore[no-any-return]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.pod_is_done" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pod_is_done</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Check if pod status is 'Succeeded'.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod</code></td>
        <td><code>kubernetes.client.V1Pod</code></td>
        <td><p>Kubernetes pod.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if pod status is 'Succeeded' else False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pod_is_done</span><span class="p">(</span><span class="n">pod</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if pod status is &#39;Succeeded&#39;.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod: Kubernetes pod.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if pod status is &#39;Succeeded&#39; else False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">pod</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">phase</span> <span class="o">==</span> <span class="n">PodPhase</span><span class="o">.</span><span class="n">SUCCEEDED</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># type: ignore[no-any-return]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.pod_is_not_pending" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pod_is_not_pending</span><span class="p">(</span><span class="n">pod</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Check if pod status is not 'Pending'.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod</code></td>
        <td><code>kubernetes.client.V1Pod</code></td>
        <td><p>Kubernetes pod.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>False if the pod status is 'Pending' else True.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pod_is_not_pending</span><span class="p">(</span><span class="n">pod</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if pod status is not &#39;Pending&#39;.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod: Kubernetes pod.</span>

<span class="sd">    Returns:</span>
<span class="sd">        False if the pod status is &#39;Pending&#39; else True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">pod</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">phase</span> <span class="o">!=</span> <span class="n">PodPhase</span><span class="o">.</span><span class="n">PENDING</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># type: ignore[no-any-return]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.sanitize_pod_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sanitize_pod_name</span><span class="p">(</span><span class="n">pod_name</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Sanitize pod names so they conform to Kubernetes pod naming convention.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod_name</code></td>
        <td><code>str</code></td>
        <td><p>Arbitrary input pod name.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Sanitized pod name.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sanitize_pod_name</span><span class="p">(</span><span class="n">pod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sanitize pod names so they conform to Kubernetes pod naming convention.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod_name: Arbitrary input pod name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Sanitized pod name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pod_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[^a-z0-9-]&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">pod_name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
    <span class="n">pod_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[-]+&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-]+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kube_utils.wait_pod" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_pod</span><span class="p">(</span><span class="n">kube_client_fn</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">exit_condition_lambda</span><span class="p">,</span> <span class="n">timeout_sec</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">exponential_backoff</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">stream_logs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Wait for a pod to meet an exit condition.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kube_client_fn</code></td>
        <td><code>Callable[[], kubernetes.client.ApiClient]</code></td>
        <td><p>the kube client fn is a function that is called
periodically and is used to get a <code>CoreV1Api</code> client for
the Kubernetes API. It should cache the client to avoid
unnecessary overhead but should also instantiate a new client if
the previous one is using credentials that are about to expire.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pod_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>The namespace of the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>exit_condition_lambda</code></td>
        <td><code>Callable[[kubernetes.client.V1Pod], bool]</code></td>
        <td><p>A lambda
which will be called periodically to wait for a pod to exit. The
function returns True to exit.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout_sec</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds to wait for pod to reach exit
condition, or 0 to wait for an unlimited duration.
Defaults to unlimited.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>exponential_backoff</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use exponential back off for polling.
Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>stream_logs</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to stream the pod logs to
<code>zenml.logger.info()</code>. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>when the function times out.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>kubernetes.client.V1Pod</code></td>
      <td><p>The pod object which meets the exit condition.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kube_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">wait_pod</span><span class="p">(</span>
    <span class="n">kube_client_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">],</span>
    <span class="n">pod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">exit_condition_lambda</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">],</span> <span class="nb">bool</span><span class="p">],</span>
    <span class="n">timeout_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">exponential_backoff</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">stream_logs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for a pod to meet an exit condition.</span>

<span class="sd">    Args:</span>
<span class="sd">        kube_client_fn: the kube client fn is a function that is called</span>
<span class="sd">            periodically and is used to get a `CoreV1Api` client for</span>
<span class="sd">            the Kubernetes API. It should cache the client to avoid</span>
<span class="sd">            unnecessary overhead but should also instantiate a new client if</span>
<span class="sd">            the previous one is using credentials that are about to expire.</span>
<span class="sd">        pod_name: The name of the pod.</span>
<span class="sd">        namespace: The namespace of the pod.</span>
<span class="sd">        exit_condition_lambda: A lambda</span>
<span class="sd">            which will be called periodically to wait for a pod to exit. The</span>
<span class="sd">            function returns True to exit.</span>
<span class="sd">        timeout_sec: Timeout in seconds to wait for pod to reach exit</span>
<span class="sd">            condition, or 0 to wait for an unlimited duration.</span>
<span class="sd">            Defaults to unlimited.</span>
<span class="sd">        exponential_backoff: Whether to use exponential back off for polling.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        stream_logs: Whether to stream the pod logs to</span>
<span class="sd">            `zenml.logger.info()`. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: when the function times out.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The pod object which meets the exit condition.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>

    <span class="c1"># Link to exponential back-off algorithm used here:</span>
    <span class="c1"># https://cloud.google.com/storage/docs/exponential-backoff</span>
    <span class="n">backoff_interval</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">maximum_backoff</span> <span class="o">=</span> <span class="mi">32</span>

    <span class="n">logged_lines</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">kube_client</span> <span class="o">=</span> <span class="n">kube_client_fn</span><span class="p">()</span>
        <span class="n">core_api</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">(</span><span class="n">kube_client</span><span class="p">)</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="n">get_pod</span><span class="p">(</span><span class="n">core_api</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>

        <span class="c1"># Stream logs to `zenml.logger.info()`.</span>
        <span class="c1"># TODO: can we do this without parsing all logs every time?</span>
        <span class="k">if</span> <span class="n">stream_logs</span> <span class="ow">and</span> <span class="n">pod_is_not_pending</span><span class="p">(</span><span class="n">resp</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">core_api</span><span class="o">.</span><span class="n">read_namespaced_pod_log</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
                <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logs</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">logs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">logged_lines</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">logs</span><span class="p">[</span><span class="n">logged_lines</span><span class="p">:]:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">logged_lines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">logs</span><span class="p">)</span>

        <span class="c1"># Raise an error if the pod failed.</span>
        <span class="k">if</span> <span class="n">pod_failed</span><span class="p">(</span><span class="n">resp</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pod `</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">` failed.&quot;</span><span class="p">)</span>

        <span class="c1"># Check if pod is in desired state (e.g. finished / running / ...).</span>
        <span class="k">if</span> <span class="n">exit_condition_lambda</span><span class="p">(</span><span class="n">resp</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">resp</span>

        <span class="c1"># Check if wait timed out.</span>
        <span class="n">elapse_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="k">if</span> <span class="n">elapse_time</span><span class="o">.</span><span class="n">seconds</span> <span class="o">&gt;=</span> <span class="n">timeout_sec</span> <span class="ow">and</span> <span class="n">timeout_sec</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Waiting for pod `</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">` timed out after &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timeout_sec</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Wait (using exponential backoff).</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">backoff_interval</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exponential_backoff</span> <span class="ow">and</span> <span class="n">backoff_interval</span> <span class="o">&lt;</span> <span class="n">maximum_backoff</span><span class="p">:</span>
            <span class="n">backoff_interval</span> <span class="o">*=</span> <span class="mi">2</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator" class="doc doc-heading">
        <code>kubernetes_orchestrator</code>



</h4>

    <div class="doc doc-contents ">

      <p>Kubernetes-native orchestrator.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator" class="doc doc-heading">
        <code>
KubernetesOrchestrator            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.containerized_orchestrator.ContainerizedOrchestrator" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.containerized_orchestrator.ContainerizedOrchestrator">ContainerizedOrchestrator</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Orchestrator for running ZenML pipelines using native Kubernetes.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesOrchestrator</span><span class="p">(</span><span class="n">ContainerizedOrchestrator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Orchestrator for running ZenML pipelines using native Kubernetes.&quot;&quot;&quot;</span>

    <span class="n">_k8s_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_kube_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">incluster</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Kubernetes API client.</span>

<span class="sd">        Args:</span>
<span class="sd">            incluster: Whether to use the in-cluster config or not. Overrides</span>
<span class="sd">                the `incluster` setting in the config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Kubernetes API client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: if the Kubernetes connector behaves unexpectedly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">incluster</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">incluster</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">incluster</span>

        <span class="k">if</span> <span class="n">incluster</span><span class="p">:</span>
            <span class="n">kube_utils</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span>
                <span class="n">incluster</span><span class="o">=</span><span class="n">incluster</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span>

        <span class="c1"># Refresh the client also if the connector has expired</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector_has_expired</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span>

        <span class="n">connector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">connector</span><span class="p">:</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Expected a k8s_client.ApiClient while trying to use the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;linked connector, but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kube_utils</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span>
                <span class="n">incluster</span><span class="o">=</span><span class="n">incluster</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_k8s_core_api</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Kubernetes Core API client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Kubernetes Core API client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_k8s_batch_api</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">BatchV1Api</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Kubernetes Batch API client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Kubernetes Batch API client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">BatchV1Api</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_k8s_rbac_api</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">RbacAuthorizationV1Api</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Kubernetes RBAC API client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Kubernetes RBAC API client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">RbacAuthorizationV1Api</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KubernetesOrchestratorConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the `KubernetesOrchestratorConfig` config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">KubernetesOrchestratorConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseSettings&quot;</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Settings class for the Kubernetes orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The settings class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KubernetesOrchestratorSettings</span>

    <span class="k">def</span> <span class="nf">get_kubernetes_contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of configured Kubernetes contexts and the active context.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: if the Kubernetes configuration cannot be loaded.</span>

<span class="sd">        Returns:</span>
<span class="sd">            context_name: List of configured Kubernetes contexts</span>
<span class="sd">            active_context_name: Name of the active Kubernetes context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">contexts</span><span class="p">,</span> <span class="n">active_context</span> <span class="o">=</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">list_kube_config_contexts</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">config_exception</span><span class="o">.</span><span class="n">ConfigException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Could not load the Kubernetes configuration&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="n">context_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contexts</span><span class="p">]</span>
        <span class="n">active_context_name</span> <span class="o">=</span> <span class="n">active_context</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">context_names</span><span class="p">,</span> <span class="n">active_context_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StackValidator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Defines the validator that checks whether the stack is valid.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Stack validator.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_validate_local_requirements</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Validates that the stack contains no local components.</span>

<span class="sd">            Args:</span>
<span class="sd">                stack: The stack.</span>

<span class="sd">            Returns:</span>
<span class="sd">                Whether the stack is valid or not.</span>
<span class="sd">                An explanation why the stack is invalid, if applicable.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">container_registry</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

            <span class="c1"># should not happen, because the stack validation takes care of</span>
            <span class="c1"># this, but just in case</span>
            <span class="k">assert</span> <span class="n">container_registry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="n">kubernetes_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; Kubernetes orchestrator error: &quot;</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">kubernetes_context</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">you must either link this stack component to a &quot;</span>
                        <span class="s2">&quot;Kubernetes service connector (see the &#39;zenml &quot;</span>
                        <span class="s2">&quot;orchestrator connect&#39; CLI command) or explicitly set &quot;</span>
                        <span class="s2">&quot;the `kubernetes_context` attribute to the name of the &quot;</span>
                        <span class="s2">&quot;Kubernetes config context pointing to the cluster &quot;</span>
                        <span class="s2">&quot;where you would like to run pipelines.&quot;</span>
                    <span class="p">)</span>

                <span class="n">contexts</span><span class="p">,</span> <span class="n">active_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_kubernetes_contexts</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">kubernetes_context</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">contexts</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">could not find a Kubernetes context named &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">&#39; in the local &quot;</span>
                        <span class="s2">&quot;Kubernetes configuration. Please make sure that the &quot;</span>
                        <span class="s2">&quot;Kubernetes cluster is running and that the kubeconfig &quot;</span>
                        <span class="s2">&quot;file is configured correctly. To list all configured &quot;</span>
                        <span class="s2">&quot;contexts, run:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                        <span class="s2">&quot;  `kubectl config get-contexts`</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">kubernetes_context</span> <span class="o">!=</span> <span class="n">active_context</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubernetes context &#39;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">&#39; &quot;</span>  <span class="c1"># nosec</span>
                        <span class="sa">f</span><span class="s2">&quot;configured for the Kubernetes orchestrator is not &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;the same as the active context in the local &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;Kubernetes configuration. If this is not deliberate,&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot; you should update the orchestrator&#39;s &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;`kubernetes_context` field by running:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;  `zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;--kubernetes_context=</span><span class="si">{</span><span class="n">active_context</span><span class="si">}</span><span class="s2">`</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;To list all configured contexts, run:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;  `kubectl config get-contexts`</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;To set the active context to be the same as the one &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;configured in the Kubernetes orchestrator and &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;silence this warning, run:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;  `kubectl config use-context &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">kubernetes_context</span><span class="si">}</span><span class="s2">`</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

            <span class="n">silence_local_validations_msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;To silence this warning, set the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`skip_local_validations` attribute to True in the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;orchestrator configuration by running:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;  &#39;zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;--skip_local_validations=True&#39;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">skip_local_validations</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span>
            <span class="p">):</span>
                <span class="c1"># if the orchestrator is not running in a local k3d cluster,</span>
                <span class="c1"># we cannot have any other local components in our stack,</span>
                <span class="c1"># because we cannot mount the local path into the container.</span>
                <span class="c1"># This may result in problems when running the pipeline, because</span>
                <span class="c1"># the local components will not be available inside the</span>
                <span class="c1"># kubernetes containers.</span>

                <span class="c1"># go through all stack components and identify those that</span>
                <span class="c1"># advertise a local path where they persist information that</span>
                <span class="c1"># they need to be available when running pipelines.</span>
                <span class="k">for</span> <span class="n">stack_comp</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">stack_comp</span><span class="o">.</span><span class="n">local_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubernetes orchestrator is configured to &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;run pipelines in a remote Kubernetes cluster but the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;is a local stack component &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;and will not be available in the Kubernetes pipeline &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;step.</span><span class="se">\n</span><span class="s2">Please ensure that you always use non-local &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;stack components with a remote Kubernetes orchestrator, &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;otherwise you may run into pipeline execution &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;problems. You should use a flavor of &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> other than &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">stack_comp</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2">&#39;.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="n">silence_local_validations_msg</span>
                    <span class="p">)</span>

                <span class="c1"># if the orchestrator is remote, the container registry must</span>
                <span class="c1"># also be remote.</span>
                <span class="k">if</span> <span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">the Kubernetes orchestrator is configured to &quot;</span>
                        <span class="s2">&quot;run pipelines in a remote Kubernetes cluster but the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; container registry URI &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;points to a local container registry. Please ensure &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;that you always use non-local stack components with &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;a remote Kubernetes orchestrator, otherwise you will &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;run into problems. You should use a flavor of &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;container registry other than &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2">&#39;.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="n">silence_local_validations_msg</span>
                    <span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">StackValidator</span><span class="p">(</span>
            <span class="n">required_components</span><span class="o">=</span><span class="p">{</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">CONTAINER_REGISTRY</span><span class="p">,</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">IMAGE_BUILDER</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_validation_function</span><span class="o">=</span><span class="n">_validate_local_requirements</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
        <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the pipeline in Kubernetes.</span>

<span class="sd">        Args:</span>
<span class="sd">            deployment: The pipeline deployment to prepare or run.</span>
<span class="sd">            stack: The stack the pipeline will run on.</span>
<span class="sd">            environment: Environment variables to set in the orchestration</span>
<span class="sd">                environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If trying to run from a Jupyter notebook.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># First check whether the code is running in a notebook.</span>
        <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;The Kubernetes orchestrator cannot run pipelines in a notebook &quot;</span>
                <span class="s2">&quot;environment. The reason is that it is non-trivial to create &quot;</span>
                <span class="s2">&quot;a Docker image of a notebook. Please consider refactoring &quot;</span>
                <span class="s2">&quot;your notebook cells into separate scripts in a Python module &quot;</span>
                <span class="s2">&quot;and run the code outside of a notebook when using this &quot;</span>
                <span class="s2">&quot;orchestrator.&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requires_resources_in_orchestration_environment</span><span class="p">(</span><span class="n">step</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Specifying step resources is not yet supported for &quot;</span>
                    <span class="s2">&quot;the Kubernetes orchestrator, ignoring resource &quot;</span>
                    <span class="s2">&quot;configuration for step </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                    <span class="n">step_name</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
        <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)</span>
        <span class="n">pod_name</span> <span class="o">=</span> <span class="n">kube_utils</span><span class="o">.</span><span class="n">sanitize_pod_name</span><span class="p">(</span><span class="n">orchestrator_run_name</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

        <span class="c1"># Get Docker image for the orchestrator pod</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="c1"># If no generic pipeline image exists (which means all steps have</span>
            <span class="c1"># custom builds) we use a random step image as all of them include</span>
            <span class="c1"># dependencies for the active stack</span>
            <span class="n">pipeline_step_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="p">))</span>
            <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span>
                <span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">pipeline_step_name</span>
            <span class="p">)</span>

        <span class="c1"># Build entrypoint command and args for the orchestrator pod.</span>
        <span class="c1"># This will internally also build the command/args for all step pods.</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">KubernetesOrchestratorEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">KubernetesOrchestratorEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
            <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
            <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">kubernetes_namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">KubernetesOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Authorize pod to run Kubernetes commands inside the cluster.</span>
        <span class="n">service_account_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_service_account_name</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

        <span class="c1"># Schedule as CRON job if CRON schedule is given.</span>
        <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s2">&quot;The Kubernetes orchestrator only supports scheduling via &quot;</span>
                    <span class="s2">&quot;CRON jobs, but the run was configured with a manual &quot;</span>
                    <span class="s2">&quot;schedule. Use `Schedule(cron_expression=...)` instead.&quot;</span>
                <span class="p">)</span>
            <span class="n">cron_expression</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span>
            <span class="n">cron_job_manifest</span> <span class="o">=</span> <span class="n">build_cron_job_manifest</span><span class="p">(</span>
                <span class="n">cron_expression</span><span class="o">=</span><span class="n">cron_expression</span><span class="p">,</span>
                <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
                <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
                <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
                <span class="n">image_name</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
                <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
                <span class="n">privileged</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">pod_settings</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">orchestrator_pod_settings</span><span class="p">,</span>
                <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                <span class="n">mount_local_stores</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_batch_api</span><span class="o">.</span><span class="n">create_namespaced_cron_job</span><span class="p">(</span>
                <span class="n">body</span><span class="o">=</span><span class="n">cron_job_manifest</span><span class="p">,</span>
                <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Scheduling Kubernetes run `</span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">` with CRON expression &quot;</span>
                <span class="sa">f</span><span class="s1">&#39;`&quot;</span><span class="si">{</span><span class="n">cron_expression</span><span class="si">}</span><span class="s1">&quot;`.&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Create and run the orchestrator pod.</span>
        <span class="n">pod_manifest</span> <span class="o">=</span> <span class="n">build_pod_manifest</span><span class="p">(</span>
            <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
            <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
            <span class="n">image_name</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
            <span class="n">privileged</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">pod_settings</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">orchestrator_pod_settings</span><span class="p">,</span>
            <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
            <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
            <span class="n">mount_local_stores</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_core_api</span><span class="o">.</span><span class="n">create_namespaced_pod</span><span class="p">(</span>
            <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
            <span class="n">body</span><span class="o">=</span><span class="n">pod_manifest</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Wait for the orchestrator pod to finish and stream logs.</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">synchronous</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Waiting for Kubernetes orchestrator pod...&quot;</span><span class="p">)</span>
            <span class="n">kube_utils</span><span class="o">.</span><span class="n">wait_pod</span><span class="p">(</span>
                <span class="n">kube_client_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">,</span>
                <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
                <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
                <span class="n">exit_condition_lambda</span><span class="o">=</span><span class="n">kube_utils</span><span class="o">.</span><span class="n">pod_is_done</span><span class="p">,</span>
                <span class="n">timeout_sec</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">stream_logs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Orchestration started asynchronously in pod &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">`. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Run the following command to inspect the logs: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`kubectl logs </span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2"> -n </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_service_account_name</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">KubernetesOrchestratorSettings</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the service account name to use for the orchestrator pod.</span>

<span class="sd">        If the user has not specified a service account name in the settings,</span>
<span class="sd">        we create a new service account with the required permissions.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings: The orchestrator settings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The service account name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">service_account_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">service_account_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">service_account_name</span> <span class="o">=</span> <span class="s2">&quot;zenml-service-account&quot;</span>
            <span class="n">kube_utils</span><span class="o">.</span><span class="n">create_edit_service_account</span><span class="p">(</span>
                <span class="n">core_api</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_k8s_core_api</span><span class="p">,</span>
                <span class="n">rbac_api</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_k8s_rbac_api</span><span class="p">,</span>
                <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
                <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">service_account_name</span>

    <span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the active orchestrator run id.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the environment variable specifying the run id</span>
<span class="sd">                is not set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The orchestrator run id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_KUBERNETES_RUN_ID</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_ZENML_KUBERNETES_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">KubernetesOrchestratorConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the <code>KubernetesOrchestratorConfig</code> config.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>KubernetesOrchestratorConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.settings_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">settings_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Settings class for the Kubernetes orchestrator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Type[BaseSettings]]</code></td>
      <td><p>The settings class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">stack_validator</span><span class="o">.</span><span class="n">StackValidator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Defines the validator that checks whether the stack is valid.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.stack.stack_validator.StackValidator]</code></td>
      <td><p>Stack validator.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_kube_client" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_kube_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incluster</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Getter for the Kubernetes API client.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>incluster</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Whether to use the in-cluster config or not. Overrides
the <code>incluster</code> setting in the config.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>kubernetes.client.ApiClient</code></td>
      <td><p>The Kubernetes API client.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>if the Kubernetes connector behaves unexpectedly.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_kube_client</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">incluster</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Getter for the Kubernetes API client.</span>

<span class="sd">    Args:</span>
<span class="sd">        incluster: Whether to use the in-cluster config or not. Overrides</span>
<span class="sd">            the `incluster` setting in the config.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Kubernetes API client.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: if the Kubernetes connector behaves unexpectedly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">incluster</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">incluster</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">incluster</span>

    <span class="k">if</span> <span class="n">incluster</span><span class="p">:</span>
        <span class="n">kube_utils</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span>
            <span class="n">incluster</span><span class="o">=</span><span class="n">incluster</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span>

    <span class="c1"># Refresh the client also if the connector has expired</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector_has_expired</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span>

    <span class="n">connector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">connector</span><span class="p">:</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Expected a k8s_client.ApiClient while trying to use the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;linked connector, but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">client</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kube_utils</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span>
            <span class="n">incluster</span><span class="o">=</span><span class="n">incluster</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_context</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">()</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_client</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_kubernetes_contexts" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_kubernetes_contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get list of configured Kubernetes contexts and the active context.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>if the Kubernetes configuration cannot be loaded.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>context_name</code></td>
      <td><p>List of configured Kubernetes contexts
active_context_name: Name of the active Kubernetes context.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_kubernetes_contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get list of configured Kubernetes contexts and the active context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: if the Kubernetes configuration cannot be loaded.</span>

<span class="sd">    Returns:</span>
<span class="sd">        context_name: List of configured Kubernetes contexts</span>
<span class="sd">        active_context_name: Name of the active Kubernetes context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">contexts</span><span class="p">,</span> <span class="n">active_context</span> <span class="o">=</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">list_kube_config_contexts</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">config_exception</span><span class="o">.</span><span class="n">ConfigException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Could not load the Kubernetes configuration&quot;</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

    <span class="n">context_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contexts</span><span class="p">]</span>
    <span class="n">active_context_name</span> <span class="o">=</span> <span class="n">active_context</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">context_names</span><span class="p">,</span> <span class="n">active_context_name</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.get_orchestrator_run_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Returns the active orchestrator run id.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the environment variable specifying the run id
is not set.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The orchestrator run id.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the active orchestrator run id.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the environment variable specifying the run id</span>
<span class="sd">            is not set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The orchestrator run id.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_KUBERNETES_RUN_ID</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_ZENML_KUBERNETES_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator.KubernetesOrchestrator.prepare_or_run_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_or_run_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Runs the pipeline in Kubernetes.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>deployment</code></td>
        <td><code>PipelineDeploymentResponse</code></td>
        <td><p>The pipeline deployment to prepare or run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack the pipeline will run on.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>environment</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Environment variables to set in the orchestration
environment.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If trying to run from a Jupyter notebook.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the pipeline in Kubernetes.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment: The pipeline deployment to prepare or run.</span>
<span class="sd">        stack: The stack the pipeline will run on.</span>
<span class="sd">        environment: Environment variables to set in the orchestration</span>
<span class="sd">            environment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If trying to run from a Jupyter notebook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># First check whether the code is running in a notebook.</span>
    <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The Kubernetes orchestrator cannot run pipelines in a notebook &quot;</span>
            <span class="s2">&quot;environment. The reason is that it is non-trivial to create &quot;</span>
            <span class="s2">&quot;a Docker image of a notebook. Please consider refactoring &quot;</span>
            <span class="s2">&quot;your notebook cells into separate scripts in a Python module &quot;</span>
            <span class="s2">&quot;and run the code outside of a notebook when using this &quot;</span>
            <span class="s2">&quot;orchestrator.&quot;</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requires_resources_in_orchestration_environment</span><span class="p">(</span><span class="n">step</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Specifying step resources is not yet supported for &quot;</span>
                <span class="s2">&quot;the Kubernetes orchestrator, ignoring resource &quot;</span>
                <span class="s2">&quot;configuration for step </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                <span class="n">step_name</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
    <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)</span>
    <span class="n">pod_name</span> <span class="o">=</span> <span class="n">kube_utils</span><span class="o">.</span><span class="n">sanitize_pod_name</span><span class="p">(</span><span class="n">orchestrator_run_name</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

    <span class="c1"># Get Docker image for the orchestrator pod</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="c1"># If no generic pipeline image exists (which means all steps have</span>
        <span class="c1"># custom builds) we use a random step image as all of them include</span>
        <span class="c1"># dependencies for the active stack</span>
        <span class="n">pipeline_step_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="p">))</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span>
            <span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">pipeline_step_name</span>
        <span class="p">)</span>

    <span class="c1"># Build entrypoint command and args for the orchestrator pod.</span>
    <span class="c1"># This will internally also build the command/args for all step pods.</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">KubernetesOrchestratorEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">KubernetesOrchestratorEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
        <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
        <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">kubernetes_namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
        <span class="n">KubernetesOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Authorize pod to run Kubernetes commands inside the cluster.</span>
    <span class="n">service_account_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_service_account_name</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

    <span class="c1"># Schedule as CRON job if CRON schedule is given.</span>
    <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;The Kubernetes orchestrator only supports scheduling via &quot;</span>
                <span class="s2">&quot;CRON jobs, but the run was configured with a manual &quot;</span>
                <span class="s2">&quot;schedule. Use `Schedule(cron_expression=...)` instead.&quot;</span>
            <span class="p">)</span>
        <span class="n">cron_expression</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span>
        <span class="n">cron_job_manifest</span> <span class="o">=</span> <span class="n">build_cron_job_manifest</span><span class="p">(</span>
            <span class="n">cron_expression</span><span class="o">=</span><span class="n">cron_expression</span><span class="p">,</span>
            <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
            <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
            <span class="n">image_name</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
            <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
            <span class="n">privileged</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">pod_settings</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">orchestrator_pod_settings</span><span class="p">,</span>
            <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
            <span class="n">mount_local_stores</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_batch_api</span><span class="o">.</span><span class="n">create_namespaced_cron_job</span><span class="p">(</span>
            <span class="n">body</span><span class="o">=</span><span class="n">cron_job_manifest</span><span class="p">,</span>
            <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Scheduling Kubernetes run `</span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">` with CRON expression &quot;</span>
            <span class="sa">f</span><span class="s1">&#39;`&quot;</span><span class="si">{</span><span class="n">cron_expression</span><span class="si">}</span><span class="s1">&quot;`.&#39;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># Create and run the orchestrator pod.</span>
    <span class="n">pod_manifest</span> <span class="o">=</span> <span class="n">build_pod_manifest</span><span class="p">(</span>
        <span class="n">run_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
        <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
        <span class="n">image_name</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
        <span class="n">privileged</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">pod_settings</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">orchestrator_pod_settings</span><span class="p">,</span>
        <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
        <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
        <span class="n">mount_local_stores</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_k8s_core_api</span><span class="o">.</span><span class="n">create_namespaced_pod</span><span class="p">(</span>
        <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
        <span class="n">body</span><span class="o">=</span><span class="n">pod_manifest</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Wait for the orchestrator pod to finish and stream logs.</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">synchronous</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Waiting for Kubernetes orchestrator pod...&quot;</span><span class="p">)</span>
        <span class="n">kube_utils</span><span class="o">.</span><span class="n">wait_pod</span><span class="p">(</span>
            <span class="n">kube_client_fn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">,</span>
            <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
            <span class="n">namespace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
            <span class="n">exit_condition_lambda</span><span class="o">=</span><span class="n">kube_utils</span><span class="o">.</span><span class="n">pod_is_done</span><span class="p">,</span>
            <span class="n">timeout_sec</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span>
            <span class="n">stream_logs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Orchestration started asynchronously in pod &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2">`. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Run the following command to inspect the logs: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`kubectl logs </span><span class="si">{</span><span class="n">pod_name</span><span class="si">}</span><span class="s2"> -n </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint" class="doc doc-heading">
        <code>kubernetes_orchestrator_entrypoint</code>



</h4>

    <div class="doc doc-contents ">

      <p>Entrypoint of the Kubernetes master/orchestrator pod.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint.main" class="doc doc-heading">
<code class="highlight language-python"><span class="n">main</span><span class="p">()</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Entrypoint of the k8s master/orchestrator pod.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator_entrypoint.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Entrypoint of the k8s master/orchestrator pod.&quot;&quot;&quot;</span>
    <span class="c1"># Log to the container&#39;s stdout so it can be streamed by the client.</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Kubernetes orchestrator pod started.&quot;</span><span class="p">)</span>

    <span class="c1"># Parse / extract args.</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>

    <span class="n">orchestrator_run_id</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>

    <span class="n">deployment_config</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_deployment</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">deployment_id</span><span class="p">)</span>

    <span class="n">pipeline_dag</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">step_name</span><span class="p">:</span> <span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span>
        <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment_config</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="n">step_command</span> <span class="o">=</span> <span class="n">StepEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>

    <span class="n">active_stack</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span>
    <span class="n">mount_local_stores</span> <span class="o">=</span> <span class="n">active_stack</span><span class="o">.</span><span class="n">orchestrator</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span>

    <span class="c1"># Get a Kubernetes client from the active Kubernetes orchestrator, but</span>
    <span class="c1"># override the `incluster` setting to `True` since we are running inside</span>
    <span class="c1"># the Kubernetes cluster.</span>
    <span class="n">orchestrator</span> <span class="o">=</span> <span class="n">active_stack</span><span class="o">.</span><span class="n">orchestrator</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">orchestrator</span><span class="p">,</span> <span class="n">KubernetesOrchestrator</span><span class="p">)</span>
    <span class="n">kube_client</span> <span class="o">=</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">(</span><span class="n">incluster</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">core_api</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">CoreV1Api</span><span class="p">(</span><span class="n">kube_client</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_step_on_kubernetes</span><span class="p">(</span><span class="n">step_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a pipeline step in a separate Kubernetes pod.</span>

<span class="sd">        Args:</span>
<span class="sd">            step_name: Name of the step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Define Kubernetes pod name.</span>
        <span class="n">pod_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orchestrator_run_id</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">pod_name</span> <span class="o">=</span> <span class="n">kube_utils</span><span class="o">.</span><span class="n">sanitize_pod_name</span><span class="p">(</span><span class="n">pod_name</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">KubernetesOrchestrator</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span>
            <span class="n">deployment</span><span class="o">=</span><span class="n">deployment_config</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span>
        <span class="p">)</span>
        <span class="n">step_args</span> <span class="o">=</span> <span class="n">StepEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
            <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span> <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment_config</span><span class="o">.</span><span class="n">id</span>
        <span class="p">)</span>

        <span class="n">step_config</span> <span class="o">=</span> <span class="n">deployment_config</span><span class="o">.</span><span class="n">step_configurations</span><span class="p">[</span><span class="n">step_name</span><span class="p">]</span><span class="o">.</span><span class="n">config</span>

        <span class="n">kubernetes_settings</span> <span class="o">=</span> <span class="n">step_config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;orchestrator.kubernetes&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="n">orchestrator_settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">kubernetes_settings</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">orchestrator_settings</span> <span class="o">=</span> <span class="n">kubernetes_settings</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="n">KubernetesOrchestratorSettings</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
            <span class="n">orchestrator_settings</span>
        <span class="p">)</span>

        <span class="n">env</span> <span class="o">=</span> <span class="n">get_config_environment_vars</span><span class="p">()</span>
        <span class="n">env</span><span class="p">[</span><span class="n">ENV_ZENML_KUBERNETES_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">orchestrator_run_id</span>

        <span class="c1"># Define Kubernetes pod manifest.</span>
        <span class="n">pod_manifest</span> <span class="o">=</span> <span class="n">build_pod_manifest</span><span class="p">(</span>
            <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
            <span class="n">run_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">run_name</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment_config</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">image_name</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="n">step_command</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="n">step_args</span><span class="p">,</span>
            <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
            <span class="n">privileged</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">privileged</span><span class="p">,</span>
            <span class="n">pod_settings</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">pod_settings</span><span class="p">,</span>
            <span class="n">service_account_name</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">step_pod_service_account_name</span>
            <span class="ow">or</span> <span class="n">settings</span><span class="o">.</span><span class="n">service_account_name</span><span class="p">,</span>
            <span class="n">mount_local_stores</span><span class="o">=</span><span class="n">mount_local_stores</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Create and run pod.</span>
        <span class="n">core_api</span><span class="o">.</span><span class="n">create_namespaced_pod</span><span class="p">(</span>
            <span class="n">namespace</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
            <span class="n">body</span><span class="o">=</span><span class="n">pod_manifest</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Wait for pod to finish.</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Waiting for pod of step `</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">` to start...&quot;</span><span class="p">)</span>
        <span class="n">kube_utils</span><span class="o">.</span><span class="n">wait_pod</span><span class="p">(</span>
            <span class="n">kube_client_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">get_kube_client</span><span class="p">(</span>
                <span class="n">incluster</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">),</span>
            <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
            <span class="n">namespace</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">kubernetes_namespace</span><span class="p">,</span>
            <span class="n">exit_condition_lambda</span><span class="o">=</span><span class="n">kube_utils</span><span class="o">.</span><span class="n">pod_is_done</span><span class="p">,</span>
            <span class="n">stream_logs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pod of step `</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">` completed.&quot;</span><span class="p">)</span>

    <span class="n">parallel_node_startup_waiting_period</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">orchestrator</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parallel_step_startup_waiting_period</span> <span class="ow">or</span> <span class="mf">0.0</span>
    <span class="p">)</span>
    <span class="n">ThreadedDagRunner</span><span class="p">(</span>
        <span class="n">dag</span><span class="o">=</span><span class="n">pipeline_dag</span><span class="p">,</span>
        <span class="n">run_fn</span><span class="o">=</span><span class="n">run_step_on_kubernetes</span><span class="p">,</span>
        <span class="n">parallel_node_startup_waiting_period</span><span class="o">=</span><span class="n">parallel_node_startup_waiting_period</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Orchestration pod completed.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint.parse_args" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_args</span><span class="p">()</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Parse entrypoint arguments.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Namespace</code></td>
      <td><p>Parsed args.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator_entrypoint.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_args</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse entrypoint arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Parsed args.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--run_name&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--deployment_id&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--kubernetes_namespace&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration" class="doc doc-heading">
        <code>kubernetes_orchestrator_entrypoint_configuration</code>



</h4>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for the Kubernetes master/orchestrator pod.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration" class="doc doc-heading">
        <code>
KubernetesOrchestratorEntrypointConfiguration        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for the k8s master/orchestrator pod.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator_entrypoint_configuration.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesOrchestratorEntrypointConfiguration</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Entrypoint configuration for the k8s master/orchestrator pod.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_entrypoint_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all the options required for running this entrypoint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Entrypoint options.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">RUN_NAME_OPTION</span><span class="p">,</span>
            <span class="n">DEPLOYMENT_ID_OPTION</span><span class="p">,</span>
            <span class="n">NAMESPACE_OPTION</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">options</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_entrypoint_command</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a command that runs the entrypoint module.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Entrypoint command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
            <span class="s2">&quot;zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">command</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_entrypoint_arguments</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">run_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">deployment_id</span><span class="p">:</span> <span class="s2">&quot;UUID&quot;</span><span class="p">,</span>
        <span class="n">kubernetes_namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all arguments that the entrypoint command should be called with.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_name: Name of the ZenML run.</span>
<span class="sd">            deployment_id: ID of the deployment.</span>
<span class="sd">            kubernetes_namespace: Name of the Kubernetes namespace.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of entrypoint arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">RUN_NAME_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">run_name</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">DEPLOYMENT_ID_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">deployment_id</span><span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">NAMESPACE_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">kubernetes_namespace</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">args</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_arguments" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_entrypoint_arguments</span><span class="p">(</span><span class="n">run_name</span><span class="p">,</span> <span class="n">deployment_id</span><span class="p">,</span> <span class="n">kubernetes_namespace</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Gets all arguments that the entrypoint command should be called with.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>run_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the ZenML run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>deployment_id</code></td>
        <td><code>UUID</code></td>
        <td><p>ID of the deployment.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kubernetes_namespace</code></td>
        <td><code>str</code></td>
        <td><p>Name of the Kubernetes namespace.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>List of entrypoint arguments.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator_entrypoint_configuration.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_entrypoint_arguments</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">run_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="s2">&quot;UUID&quot;</span><span class="p">,</span>
    <span class="n">kubernetes_namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all arguments that the entrypoint command should be called with.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_name: Name of the ZenML run.</span>
<span class="sd">        deployment_id: ID of the deployment.</span>
<span class="sd">        kubernetes_namespace: Name of the Kubernetes namespace.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of entrypoint arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span>
        <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">RUN_NAME_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">run_name</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">DEPLOYMENT_ID_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">deployment_id</span><span class="p">),</span>
        <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">NAMESPACE_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">kubernetes_namespace</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">args</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_entrypoint_command</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns a command that runs the entrypoint module.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>Entrypoint command.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator_entrypoint_configuration.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_entrypoint_command</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a command that runs the entrypoint module.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Entrypoint command.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;python&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
        <span class="s2">&quot;zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">command</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.kubernetes.orchestrators.kubernetes_orchestrator_entrypoint_configuration.KubernetesOrchestratorEntrypointConfiguration.get_entrypoint_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_entrypoint_options</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Gets all the options required for running this entrypoint.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Set[str]</code></td>
      <td><p>Entrypoint options.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/kubernetes_orchestrator_entrypoint_configuration.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_entrypoint_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all the options required for running this entrypoint.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Entrypoint options.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">RUN_NAME_OPTION</span><span class="p">,</span>
        <span class="n">DEPLOYMENT_ID_OPTION</span><span class="p">,</span>
        <span class="n">NAMESPACE_OPTION</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">options</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.orchestrators.manifest_utils" class="doc doc-heading">
        <code>manifest_utils</code>



</h4>

    <div class="doc doc-contents ">

      <p>Utility functions for building manifests for k8s pods.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.add_local_stores_mount" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_local_stores_mount</span><span class="p">(</span><span class="n">pod_spec</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Makes changes in place to the configuration of the pod spec.</p>
<p>Configures mounted volumes for stack components that write to a local
path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod_spec</code></td>
        <td><code>kubernetes.client.V1PodSpec</code></td>
        <td><p>The pod spec to update.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_local_stores_mount</span><span class="p">(</span>
    <span class="n">pod_spec</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1PodSpec</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Makes changes in place to the configuration of the pod spec.</span>

<span class="sd">    Configures mounted volumes for stack components that write to a local</span>
<span class="sd">    path.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod_spec: The pod spec to update.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">pod_spec</span><span class="o">.</span><span class="n">containers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">container_spec</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Container</span> <span class="o">=</span> <span class="n">pod_spec</span><span class="o">.</span><span class="n">containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">stack</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span>

    <span class="n">stack</span><span class="o">.</span><span class="n">check_local_paths</span><span class="p">()</span>

    <span class="n">local_stores_path</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">local_stores_path</span>

    <span class="n">host_path</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1HostPathVolumeSource</span><span class="p">(</span>
        <span class="n">path</span><span class="o">=</span><span class="n">local_stores_path</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;Directory&quot;</span>
    <span class="p">)</span>

    <span class="n">pod_spec</span><span class="o">.</span><span class="n">volumes</span> <span class="o">=</span> <span class="n">pod_spec</span><span class="o">.</span><span class="n">volumes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">pod_spec</span><span class="o">.</span><span class="n">volumes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Volume</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;local-stores&quot;</span><span class="p">,</span>
            <span class="n">host_path</span><span class="o">=</span><span class="n">host_path</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">container_spec</span><span class="o">.</span><span class="n">volume_mounts</span> <span class="o">=</span> <span class="n">container_spec</span><span class="o">.</span><span class="n">volume_mounts</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">container_spec</span><span class="o">.</span><span class="n">volume_mounts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1VolumeMount</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;local-stores&quot;</span><span class="p">,</span>
            <span class="n">mount_path</span><span class="o">=</span><span class="n">local_stores_path</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
        <span class="c1"># File permissions are not checked on Windows. This if clause</span>
        <span class="c1"># prevents mypy from complaining about unused &#39;type: ignore&#39;</span>
        <span class="c1"># statements</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Run KFP containers in the context of the local UID/GID</span>
        <span class="c1"># to ensure that the local stores can be shared</span>
        <span class="c1"># with the local pipeline runs.</span>
        <span class="n">pod_spec</span><span class="o">.</span><span class="n">security_context</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1SecurityContext</span><span class="p">(</span>
            <span class="n">run_as_user</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getuid</span><span class="p">(),</span>
            <span class="n">run_as_group</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getgid</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="n">container_spec</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">container_spec</span><span class="o">.</span><span class="n">env</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">container_spec</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">ENV_ZENML_LOCAL_STORES_PATH</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">local_stores_path</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.add_pod_settings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_pod_settings</span><span class="p">(</span><span class="n">pod_spec</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Updates pod <code>spec</code> fields in place if passed in orchestrator settings.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod_spec</code></td>
        <td><code>kubernetes.client.V1PodSpec</code></td>
        <td><p>Pod spec to update.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>settings</code></td>
        <td><code>KubernetesPodSettings</code></td>
        <td><p>Pod settings to apply.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_pod_settings</span><span class="p">(</span>
    <span class="n">pod_spec</span><span class="p">:</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1PodSpec</span><span class="p">,</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">KubernetesPodSettings</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates pod `spec` fields in place if passed in orchestrator settings.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod_spec: Pod spec to update.</span>
<span class="sd">        settings: Pod settings to apply.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">node_selectors</span><span class="p">:</span>
        <span class="n">pod_spec</span><span class="o">.</span><span class="n">node_selector</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">node_selectors</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">affinity</span><span class="p">:</span>
        <span class="n">pod_spec</span><span class="o">.</span><span class="n">affinity</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">affinity</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">tolerations</span><span class="p">:</span>
        <span class="n">pod_spec</span><span class="o">.</span><span class="n">tolerations</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">tolerations</span>

    <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">pod_spec</span><span class="o">.</span><span class="n">containers</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Container</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">_resources</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">resources</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">volume_mounts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">volume_mounts</span><span class="p">:</span>
                <span class="n">container</span><span class="o">.</span><span class="n">volume_mounts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">volume_mounts</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">container</span><span class="o">.</span><span class="n">volume_mounts</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">volume_mounts</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">volumes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pod_spec</span><span class="o">.</span><span class="n">volumes</span><span class="p">:</span>
            <span class="n">pod_spec</span><span class="o">.</span><span class="n">volumes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">volumes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pod_spec</span><span class="o">.</span><span class="n">volumes</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">volumes</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">host_ipc</span><span class="p">:</span>
        <span class="n">pod_spec</span><span class="o">.</span><span class="n">host_ipc</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">host_ipc</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.build_cluster_role_binding_manifest_for_service_account" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_cluster_role_binding_manifest_for_service_account</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">role_name</span><span class="p">,</span> <span class="n">service_account_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Build a manifest for a cluster role binding of a service account.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the cluster role binding.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>role_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the role.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>service_account_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the service account.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>Kubernetes namespace. Defaults to "default".</p></td>
        <td><code>&#39;default&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>Manifest for a cluster role binding of a service account.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_cluster_role_binding_manifest_for_service_account</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">role_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">service_account_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build a manifest for a cluster role binding of a service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: Name of the cluster role binding.</span>
<span class="sd">        role_name: Name of the role.</span>
<span class="sd">        service_account_name: Name of the service account.</span>
<span class="sd">        namespace: Kubernetes namespace. Defaults to &quot;default&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Manifest for a cluster role binding of a service account.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;apiVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;rbac.authorization.k8s.io/v1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;ClusterRoleBinding&quot;</span><span class="p">,</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">},</span>
        <span class="s2">&quot;subjects&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;ServiceAccount&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">service_account_name</span><span class="p">,</span>
                <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="n">namespace</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;roleRef&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;ClusterRole&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">role_name</span><span class="p">,</span>
            <span class="s2">&quot;apiGroup&quot;</span><span class="p">:</span> <span class="s2">&quot;rbac.authorization.k8s.io&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.build_cron_job_manifest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_cron_job_manifest</span><span class="p">(</span><span class="n">cron_expression</span><span class="p">,</span> <span class="n">pod_name</span><span class="p">,</span> <span class="n">run_name</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">image_name</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">privileged</span><span class="p">,</span> <span class="n">pod_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">service_account_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mount_local_stores</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create a manifest for launching a pod as scheduled CRON job.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cron_expression</code></td>
        <td><code>str</code></td>
        <td><p>CRON job schedule expression, e.g. "<em> * * * </em>".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pod_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>run_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the ZenML run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pipeline_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the ZenML pipeline.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the Docker image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>command</code></td>
        <td><code>List[str]</code></td>
        <td><p>Command to execute the entrypoint in the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td><code>List[str]</code></td>
        <td><p>Arguments provided to the entrypoint command.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>privileged</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to run the container in privileged mode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pod_settings</code></td>
        <td><code>Optional[zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings]</code></td>
        <td><p>Optional settings for the pod.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>service_account_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of a service account.
Can be used to assign certain roles to a pod, e.g., to allow it to
run Kubernetes commands from within the cluster.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>env</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Environment variables to set.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mount_local_stores</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to mount the local stores path inside the
pod.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>kubernetes.client.V1CronJob</code></td>
      <td><p>CRON job manifest.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_cron_job_manifest</span><span class="p">(</span>
    <span class="n">cron_expression</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">run_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">privileged</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">pod_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KubernetesPodSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">service_account_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mount_local_stores</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1CronJob</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a manifest for launching a pod as scheduled CRON job.</span>

<span class="sd">    Args:</span>
<span class="sd">        cron_expression: CRON job schedule expression, e.g. &quot;* * * * *&quot;.</span>
<span class="sd">        pod_name: Name of the pod.</span>
<span class="sd">        run_name: Name of the ZenML run.</span>
<span class="sd">        pipeline_name: Name of the ZenML pipeline.</span>
<span class="sd">        image_name: Name of the Docker image.</span>
<span class="sd">        command: Command to execute the entrypoint in the pod.</span>
<span class="sd">        args: Arguments provided to the entrypoint command.</span>
<span class="sd">        privileged: Whether to run the container in privileged mode.</span>
<span class="sd">        pod_settings: Optional settings for the pod.</span>
<span class="sd">        service_account_name: Optional name of a service account.</span>
<span class="sd">            Can be used to assign certain roles to a pod, e.g., to allow it to</span>
<span class="sd">            run Kubernetes commands from within the cluster.</span>
<span class="sd">        env: Environment variables to set.</span>
<span class="sd">        mount_local_stores: Whether to mount the local stores path inside the</span>
<span class="sd">            pod.</span>

<span class="sd">    Returns:</span>
<span class="sd">        CRON job manifest.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pod_manifest</span> <span class="o">=</span> <span class="n">build_pod_manifest</span><span class="p">(</span>
        <span class="n">pod_name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
        <span class="n">run_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
        <span class="n">image_name</span><span class="o">=</span><span class="n">image_name</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
        <span class="n">privileged</span><span class="o">=</span><span class="n">privileged</span><span class="p">,</span>
        <span class="n">pod_settings</span><span class="o">=</span><span class="n">pod_settings</span><span class="p">,</span>
        <span class="n">service_account_name</span><span class="o">=</span><span class="n">service_account_name</span><span class="p">,</span>
        <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
        <span class="n">mount_local_stores</span><span class="o">=</span><span class="n">mount_local_stores</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">job_spec</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1CronJobSpec</span><span class="p">(</span>
        <span class="n">schedule</span><span class="o">=</span><span class="n">cron_expression</span><span class="p">,</span>
        <span class="n">job_template</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1JobTemplateSpec</span><span class="p">(</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">pod_manifest</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">spec</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1JobSpec</span><span class="p">(</span>
                <span class="n">template</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1PodTemplateSpec</span><span class="p">(</span>
                    <span class="n">metadata</span><span class="o">=</span><span class="n">pod_manifest</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                    <span class="n">spec</span><span class="o">=</span><span class="n">pod_manifest</span><span class="o">.</span><span class="n">spec</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">job_manifest</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1CronJob</span><span class="p">(</span>
        <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;CronJob&quot;</span><span class="p">,</span>
        <span class="n">api_version</span><span class="o">=</span><span class="s2">&quot;batch/v1&quot;</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">pod_manifest</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">spec</span><span class="o">=</span><span class="n">job_spec</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">job_manifest</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.build_namespace_manifest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_namespace_manifest</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Build the manifest for a new namespace.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>Kubernetes namespace.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>Manifest of the new namespace.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_namespace_manifest</span><span class="p">(</span><span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build the manifest for a new namespace.</span>

<span class="sd">    Args:</span>
<span class="sd">        namespace: Kubernetes namespace.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Manifest of the new namespace.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;apiVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;v1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;Namespace&quot;</span><span class="p">,</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">namespace</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.build_pod_manifest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_pod_manifest</span><span class="p">(</span><span class="n">pod_name</span><span class="p">,</span> <span class="n">run_name</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">image_name</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">privileged</span><span class="p">,</span> <span class="n">pod_settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">service_account_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mount_local_stores</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Build a Kubernetes pod manifest for a ZenML run or step.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pod_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>run_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the ZenML run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pipeline_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the ZenML pipeline.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the Docker image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>command</code></td>
        <td><code>List[str]</code></td>
        <td><p>Command to execute the entrypoint in the pod.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td><code>List[str]</code></td>
        <td><p>Arguments provided to the entrypoint command.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>privileged</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to run the container in privileged mode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pod_settings</code></td>
        <td><code>Optional[zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings]</code></td>
        <td><p>Optional settings for the pod.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>service_account_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of a service account.
Can be used to assign certain roles to a pod, e.g., to allow it to
run Kubernetes commands from within the cluster.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>env</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Environment variables to set.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mount_local_stores</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to mount the local stores path inside the
pod.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>kubernetes.client.V1Pod</code></td>
      <td><p>Pod manifest.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_pod_manifest</span><span class="p">(</span>
    <span class="n">pod_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">run_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">privileged</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">pod_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KubernetesPodSettings</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">service_account_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mount_local_stores</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build a Kubernetes pod manifest for a ZenML run or step.</span>

<span class="sd">    Args:</span>
<span class="sd">        pod_name: Name of the pod.</span>
<span class="sd">        run_name: Name of the ZenML run.</span>
<span class="sd">        pipeline_name: Name of the ZenML pipeline.</span>
<span class="sd">        image_name: Name of the Docker image.</span>
<span class="sd">        command: Command to execute the entrypoint in the pod.</span>
<span class="sd">        args: Arguments provided to the entrypoint command.</span>
<span class="sd">        privileged: Whether to run the container in privileged mode.</span>
<span class="sd">        pod_settings: Optional settings for the pod.</span>
<span class="sd">        service_account_name: Optional name of a service account.</span>
<span class="sd">            Can be used to assign certain roles to a pod, e.g., to allow it to</span>
<span class="sd">            run Kubernetes commands from within the cluster.</span>
<span class="sd">        env: Environment variables to set.</span>
<span class="sd">        mount_local_stores: Whether to mount the local stores path inside the</span>
<span class="sd">            pod.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Pod manifest.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">env</span> <span class="k">else</span> <span class="p">{}</span>
    <span class="n">env</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">ENV_ZENML_ENABLE_REPO_INIT_WARNINGS</span><span class="p">,</span> <span class="s2">&quot;False&quot;</span><span class="p">)</span>

    <span class="n">security_context</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1SecurityContext</span><span class="p">(</span><span class="n">privileged</span><span class="o">=</span><span class="n">privileged</span><span class="p">)</span>
    <span class="n">container_spec</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Container</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">image_name</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
        <span class="n">env</span><span class="o">=</span><span class="p">[</span>
            <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">],</span>
        <span class="n">security_context</span><span class="o">=</span><span class="n">security_context</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">pod_spec</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1PodSpec</span><span class="p">(</span>
        <span class="n">containers</span><span class="o">=</span><span class="p">[</span><span class="n">container_spec</span><span class="p">],</span>
        <span class="n">restart_policy</span><span class="o">=</span><span class="s2">&quot;Never&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">service_account_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pod_spec</span><span class="o">.</span><span class="n">service_account_name</span> <span class="o">=</span> <span class="n">service_account_name</span>

    <span class="k">if</span> <span class="n">pod_settings</span><span class="p">:</span>
        <span class="n">add_pod_settings</span><span class="p">(</span><span class="n">pod_spec</span><span class="p">,</span> <span class="n">pod_settings</span><span class="p">)</span>

    <span class="n">pod_metadata</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1ObjectMeta</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">pod_name</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;run&quot;</span><span class="p">:</span> <span class="n">run_name</span><span class="p">,</span>
            <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span> <span class="n">pipeline_name</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">pod_settings</span> <span class="ow">and</span> <span class="n">pod_settings</span><span class="o">.</span><span class="n">annotations</span><span class="p">:</span>
        <span class="n">pod_metadata</span><span class="o">.</span><span class="n">annotations</span> <span class="o">=</span> <span class="n">pod_settings</span><span class="o">.</span><span class="n">annotations</span>

    <span class="n">pod_manifest</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1Pod</span><span class="p">(</span>
        <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;Pod&quot;</span><span class="p">,</span>
        <span class="n">api_version</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">pod_metadata</span><span class="p">,</span>
        <span class="n">spec</span><span class="o">=</span><span class="n">pod_spec</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">mount_local_stores</span><span class="p">:</span>
        <span class="n">add_local_stores_mount</span><span class="p">(</span><span class="n">pod_spec</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pod_manifest</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.kubernetes.orchestrators.manifest_utils.build_service_account_manifest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_service_account_manifest</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Build the manifest for a service account.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the service account.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>Kubernetes namespace. Defaults to "default".</p></td>
        <td><code>&#39;default&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>Manifest for a service account.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/orchestrators/manifest_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_service_account_manifest</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build the manifest for a service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: Name of the service account.</span>
<span class="sd">        namespace: Kubernetes namespace. Defaults to &quot;default&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Manifest for a service account.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;apiVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;v1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="n">namespace</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubernetes.pod_settings" class="doc doc-heading">
        <code>pod_settings</code>



</h3>

    <div class="doc doc-contents ">

      <p>Kubernetes pod settings.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.integrations.kubernetes.pod_settings.KubernetesPodSettings" class="doc doc-heading">
        <code>
KubernetesPodSettings            (<a class="autorefs autorefs-internal" title="zenml.config.base_settings.BaseSettings" href="../../core_code_docs/core-config/#zenml.config.base_settings.BaseSettings">BaseSettings</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Kubernetes Pod settings.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>node_selectors</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Node selectors to apply to the pod.</p></td>
      </tr>
      <tr>
        <td><code>affinity</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Affinity to apply to the pod.</p></td>
      </tr>
      <tr>
        <td><code>tolerations</code></td>
        <td><code>List[Dict[str, Any]]</code></td>
        <td><p>Tolerations to apply to the pod.</p></td>
      </tr>
      <tr>
        <td><code>resources</code></td>
        <td><code>Dict[str, Dict[str, str]]</code></td>
        <td><p>Resource requests and limits for the pod.</p></td>
      </tr>
      <tr>
        <td><code>annotations</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Annotations to apply to the pod metadata.</p></td>
      </tr>
      <tr>
        <td><code>volumes</code></td>
        <td><code>List[Dict[str, Any]]</code></td>
        <td><p>Volumes to mount in the pod.</p></td>
      </tr>
      <tr>
        <td><code>volume_mounts</code></td>
        <td><code>List[Dict[str, Any]]</code></td>
        <td><p>Volume mounts to apply to the pod containers.</p></td>
      </tr>
      <tr>
        <td><code>host_ipc</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to enable host IPC for the pod.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/pod_settings.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesPodSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes Pod settings.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        node_selectors: Node selectors to apply to the pod.</span>
<span class="sd">        affinity: Affinity to apply to the pod.</span>
<span class="sd">        tolerations: Tolerations to apply to the pod.</span>
<span class="sd">        resources: Resource requests and limits for the pod.</span>
<span class="sd">        annotations: Annotations to apply to the pod metadata.</span>
<span class="sd">        volumes: Volumes to mount in the pod.</span>
<span class="sd">        volume_mounts: Volume mounts to apply to the pod containers.</span>
<span class="sd">        host_ipc: Whether to enable host IPC for the pod.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">node_selectors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">affinity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">tolerations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">resources</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">volumes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">volume_mounts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">host_ipc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;volumes&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_convert_volumes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts Kubernetes volumes to dicts.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The volumes list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted volumes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">kubernetes.client.models</span> <span class="kn">import</span> <span class="n">V1Volume</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">V1Volume</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">serialization_utils</span><span class="o">.</span><span class="n">serialize_kubernetes_model</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;volume_mounts&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_convert_volume_mounts</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts Kubernetes volume mounts to dicts.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The volume mounts list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted volume mounts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">kubernetes.client.models</span> <span class="kn">import</span> <span class="n">V1VolumeMount</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">V1VolumeMount</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">serialization_utils</span><span class="o">.</span><span class="n">serialize_kubernetes_model</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;affinity&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_convert_affinity</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts Kubernetes affinity to a dict.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The affinity value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">kubernetes.client.models</span> <span class="kn">import</span> <span class="n">V1Affinity</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">V1Affinity</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">serialization_utils</span><span class="o">.</span><span class="n">serialize_kubernetes_model</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;tolerations&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_convert_tolerations</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts Kubernetes tolerations to dicts.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The tolerations list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted tolerations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">kubernetes.client.models</span> <span class="kn">import</span> <span class="n">V1Toleration</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">V1Toleration</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">serialization_utils</span><span class="o">.</span><span class="n">serialize_kubernetes_model</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_convert_resources</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts Kubernetes resource requirements to a dict.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The resource value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The converted value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">kubernetes.client.models</span> <span class="kn">import</span> <span class="n">V1ResourceRequirements</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">V1ResourceRequirements</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">serialization_utils</span><span class="o">.</span><span class="n">serialize_kubernetes_model</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">



























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubernetes.serialization_utils" class="doc doc-heading">
        <code>serialization_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Kubernetes serialization utils.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.integrations.kubernetes.serialization_utils.deserialize_kubernetes_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deserialize_kubernetes_model</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Deserializes a Kubernetes model.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The model data.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>class_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the Kubernetes model class.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>KeyError</code></td>
        <td><p>If the data contains values for an invalid attribute.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The deserialized model.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/serialization_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deserialize_kubernetes_model</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserializes a Kubernetes model.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The model data.</span>
<span class="sd">        class_name: Name of the Kubernetes model class.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If the data contains values for an invalid attribute.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The deserialized model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_class</span> <span class="o">=</span> <span class="n">get_model_class</span><span class="p">(</span><span class="n">class_name</span><span class="o">=</span><span class="n">class_name</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s2">&quot;openapi_types&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s2">&quot;attribute_map&quot;</span><span class="p">)</span>
    <span class="c1"># Mapping of the attribute name of the model class to the attribute type</span>
    <span class="n">type_mapping</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">model_class</span><span class="o">.</span><span class="n">openapi_types</span><span class="p">)</span>
    <span class="n">reverse_attribute_mapping</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">model_class</span><span class="o">.</span><span class="n">attribute_map</span><span class="p">)</span>
    <span class="c1"># Mapping of the serialized key to the attribute name of the model class</span>
    <span class="n">attribute_mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">reverse_attribute_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">deserialized_attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">attribute_mapping</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Got value for attribute </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> which is not one of the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;available attributes </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">attribute_mapping</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">attribute_name</span> <span class="o">=</span> <span class="n">attribute_mapping</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">attribute_class</span> <span class="o">=</span> <span class="n">type_mapping</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">deserialized_attributes</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">attribute_class</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;list[&quot;</span><span class="p">):</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;list\[(.*)\]&quot;</span><span class="p">,</span> <span class="n">attribute_class</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">match</span>
            <span class="n">inner_class</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">deserialized_attributes</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_deserialize_list</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="n">class_name</span><span class="o">=</span><span class="n">inner_class</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">attribute_class</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;dict(&quot;</span><span class="p">):</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;dict\(([^,]*), (.*)\)&quot;</span><span class="p">,</span> <span class="n">attribute_class</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">match</span>
            <span class="n">inner_class</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">deserialized_attributes</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_deserialize_dict</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="n">class_name</span><span class="o">=</span><span class="n">inner_class</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">is_model_class</span><span class="p">(</span><span class="n">attribute_class</span><span class="p">):</span>
            <span class="n">deserialized_attributes</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">deserialize_kubernetes_model</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">attribute_class</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">deserialized_attributes</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">return</span> <span class="n">model_class</span><span class="p">(</span><span class="o">**</span><span class="n">deserialized_attributes</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.integrations.kubernetes.serialization_utils.get_model_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_model_class</span><span class="p">(</span><span class="n">class_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Gets a Kubernetes model class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>class_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the class to get.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If no Kubernetes model class exists for this name.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[Any]</code></td>
      <td><p>The model class.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/serialization_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_model_class</span><span class="p">(</span><span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a Kubernetes model class.</span>

<span class="sd">    Args:</span>
<span class="sd">        class_name: Name of the class to get.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If no Kubernetes model class exists for this name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">kubernetes.client.models</span>

    <span class="n">class_</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="p">,</span> <span class="n">class_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">class_</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to find kubernetes model class with name </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">class_</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.integrations.kubernetes.serialization_utils.is_model_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_model_class</span><span class="p">(</span><span class="n">class_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether the given class name is a Kubernetes model class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>class_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the class to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>If the given class name is a Kubernetes model class.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/serialization_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_model_class</span><span class="p">(</span><span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether the given class name is a Kubernetes model class.</span>

<span class="sd">    Args:</span>
<span class="sd">        class_name: Name of the class to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If the given class name is a Kubernetes model class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">kubernetes.client.models</span>

    <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.integrations.kubernetes.serialization_utils.serialize_kubernetes_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">serialize_kubernetes_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Serializes a Kubernetes model.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model</code></td>
        <td><code>Any</code></td>
        <td><p>The model to serialize.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the model is not a Kubernetes model.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The serialized model.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/serialization_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">serialize_kubernetes_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializes a Kubernetes model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model to serialize.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the model is not a Kubernetes model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The serialized model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_model_class</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to serialize non-kubernetes model </span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;attribute_map&quot;</span><span class="p">)</span>
    <span class="n">attribute_mapping</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">model</span><span class="o">.</span><span class="n">attribute_map</span><span class="p">)</span>

    <span class="n">model_attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">serialized_attribute_name</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">attribute_name</span><span class="p">,</span> <span class="n">serialized_attribute_name</span> <span class="ow">in</span> <span class="n">attribute_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_serialize_dict</span><span class="p">(</span><span class="n">model_attributes</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.kubernetes.service_connectors" class="doc doc-heading">
        <code>service_connectors</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Kubernetes Service Connector.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector" class="doc doc-heading">
        <code>kubernetes_service_connector</code>



</h4>

    <div class="doc doc-contents ">

      <p>Kubernetes Service Connector.</p>
<p>The Kubernetes Service Connector implements various authentication methods for
Kubernetes clusters.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesAuthenticationMethods" class="doc doc-heading">
        <code>
KubernetesAuthenticationMethods            (<a class="autorefs autorefs-internal" title="zenml.utils.enum_utils.StrEnum" href="../../core_code_docs/core-utils/#zenml.utils.enum_utils.StrEnum">StrEnum</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes Authentication methods.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesAuthenticationMethods</span><span class="p">(</span><span class="n">StrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes Authentication methods.&quot;&quot;&quot;</span>

    <span class="n">PASSWORD</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span>
    <span class="n">TOKEN</span> <span class="o">=</span> <span class="s2">&quot;token&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig" class="doc doc-heading">
        <code>
KubernetesBaseConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerConfig" href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerConfig">KubernetesServerConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes basic config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesBaseConfig</span><span class="p">(</span><span class="n">KubernetesServerConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes basic config.&quot;&quot;&quot;</span>

    <span class="n">cluster_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes cluster name to be used in the kubeconfig file&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerConfig" class="doc doc-heading">
        <code>
KubernetesServerConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerCredentials" href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerCredentials">KubernetesServerCredentials</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes server config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesServerConfig</span><span class="p">(</span><span class="n">KubernetesServerCredentials</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes server config.&quot;&quot;&quot;</span>

    <span class="n">server</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes Server URL&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">insecure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Skip TLS verification for the server certificate&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServerCredentials" class="doc doc-heading">
        <code>
KubernetesServerCredentials            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.AuthenticationConfig" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.AuthenticationConfig">AuthenticationConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes server authentication config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesServerCredentials</span><span class="p">(</span><span class="n">AuthenticationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes server authentication config.&quot;&quot;&quot;</span>

    <span class="n">certificate_authority</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PlainSerializedSecretStr</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes CA Certificate (base64 encoded)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesServiceConnector" class="doc doc-heading">
        <code>
KubernetesServiceConnector            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.ServiceConnector" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.ServiceConnector">ServiceConnector</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes service connector.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesServiceConnector</span><span class="p">(</span><span class="n">ServiceConnector</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes service connector.&quot;&quot;&quot;</span>

    <span class="n">config</span><span class="p">:</span> <span class="n">KubernetesBaseConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_connector_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorTypeModel</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the service connector type specification.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The service connector type specification.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">KUBERNETES_SERVICE_CONNECTOR_TYPE_SPEC</span>

    <span class="k">def</span> <span class="nf">_get_default_resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the default resource ID for a resource type.</span>

<span class="sd">        Service connector implementations must override this method and provide</span>
<span class="sd">        a default resource ID for resources that do not support multiple</span>
<span class="sd">        instances.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_type: The type of the resource to get a default resource ID</span>
<span class="sd">                for. Only called with resource types that do not support</span>
<span class="sd">                multiple instances.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The default resource ID for the resource type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># We use the cluster name as the default resource ID.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cluster_name</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_write_to_temp_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write content to a secured temporary file.</span>

<span class="sd">        Write content to a temporary file that is readable and writable only by</span>
<span class="sd">        the creating user ID and return the path to the temporary file.</span>

<span class="sd">        Args:</span>
<span class="sd">            content: The content to write to the temporary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the temporary file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fd</span><span class="p">,</span> <span class="n">temp_path</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fdopen</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">temp_path</span>

    <span class="k">def</span> <span class="nf">_connect_to_resource</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticate and connect to a Kubernetes cluster.</span>

<span class="sd">        Args:</span>
<span class="sd">            kwargs: Additional implementation specific keyword arguments to pass</span>
<span class="sd">                to the session or client constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A python-kubernetes client object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
        <span class="n">k8s_conf</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">Configuration</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span> <span class="o">==</span> <span class="n">KubernetesAuthenticationMethods</span><span class="o">.</span><span class="n">PASSWORD</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">KubernetesUserPasswordConfig</span><span class="p">)</span>

            <span class="n">k8s_conf</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
            <span class="n">k8s_conf</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">KubernetesTokenConfig</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">token</span><span class="p">:</span>
                <span class="n">k8s_conf</span><span class="o">.</span><span class="n">api_key</span><span class="p">[</span><span class="s2">&quot;authorization&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">cfg</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">k8s_conf</span><span class="o">.</span><span class="n">api_key_prefix</span><span class="p">[</span><span class="s2">&quot;authorization&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Bearer&quot;</span>

            <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_certificate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">client_cert</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_certificate</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
                <span class="n">client_cert_bs</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span>
                    <span class="n">client_cert</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="n">k8s_conf</span><span class="o">.</span><span class="n">cert_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_temp_file</span><span class="p">(</span><span class="n">client_cert_bs</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">client_key</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_key</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
                <span class="n">client_key_bs</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span>
                    <span class="n">client_key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="n">k8s_conf</span><span class="o">.</span><span class="n">key_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_temp_file</span><span class="p">(</span><span class="n">client_key_bs</span><span class="p">)</span>

        <span class="n">k8s_conf</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">server</span>

        <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">certificate_authority</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ssl_ca_cert</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">certificate_authority</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
            <span class="n">cert_bs</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span><span class="n">ssl_ca_cert</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

            <span class="n">k8s_conf</span><span class="o">.</span><span class="n">ssl_ca_cert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_temp_file</span><span class="p">(</span><span class="n">cert_bs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">(</span><span class="n">k8s_conf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_configure_local_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure a local Kubernetes client to authenticate and connect to a cluster.</span>

<span class="sd">        This method uses the connector&#39;s configuration to configure the local</span>
<span class="sd">        Kubernetes client (kubectl).</span>

<span class="sd">        Args:</span>
<span class="sd">            kwargs: Additional implementation specific keyword arguments to use</span>
<span class="sd">                to configure the client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If authentication failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
        <span class="n">cluster_name</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">cluster_name</span>
        <span class="n">delete_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span> <span class="o">==</span> <span class="n">KubernetesAuthenticationMethods</span><span class="o">.</span><span class="n">PASSWORD</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">KubernetesUserPasswordConfig</span><span class="p">)</span>

            <span class="n">username</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>

            <span class="n">add_user_cmd</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;config&quot;</span><span class="p">,</span>
                <span class="s2">&quot;set-credentials&quot;</span><span class="p">,</span>
                <span class="n">cluster_name</span><span class="p">,</span>
                <span class="s2">&quot;--username&quot;</span><span class="p">,</span>
                <span class="n">username</span><span class="p">,</span>
                <span class="s2">&quot;--password&quot;</span><span class="p">,</span>
                <span class="n">password</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">KubernetesTokenConfig</span><span class="p">)</span>

            <span class="n">add_user_cmd</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;config&quot;</span><span class="p">,</span>
                <span class="s2">&quot;set-credentials&quot;</span><span class="p">,</span>
                <span class="n">cluster_name</span><span class="p">,</span>
            <span class="p">]</span>

            <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">token</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
                <span class="n">add_user_cmd</span> <span class="o">+=</span> <span class="p">[</span>
                    <span class="s2">&quot;--token&quot;</span><span class="p">,</span>
                    <span class="n">token</span><span class="p">,</span>
                <span class="p">]</span>

            <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_certificate</span> <span class="ow">and</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_key</span><span class="p">:</span>
                <span class="n">add_user_cmd</span> <span class="o">+=</span> <span class="p">[</span>
                    <span class="s2">&quot;--embed-certs&quot;</span><span class="p">,</span>
                <span class="p">]</span>

                <span class="n">client_cert</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_certificate</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
                <span class="n">client_cert_bs</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span>
                    <span class="n">client_cert</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="n">temp_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_temp_file</span><span class="p">(</span><span class="n">client_cert_bs</span><span class="p">)</span>
                <span class="n">add_user_cmd</span> <span class="o">+=</span> <span class="p">[</span>
                    <span class="s2">&quot;--client-certificate&quot;</span><span class="p">,</span>
                    <span class="n">temp_path</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="n">delete_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_path</span><span class="p">)</span>

                <span class="n">client_key</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">client_key</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
                <span class="n">client_key_bs</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span>
                    <span class="n">client_key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="n">temp_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_temp_file</span><span class="p">(</span><span class="n">client_key_bs</span><span class="p">)</span>
                <span class="n">add_user_cmd</span> <span class="o">+=</span> <span class="p">[</span>
                    <span class="s2">&quot;--client-key&quot;</span><span class="p">,</span>
                    <span class="n">temp_path</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="n">delete_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_path</span><span class="p">)</span>

        <span class="c1"># add the cluster config to the default kubeconfig</span>
        <span class="n">add_cluster_cmd</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="p">,</span>
            <span class="s2">&quot;set-cluster&quot;</span><span class="p">,</span>
            <span class="n">cluster_name</span><span class="p">,</span>
            <span class="s2">&quot;--server&quot;</span><span class="p">,</span>
            <span class="n">cfg</span><span class="o">.</span><span class="n">server</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">certificate_authority</span><span class="p">:</span>
            <span class="n">ssl_ca_cert</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">certificate_authority</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">()</span>
            <span class="n">cert_bs</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span><span class="n">ssl_ca_cert</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

            <span class="n">temp_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_temp_file</span><span class="p">(</span><span class="n">cert_bs</span><span class="p">)</span>
            <span class="n">add_cluster_cmd</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="s2">&quot;--embed-certs&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--certificate-authority&quot;</span><span class="p">,</span>
                <span class="n">temp_path</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">delete_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_path</span><span class="p">)</span>

        <span class="n">add_context_cmd</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="p">,</span>
            <span class="s2">&quot;set-context&quot;</span><span class="p">,</span>
            <span class="n">cluster_name</span><span class="p">,</span>
            <span class="s2">&quot;--cluster&quot;</span><span class="p">,</span>
            <span class="n">cluster_name</span><span class="p">,</span>
            <span class="s2">&quot;--user&quot;</span><span class="p">,</span>
            <span class="n">cluster_name</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">set_context_cmd</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="p">,</span>
            <span class="s2">&quot;use-context&quot;</span><span class="p">,</span>
            <span class="n">cluster_name</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="n">add_cluster_cmd</span><span class="p">,</span>
                <span class="n">add_user_cmd</span><span class="p">,</span>
                <span class="n">add_context_cmd</span><span class="p">,</span>
                <span class="n">set_context_cmd</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                    <span class="n">cmd</span><span class="p">,</span>
                    <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to update local kubeconfig with the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;cluster configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Updated local kubeconfig with the cluster details. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;The current kubectl context was set to &#39;</span><span class="si">{</span><span class="n">cluster_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>

        <span class="c1"># delete the temporary files</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">delete_files</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_auto_configure</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">auth_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kubernetes_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KubernetesServiceConnector&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Auto-configure the connector.</span>

<span class="sd">        Args:</span>
<span class="sd">            auth_method: The particular authentication method to use. If not</span>
<span class="sd">                specified, the connector implementation must decide which</span>
<span class="sd">                authentication method to use or raise an exception.</span>
<span class="sd">            resource_type: The type of resource to configure.</span>
<span class="sd">            resource_id: The ID of the resource to configure. The</span>
<span class="sd">                implementation may choose to either require or ignore this</span>
<span class="sd">                parameter if it does not support or detect an resource type that</span>
<span class="sd">                supports multiple instances.</span>
<span class="sd">            kubernetes_context: The name of the Kubernetes context to use. If</span>
<span class="sd">                not specified, the active context will be used.</span>
<span class="sd">            kwargs: Additional implementation specific keyword arguments to use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A configured Kubernetes connector instance.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If the connector could not be configured.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kube_config</span> <span class="o">=</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">Configuration</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">k8s_config</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span>
                <span class="n">context</span><span class="o">=</span><span class="n">kubernetes_context</span><span class="p">,</span>
                <span class="n">client_configuration</span><span class="o">=</span><span class="n">kube_config</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">k8s_config</span><span class="o">.</span><span class="n">ConfigException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to load the Kubernetes configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="n">auth_config</span><span class="p">:</span> <span class="n">KubernetesBaseConfig</span>
        <span class="k">if</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">password</span><span class="p">:</span>
            <span class="n">auth_method</span> <span class="o">=</span> <span class="n">KubernetesAuthenticationMethods</span><span class="o">.</span><span class="n">PASSWORD</span>
            <span class="n">auth_config</span> <span class="o">=</span> <span class="n">KubernetesUserPasswordConfig</span><span class="p">(</span>
                <span class="n">username</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                <span class="n">password</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
                <span class="n">server</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
                <span class="n">certificate_authority</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span>
                    <span class="nb">open</span><span class="p">(</span><span class="n">kube_config</span><span class="o">.</span><span class="n">ssl_ca_cert</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">ssl_ca_cert</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">cluster_name</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">insecure</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">verify_ssl</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">api_key</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">api_key</span><span class="p">[</span><span class="s2">&quot;authorization&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;Bearer &quot;</span><span class="p">)</span>

            <span class="n">auth_method</span> <span class="o">=</span> <span class="n">KubernetesAuthenticationMethods</span><span class="o">.</span><span class="n">TOKEN</span>
            <span class="n">auth_config</span> <span class="o">=</span> <span class="n">KubernetesTokenConfig</span><span class="p">(</span>
                <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
                <span class="n">server</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
                <span class="n">certificate_authority</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span>
                    <span class="nb">open</span><span class="p">(</span><span class="n">kube_config</span><span class="o">.</span><span class="n">ssl_ca_cert</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span>
                <span class="n">client_certificate</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span>
                    <span class="nb">open</span><span class="p">(</span><span class="n">kube_config</span><span class="o">.</span><span class="n">cert_file</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">cert_file</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">client_key</span><span class="o">=</span><span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span>
                    <span class="nb">open</span><span class="p">(</span><span class="n">kube_config</span><span class="o">.</span><span class="n">key_file</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">kube_config</span><span class="o">.</span><span class="n">key_file</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">cluster_name</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;https://&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">insecure</span><span class="o">=</span><span class="n">kube_config</span><span class="o">.</span><span class="n">verify_ssl</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">auth_method</span><span class="o">=</span><span class="n">auth_method</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">auth_config</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify and list all the resources that the connector can access.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_type: The type of resource to verify. Always set to the</span>
<span class="sd">                Kubernetes resource type.</span>
<span class="sd">            resource_id: The ID of the resource to connect to. Always set to</span>
<span class="sd">                the Kubernetes cluster name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The list of canonical resource IDs that the connector can access,</span>
<span class="sd">            meaning only the Kubernetes cluster name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If the connector cannot authenticate or</span>
<span class="sd">                access the Kubernetes cluster API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect_to_resource</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">)</span>

        <span class="c1"># Verify that the Kubernetes cluster exists and is accessible</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">call_api</span><span class="p">(</span>
                <span class="s2">&quot;/version&quot;</span><span class="p">,</span>
                <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
                <span class="n">auth_settings</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;BearerToken&quot;</span><span class="p">],</span>
                <span class="n">response_type</span><span class="o">=</span><span class="s2">&quot;VersionInfo&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">k8s_client</span><span class="o">.</span><span class="n">ApiException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;failed to verify Kubernetes cluster access: </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">resource_id</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenConfig" class="doc doc-heading">
        <code>
KubernetesTokenConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig" href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig">KubernetesBaseConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenCredentials" href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenCredentials">KubernetesTokenCredentials</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes token config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesTokenConfig</span><span class="p">(</span><span class="n">KubernetesBaseConfig</span><span class="p">,</span> <span class="n">KubernetesTokenCredentials</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes token config.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesTokenCredentials" class="doc doc-heading">
        <code>
KubernetesTokenCredentials            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.AuthenticationConfig" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.AuthenticationConfig">AuthenticationConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes token authentication config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesTokenCredentials</span><span class="p">(</span><span class="n">AuthenticationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes token authentication config.&quot;&quot;&quot;</span>

    <span class="n">client_certificate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PlainSerializedSecretStr</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes Client Certificate (base64 encoded)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">client_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PlainSerializedSecretStr</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes Client Key (base64 encoded)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PlainSerializedSecretStr</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes Token&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordConfig" class="doc doc-heading">
        <code>
KubernetesUserPasswordConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig" href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesBaseConfig">KubernetesBaseConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordCredentials" href="#zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordCredentials">KubernetesUserPasswordCredentials</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes user/pass config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesUserPasswordConfig</span><span class="p">(</span>
    <span class="n">KubernetesBaseConfig</span><span class="p">,</span>
    <span class="n">KubernetesUserPasswordCredentials</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes user/pass config.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector.KubernetesUserPasswordCredentials" class="doc doc-heading">
        <code>
KubernetesUserPasswordCredentials            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.AuthenticationConfig" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.AuthenticationConfig">AuthenticationConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Kubernetes user/pass authentication config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/kubernetes/service_connectors/kubernetes_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KubernetesUserPasswordCredentials</span><span class="p">(</span><span class="n">AuthenticationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Kubernetes user/pass authentication config.&quot;&quot;&quot;</span>

    <span class="n">username</span><span class="p">:</span> <span class="n">PlainSerializedSecretStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes Username&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">PlainSerializedSecretStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Kubernetes Password&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../integrations-kubeflow/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Kubeflow" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Kubeflow
            </div>
          </div>
        </a>
      
      
        
        <a href="../integrations-label_studio/" class="md-footer__link md-footer__link--next" aria-label="Next: Label Studio" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Label Studio
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 ZenML GmbH  <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>