
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.64.0/integration_code_docs/integrations-databricks/">
      
      <link rel="icon" href="../../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-8.5.10">
    
    
      
        <title>Databricks - ZenML API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  analytics.page();
  }}();
</script>
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#databricks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ZenML API Reference" class="md-header__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Databricks
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZenML API Reference" class="md-nav__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZenML API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        ZenML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-alerter/" class="md-nav__link">
        Alerter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-annotators/" class="md-nav__link">
        Annotators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifact_stores/" class="md-nav__link">
        Artifact Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client_lazy_loader/" class="md-nav__link">
        Client Lazy Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-code_repositories/" class="md-nav__link">
        Code Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-config/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-console/" class="md-nav__link">
        Console
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-container_registries/" class="md-nav__link">
        Container Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-data_validators/" class="md-nav__link">
        Data Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-entrypoints/" class="md-nav__link">
        Entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-enums/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_hub/" class="md-nav__link">
        Event Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_sources/" class="md-nav__link">
        Event Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-experiment_trackers/" class="md-nav__link">
        Experiment Trackers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-feature_stores/" class="md-nav__link">
        Feature Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-image_builders/" class="md-nav__link">
        Image Builders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-lineage_graph/" class="md-nav__link">
        Lineage Graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logger/" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-materializers/" class="md-nav__link">
        Materializers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_deployers/" class="md-nav__link">
        Model Deployers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_registries/" class="md-nav__link">
        Model Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-new/" class="md-nav__link">
        New
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-orchestrators/" class="md-nav__link">
        Orchestrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-post_execution/" class="md-nav__link">
        Post Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-secret/" class="md-nav__link">
        Secret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-service_connectors/" class="md-nav__link">
        Service Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-stack/" class="md-nav__link">
        Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-stack_deployments/" class="md-nav__link">
        Stack Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-step_operators/" class="md-nav__link">
        Step Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-steps/" class="md-nav__link">
        Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_server/" class="md-nav__link">
        Zen Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_stores/" class="md-nav__link">
        Zen Stores
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Integration code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Integration code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-argilla/" class="md-nav__link">
        Argilla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bentoml/" class="md-nav__link">
        Bentoml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bitbucket/" class="md-nav__link">
        Bitbucket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-comet/" class="md-nav__link">
        Comet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Databricks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Databricks
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.databricks" class="md-nav__link">
    databricks
  </a>
  
    <nav class="md-nav" aria-label="databricks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.DatabricksIntegration" class="md-nav__link">
    DatabricksIntegration
  </a>
  
    <nav class="md-nav" aria-label="DatabricksIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.DatabricksIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor" class="md-nav__link">
    databricks_model_deployer_flavor
  </a>
  
    <nav class="md-nav" aria-label="databricks_model_deployer_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksBaseConfig" class="md-nav__link">
    DatabricksBaseConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerConfig" class="md-nav__link">
    DatabricksModelDeployerConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor" class="md-nav__link">
    DatabricksModelDeployerFlavor
  </a>
  
    <nav class="md-nav" aria-label="DatabricksModelDeployerFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor" class="md-nav__link">
    databricks_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="databricks_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksAvailabilityType" class="md-nav__link">
    DatabricksAvailabilityType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig" class="md-nav__link">
    DatabricksOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="DatabricksOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig.is_local" class="md-nav__link">
    is_local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor" class="md-nav__link">
    DatabricksOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="DatabricksOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorSettings" class="md-nav__link">
    DatabricksOrchestratorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers" class="md-nav__link">
    model_deployers
  </a>
  
    <nav class="md-nav" aria-label="model_deployers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer" class="md-nav__link">
    databricks_model_deployer
  </a>
  
    <nav class="md-nav" aria-label="databricks_model_deployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer" class="md-nav__link">
    DatabricksModelDeployer
  </a>
  
    <nav class="md-nav" aria-label="DatabricksModelDeployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR" class="md-nav__link">
    FLAVOR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.get_model_server_info" class="md-nav__link">
    get_model_server_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_delete_model" class="md-nav__link">
    perform_delete_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_deploy_model" class="md-nav__link">
    perform_deploy_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_start_model" class="md-nav__link">
    perform_start_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_stop_model" class="md-nav__link">
    perform_stop_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator" class="md-nav__link">
    databricks_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="databricks_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator" class="md-nav__link">
    DatabricksOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="DatabricksOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.pipeline_directory" class="md-nav__link">
    pipeline_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.root_directory" class="md-nav__link">
    root_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.get_pipeline_run_metadata" class="md-nav__link">
    get_pipeline_run_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.prepare_or_run_pipeline--how-it-works" class="md-nav__link">
    How it works:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.setup_credentials" class="md-nav__link">
    setup_credentials()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config" class="md-nav__link">
    databricks_orchestrator_entrypoint_config
  </a>
  
    <nav class="md-nav" aria-label="databricks_orchestrator_entrypoint_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration" class="md-nav__link">
    DatabricksEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="DatabricksEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.get_entrypoint_arguments" class="md-nav__link">
    get_entrypoint_arguments()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.get_entrypoint_options" class="md-nav__link">
    get_entrypoint_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services" class="md-nav__link">
    services
  </a>
  
    <nav class="md-nav" aria-label="services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment" class="md-nav__link">
    databricks_deployment
  </a>
  
    <nav class="md-nav" aria-label="databricks_deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentConfig" class="md-nav__link">
    DatabricksDeploymentConfig
  </a>
  
    <nav class="md-nav" aria-label="DatabricksDeploymentConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentConfig.get_databricks_deployment_labels" class="md-nav__link">
    get_databricks_deployment_labels()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService" class="md-nav__link">
    DatabricksDeploymentService
  </a>
  
    <nav class="md-nav" aria-label="DatabricksDeploymentService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.databricks_client" class="md-nav__link">
    databricks_client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.databricks_endpoint" class="md-nav__link">
    databricks_endpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.prediction_url" class="md-nav__link">
    prediction_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.check_status" class="md-nav__link">
    check_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.deprovision" class="md-nav__link">
    deprovision()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.get_client_id_and_secret" class="md-nav__link">
    get_client_id_and_secret()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.get_logs" class="md-nav__link">
    get_logs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.predict" class="md-nav__link">
    predict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.provision" class="md-nav__link">
    provision()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksServiceStatus" class="md-nav__link">
    DatabricksServiceStatus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils.databricks_utils" class="md-nav__link">
    databricks_utils
  </a>
  
    <nav class="md-nav" aria-label="databricks_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils.databricks_utils.convert_step_to_task" class="md-nav__link">
    convert_step_to_task()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils.databricks_utils.sanitize_labels" class="md-nav__link">
    sanitize_labels()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-deepchecks/" class="md-nav__link">
        Deepchecks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-discord/" class="md-nav__link">
        Discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-evidently/" class="md-nav__link">
        Evidently
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-facets/" class="md-nav__link">
        Facets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gcp/" class="md-nav__link">
        Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gitlab/" class="md-nav__link">
        Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-great_expectations/" class="md-nav__link">
        Great Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-huggingface/" class="md-nav__link">
        Huggingface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-hyperai/" class="md-nav__link">
        Hyperai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-integration/" class="md-nav__link">
        Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kaniko/" class="md-nav__link">
        Kaniko
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kubeflow/" class="md-nav__link">
        Kubeflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-label_studio/" class="md-nav__link">
        Label Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-langchain/" class="md-nav__link">
        Langchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-llama_index/" class="md-nav__link">
        Llama Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-mlflow/" class="md-nav__link">
        Mlflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neptune/" class="md-nav__link">
        Neptune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neural_prophet/" class="md-nav__link">
        Neural Prophet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-openai/" class="md-nav__link">
        Openai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pigeon/" class="md-nav__link">
        Pigeon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pillow/" class="md-nav__link">
        Pillow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-polars/" class="md-nav__link">
        Polars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-prodigy/" class="md-nav__link">
        Prodigy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pycaret/" class="md-nav__link">
        Pycaret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch_lightning/" class="md-nav__link">
        Pytorch Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-scipy/" class="md-nav__link">
        Scipy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-seldon/" class="md-nav__link">
        Seldon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-sklearn/" class="md-nav__link">
        Sklearn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot/" class="md-nav__link">
        Skypilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_aws/" class="md-nav__link">
        Skypilot Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_azure/" class="md-nav__link">
        Skypilot Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_gcp/" class="md-nav__link">
        Skypilot Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_lambda/" class="md-nav__link">
        Skypilot Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tekton/" class="md-nav__link">
        Tekton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorboard/" class="md-nav__link">
        Tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-wandb/" class="md-nav__link">
        Wandb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-whylogs/" class="md-nav__link">
        Whylogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-xgboost/" class="md-nav__link">
        Xgboost
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.databricks" class="md-nav__link">
    databricks
  </a>
  
    <nav class="md-nav" aria-label="databricks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.DatabricksIntegration" class="md-nav__link">
    DatabricksIntegration
  </a>
  
    <nav class="md-nav" aria-label="DatabricksIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.DatabricksIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor" class="md-nav__link">
    databricks_model_deployer_flavor
  </a>
  
    <nav class="md-nav" aria-label="databricks_model_deployer_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksBaseConfig" class="md-nav__link">
    DatabricksBaseConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerConfig" class="md-nav__link">
    DatabricksModelDeployerConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor" class="md-nav__link">
    DatabricksModelDeployerFlavor
  </a>
  
    <nav class="md-nav" aria-label="DatabricksModelDeployerFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor" class="md-nav__link">
    databricks_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="databricks_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksAvailabilityType" class="md-nav__link">
    DatabricksAvailabilityType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig" class="md-nav__link">
    DatabricksOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="DatabricksOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig.is_local" class="md-nav__link">
    is_local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor" class="md-nav__link">
    DatabricksOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="DatabricksOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorSettings" class="md-nav__link">
    DatabricksOrchestratorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers" class="md-nav__link">
    model_deployers
  </a>
  
    <nav class="md-nav" aria-label="model_deployers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer" class="md-nav__link">
    databricks_model_deployer
  </a>
  
    <nav class="md-nav" aria-label="databricks_model_deployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer" class="md-nav__link">
    DatabricksModelDeployer
  </a>
  
    <nav class="md-nav" aria-label="DatabricksModelDeployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR" class="md-nav__link">
    FLAVOR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.get_model_server_info" class="md-nav__link">
    get_model_server_info()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_delete_model" class="md-nav__link">
    perform_delete_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_deploy_model" class="md-nav__link">
    perform_deploy_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_start_model" class="md-nav__link">
    perform_start_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_stop_model" class="md-nav__link">
    perform_stop_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator" class="md-nav__link">
    databricks_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="databricks_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator" class="md-nav__link">
    DatabricksOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="DatabricksOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.pipeline_directory" class="md-nav__link">
    pipeline_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.root_directory" class="md-nav__link">
    root_directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.get_pipeline_run_metadata" class="md-nav__link">
    get_pipeline_run_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.prepare_or_run_pipeline--how-it-works" class="md-nav__link">
    How it works:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.setup_credentials" class="md-nav__link">
    setup_credentials()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config" class="md-nav__link">
    databricks_orchestrator_entrypoint_config
  </a>
  
    <nav class="md-nav" aria-label="databricks_orchestrator_entrypoint_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration" class="md-nav__link">
    DatabricksEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="DatabricksEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.get_entrypoint_arguments" class="md-nav__link">
    get_entrypoint_arguments()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.get_entrypoint_options" class="md-nav__link">
    get_entrypoint_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services" class="md-nav__link">
    services
  </a>
  
    <nav class="md-nav" aria-label="services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment" class="md-nav__link">
    databricks_deployment
  </a>
  
    <nav class="md-nav" aria-label="databricks_deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentConfig" class="md-nav__link">
    DatabricksDeploymentConfig
  </a>
  
    <nav class="md-nav" aria-label="DatabricksDeploymentConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentConfig.get_databricks_deployment_labels" class="md-nav__link">
    get_databricks_deployment_labels()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService" class="md-nav__link">
    DatabricksDeploymentService
  </a>
  
    <nav class="md-nav" aria-label="DatabricksDeploymentService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.databricks_client" class="md-nav__link">
    databricks_client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.databricks_endpoint" class="md-nav__link">
    databricks_endpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.prediction_url" class="md-nav__link">
    prediction_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.check_status" class="md-nav__link">
    check_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.deprovision" class="md-nav__link">
    deprovision()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.get_client_id_and_secret" class="md-nav__link">
    get_client_id_and_secret()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.get_logs" class="md-nav__link">
    get_logs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.predict" class="md-nav__link">
    predict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.provision" class="md-nav__link">
    provision()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.services.databricks_deployment.DatabricksServiceStatus" class="md-nav__link">
    DatabricksServiceStatus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils.databricks_utils" class="md-nav__link">
    databricks_utils
  </a>
  
    <nav class="md-nav" aria-label="databricks_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils.databricks_utils.convert_step_to_task" class="md-nav__link">
    convert_step_to_task()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.databricks.utils.databricks_utils.sanitize_labels" class="md-nav__link">
    sanitize_labels()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/zenml-io/zenml/docs/integration_code_docs/integrations-databricks.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="databricks">Databricks</h1>


  <div class="doc doc-object doc-module">



<h2 id="zenml.integrations.databricks" class="doc doc-heading">
        <code>zenml.integrations.databricks</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents first">

      <p>Initialization of the Databricks integration for ZenML.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h3 id="zenml.integrations.databricks.DatabricksIntegration" class="doc doc-heading">
        <code>
DatabricksIntegration            (<a class="autorefs autorefs-internal" title="zenml.integrations.integration.Integration" href="../integrations-integration/#zenml.integrations.integration.Integration">Integration</a>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>Definition of Databricks Integration for ZenML.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksIntegration</span><span class="p">(</span><span class="n">Integration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Definition of Databricks Integration for ZenML.&quot;&quot;&quot;</span>

    <span class="n">NAME</span> <span class="o">=</span> <span class="n">DATABRICKS</span>
    <span class="n">REQUIREMENTS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;databricks-sdk==0.28.0&quot;</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the Databricks integration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of stack component flavors for this integration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.flavors</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">DatabricksOrchestratorFlavor</span><span class="p">,</span>
            <span class="n">DatabricksModelDeployerFlavor</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">DatabricksOrchestratorFlavor</span><span class="p">,</span>
            <span class="n">DatabricksModelDeployerFlavor</span><span class="p">,</span>
        <span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h4 id="zenml.integrations.databricks.DatabricksIntegration.flavors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">flavors</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Declare the stack component flavors for the Databricks integration.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[Type[zenml.stack.flavor.Flavor]]</code></td>
      <td><p>List of stack component flavors for this integration.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the Databricks integration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of stack component flavors for this integration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.flavors</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">DatabricksOrchestratorFlavor</span><span class="p">,</span>
        <span class="n">DatabricksModelDeployerFlavor</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span>
        <span class="n">DatabricksOrchestratorFlavor</span><span class="p">,</span>
        <span class="n">DatabricksModelDeployerFlavor</span><span class="p">,</span>
    <span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.databricks.flavors" class="doc doc-heading">
        <code>flavors</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Databricks integration flavors.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor" class="doc doc-heading">
        <code>databricks_model_deployer_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>Databricks model deployer flavor.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksBaseConfig" class="doc doc-heading">
        <code>
DatabricksBaseConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks Inference Endpoint configuration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_model_deployer_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksBaseConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks Inference Endpoint configuration.&quot;&quot;&quot;</span>

    <span class="n">workload_size</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">scale_to_zero_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">env_vars</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">workload_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">endpoint_secret_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerConfig" class="doc doc-heading">
        <code>
DatabricksModelDeployerConfig            (<a class="autorefs autorefs-internal" title="zenml.model_deployers.base_model_deployer.BaseModelDeployerConfig" href="../../core_code_docs/core-model_deployers/#zenml.model_deployers.base_model_deployer.BaseModelDeployerConfig">BaseModelDeployerConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Configuration for the Databricks model deployer.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>host</code></td>
        <td><code>str</code></td>
        <td><p>Databricks host.</p></td>
      </tr>
      <tr>
        <td><code>secret_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Secret name to use for authentication.</p></td>
      </tr>
      <tr>
        <td><code>client_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Databricks client id.</p></td>
      </tr>
      <tr>
        <td><code>client_secret</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Databricks client secret.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_model_deployer_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksModelDeployerConfig</span><span class="p">(</span><span class="n">BaseModelDeployerConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for the Databricks model deployer.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        host: Databricks host.</span>
<span class="sd">        secret_name: Secret name to use for authentication.</span>
<span class="sd">        client_id: Databricks client id.</span>
<span class="sd">        client_secret: Databricks client secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">secret_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">client_secret</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">



























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor" class="doc doc-heading">
        <code>
DatabricksModelDeployerFlavor            (<a class="autorefs autorefs-internal" title="zenml.model_deployers.base_model_deployer.BaseModelDeployerFlavor" href="../../core_code_docs/core-model_deployers/#zenml.model_deployers.base_model_deployer.BaseModelDeployerFlavor">BaseModelDeployerFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks Endpoint model deployer flavor.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_model_deployer_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksModelDeployerFlavor</span><span class="p">(</span><span class="n">BaseModelDeployerFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks Endpoint model deployer flavor.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DATABRICKS_MODEL_DEPLOYER_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/model_deployer/databricks.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksModelDeployerConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns `DatabricksModelDeployerConfig` config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatabricksModelDeployerConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;DatabricksModelDeployer&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class for this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.model_deployers.databricks_model_deployer</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">DatabricksModelDeployer</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">DatabricksModelDeployer</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">databricks</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">databricks_model_deployer_flavor</span><span class="o">.</span><span class="n">DatabricksModelDeployerConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns <code>DatabricksModelDeployerConfig</code> config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksModelDeployer</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class for this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[DatabricksModelDeployer]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor" class="doc doc-heading">
        <code>databricks_orchestrator_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>Databricks orchestrator base config and settings.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksAvailabilityType" class="doc doc-heading">
        <code>
DatabricksAvailabilityType            (<a class="autorefs autorefs-internal" title="zenml.utils.enum_utils.StrEnum" href="../../core_code_docs/core-utils/#zenml.utils.enum_utils.StrEnum">StrEnum</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks availability type.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksAvailabilityType</span><span class="p">(</span><span class="n">StrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks availability type.&quot;&quot;&quot;</span>

    <span class="n">ON_DEMAND</span> <span class="o">=</span> <span class="s2">&quot;ON_DEMAND&quot;</span>
    <span class="n">SPOT</span> <span class="o">=</span> <span class="s2">&quot;SPOT&quot;</span>
    <span class="n">SPOT_WITH_FALLBACK</span> <span class="o">=</span> <span class="s2">&quot;SPOT_WITH_FALLBACK&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig" class="doc doc-heading">
        <code>
DatabricksOrchestratorConfig            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig">BaseOrchestratorConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorSettings" href="#zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorSettings">DatabricksOrchestratorSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks orchestrator base config.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>host</code></td>
        <td><code>str</code></td>
        <td><p>Databricks host.</p></td>
      </tr>
      <tr>
        <td><code>client_id</code></td>
        <td><code>str</code></td>
        <td><p>Databricks client id.</p></td>
      </tr>
      <tr>
        <td><code>client_secret</code></td>
        <td><code>str</code></td>
        <td><p>Databricks client secret.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksOrchestratorConfig</span><span class="p">(</span>
    <span class="n">BaseOrchestratorConfig</span><span class="p">,</span> <span class="n">DatabricksOrchestratorSettings</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks orchestrator base config.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        host: Databricks host.</span>
<span class="sd">        client_id: Databricks client id.</span>
<span class="sd">        client_secret: Databricks client secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">client_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">client_secret</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_local</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running locally.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a local component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running remotely.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a remote component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig.is_local" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_local</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running locally.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a local component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig.is_remote" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_remote</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running remotely.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a remote component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor" class="doc doc-heading">
        <code>
DatabricksOrchestratorFlavor            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor">BaseOrchestratorFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks orchestrator flavor.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksOrchestratorFlavor</span><span class="p">(</span><span class="n">BaseOrchestratorFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks orchestrator flavor.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DATABRICKS_ORCHESTRATOR_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/orchestrator/databricks.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksOrchestratorConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns `KubeflowOrchestratorConfig` config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">                The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatabricksOrchestratorConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;DatabricksOrchestrator&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class for this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.orchestrators</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">DatabricksOrchestrator</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">DatabricksOrchestrator</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">databricks</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">databricks_orchestrator_flavor</span><span class="o">.</span><span class="n">DatabricksOrchestratorConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns <code>KubeflowOrchestratorConfig</code> config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksOrchestrator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class for this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[DatabricksOrchestrator]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorSettings" class="doc doc-heading">
        <code>
DatabricksOrchestratorSettings            (<a class="autorefs autorefs-internal" title="zenml.config.base_settings.BaseSettings" href="../../core_code_docs/core-config/#zenml.config.base_settings.BaseSettings">BaseSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks orchestrator base settings.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>spark_version</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Spark version.</p></td>
      </tr>
      <tr>
        <td><code>num_workers</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>Number of workers.</p></td>
      </tr>
      <tr>
        <td><code>node_type_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Node type id.</p></td>
      </tr>
      <tr>
        <td><code>policy_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Policy id.</p></td>
      </tr>
      <tr>
        <td><code>autotermination_minutes</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>Autotermination minutes.</p></td>
      </tr>
      <tr>
        <td><code>autoscale</code></td>
        <td><code>Tuple[int, int]</code></td>
        <td><p>Autoscale.</p></td>
      </tr>
      <tr>
        <td><code>single_user_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Single user name.</p></td>
      </tr>
      <tr>
        <td><code>spark_conf</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Spark configuration.</p></td>
      </tr>
      <tr>
        <td><code>spark_env_vars</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Spark environment variables.</p></td>
      </tr>
      <tr>
        <td><code>schedule_timezone</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Schedule timezone.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/flavors/databricks_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksOrchestratorSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks orchestrator base settings.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        spark_version: Spark version.</span>
<span class="sd">        num_workers: Number of workers.</span>
<span class="sd">        node_type_id: Node type id.</span>
<span class="sd">        policy_id: Policy id.</span>
<span class="sd">        autotermination_minutes: Autotermination minutes.</span>
<span class="sd">        autoscale: Autoscale.</span>
<span class="sd">        single_user_name: Single user name.</span>
<span class="sd">        spark_conf: Spark configuration.</span>
<span class="sd">        spark_env_vars: Spark environment variables.</span>
<span class="sd">        schedule_timezone: Schedule timezone.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Resources</span>
    <span class="n">spark_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">num_workers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">node_type_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">policy_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">autotermination_minutes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">autoscale</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">single_user_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">spark_conf</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">spark_env_vars</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">schedule_timezone</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">availability_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DatabricksAvailabilityType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">



























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.databricks.model_deployers" class="doc doc-heading">
        <code>model_deployers</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialization of the Databricks model deployers.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer" class="doc doc-heading">
        <code>databricks_model_deployer</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the Databricks Model Deployer.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer" class="doc doc-heading">
        <code>
DatabricksModelDeployer            (<a class="autorefs autorefs-internal" title="zenml.model_deployers.base_model_deployer.BaseModelDeployer" href="../../core_code_docs/core-model_deployers/#zenml.model_deployers.base_model_deployer.BaseModelDeployer">BaseModelDeployer</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks endpoint model deployer.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksModelDeployer</span><span class="p">(</span><span class="n">BaseModelDeployer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks endpoint model deployer.&quot;&quot;&quot;</span>

    <span class="n">NAME</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Databricks&quot;</span>
    <span class="n">FLAVOR</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModelDeployerFlavor</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">DatabricksModelDeployerFlavor</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatabricksModelDeployerConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Config class for the Databricks Model deployer settings class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">DatabricksModelDeployerConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StackValidator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates the stack.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A validator that checks that the stack contains a remote artifact</span>
<span class="sd">            store.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_validate_if_secret_or_token_is_present</span><span class="p">(</span>
            <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Check if client id and client secret or secret name is present in the stack.</span>

<span class="sd">            Args:</span>
<span class="sd">                stack: The stack to validate.</span>

<span class="sd">            Returns:</span>
<span class="sd">                A tuple with a boolean indicating whether the stack is valid</span>
<span class="sd">                and a message describing the validation result.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_secret</span><span class="p">)</span>
                <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">secret_name</span>
            <span class="p">),</span> <span class="p">(</span>
                <span class="s2">&quot;The Databricks model deployer requires either a secret name&quot;</span>
                <span class="s2">&quot; or a client id and client secret to be present in the stack.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">StackValidator</span><span class="p">(</span>
            <span class="n">custom_validation_function</span><span class="o">=</span><span class="n">_validate_if_secret_or_token_is_present</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_new_service</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DatabricksDeploymentConfig</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatabricksDeploymentService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new DatabricksDeploymentService.</span>

<span class="sd">        Args:</span>
<span class="sd">            id: the UUID of the model to be deployed with Databricks model deployer.</span>
<span class="sd">            timeout: the timeout in seconds to wait for the Databricks inference endpoint</span>
<span class="sd">                to be provisioned and successfully started or updated.</span>
<span class="sd">            config: the configuration of the model to be deployed with Databricks model deployer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The DatabricksDeploymentConfig object that can be used to interact</span>
<span class="sd">            with the Databricks inference endpoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create a new service for the new model</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">DatabricksDeploymentService</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Creating an artifact </span><span class="si">{</span><span class="n">DATABRICKS_SERVICE_ARTIFACT</span><span class="si">}</span><span class="s2"> with service instance attached as metadata.&quot;</span>
            <span class="s2">&quot; If there&#39;s an active pipeline and/or model this artifact will be associated with it.&quot;</span>
        <span class="p">)</span>
        <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">service</span>

    <span class="k">def</span> <span class="nf">_clean_up_existing_service</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">existing_service</span><span class="p">:</span> <span class="n">DatabricksDeploymentService</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop existing services.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout: the timeout in seconds to wait for the Databricks</span>
<span class="sd">                deployment to be stopped.</span>
<span class="sd">            force: if True, force the service to stop</span>
<span class="sd">            existing_service: Existing Databricks deployment service</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># stop the older service</span>
        <span class="n">existing_service</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">perform_deploy_model</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new Databricks deployment service or update an existing one.</span>

<span class="sd">        This should serve the supplied model and deployment configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            id: the UUID of the model to be deployed with Databricks.</span>
<span class="sd">            config: the configuration of the model to be deployed with Databricks.</span>
<span class="sd">            timeout: the timeout in seconds to wait for the Databricks endpoint</span>
<span class="sd">                to be provisioned and successfully started or updated. If set</span>
<span class="sd">                to 0, the method will return immediately after the Databricks</span>
<span class="sd">                server is provisioned, without waiting for it to fully start.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The ZenML Databricks deployment service object that can be used to</span>
<span class="sd">            interact with the remote Databricks inference endpoint server.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">track_handler</span><span class="p">(</span><span class="n">AnalyticsEvent</span><span class="o">.</span><span class="n">MODEL_DEPLOYED</span><span class="p">)</span> <span class="k">as</span> <span class="n">analytics_handler</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">DatabricksDeploymentConfig</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
            <span class="c1"># create a new DatabricksDeploymentService instance</span>
            <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_new_service</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Creating a new Databricks inference endpoint service: </span><span class="si">{</span><span class="n">service</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="c1"># Add telemetry with metadata that gets the stack metadata and</span>
            <span class="c1"># differentiates between pure model and custom code deployments</span>
            <span class="n">stack</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span>
            <span class="n">stack_metadata</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">component_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">component</span><span class="o">.</span><span class="n">flavor</span>
                <span class="k">for</span> <span class="n">component_type</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="n">analytics_handler</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;store_type&quot;</span><span class="p">:</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="o">**</span><span class="n">stack_metadata</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="n">service</span>

    <span class="k">def</span> <span class="nf">perform_stop_model</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to stop a model server.</span>

<span class="sd">        Args:</span>
<span class="sd">            service: The service to stop.</span>
<span class="sd">            timeout: Timeout in seconds to wait for the service to stop.</span>
<span class="sd">            force: If True, force the service to stop.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The stopped service.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">service</span>

    <span class="k">def</span> <span class="nf">perform_start_model</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseService</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to start a model server.</span>

<span class="sd">        Args:</span>
<span class="sd">            service: The service to start.</span>
<span class="sd">            timeout: Timeout in seconds to wait for the service to start.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The started service.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">service</span>

    <span class="k">def</span> <span class="nf">perform_delete_model</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to delete all configuration of a model server.</span>

<span class="sd">        Args:</span>
<span class="sd">            service: The service to delete.</span>
<span class="sd">            timeout: Timeout in seconds to wait for the service to stop.</span>
<span class="sd">            force: If True, force the service to stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">DatabricksDeploymentService</span><span class="p">,</span> <span class="n">service</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clean_up_existing_service</span><span class="p">(</span>
            <span class="n">existing_service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_model_server_info</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
        <span class="n">service_instance</span><span class="p">:</span> <span class="s2">&quot;DatabricksDeploymentService&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return implementation specific information that might be relevant to the user.</span>

<span class="sd">        Args:</span>
<span class="sd">            service_instance: Instance of a DatabricksDeploymentService</span>

<span class="sd">        Returns:</span>
<span class="sd">            Model server information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;PREDICTION_URL&quot;</span><span class="p">:</span> <span class="n">service_instance</span><span class="o">.</span><span class="n">get_prediction_url</span><span class="p">(),</span>
            <span class="s2">&quot;HEALTH_CHECK_URL&quot;</span><span class="p">:</span> <span class="n">service_instance</span><span class="o">.</span><span class="n">get_healthcheck_url</span><span class="p">(),</span>
        <span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">DatabricksModelDeployerConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Config class for the Databricks Model deployer settings class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DatabricksModelDeployerConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">stack_validator</span><span class="o">.</span><span class="n">StackValidator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Validates the stack.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.stack.stack_validator.StackValidator]</code></td>
      <td><p>A validator that checks that the stack contains a remote artifact
store.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>




  <div class="doc doc-object doc-class">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR" class="doc doc-heading">
        <code>
FLAVOR            (<a class="autorefs autorefs-internal" title="zenml.model_deployers.base_model_deployer.BaseModelDeployerFlavor" href="../../core_code_docs/core-model_deployers/#zenml.model_deployers.base_model_deployer.BaseModelDeployerFlavor">BaseModelDeployerFlavor</a>)
        </code>



</h6>

    <div class="doc doc-contents ">

      <p>Databricks Endpoint model deployer flavor.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksModelDeployerFlavor</span><span class="p">(</span><span class="n">BaseModelDeployerFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks Endpoint model deployer flavor.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DATABRICKS_MODEL_DEPLOYER_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/model_deployer/databricks.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksModelDeployerConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns `DatabricksModelDeployerConfig` config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatabricksModelDeployerConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;DatabricksModelDeployer&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class for this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.model_deployers.databricks_model_deployer</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">DatabricksModelDeployer</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">DatabricksModelDeployer</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h7 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">databricks</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">databricks_model_deployer_flavor</span><span class="o">.</span><span class="n">DatabricksModelDeployerConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h7>

    <div class="doc doc-contents ">

      <p>Returns <code>DatabricksModelDeployerConfig</code> config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksModelDeployerConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h7 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h7>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h7 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksModelDeployer</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h7>

    <div class="doc doc-contents ">

      <p>Implementation class for this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[DatabricksModelDeployer]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h7 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h7>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h7 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h7>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h7 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.FLAVOR.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h7>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>





  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.get_model_server_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_model_server_info</span><span class="p">(</span><span class="n">service_instance</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Return implementation specific information that might be relevant to the user.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>service_instance</code></td>
        <td><code>DatabricksDeploymentService</code></td>
        <td><p>Instance of a DatabricksDeploymentService</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Optional[str]]</code></td>
      <td><p>Model server information.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_model_server_info</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span>
    <span class="n">service_instance</span><span class="p">:</span> <span class="s2">&quot;DatabricksDeploymentService&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return implementation specific information that might be relevant to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_instance: Instance of a DatabricksDeploymentService</span>

<span class="sd">    Returns:</span>
<span class="sd">        Model server information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;PREDICTION_URL&quot;</span><span class="p">:</span> <span class="n">service_instance</span><span class="o">.</span><span class="n">get_prediction_url</span><span class="p">(),</span>
        <span class="s2">&quot;HEALTH_CHECK_URL&quot;</span><span class="p">:</span> <span class="n">service_instance</span><span class="o">.</span><span class="n">get_healthcheck_url</span><span class="p">(),</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_delete_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">perform_delete_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Method to delete all configuration of a model server.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>service</code></td>
        <td><code>BaseService</code></td>
        <td><p>The service to delete.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds to wait for the service to stop.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>bool</code></td>
        <td><p>If True, force the service to stop.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perform_delete_model</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method to delete all configuration of a model server.</span>

<span class="sd">    Args:</span>
<span class="sd">        service: The service to delete.</span>
<span class="sd">        timeout: Timeout in seconds to wait for the service to stop.</span>
<span class="sd">        force: If True, force the service to stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">DatabricksDeploymentService</span><span class="p">,</span> <span class="n">service</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clean_up_existing_service</span><span class="p">(</span>
        <span class="n">existing_service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_deploy_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">perform_deploy_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Create a new Databricks deployment service or update an existing one.</p>
<p>This should serve the supplied model and deployment configuration.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>UUID</code></td>
        <td><p>the UUID of the model to be deployed with Databricks.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>ServiceConfig</code></td>
        <td><p>the configuration of the model to be deployed with Databricks.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>the timeout in seconds to wait for the Databricks endpoint
to be provisioned and successfully started or updated. If set
to 0, the method will return immediately after the Databricks
server is provisioned, without waiting for it to fully start.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseService</code></td>
      <td><p>The ZenML Databricks deployment service object that can be used to
interact with the remote Databricks inference endpoint server.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perform_deploy_model</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">ServiceConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseService</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new Databricks deployment service or update an existing one.</span>

<span class="sd">    This should serve the supplied model and deployment configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        id: the UUID of the model to be deployed with Databricks.</span>
<span class="sd">        config: the configuration of the model to be deployed with Databricks.</span>
<span class="sd">        timeout: the timeout in seconds to wait for the Databricks endpoint</span>
<span class="sd">            to be provisioned and successfully started or updated. If set</span>
<span class="sd">            to 0, the method will return immediately after the Databricks</span>
<span class="sd">            server is provisioned, without waiting for it to fully start.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML Databricks deployment service object that can be used to</span>
<span class="sd">        interact with the remote Databricks inference endpoint server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">track_handler</span><span class="p">(</span><span class="n">AnalyticsEvent</span><span class="o">.</span><span class="n">MODEL_DEPLOYED</span><span class="p">)</span> <span class="k">as</span> <span class="n">analytics_handler</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">DatabricksDeploymentConfig</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="c1"># create a new DatabricksDeploymentService instance</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_new_service</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Creating a new Databricks inference endpoint service: </span><span class="si">{</span><span class="n">service</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="c1"># Add telemetry with metadata that gets the stack metadata and</span>
        <span class="c1"># differentiates between pure model and custom code deployments</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span>
        <span class="n">stack_metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">component_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">component</span><span class="o">.</span><span class="n">flavor</span>
            <span class="k">for</span> <span class="n">component_type</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">analytics_handler</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;store_type&quot;</span><span class="p">:</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="o">**</span><span class="n">stack_metadata</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">service</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_start_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">perform_start_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Method to start a model server.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>service</code></td>
        <td><code>BaseService</code></td>
        <td><p>The service to start.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds to wait for the service to start.</p></td>
        <td><code>300</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseService</code></td>
      <td><p>The started service.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perform_start_model</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseService</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method to start a model server.</span>

<span class="sd">    Args:</span>
<span class="sd">        service: The service to start.</span>
<span class="sd">        timeout: Timeout in seconds to wait for the service to start.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The started service.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">service</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.model_deployers.databricks_model_deployer.DatabricksModelDeployer.perform_stop_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">perform_stop_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Method to stop a model server.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>service</code></td>
        <td><code>BaseService</code></td>
        <td><p>The service to stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>timeout</code></td>
        <td><code>int</code></td>
        <td><p>Timeout in seconds to wait for the service to stop.</p></td>
        <td><code>300</code></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>bool</code></td>
        <td><p>If True, force the service to stop.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseService</code></td>
      <td><p>The stopped service.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/model_deployers/databricks_model_deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perform_stop_model</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">service</span><span class="p">:</span> <span class="n">BaseService</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_DEPLOYMENT_START_STOP_TIMEOUT</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseService</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method to stop a model server.</span>

<span class="sd">    Args:</span>
<span class="sd">        service: The service to stop.</span>
<span class="sd">        timeout: Timeout in seconds to wait for the service to stop.</span>
<span class="sd">        force: If True, force the service to stop.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The stopped service.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">service</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.databricks.orchestrators" class="doc doc-heading">
        <code>orchestrators</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialization of the Databricks ZenML orchestrator.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator" class="doc doc-heading">
        <code>databricks_orchestrator</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the Databricks orchestrator.</p>



  <div class="doc doc-children">















  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator" class="doc doc-heading">
        <code>
DatabricksOrchestrator            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.wheeled_orchestrator.WheeledOrchestrator" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.wheeled_orchestrator.WheeledOrchestrator">WheeledOrchestrator</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Base class for Orchestrator responsible for running pipelines remotely in a VM.</p>
<p>This orchestrator does not support running on a schedule.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksOrchestrator</span><span class="p">(</span><span class="n">WheeledOrchestrator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for Orchestrator responsible for running pipelines remotely in a VM.</span>

<span class="sd">    This orchestrator does not support running on a schedule.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># The default instance type to use if none is specified in settings</span>
    <span class="n">DEFAULT_INSTANCE_TYPE</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StackValidator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates the stack.</span>

<span class="sd">        In the remote case, checks that the stack contains a container registry,</span>
<span class="sd">        image builder and only remote components.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A `StackValidator` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_validate_remote_components</span><span class="p">(</span>
            <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">component</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The Databricks orchestrator runs pipelines remotely, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;but the &#39;</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> is &quot;</span>
                    <span class="s2">&quot;a local stack component and will not be available in &quot;</span>
                    <span class="s2">&quot;the Databricks step.</span><span class="se">\n</span><span class="s2">Please ensure that you always &quot;</span>
                    <span class="s2">&quot;use non-local stack components with the Databricks &quot;</span>
                    <span class="s2">&quot;orchestrator.&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">StackValidator</span><span class="p">(</span>
            <span class="n">custom_validation_function</span><span class="o">=</span><span class="n">_validate_remote_components</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_databricks_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatabricksClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a Databricks client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Databricks client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatabricksClient</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
            <span class="n">client_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
            <span class="n">client_secret</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_secret</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatabricksOrchestratorConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the `DatabricksOrchestratorConfig` config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">DatabricksOrchestratorConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">DatabricksOrchestratorSettings</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Settings class for the Databricks orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The settings class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatabricksOrchestratorSettings</span>

    <span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the active orchestrator run id.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If no run id exists. This happens when this method</span>
<span class="sd">                gets called while the orchestrator is not running a pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The orchestrator run id.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the run id cannot be read from the environment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_DATABRICKS_ORCHESTRATOR_RUN_ID</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_ZENML_DATABRICKS_ORCHESTRATOR_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">root_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Path to the root directory for all files concerning this orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path to the root directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">io_utils</span><span class="o">.</span><span class="n">get_global_config_directory</span><span class="p">(),</span>
            <span class="s2">&quot;databricks&quot;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns path to a directory in which the kubeflow pipeline files are stored.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path to the pipeline directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_directory</span><span class="p">,</span> <span class="s2">&quot;pipelines&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setup_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set up credentials for the orchestrator.&quot;&quot;&quot;</span>
        <span class="n">connector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">connector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">configure_local_client</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
        <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a wheel and uploads the pipeline to Databricks.</span>

<span class="sd">        This functions as an intermediary representation of the pipeline which</span>
<span class="sd">        is then deployed to the kubeflow pipelines instance.</span>

<span class="sd">        How it works:</span>
<span class="sd">        -------------</span>
<span class="sd">        Before this method is called the `prepare_pipeline_deployment()`</span>
<span class="sd">        method builds a docker image that contains the code for the</span>
<span class="sd">        pipeline, all steps the context around these files.</span>

<span class="sd">        Based on this docker image a callable is created which builds</span>
<span class="sd">        task for each step (`_construct_databricks_pipeline`).</span>
<span class="sd">        To do this the entrypoint of the docker image is configured to</span>
<span class="sd">        run the correct step within the docker image. The dependencies</span>
<span class="sd">        between these task are then also configured onto each</span>
<span class="sd">        task by pointing at the downstream steps.</span>

<span class="sd">        Args:</span>
<span class="sd">            deployment: The pipeline deployment to prepare or run.</span>
<span class="sd">            stack: The stack the pipeline will run on.</span>
<span class="sd">            environment: Environment variables to set in the orchestration</span>
<span class="sd">                environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the schedule is not set or if the cron expression</span>
<span class="sd">                is not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">DatabricksOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">catchup</span>
                <span class="ow">or</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">interval_second</span>
            <span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Databricks orchestrator only uses schedules with the &quot;</span>
                    <span class="s2">&quot;`cron_expression` property, with optional `start_time` and/or `end_time`. &quot;</span>
                    <span class="s2">&quot;All other properties are ignored.&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Property `cron_expression` must be set when passing &quot;</span>
                    <span class="s2">&quot;schedule to a Databricks orchestrator.&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span>
                <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">schedule_timezone</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Property `schedule_timezone` must be set when passing &quot;</span>
                    <span class="s2">&quot;`cron_expression` to a Databricks orchestrator.&quot;</span>
                    <span class="s2">&quot;Databricks orchestrator requires a Java Timezone ID to run the pipeline on schedule.&quot;</span>
                    <span class="s2">&quot;Please refer to https://docs.oracle.com/middleware/1221/wcs/tag-ref/MISC/TimeZones.html for more information.&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Get deployment id</span>
        <span class="n">deployment_id</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">id</span>

        <span class="c1"># Create a callable for future compilation into a dsl.Pipeline.</span>
        <span class="k">def</span> <span class="nf">_construct_databricks_pipeline</span><span class="p">(</span>
            <span class="n">zenml_project_wheel</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">job_cluster_key</span><span class="p">:</span> <span class="nb">str</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DatabricksTask</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Create a databrcks task for each step.</span>

<span class="sd">            This should contain the name of the step or task and configures the</span>
<span class="sd">            entrypoint of the task to run the step.</span>

<span class="sd">            Additionally, this gives each task information about its</span>
<span class="sd">            direct downstream steps.</span>

<span class="sd">            Args:</span>
<span class="sd">                zenml_project_wheel: The wheel package containing the ZenML</span>
<span class="sd">                    project.</span>
<span class="sd">                job_cluster_key: The ID of the Databricks job cluster.</span>

<span class="sd">            Returns:</span>
<span class="sd">                A list of Databricks tasks.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># The arguments are passed to configure the entrypoint of the</span>
                <span class="c1"># docker container when the step is called.</span>
                <span class="n">arguments</span> <span class="o">=</span> <span class="n">DatabricksEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
                    <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                    <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
                    <span class="n">wheel_package</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">package_name</span><span class="p">,</span>
                    <span class="n">databricks_job_id</span><span class="o">=</span><span class="n">DATABRICKS_JOB_ID_PARAMETER_REFERENCE</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="c1"># Find the upstream container ops of the current step and</span>
                <span class="c1"># configure the current container op to run after them</span>
                <span class="n">upstream_steps</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">upstream_step_name</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">for</span> <span class="n">upstream_step_name</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span>
                <span class="p">]</span>

                <span class="n">docker_settings</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docker_settings</span>
                <span class="n">docker_image_builder</span> <span class="o">=</span> <span class="n">PipelineDockerImageBuilder</span><span class="p">()</span>
                <span class="c1"># Gather the requirements files</span>
                <span class="n">requirements_files</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">docker_image_builder</span><span class="o">.</span><span class="n">gather_requirements_files</span><span class="p">(</span>
                        <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
                        <span class="n">stack</span><span class="o">=</span><span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span><span class="p">,</span>
                        <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="c1"># Extract and clean the requirements</span>
                <span class="n">requirements</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
                        <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">requirements_files</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="c1"># Remove empty items and duplicates</span>
                <span class="n">requirements</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">requirements</span><span class="p">)))</span>

                <span class="n">task</span> <span class="o">=</span> <span class="n">convert_step_to_task</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">ZENML_STEP_DEFAULT_ENTRYPOINT_COMMAND</span><span class="p">,</span>
                    <span class="n">arguments</span><span class="p">,</span>
                    <span class="n">clean_requirements</span><span class="p">(</span><span class="n">requirements</span><span class="p">),</span>
                    <span class="n">depends_on</span><span class="o">=</span><span class="n">upstream_steps</span><span class="p">,</span>
                    <span class="n">zenml_project_wheel</span><span class="o">=</span><span class="n">zenml_project_wheel</span><span class="p">,</span>
                    <span class="n">job_cluster_key</span><span class="o">=</span><span class="n">job_cluster_key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tasks</span>

        <span class="c1"># Get the orchestrator run name</span>
        <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
        <span class="p">)</span>
        <span class="c1"># Get a filepath to use to save the finished yaml to</span>
        <span class="n">fileio</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">)</span>
        <span class="n">pipeline_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orchestrator_run_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Copy the repository to a temporary directory and add a setup.py file</span>
        <span class="n">repository_temp_dir</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copy_repository_to_temp_dir_and_add_setup_py</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Create a wheel for the package in the temporary directory</span>
        <span class="n">wheel_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_wheel</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">=</span><span class="n">repository_temp_dir</span><span class="p">)</span>

        <span class="n">databricks_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_databricks_client</span><span class="p">()</span>

        <span class="c1"># Create an empty folder in a volume.</span>
        <span class="n">deployment_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span>
        <span class="p">)</span>
        <span class="n">databricks_directory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DATABRICKS_WHEELS_DIRECTORY_PREFIX</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">deployment_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">orchestrator_run_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">databricks_wheel_path</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">databricks_directory</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">wheel_path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="n">databricks_client</span><span class="o">.</span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">mkdirs</span><span class="p">(</span><span class="n">databricks_directory</span><span class="p">)</span>
        <span class="n">databricks_client</span><span class="o">.</span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">cp</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DATABRICKS_LOCAL_FILESYSTEM_PREFIX</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">wheel_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">databricks_wheel_path</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Construct the env variables for the pipeline</span>
        <span class="n">env_vars</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">spark_env_vars</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">spark_env_vars</span>
        <span class="k">if</span> <span class="n">spark_env_vars</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">spark_env_vars</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">env_vars</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">env_vars</span><span class="p">[</span><span class="n">ENV_ZENML_CUSTOM_SOURCE_ROOT</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DATABRICKS_ZENML_DEFAULT_CUSTOM_REPOSITORY_PATH</span>
        <span class="p">)</span>

        <span class="n">fileio</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">repository_temp_dir</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Writing Databricks workflow definition to `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span>
            <span class="n">pipeline_file_path</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># using the databricks client uploads the pipeline to databricks</span>
        <span class="n">job_cluster_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sanitize_name</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upload_and_run_pipeline</span><span class="p">(</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
            <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
            <span class="n">tasks</span><span class="o">=</span><span class="n">_construct_databricks_pipeline</span><span class="p">(</span>
                <span class="n">databricks_wheel_path</span><span class="p">,</span> <span class="n">job_cluster_key</span>
            <span class="p">),</span>
            <span class="n">env_vars</span><span class="o">=</span><span class="n">env_vars</span><span class="p">,</span>
            <span class="n">job_cluster_key</span><span class="o">=</span><span class="n">job_cluster_key</span><span class="p">,</span>
            <span class="n">schedule</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_upload_and_run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">DatabricksOrchestratorSettings</span><span class="p">,</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">DatabricksTask</span><span class="p">],</span>
        <span class="n">env_vars</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">job_cluster_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schedule</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ScheduleResponse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads and run the pipeline on the Databricks jobs.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_name: The name of the pipeline.</span>
<span class="sd">            tasks: The list of tasks to run.</span>
<span class="sd">            env_vars: The environment variables.</span>
<span class="sd">            job_cluster_key: The ID of the Databricks job cluster.</span>
<span class="sd">            schedule: The schedule to run the pipeline</span>
<span class="sd">            settings: The settings for the Databricks orchestrator.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the `Job Compute` policy is not found.</span>
<span class="sd">            ValueError: If the `schedule_timezone` is not set when passing</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">databricks_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_databricks_client</span><span class="p">()</span>
        <span class="n">spark_conf</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">spark_conf</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">spark_conf</span><span class="p">[</span>
            <span class="s2">&quot;spark.databricks.driver.dbfsLibraryInstallationAllowed&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>

        <span class="n">policy_id</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">policy_id</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">policy</span> <span class="ow">in</span> <span class="n">databricks_client</span><span class="o">.</span><span class="n">cluster_policies</span><span class="o">.</span><span class="n">list</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">policy</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Job Compute&quot;</span><span class="p">:</span>
                <span class="n">policy_id</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">policy_id</span>
        <span class="k">if</span> <span class="n">policy_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Could not find the `Job Compute` policy in Databricks.&quot;</span>
            <span class="p">)</span>
        <span class="n">job_cluster</span> <span class="o">=</span> <span class="n">JobCluster</span><span class="p">(</span>
            <span class="n">job_cluster_key</span><span class="o">=</span><span class="n">job_cluster_key</span><span class="p">,</span>
            <span class="n">new_cluster</span><span class="o">=</span><span class="n">ClusterSpec</span><span class="p">(</span>
                <span class="n">spark_version</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">spark_version</span>
                <span class="ow">or</span> <span class="n">DATABRICKS_SPARK_DEFAULT_VERSION</span><span class="p">,</span>
                <span class="n">num_workers</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">num_workers</span><span class="p">,</span>
                <span class="n">node_type_id</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">node_type_id</span> <span class="ow">or</span> <span class="s2">&quot;Standard_D4s_v5&quot;</span><span class="p">,</span>
                <span class="n">policy_id</span><span class="o">=</span><span class="n">policy_id</span><span class="p">,</span>
                <span class="n">autoscale</span><span class="o">=</span><span class="n">AutoScale</span><span class="p">(</span>
                    <span class="n">min_workers</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">autoscale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">max_workers</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">autoscale</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="p">),</span>
                <span class="n">single_user_name</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">single_user_name</span><span class="p">,</span>
                <span class="n">spark_env_vars</span><span class="o">=</span><span class="n">env_vars</span><span class="p">,</span>
                <span class="n">spark_conf</span><span class="o">=</span><span class="n">spark_conf</span><span class="p">,</span>
                <span class="n">workload_type</span><span class="o">=</span><span class="n">WorkloadType</span><span class="p">(</span>
                    <span class="n">clients</span><span class="o">=</span><span class="n">ClientsTypes</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">notebooks</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">schedule</span> <span class="ow">and</span> <span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span><span class="p">:</span>
            <span class="n">schedule_timezone</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">schedule_timezone</span>
            <span class="k">if</span> <span class="n">schedule_timezone</span><span class="p">:</span>
                <span class="n">databricks_schedule</span> <span class="o">=</span> <span class="n">CronSchedule</span><span class="p">(</span>
                    <span class="n">quartz_cron_expression</span><span class="o">=</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span><span class="p">,</span>
                    <span class="n">timezone_id</span><span class="o">=</span><span class="n">schedule_timezone</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Property `schedule_timezone` must be set when passing &quot;</span>
                    <span class="s2">&quot;`cron_expression` to a Databricks orchestrator. &quot;</span>
                    <span class="s2">&quot;Databricks orchestrator requires a Java Timezone ID to run the pipeline on schedule. &quot;</span>
                    <span class="s2">&quot;Please refer to https://docs.oracle.com/middleware/1221/wcs/tag-ref/MISC/TimeZones.html for more information.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">databricks_schedule</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">databricks_client</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
            <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
            <span class="n">job_clusters</span><span class="o">=</span><span class="p">[</span><span class="n">job_cluster</span><span class="p">],</span>
            <span class="n">schedule</span><span class="o">=</span><span class="n">databricks_schedule</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">:</span>
            <span class="n">databricks_client</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">run_now</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;An error occurred while getting the job id.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pipeline_run_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get general component-specific metadata for a pipeline run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: The ID of the pipeline run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">run_url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">/jobs/&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_orchestrator_run_id</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">:</span> <span class="n">Uri</span><span class="p">(</span><span class="n">run_url</span><span class="p">),</span>
        <span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">DatabricksOrchestratorConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the <code>DatabricksOrchestratorConfig</code> config.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DatabricksOrchestratorConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.pipeline_directory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_directory</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns path to a directory in which the kubeflow pipeline files are stored.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Path to the pipeline directory.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.root_directory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">root_directory</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Path to the root directory for all files concerning this orchestrator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Path to the root directory.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.settings_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">settings_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">databricks</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">databricks_orchestrator_flavor</span><span class="o">.</span><span class="n">DatabricksOrchestratorSettings</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Settings class for the Databricks orchestrator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.databricks.flavors.databricks_orchestrator_flavor.DatabricksOrchestratorSettings]</code></td>
      <td><p>The settings class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">stack_validator</span><span class="o">.</span><span class="n">StackValidator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Validates the stack.</p>
<p>In the remote case, checks that the stack contains a container registry,
image builder and only remote components.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.stack.stack_validator.StackValidator]</code></td>
      <td><p>A <code>StackValidator</code> instance.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.get_orchestrator_run_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Returns the active orchestrator run id.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If no run id exists. This happens when this method
gets called while the orchestrator is not running a pipeline.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The orchestrator run id.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the run id cannot be read from the environment.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the active orchestrator run id.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If no run id exists. This happens when this method</span>
<span class="sd">            gets called while the orchestrator is not running a pipeline.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The orchestrator run id.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the run id cannot be read from the environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_DATABRICKS_ORCHESTRATOR_RUN_ID</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_ZENML_DATABRICKS_ORCHESTRATOR_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.get_pipeline_run_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_run_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get general component-specific metadata for a pipeline run.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>run_id</code></td>
        <td><code>UUID</code></td>
        <td><p>The ID of the pipeline run.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, MetadataType]</code></td>
      <td><p>A dictionary of metadata.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_run_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get general component-specific metadata for a pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: The ID of the pipeline run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary of metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">run_url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">/jobs/&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_orchestrator_run_id</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">:</span> <span class="n">Uri</span><span class="p">(</span><span class="n">run_url</span><span class="p">),</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.prepare_or_run_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_or_run_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Creates a wheel and uploads the pipeline to Databricks.</p>
<p>This functions as an intermediary representation of the pipeline which
is then deployed to the kubeflow pipelines instance.</p>
<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.prepare_or_run_pipeline--how-it-works">How it works:</h6>
<p>Before this method is called the <code>prepare_pipeline_deployment()</code>
method builds a docker image that contains the code for the
pipeline, all steps the context around these files.</p>
<p>Based on this docker image a callable is created which builds
task for each step (<code>_construct_databricks_pipeline</code>).
To do this the entrypoint of the docker image is configured to
run the correct step within the docker image. The dependencies
between these task are then also configured onto each
task by pointing at the downstream steps.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>deployment</code></td>
        <td><code>PipelineDeploymentResponse</code></td>
        <td><p>The pipeline deployment to prepare or run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack the pipeline will run on.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>environment</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Environment variables to set in the orchestration
environment.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the schedule is not set or if the cron expression
is not set.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a wheel and uploads the pipeline to Databricks.</span>

<span class="sd">    This functions as an intermediary representation of the pipeline which</span>
<span class="sd">    is then deployed to the kubeflow pipelines instance.</span>

<span class="sd">    How it works:</span>
<span class="sd">    -------------</span>
<span class="sd">    Before this method is called the `prepare_pipeline_deployment()`</span>
<span class="sd">    method builds a docker image that contains the code for the</span>
<span class="sd">    pipeline, all steps the context around these files.</span>

<span class="sd">    Based on this docker image a callable is created which builds</span>
<span class="sd">    task for each step (`_construct_databricks_pipeline`).</span>
<span class="sd">    To do this the entrypoint of the docker image is configured to</span>
<span class="sd">    run the correct step within the docker image. The dependencies</span>
<span class="sd">    between these task are then also configured onto each</span>
<span class="sd">    task by pointing at the downstream steps.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment: The pipeline deployment to prepare or run.</span>
<span class="sd">        stack: The stack the pipeline will run on.</span>
<span class="sd">        environment: Environment variables to set in the orchestration</span>
<span class="sd">            environment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the schedule is not set or if the cron expression</span>
<span class="sd">            is not set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
        <span class="n">DatabricksOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">catchup</span>
            <span class="ow">or</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">interval_second</span>
        <span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Databricks orchestrator only uses schedules with the &quot;</span>
                <span class="s2">&quot;`cron_expression` property, with optional `start_time` and/or `end_time`. &quot;</span>
                <span class="s2">&quot;All other properties are ignored.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Property `cron_expression` must be set when passing &quot;</span>
                <span class="s2">&quot;schedule to a Databricks orchestrator.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">cron_expression</span>
            <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">schedule_timezone</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Property `schedule_timezone` must be set when passing &quot;</span>
                <span class="s2">&quot;`cron_expression` to a Databricks orchestrator.&quot;</span>
                <span class="s2">&quot;Databricks orchestrator requires a Java Timezone ID to run the pipeline on schedule.&quot;</span>
                <span class="s2">&quot;Please refer to https://docs.oracle.com/middleware/1221/wcs/tag-ref/MISC/TimeZones.html for more information.&quot;</span>
            <span class="p">)</span>

    <span class="c1"># Get deployment id</span>
    <span class="n">deployment_id</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">id</span>

    <span class="c1"># Create a callable for future compilation into a dsl.Pipeline.</span>
    <span class="k">def</span> <span class="nf">_construct_databricks_pipeline</span><span class="p">(</span>
        <span class="n">zenml_project_wheel</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">job_cluster_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DatabricksTask</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a databrcks task for each step.</span>

<span class="sd">        This should contain the name of the step or task and configures the</span>
<span class="sd">        entrypoint of the task to run the step.</span>

<span class="sd">        Additionally, this gives each task information about its</span>
<span class="sd">        direct downstream steps.</span>

<span class="sd">        Args:</span>
<span class="sd">            zenml_project_wheel: The wheel package containing the ZenML</span>
<span class="sd">                project.</span>
<span class="sd">            job_cluster_key: The ID of the Databricks job cluster.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Databricks tasks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># The arguments are passed to configure the entrypoint of the</span>
            <span class="c1"># docker container when the step is called.</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="n">DatabricksEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
                <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
                <span class="n">wheel_package</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">package_name</span><span class="p">,</span>
                <span class="n">databricks_job_id</span><span class="o">=</span><span class="n">DATABRICKS_JOB_ID_PARAMETER_REFERENCE</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Find the upstream container ops of the current step and</span>
            <span class="c1"># configure the current container op to run after them</span>
            <span class="n">upstream_steps</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">upstream_step_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">upstream_step_name</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span>
            <span class="p">]</span>

            <span class="n">docker_settings</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docker_settings</span>
            <span class="n">docker_image_builder</span> <span class="o">=</span> <span class="n">PipelineDockerImageBuilder</span><span class="p">()</span>
            <span class="c1"># Gather the requirements files</span>
            <span class="n">requirements_files</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">docker_image_builder</span><span class="o">.</span><span class="n">gather_requirements_files</span><span class="p">(</span>
                    <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
                    <span class="n">stack</span><span class="o">=</span><span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span><span class="p">,</span>
                    <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Extract and clean the requirements</span>
            <span class="n">requirements</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
                    <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">requirements_files</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Remove empty items and duplicates</span>
            <span class="n">requirements</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">requirements</span><span class="p">)))</span>

            <span class="n">task</span> <span class="o">=</span> <span class="n">convert_step_to_task</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">ZENML_STEP_DEFAULT_ENTRYPOINT_COMMAND</span><span class="p">,</span>
                <span class="n">arguments</span><span class="p">,</span>
                <span class="n">clean_requirements</span><span class="p">(</span><span class="n">requirements</span><span class="p">),</span>
                <span class="n">depends_on</span><span class="o">=</span><span class="n">upstream_steps</span><span class="p">,</span>
                <span class="n">zenml_project_wheel</span><span class="o">=</span><span class="n">zenml_project_wheel</span><span class="p">,</span>
                <span class="n">job_cluster_key</span><span class="o">=</span><span class="n">job_cluster_key</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tasks</span>

    <span class="c1"># Get the orchestrator run name</span>
    <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>
    <span class="c1"># Get a filepath to use to save the finished yaml to</span>
    <span class="n">fileio</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">)</span>
    <span class="n">pipeline_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orchestrator_run_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Copy the repository to a temporary directory and add a setup.py file</span>
    <span class="n">repository_temp_dir</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy_repository_to_temp_dir_and_add_setup_py</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Create a wheel for the package in the temporary directory</span>
    <span class="n">wheel_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_wheel</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">=</span><span class="n">repository_temp_dir</span><span class="p">)</span>

    <span class="n">databricks_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_databricks_client</span><span class="p">()</span>

    <span class="c1"># Create an empty folder in a volume.</span>
    <span class="n">deployment_name</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">pipeline</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span>
    <span class="p">)</span>
    <span class="n">databricks_directory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DATABRICKS_WHEELS_DIRECTORY_PREFIX</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">deployment_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">orchestrator_run_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">databricks_wheel_path</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">databricks_directory</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">wheel_path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="n">databricks_client</span><span class="o">.</span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">mkdirs</span><span class="p">(</span><span class="n">databricks_directory</span><span class="p">)</span>
    <span class="n">databricks_client</span><span class="o">.</span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">cp</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DATABRICKS_LOCAL_FILESYSTEM_PREFIX</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">wheel_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">databricks_wheel_path</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Construct the env variables for the pipeline</span>
    <span class="n">env_vars</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">spark_env_vars</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">spark_env_vars</span>
    <span class="k">if</span> <span class="n">spark_env_vars</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">spark_env_vars</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">env_vars</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">env_vars</span><span class="p">[</span><span class="n">ENV_ZENML_CUSTOM_SOURCE_ROOT</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">DATABRICKS_ZENML_DEFAULT_CUSTOM_REPOSITORY_PATH</span>
    <span class="p">)</span>

    <span class="n">fileio</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">repository_temp_dir</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Writing Databricks workflow definition to `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span>
        <span class="n">pipeline_file_path</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># using the databricks client uploads the pipeline to databricks</span>
    <span class="n">job_cluster_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sanitize_name</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_upload_and_run_pipeline</span><span class="p">(</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
        <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
        <span class="n">tasks</span><span class="o">=</span><span class="n">_construct_databricks_pipeline</span><span class="p">(</span>
            <span class="n">databricks_wheel_path</span><span class="p">,</span> <span class="n">job_cluster_key</span>
        <span class="p">),</span>
        <span class="n">env_vars</span><span class="o">=</span><span class="n">env_vars</span><span class="p">,</span>
        <span class="n">job_cluster_key</span><span class="o">=</span><span class="n">job_cluster_key</span><span class="p">,</span>
        <span class="n">schedule</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator.DatabricksOrchestrator.setup_credentials" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Set up credentials for the orchestrator.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set up credentials for the orchestrator.&quot;&quot;&quot;</span>
    <span class="n">connector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">connector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">connector</span><span class="o">.</span><span class="n">configure_local_client</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config" class="doc doc-heading">
        <code>databricks_orchestrator_entrypoint_config</code>



</h4>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for ZenML Databricks pipeline steps.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration" class="doc doc-heading">
        <code>
DatabricksEntrypointConfiguration            (<a class="autorefs autorefs-internal" title="zenml.entrypoints.step_entrypoint_configuration.StepEntrypointConfiguration" href="../../core_code_docs/core-entrypoints/#zenml.entrypoints.step_entrypoint_configuration.StepEntrypointConfiguration">StepEntrypointConfiguration</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for ZenML Databricks pipeline steps.</p>
<p>The only purpose of this entrypoint configuration is to reconstruct the
environment variables that exceed the maximum length of 256 characters
allowed for Databricks Processor steps from their individual components.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksEntrypointConfiguration</span><span class="p">(</span><span class="n">StepEntrypointConfiguration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Entrypoint configuration for ZenML Databricks pipeline steps.</span>

<span class="sd">    The only purpose of this entrypoint configuration is to reconstruct the</span>
<span class="sd">    environment variables that exceed the maximum length of 256 characters</span>
<span class="sd">    allowed for Databricks Processor steps from their individual components.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_entrypoint_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all options required for running with this configuration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The superclass options as well as an option for the wheel package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entrypoint_options</span><span class="p">()</span>
            <span class="o">|</span> <span class="p">{</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="p">}</span>
            <span class="o">|</span> <span class="p">{</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_entrypoint_arguments</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all arguments that the entrypoint command should be called with.</span>

<span class="sd">        The argument list should be something that</span>
<span class="sd">        `argparse.ArgumentParser.parse_args(...)` can handle (e.g.</span>
<span class="sd">        `[&quot;--some_option&quot;, &quot;some_value&quot;]` or `[&quot;--some_option=some_value&quot;]`).</span>
<span class="sd">        It needs to provide values for all options returned by the</span>
<span class="sd">        `get_entrypoint_options()` method of this class.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Kwargs, must include the step name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The superclass arguments as well as arguments for the wheel package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="p">],</span>
            <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="p">],</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the step.&quot;&quot;&quot;</span>
        <span class="c1"># Get the wheel package and add it to the sys path</span>
        <span class="n">wheel_package</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_args</span><span class="p">[</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="p">]</span>
        <span class="n">distribution</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">get_distribution</span><span class="p">(</span><span class="n">wheel_package</span><span class="p">)</span>
        <span class="n">project_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">distribution</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">wheel_package</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">project_root</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">project_root</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">project_root</span><span class="p">)</span>

        <span class="c1"># Get the job id and add it to the environment</span>
        <span class="n">databricks_job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_args</span><span class="p">[</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="p">]</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_DATABRICKS_ORCHESTRATOR_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">databricks_job_id</span>
        <span class="p">)</span>

        <span class="c1"># Run the step</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.get_entrypoint_arguments" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_entrypoint_arguments</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Gets all arguments that the entrypoint command should be called with.</p>
<p>The argument list should be something that
<code>argparse.ArgumentParser.parse_args(...)</code> can handle (e.g.
<code>["--some_option", "some_value"]</code> or <code>["--some_option=some_value"]</code>).
It needs to provide values for all options returned by the
<code>get_entrypoint_options()</code> method of this class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Kwargs, must include the step name.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>The superclass arguments as well as arguments for the wheel package.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_entrypoint_arguments</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all arguments that the entrypoint command should be called with.</span>

<span class="sd">    The argument list should be something that</span>
<span class="sd">    `argparse.ArgumentParser.parse_args(...)` can handle (e.g.</span>
<span class="sd">    `[&quot;--some_option&quot;, &quot;some_value&quot;]` or `[&quot;--some_option=some_value&quot;]`).</span>
<span class="sd">    It needs to provide values for all options returned by the</span>
<span class="sd">    `get_entrypoint_options()` method of this class.</span>

<span class="sd">    Args:</span>
<span class="sd">        **kwargs: Kwargs, must include the step name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The superclass arguments as well as arguments for the wheel package.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span>
        <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="p">],</span>
        <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="p">],</span>
    <span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.get_entrypoint_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_entrypoint_options</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Gets all options required for running with this configuration.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Set[str]</code></td>
      <td><p>The superclass options as well as an option for the wheel package.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_entrypoint_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all options required for running with this configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The superclass options as well as an option for the wheel package.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entrypoint_options</span><span class="p">()</span>
        <span class="o">|</span> <span class="p">{</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="p">}</span>
        <span class="o">|</span> <span class="p">{</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="p">}</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.orchestrators.databricks_orchestrator_entrypoint_config.DatabricksEntrypointConfiguration.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Runs the step.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/orchestrators/databricks_orchestrator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the step.&quot;&quot;&quot;</span>
    <span class="c1"># Get the wheel package and add it to the sys path</span>
    <span class="n">wheel_package</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_args</span><span class="p">[</span><span class="n">WHEEL_PACKAGE_OPTION</span><span class="p">]</span>
    <span class="n">distribution</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">get_distribution</span><span class="p">(</span><span class="n">wheel_package</span><span class="p">)</span>
    <span class="n">project_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">distribution</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">wheel_package</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">project_root</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">project_root</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">project_root</span><span class="p">)</span>

    <span class="c1"># Get the job id and add it to the environment</span>
    <span class="n">databricks_job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_args</span><span class="p">[</span><span class="n">DATABRICKS_JOB_ID_OPTION</span><span class="p">]</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_DATABRICKS_ORCHESTRATOR_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">databricks_job_id</span>
    <span class="p">)</span>

    <span class="c1"># Run the step</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.databricks.services" class="doc doc-heading">
        <code>services</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialization of the Databricks Service.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.services.databricks_deployment" class="doc doc-heading">
        <code>databricks_deployment</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the Databricks Deployment service.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentConfig" class="doc doc-heading">
        <code>
DatabricksDeploymentConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksBaseConfig" href="#zenml.integrations.databricks.flavors.databricks_model_deployer_flavor.DatabricksBaseConfig">DatabricksBaseConfig</a>, <a class="autorefs autorefs-internal" title="zenml.services.service.ServiceConfig" href="../../core_code_docs/core-services/#zenml.services.service.ServiceConfig">ServiceConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks service configurations.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksDeploymentConfig</span><span class="p">(</span><span class="n">DatabricksBaseConfig</span><span class="p">,</span> <span class="n">ServiceConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks service configurations.&quot;&quot;&quot;</span>

    <span class="n">model_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;URI of the model to deploy. This can be a local path or a cloud storage path.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Databricks host URL for the deployment.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_databricks_deployment_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate labels for the Databricks deployment from the service configuration.</span>

<span class="sd">        These labels are attached to the Databricks deployment resource</span>
<span class="sd">        and may be used as label selectors in lookup operations.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The labels for the Databricks deployment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_pipeline_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_step_name</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_pipeline_step_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_step_name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_model_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_uri</span><span class="p">:</span>
            <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_model_uri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_uri</span>
        <span class="n">sanitize_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">labels</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
























  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentConfig.get_databricks_deployment_labels" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_databricks_deployment_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Generate labels for the Databricks deployment from the service configuration.</p>
<p>These labels are attached to the Databricks deployment resource
and may be used as label selectors in lookup operations.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, str]</code></td>
      <td><p>The labels for the Databricks deployment.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_databricks_deployment_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate labels for the Databricks deployment from the service configuration.</span>

<span class="sd">    These labels are attached to the Databricks deployment resource</span>
<span class="sd">    and may be used as label selectors in lookup operations.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The labels for the Databricks deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="p">:</span>
        <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_pipeline_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_step_name</span><span class="p">:</span>
        <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_pipeline_step_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_step_name</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">:</span>
        <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_model_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_uri</span><span class="p">:</span>
        <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_model_uri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_uri</span>
    <span class="n">sanitize_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">labels</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService" class="doc doc-heading">
        <code>
DatabricksDeploymentService            (<a class="autorefs autorefs-internal" title="zenml.services.service.BaseDeploymentService" href="../../core_code_docs/core-services/#zenml.services.service.BaseDeploymentService">BaseDeploymentService</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks model deployment service.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>SERVICE_TYPE</code></td>
        <td><code>ClassVar[zenml.services.service_type.ServiceType]</code></td>
        <td><p>a service type descriptor with information describing
the Databricks deployment service class</p></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>DatabricksDeploymentConfig</code></td>
        <td><p>service configuration</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksDeploymentService</span><span class="p">(</span><span class="n">BaseDeploymentService</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks model deployment service.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        SERVICE_TYPE: a service type descriptor with information describing</span>
<span class="sd">            the Databricks deployment service class</span>
<span class="sd">        config: service configuration</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">SERVICE_TYPE</span> <span class="o">=</span> <span class="n">ServiceType</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;databricks-deployment&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;model-serving&quot;</span><span class="p">,</span>
        <span class="n">flavor</span><span class="o">=</span><span class="s2">&quot;databricks&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Databricks inference endpoint prediction service&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">DatabricksDeploymentConfig</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">DatabricksServiceStatus</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">DatabricksServiceStatus</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DatabricksDeploymentConfig</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the Databricks deployment service.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: service configuration</span>
<span class="sd">            attrs: additional attributes to set on the service</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_client_id_and_secret</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Databricks client id and secret.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If client id and secret are not found.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Databricks client id and secret.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
        <span class="n">client_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">client_secret</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">host</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.model_deployers.databricks_model_deployer</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">DatabricksModelDeployer</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">model_deployer</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">active_stack</span><span class="o">.</span><span class="n">model_deployer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_deployer</span><span class="p">,</span> <span class="n">DatabricksModelDeployer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;DatabricksModelDeployer is not active in the stack.&quot;</span>
            <span class="p">)</span>
        <span class="n">host</span> <span class="o">=</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="k">if</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">secret_name</span><span class="p">:</span>
            <span class="n">secret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">secret_name</span><span class="p">)</span>
            <span class="n">client_id</span> <span class="o">=</span> <span class="n">secret</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s2">&quot;client_id&quot;</span><span class="p">]</span>
            <span class="n">client_secret</span> <span class="o">=</span> <span class="n">secret</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s2">&quot;client_secret&quot;</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">client_id</span> <span class="o">=</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span>
            <span class="n">client_secret</span> <span class="o">=</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_secret</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">client_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Client id not found.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">client_secret</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Client secret not found.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Host not found.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">host</span><span class="p">,</span> <span class="n">client_id</span><span class="p">,</span> <span class="n">client_secret</span>

    <span class="k">def</span> <span class="nf">_get_databricks_deployment_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the labels for the Databricks deployment from the service configuration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The labels for the Databricks deployment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_databricks_deployment_labels</span><span class="p">()</span>
        <span class="n">labels</span><span class="p">[</span><span class="s2">&quot;zenml_service_uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
        <span class="n">sanitize_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">labels</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">databricks_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatabricksClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the deployed Databricks inference endpoint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            databricks inference endpoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DatabricksClient</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_client_id_and_secret</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">client_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_client_id_and_secret</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">client_secret</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_client_id_and_secret</span><span class="p">()[</span><span class="mi">2</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">databricks_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServingEndpointDetailed</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the deployed Hugging Face inference endpoint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Databricks inference endpoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">prediction_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The prediction URI exposed by the prediction service.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The prediction URI exposed by the prediction service, or None if</span>
<span class="sd">            the service is not yet ready.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">/serving-endpoints/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">()</span><span class="si">}</span><span class="s2">/invocations&quot;</span>

    <span class="k">def</span> <span class="nf">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Provision or update remote Databricks deployment instance.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">databricks.sdk.service.serving</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">ServedModelInputWorkloadSize</span><span class="p">,</span>
            <span class="n">ServedModelInputWorkloadType</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_databricks_deployment_labels</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EndpointTag</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>
        <span class="c1"># Attempt to create and wait for the inference endpoint</span>
        <span class="n">served_model</span> <span class="o">=</span> <span class="n">ServedModelInput</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_version</span><span class="p">,</span>
            <span class="n">scale_to_zero_enabled</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">scale_to_zero_enabled</span><span class="p">,</span>
            <span class="n">workload_type</span><span class="o">=</span><span class="n">ServedModelInputWorkloadType</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">workload_type</span>
            <span class="p">),</span>
            <span class="n">workload_size</span><span class="o">=</span><span class="n">ServedModelInputWorkloadSize</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">workload_size</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">databricks_endpoint</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">create_and_wait</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">(),</span>
                <span class="n">config</span><span class="o">=</span><span class="n">EndpointCoreConfigInput</span><span class="p">(</span>
                    <span class="n">served_models</span><span class="o">=</span><span class="p">[</span><span class="n">served_model</span><span class="p">],</span>
                <span class="p">),</span>
                <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Check if the endpoint URL is available after provisioning</span>
        <span class="k">if</span> <span class="n">databricks_endpoint</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Databricks inference endpoint successfully deployed and available. Endpoint URL: </span><span class="si">{</span><span class="n">databricks_endpoint</span><span class="o">.</span><span class="n">endpoint_url</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Failed to start Databricks inference endpoint service: No URL available, please check the Databricks console for more details.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">check_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ServiceState</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check the the current operational state of the Databricks deployment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The operational state of the Databricks deployment and a message</span>
<span class="sd">            providing additional information about that state (e.g. a</span>
<span class="sd">            description of the error, if one is encountered).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">databricks_endpoint</span><span class="o">.</span><span class="n">state</span> <span class="ow">or</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">status</span>
                <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">ready</span>
                <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">ready</span> <span class="o">==</span> <span class="n">EndpointStateReady</span><span class="o">.</span><span class="n">READY</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">status</span>
                <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
                <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
                <span class="o">==</span> <span class="n">EndpointStateConfigUpdate</span><span class="o">.</span><span class="n">UPDATE_FAILED</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span>
                    <span class="s2">&quot;Databricks Inference Endpoint deployment update failed&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">status</span>
                <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
                <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
                <span class="o">==</span> <span class="n">EndpointStateConfigUpdate</span><span class="o">.</span><span class="n">IN_PROGRESS</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">PENDING_STARTUP</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">PENDING_STARTUP</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">ServiceState</span><span class="o">.</span><span class="n">INACTIVE</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;Databricks Inference Endpoint deployment is inactive or not found: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">deprovision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprovision the remote Databricks deployment instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            force: if True, the remote deployment instance will be</span>
<span class="sd">                forcefully deprovisioned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Databricks Inference Endpoint is deleted or cannot be found.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;NDArray[Any]&quot;</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NDArray[Any]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a prediction using the service.</span>

<span class="sd">        Args:</span>
<span class="sd">            request: The input data for the prediction.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The prediction result.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: if the service is not running</span>
<span class="sd">            ValueError: if the endpoint secret name is not provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_running</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Databricks endpoint inference service is not running. &quot;</span>
                <span class="s2">&quot;Please start the service before making predictions.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_secret_name</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;No endpoint secret name is provided for prediction.&quot;</span>
                <span class="p">)</span>
            <span class="n">databricks_token</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_secret_name</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">databricks_token</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No databricks token found.&quot;</span><span class="p">)</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="n">databricks_token</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>  <span class="c1"># nosec</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">prediction_url</span><span class="p">,</span>
                    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">)},</span>
                    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>  <span class="c1"># nosec</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">prediction_url</span><span class="p">,</span>
                    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">tolist</span><span class="p">()},</span>
                    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No endpoint known for prediction.&quot;</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;predictions&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_logs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the service logs.</span>

<span class="sd">        Args:</span>
<span class="sd">            follow: if True, the logs will be streamed as they are written</span>
<span class="sd">            tail: only retrieve the last NUM lines of log output.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A generator that can be accessed to get the service logs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Databricks Endpoints provides access to the logs of your Endpoints through the UI in the `Logs` tab of your Endpoint&quot;</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">log_generator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
            <span class="n">last_log_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">logs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">(),</span>
                    <span class="n">served_model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">log_lines</span> <span class="o">=</span> <span class="n">logs</span><span class="o">.</span><span class="n">logs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Apply tail if specified and it&#39;s the first iteration</span>
                <span class="k">if</span> <span class="n">tail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">last_log_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">log_lines</span> <span class="o">=</span> <span class="n">log_lines</span><span class="p">[</span><span class="o">-</span><span class="n">tail</span><span class="p">:]</span>

                <span class="c1"># Yield only new lines</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">log_lines</span><span class="p">[</span><span class="n">last_log_count</span><span class="p">:]:</span>
                    <span class="k">yield</span> <span class="n">line</span>

                <span class="n">last_log_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">log_lines</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">follow</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="c1"># Add a small delay to avoid excessive API calls</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">yield from</span> <span class="n">log_generator</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_generate_an_endpoint_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a unique name for the Databricks Inference Endpoint.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A unique name for the Databricks Inference Endpoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">service_name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)[:</span><span class="n">UUID_SLICE_LENGTH</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">



















  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.databricks_client" class="doc doc-heading">
<code class="highlight language-python"><span class="n">databricks_client</span><span class="p">:</span> <span class="n">databricks</span><span class="o">.</span><span class="n">sdk</span><span class="o">.</span><span class="n">WorkspaceClient</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Get the deployed Databricks inference endpoint.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>databricks.sdk.WorkspaceClient</code></td>
      <td><p>databricks inference endpoint.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.databricks_endpoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">databricks_endpoint</span><span class="p">:</span> <span class="n">databricks</span><span class="o">.</span><span class="n">sdk</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">serving</span><span class="o">.</span><span class="n">ServingEndpointDetailed</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Get the deployed Hugging Face inference endpoint.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>databricks.sdk.service.serving.ServingEndpointDetailed</code></td>
      <td><p>Databricks inference endpoint.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.prediction_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prediction_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>The prediction URI exposed by the prediction service.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>The prediction URI exposed by the prediction service, or None if
the service is not yet ready.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Initialize the Databricks deployment service.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>config</code></td>
        <td><code>DatabricksDeploymentConfig</code></td>
        <td><p>service configuration</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>attrs</code></td>
        <td><code>Any</code></td>
        <td><p>additional attributes to set on the service</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DatabricksDeploymentConfig</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the Databricks deployment service.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: service configuration</span>
<span class="sd">        attrs: additional attributes to set on the service</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.check_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Check the the current operational state of the Databricks deployment.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[zenml.services.service_status.ServiceState, str]</code></td>
      <td><p>The operational state of the Databricks deployment and a message
providing additional information about that state (e.g. a
description of the error, if one is encountered).</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ServiceState</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check the the current operational state of the Databricks deployment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The operational state of the Databricks deployment and a message</span>
<span class="sd">        providing additional information about that state (e.g. a</span>
<span class="sd">        description of the error, if one is encountered).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">databricks_endpoint</span><span class="o">.</span><span class="n">state</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">status</span>
            <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">ready</span>
            <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">ready</span> <span class="o">==</span> <span class="n">EndpointStateReady</span><span class="o">.</span><span class="n">READY</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">status</span>
            <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
            <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
            <span class="o">==</span> <span class="n">EndpointStateConfigUpdate</span><span class="o">.</span><span class="n">UPDATE_FAILED</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">ServiceState</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span>
                <span class="s2">&quot;Databricks Inference Endpoint deployment update failed&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">status</span>
            <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
            <span class="ow">and</span> <span class="n">status</span><span class="o">.</span><span class="n">config_update</span>
            <span class="o">==</span> <span class="n">EndpointStateConfigUpdate</span><span class="o">.</span><span class="n">IN_PROGRESS</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">PENDING_STARTUP</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">ServiceState</span><span class="o">.</span><span class="n">PENDING_STARTUP</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">ServiceState</span><span class="o">.</span><span class="n">INACTIVE</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;Databricks Inference Endpoint deployment is inactive or not found: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.deprovision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deprovision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Deprovision the remote Databricks deployment instance.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>force</code></td>
        <td><code>bool</code></td>
        <td><p>if True, the remote deployment instance will be
forcefully deprovisioned.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deprovision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprovision the remote Databricks deployment instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        force: if True, the remote deployment instance will be</span>
<span class="sd">            forcefully deprovisioned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Databricks Inference Endpoint is deleted or cannot be found.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.get_client_id_and_secret" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_client_id_and_secret</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get the Databricks client id and secret.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If client id and secret are not found.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[str, str, str]</code></td>
      <td><p>Databricks client id and secret.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_client_id_and_secret</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the Databricks client id and secret.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If client id and secret are not found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Databricks client id and secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
    <span class="n">client_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">client_secret</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">host</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="kn">from</span> <span class="nn">zenml.integrations.databricks.model_deployers.databricks_model_deployer</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">DatabricksModelDeployer</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">model_deployer</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">active_stack</span><span class="o">.</span><span class="n">model_deployer</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_deployer</span><span class="p">,</span> <span class="n">DatabricksModelDeployer</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;DatabricksModelDeployer is not active in the stack.&quot;</span>
        <span class="p">)</span>
    <span class="n">host</span> <span class="o">=</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
    <span class="k">if</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">secret_name</span><span class="p">:</span>
        <span class="n">secret</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">secret_name</span><span class="p">)</span>
        <span class="n">client_id</span> <span class="o">=</span> <span class="n">secret</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s2">&quot;client_id&quot;</span><span class="p">]</span>
        <span class="n">client_secret</span> <span class="o">=</span> <span class="n">secret</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s2">&quot;client_secret&quot;</span><span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">client_id</span> <span class="o">=</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_id</span>
        <span class="n">client_secret</span> <span class="o">=</span> <span class="n">model_deployer</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">client_secret</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">client_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Client id not found.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">client_secret</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Client secret not found.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Host not found.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">host</span><span class="p">,</span> <span class="n">client_id</span><span class="p">,</span> <span class="n">client_secret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.get_logs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">follow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Retrieve the service logs.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>follow</code></td>
        <td><code>bool</code></td>
        <td><p>if True, the logs will be streamed as they are written</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>tail</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>only retrieve the last NUM lines of log output.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Generator[str, bool, NoneType]</code></td>
      <td><p>A generator that can be accessed to get the service logs.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_logs</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the service logs.</span>

<span class="sd">    Args:</span>
<span class="sd">        follow: if True, the logs will be streamed as they are written</span>
<span class="sd">        tail: only retrieve the last NUM lines of log output.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A generator that can be accessed to get the service logs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Databricks Endpoints provides access to the logs of your Endpoints through the UI in the `Logs` tab of your Endpoint&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">log_generator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">last_log_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">logs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">(),</span>
                <span class="n">served_model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">log_lines</span> <span class="o">=</span> <span class="n">logs</span><span class="o">.</span><span class="n">logs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Apply tail if specified and it&#39;s the first iteration</span>
            <span class="k">if</span> <span class="n">tail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">last_log_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">log_lines</span> <span class="o">=</span> <span class="n">log_lines</span><span class="p">[</span><span class="o">-</span><span class="n">tail</span><span class="p">:]</span>

            <span class="c1"># Yield only new lines</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">log_lines</span><span class="p">[</span><span class="n">last_log_count</span><span class="p">:]:</span>
                <span class="k">yield</span> <span class="n">line</span>

            <span class="n">last_log_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">log_lines</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">follow</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="c1"># Add a small delay to avoid excessive API calls</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">yield from</span> <span class="n">log_generator</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.predict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Make a prediction using the service.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Union[NDArray[Any], pandas.core.frame.DataFrame]</code></td>
        <td><p>The input data for the prediction.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>NDArray[Any]</code></td>
      <td><p>The prediction result.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>Exception</code></td>
        <td><p>if the service is not running</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>if the endpoint secret name is not provided.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">predict</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;NDArray[Any]&quot;</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NDArray[Any]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Make a prediction using the service.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The input data for the prediction.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The prediction result.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: if the service is not running</span>
<span class="sd">        ValueError: if the endpoint secret name is not provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_running</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Databricks endpoint inference service is not running. &quot;</span>
            <span class="s2">&quot;Please start the service before making predictions.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_secret_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;No endpoint secret name is provided for prediction.&quot;</span>
            <span class="p">)</span>
        <span class="n">databricks_token</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_secret_name</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">databricks_token</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No databricks token found.&quot;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="n">databricks_token</span><span class="o">.</span><span class="n">secret_values</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>  <span class="c1"># nosec</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">prediction_url</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">)},</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>  <span class="c1"># nosec</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">prediction_url</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">tolist</span><span class="p">()},</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No endpoint known for prediction.&quot;</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;predictions&quot;</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksDeploymentService.provision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Provision or update remote Databricks deployment instance.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provision or update remote Databricks deployment instance.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">databricks.sdk.service.serving</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">ServedModelInputWorkloadSize</span><span class="p">,</span>
        <span class="n">ServedModelInputWorkloadType</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_databricks_deployment_labels</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EndpointTag</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>
    <span class="c1"># Attempt to create and wait for the inference endpoint</span>
    <span class="n">served_model</span> <span class="o">=</span> <span class="n">ServedModelInput</span><span class="p">(</span>
        <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
        <span class="n">model_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_version</span><span class="p">,</span>
        <span class="n">scale_to_zero_enabled</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">scale_to_zero_enabled</span><span class="p">,</span>
        <span class="n">workload_type</span><span class="o">=</span><span class="n">ServedModelInputWorkloadType</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">workload_type</span>
        <span class="p">),</span>
        <span class="n">workload_size</span><span class="o">=</span><span class="n">ServedModelInputWorkloadSize</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">workload_size</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">databricks_endpoint</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">databricks_client</span><span class="o">.</span><span class="n">serving_endpoints</span><span class="o">.</span><span class="n">create_and_wait</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_an_endpoint_name</span><span class="p">(),</span>
            <span class="n">config</span><span class="o">=</span><span class="n">EndpointCoreConfigInput</span><span class="p">(</span>
                <span class="n">served_models</span><span class="o">=</span><span class="p">[</span><span class="n">served_model</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Check if the endpoint URL is available after provisioning</span>
    <span class="k">if</span> <span class="n">databricks_endpoint</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Databricks inference endpoint successfully deployed and available. Endpoint URL: </span><span class="si">{</span><span class="n">databricks_endpoint</span><span class="o">.</span><span class="n">endpoint_url</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Failed to start Databricks inference endpoint service: No URL available, please check the Databricks console for more details.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.databricks.services.databricks_deployment.DatabricksServiceStatus" class="doc doc-heading">
        <code>
DatabricksServiceStatus            (<a class="autorefs autorefs-internal" title="zenml.services.service_status.ServiceStatus" href="../../core_code_docs/core-services/#zenml.services.service_status.ServiceStatus">ServiceStatus</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Databricks service status.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/services/databricks_deployment.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabricksServiceStatus</span><span class="p">(</span><span class="n">ServiceStatus</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Databricks service status.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.databricks.utils" class="doc doc-heading">
        <code>utils</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Utilities for Databricks integration.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.databricks.utils.databricks_utils" class="doc doc-heading">
        <code>databricks_utils</code>



</h4>

    <div class="doc doc-contents ">

      <p>Databricks utilities.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.databricks.utils.databricks_utils.convert_step_to_task" class="doc doc-heading">
<code class="highlight language-python"><span class="n">convert_step_to_task</span><span class="p">(</span><span class="n">task_name</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span> <span class="n">libraries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">depends_on</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">zenml_project_wheel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">job_cluster_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Convert a ZenML step to a Databricks task.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>task_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the task.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>command</code></td>
        <td><code>str</code></td>
        <td><p>Command to run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>arguments</code></td>
        <td><code>List[str]</code></td>
        <td><p>Arguments to pass to the command.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>libraries</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>List of libraries to install.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>depends_on</code></td>
        <td><code>Optional[List[str]]</code></td>
        <td><p>List of tasks to depend on.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>zenml_project_wheel</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Path to the ZenML project wheel.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>job_cluster_key</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>ID of the Databricks job_cluster_key.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>databricks.sdk.service.jobs.Task</code></td>
      <td><p>Databricks task.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/utils/databricks_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">convert_step_to_task</span><span class="p">(</span>
    <span class="n">task_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">arguments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">libraries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">depends_on</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">zenml_project_wheel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">job_cluster_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatabricksTask</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a ZenML step to a Databricks task.</span>

<span class="sd">    Args:</span>
<span class="sd">        task_name: Name of the task.</span>
<span class="sd">        command: Command to run.</span>
<span class="sd">        arguments: Arguments to pass to the command.</span>
<span class="sd">        libraries: List of libraries to install.</span>
<span class="sd">        depends_on: List of tasks to depend on.</span>
<span class="sd">        zenml_project_wheel: Path to the ZenML project wheel.</span>
<span class="sd">        job_cluster_key: ID of the Databricks job_cluster_key.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Databricks task.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">db_libraries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">libraries</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="n">libraries</span><span class="p">:</span>
            <span class="n">db_libraries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Library</span><span class="p">(</span><span class="n">pypi</span><span class="o">=</span><span class="n">PythonPyPiLibrary</span><span class="p">(</span><span class="n">library</span><span class="p">)))</span>
    <span class="n">db_libraries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Library</span><span class="p">(</span><span class="n">whl</span><span class="o">=</span><span class="n">zenml_project_wheel</span><span class="p">))</span>
    <span class="n">db_libraries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">Library</span><span class="p">(</span><span class="n">pypi</span><span class="o">=</span><span class="n">PythonPyPiLibrary</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;zenml==</span><span class="si">{</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">DatabricksTask</span><span class="p">(</span>
        <span class="n">task_key</span><span class="o">=</span><span class="n">task_name</span><span class="p">,</span>
        <span class="n">job_cluster_key</span><span class="o">=</span><span class="n">job_cluster_key</span><span class="p">,</span>
        <span class="n">libraries</span><span class="o">=</span><span class="n">db_libraries</span><span class="p">,</span>
        <span class="n">python_wheel_task</span><span class="o">=</span><span class="n">PythonWheelTask</span><span class="p">(</span>
            <span class="n">package_name</span><span class="o">=</span><span class="s2">&quot;zenml&quot;</span><span class="p">,</span>
            <span class="n">entry_point</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">depends_on</span><span class="o">=</span><span class="p">[</span><span class="n">TaskDependency</span><span class="p">(</span><span class="n">task</span><span class="p">)</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">depends_on</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">depends_on</span>
        <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.databricks.utils.databricks_utils.sanitize_labels" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sanitize_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Update the label values to be valid Kubernetes labels.</p>
<p>See:
https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>labels</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>the labels to sanitize.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/databricks/utils/databricks_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sanitize_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the label values to be valid Kubernetes labels.</span>

<span class="sd">    See:</span>
<span class="sd">    https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set</span>

<span class="sd">    Args:</span>
<span class="sd">        labels: the labels to sanitize.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># Kubernetes labels must be alphanumeric, no longer than</span>
        <span class="c1"># 63 characters, and must begin and end with an alphanumeric</span>
        <span class="c1"># character ([a-z0-9A-Z])</span>
        <span class="n">labels</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[^0-9a-zA-Z-_\.]+&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)[:</span><span class="mi">63</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span>
            <span class="s2">&quot;-_.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../integrations-constants/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Constants" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Constants
            </div>
          </div>
        </a>
      
      
        
        <a href="../integrations-deepchecks/" class="md-footer__link md-footer__link--next" aria-label="Next: Deepchecks" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Deepchecks
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 ZenML GmbH  <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>