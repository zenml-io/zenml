
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.68.1/integration_code_docs/integrations-aws/">
      
      <link rel="icon" href="../../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>Aws - ZenML API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  analytics.page();
  }}();
</script>
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aws" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ZenML API Reference" class="md-header__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Aws
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZenML API Reference" class="md-nav__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZenML API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        ZenML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-alerter/" class="md-nav__link">
        Alerter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-annotators/" class="md-nav__link">
        Annotators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifact_stores/" class="md-nav__link">
        Artifact Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-client_lazy_loader/" class="md-nav__link">
        Client Lazy Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-code_repositories/" class="md-nav__link">
        Code Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-config/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-console/" class="md-nav__link">
        Console
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-container_registries/" class="md-nav__link">
        Container Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-data_validators/" class="md-nav__link">
        Data Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-entrypoints/" class="md-nav__link">
        Entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-enums/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_hub/" class="md-nav__link">
        Event Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-event_sources/" class="md-nav__link">
        Event Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-experiment_trackers/" class="md-nav__link">
        Experiment Trackers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-feature_stores/" class="md-nav__link">
        Feature Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-image_builders/" class="md-nav__link">
        Image Builders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logger/" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-materializers/" class="md-nav__link">
        Materializers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_deployers/" class="md-nav__link">
        Model Deployers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-model_registries/" class="md-nav__link">
        Model Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-orchestrators/" class="md-nav__link">
        Orchestrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-secret/" class="md-nav__link">
        Secret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-service_connectors/" class="md-nav__link">
        Service Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-stack/" class="md-nav__link">
        Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-stack_deployments/" class="md-nav__link">
        Stack Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-step_operators/" class="md-nav__link">
        Step Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-steps/" class="md-nav__link">
        Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_server/" class="md-nav__link">
        Zen Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core_code_docs/core-zen_stores/" class="md-nav__link">
        Zen Stores
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Integration code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Integration code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-argilla/" class="md-nav__link">
        Argilla
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Aws
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Aws
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.aws" class="md-nav__link">
    aws
  </a>
  
    <nav class="md-nav" aria-label="aws">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.AWSIntegration" class="md-nav__link">
    AWSIntegration
  </a>
  
    <nav class="md-nav" aria-label="AWSIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.AWSIntegration.activate" class="md-nav__link">
    activate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.AWSIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries" class="md-nav__link">
    container_registries
  </a>
  
    <nav class="md-nav" aria-label="container_registries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry" class="md-nav__link">
    aws_container_registry
  </a>
  
    <nav class="md-nav" aria-label="aws_container_registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry" class="md-nav__link">
    AWSContainerRegistry
  </a>
  
    <nav class="md-nav" aria-label="AWSContainerRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.post_registration_message" class="md-nav__link">
    post_registration_message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.prepare_image_push" class="md-nav__link">
    prepare_image_push()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor" class="md-nav__link">
    aws_container_registry_flavor
  </a>
  
    <nav class="md-nav" aria-label="aws_container_registry_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig" class="md-nav__link">
    AWSContainerRegistryConfig
  </a>
  
    <nav class="md-nav" aria-label="AWSContainerRegistryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig.validate_aws_uri" class="md-nav__link">
    validate_aws_uri()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor" class="md-nav__link">
    AWSContainerRegistryFlavor
  </a>
  
    <nav class="md-nav" aria-label="AWSContainerRegistryFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor" class="md-nav__link">
    sagemaker_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig" class="md-nav__link">
    SagemakerOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig.is_synchronous" class="md-nav__link">
    is_synchronous
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor" class="md-nav__link">
    SagemakerOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings" class="md-nav__link">
    SagemakerOrchestratorSettings
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestratorSettings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings.validate_model" class="md-nav__link">
    validate_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor" class="md-nav__link">
    sagemaker_step_operator_flavor
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_step_operator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig" class="md-nav__link">
    SagemakerStepOperatorConfig
  </a>
  
    <nav class="md-nav" aria-label="SagemakerStepOperatorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor" class="md-nav__link">
    SagemakerStepOperatorFlavor
  </a>
  
    <nav class="md-nav" aria-label="SagemakerStepOperatorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorSettings" class="md-nav__link">
    SagemakerStepOperatorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator" class="md-nav__link">
    sagemaker_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator" class="md-nav__link">
    SagemakerOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.compute_metadata" class="md-nav__link">
    compute_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.fetch_status" class="md-nav__link">
    fetch_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.get_pipeline_run_metadata" class="md-nav__link">
    get_pipeline_run_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.dissect_pipeline_execution_arn" class="md-nav__link">
    dissect_pipeline_execution_arn()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config" class="md-nav__link">
    sagemaker_orchestrator_entrypoint_config
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_orchestrator_entrypoint_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config.SagemakerEntrypointConfiguration" class="md-nav__link">
    SagemakerEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="SagemakerEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config.SagemakerEntrypointConfiguration.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors" class="md-nav__link">
    service_connectors
  </a>
  
    <nav class="md-nav" aria-label="service_connectors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector" class="md-nav__link">
    aws_service_connector
  </a>
  
    <nav class="md-nav" aria-label="aws_service_connector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSAuthenticationMethods" class="md-nav__link">
    AWSAuthenticationMethods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig" class="md-nav__link">
    AWSBaseConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSImplicitConfig" class="md-nav__link">
    AWSImplicitConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey" class="md-nav__link">
    AWSSecretKey
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig" class="md-nav__link">
    AWSSecretKeyConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector" class="md-nav__link">
    AWSServiceConnector
  </a>
  
    <nav class="md-nav" aria-label="AWSServiceConnector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.account_id" class="md-nav__link">
    account_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.get_boto3_session" class="md-nav__link">
    get_boto3_session()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.get_ecr_client" class="md-nav__link">
    get_ecr_client()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.model_post_init" class="md-nav__link">
    model_post_init()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy" class="md-nav__link">
    AWSSessionPolicy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.FederationTokenAuthenticationConfig" class="md-nav__link">
    FederationTokenAuthenticationConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.IAMRoleAuthenticationConfig" class="md-nav__link">
    IAMRoleAuthenticationConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.STSToken" class="md-nav__link">
    STSToken
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.STSTokenConfig" class="md-nav__link">
    STSTokenConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.SessionTokenAuthenticationConfig" class="md-nav__link">
    SessionTokenAuthenticationConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators" class="md-nav__link">
    step_operators
  </a>
  
    <nav class="md-nav" aria-label="step_operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator" class="md-nav__link">
    sagemaker_step_operator
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_step_operator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator" class="md-nav__link">
    SagemakerStepOperator
  </a>
  
    <nav class="md-nav" aria-label="SagemakerStepOperator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.entrypoint_config_class" class="md-nav__link">
    entrypoint_config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.get_docker_builds" class="md-nav__link">
    get_docker_builds()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.launch" class="md-nav__link">
    launch()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config" class="md-nav__link">
    sagemaker_step_operator_entrypoint_config
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_step_operator_entrypoint_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config.SagemakerEntrypointConfiguration" class="md-nav__link">
    SagemakerEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="SagemakerEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config.SagemakerEntrypointConfiguration.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bentoml/" class="md-nav__link">
        Bentoml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-bitbucket/" class="md-nav__link">
        Bitbucket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-comet/" class="md-nav__link">
        Comet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-databricks/" class="md-nav__link">
        Databricks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-deepchecks/" class="md-nav__link">
        Deepchecks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-discord/" class="md-nav__link">
        Discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-evidently/" class="md-nav__link">
        Evidently
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-facets/" class="md-nav__link">
        Facets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gcp/" class="md-nav__link">
        Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-gitlab/" class="md-nav__link">
        Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-great_expectations/" class="md-nav__link">
        Great Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-huggingface/" class="md-nav__link">
        Huggingface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-hyperai/" class="md-nav__link">
        Hyperai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-integration/" class="md-nav__link">
        Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kaniko/" class="md-nav__link">
        Kaniko
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kubeflow/" class="md-nav__link">
        Kubeflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-label_studio/" class="md-nav__link">
        Label Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-langchain/" class="md-nav__link">
        Langchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-lightning/" class="md-nav__link">
        Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-llama_index/" class="md-nav__link">
        Llama Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-mlflow/" class="md-nav__link">
        Mlflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neptune/" class="md-nav__link">
        Neptune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-neural_prophet/" class="md-nav__link">
        Neural Prophet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-numpy/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-openai/" class="md-nav__link">
        Openai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pandas/" class="md-nav__link">
        Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pigeon/" class="md-nav__link">
        Pigeon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pillow/" class="md-nav__link">
        Pillow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-polars/" class="md-nav__link">
        Polars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-prodigy/" class="md-nav__link">
        Prodigy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pycaret/" class="md-nav__link">
        Pycaret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-pytorch_lightning/" class="md-nav__link">
        Pytorch Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-scipy/" class="md-nav__link">
        Scipy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-seldon/" class="md-nav__link">
        Seldon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-sklearn/" class="md-nav__link">
        Sklearn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot/" class="md-nav__link">
        Skypilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_aws/" class="md-nav__link">
        Skypilot Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_azure/" class="md-nav__link">
        Skypilot Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_gcp/" class="md-nav__link">
        Skypilot Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_kubernetes/" class="md-nav__link">
        Skypilot Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-skypilot_lambda/" class="md-nav__link">
        Skypilot Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tekton/" class="md-nav__link">
        Tekton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorboard/" class="md-nav__link">
        Tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-wandb/" class="md-nav__link">
        Wandb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-whylogs/" class="md-nav__link">
        Whylogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrations-xgboost/" class="md-nav__link">
        Xgboost
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.integrations.aws" class="md-nav__link">
    aws
  </a>
  
    <nav class="md-nav" aria-label="aws">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.AWSIntegration" class="md-nav__link">
    AWSIntegration
  </a>
  
    <nav class="md-nav" aria-label="AWSIntegration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.AWSIntegration.activate" class="md-nav__link">
    activate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.AWSIntegration.flavors" class="md-nav__link">
    flavors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries" class="md-nav__link">
    container_registries
  </a>
  
    <nav class="md-nav" aria-label="container_registries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry" class="md-nav__link">
    aws_container_registry
  </a>
  
    <nav class="md-nav" aria-label="aws_container_registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry" class="md-nav__link">
    AWSContainerRegistry
  </a>
  
    <nav class="md-nav" aria-label="AWSContainerRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.post_registration_message" class="md-nav__link">
    post_registration_message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.prepare_image_push" class="md-nav__link">
    prepare_image_push()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors" class="md-nav__link">
    flavors
  </a>
  
    <nav class="md-nav" aria-label="flavors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor" class="md-nav__link">
    aws_container_registry_flavor
  </a>
  
    <nav class="md-nav" aria-label="aws_container_registry_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig" class="md-nav__link">
    AWSContainerRegistryConfig
  </a>
  
    <nav class="md-nav" aria-label="AWSContainerRegistryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig.validate_aws_uri" class="md-nav__link">
    validate_aws_uri()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor" class="md-nav__link">
    AWSContainerRegistryFlavor
  </a>
  
    <nav class="md-nav" aria-label="AWSContainerRegistryFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor" class="md-nav__link">
    sagemaker_orchestrator_flavor
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_orchestrator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig" class="md-nav__link">
    SagemakerOrchestratorConfig
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestratorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig.is_synchronous" class="md-nav__link">
    is_synchronous
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor" class="md-nav__link">
    SagemakerOrchestratorFlavor
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestratorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings" class="md-nav__link">
    SagemakerOrchestratorSettings
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestratorSettings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings.validate_model" class="md-nav__link">
    validate_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor" class="md-nav__link">
    sagemaker_step_operator_flavor
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_step_operator_flavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig" class="md-nav__link">
    SagemakerStepOperatorConfig
  </a>
  
    <nav class="md-nav" aria-label="SagemakerStepOperatorConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig.is_remote" class="md-nav__link">
    is_remote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor" class="md-nav__link">
    SagemakerStepOperatorFlavor
  </a>
  
    <nav class="md-nav" aria-label="SagemakerStepOperatorFlavor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.config_class" class="md-nav__link">
    config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.docs_url" class="md-nav__link">
    docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.implementation_class" class="md-nav__link">
    implementation_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.logo_url" class="md-nav__link">
    logo_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.sdk_docs_url" class="md-nav__link">
    sdk_docs_url
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.service_connector_requirements" class="md-nav__link">
    service_connector_requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorSettings" class="md-nav__link">
    SagemakerStepOperatorSettings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators" class="md-nav__link">
    orchestrators
  </a>
  
    <nav class="md-nav" aria-label="orchestrators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator" class="md-nav__link">
    sagemaker_orchestrator
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_orchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator" class="md-nav__link">
    SagemakerOrchestrator
  </a>
  
    <nav class="md-nav" aria-label="SagemakerOrchestrator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.compute_metadata" class="md-nav__link">
    compute_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.fetch_status" class="md-nav__link">
    fetch_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.get_orchestrator_run_id" class="md-nav__link">
    get_orchestrator_run_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.get_pipeline_run_metadata" class="md-nav__link">
    get_pipeline_run_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.prepare_or_run_pipeline" class="md-nav__link">
    prepare_or_run_pipeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator.dissect_pipeline_execution_arn" class="md-nav__link">
    dissect_pipeline_execution_arn()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config" class="md-nav__link">
    sagemaker_orchestrator_entrypoint_config
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_orchestrator_entrypoint_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config.SagemakerEntrypointConfiguration" class="md-nav__link">
    SagemakerEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="SagemakerEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config.SagemakerEntrypointConfiguration.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors" class="md-nav__link">
    service_connectors
  </a>
  
    <nav class="md-nav" aria-label="service_connectors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector" class="md-nav__link">
    aws_service_connector
  </a>
  
    <nav class="md-nav" aria-label="aws_service_connector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSAuthenticationMethods" class="md-nav__link">
    AWSAuthenticationMethods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig" class="md-nav__link">
    AWSBaseConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSImplicitConfig" class="md-nav__link">
    AWSImplicitConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey" class="md-nav__link">
    AWSSecretKey
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig" class="md-nav__link">
    AWSSecretKeyConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector" class="md-nav__link">
    AWSServiceConnector
  </a>
  
    <nav class="md-nav" aria-label="AWSServiceConnector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.account_id" class="md-nav__link">
    account_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.get_boto3_session" class="md-nav__link">
    get_boto3_session()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.get_ecr_client" class="md-nav__link">
    get_ecr_client()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.model_post_init" class="md-nav__link">
    model_post_init()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy" class="md-nav__link">
    AWSSessionPolicy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.FederationTokenAuthenticationConfig" class="md-nav__link">
    FederationTokenAuthenticationConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.IAMRoleAuthenticationConfig" class="md-nav__link">
    IAMRoleAuthenticationConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.STSToken" class="md-nav__link">
    STSToken
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.STSTokenConfig" class="md-nav__link">
    STSTokenConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.service_connectors.aws_service_connector.SessionTokenAuthenticationConfig" class="md-nav__link">
    SessionTokenAuthenticationConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators" class="md-nav__link">
    step_operators
  </a>
  
    <nav class="md-nav" aria-label="step_operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator" class="md-nav__link">
    sagemaker_step_operator
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_step_operator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator" class="md-nav__link">
    SagemakerStepOperator
  </a>
  
    <nav class="md-nav" aria-label="SagemakerStepOperator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.entrypoint_config_class" class="md-nav__link">
    entrypoint_config_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.settings_class" class="md-nav__link">
    settings_class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.validator" class="md-nav__link">
    validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.get_docker_builds" class="md-nav__link">
    get_docker_builds()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.launch" class="md-nav__link">
    launch()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config" class="md-nav__link">
    sagemaker_step_operator_entrypoint_config
  </a>
  
    <nav class="md-nav" aria-label="sagemaker_step_operator_entrypoint_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config.SagemakerEntrypointConfiguration" class="md-nav__link">
    SagemakerEntrypointConfiguration
  </a>
  
    <nav class="md-nav" aria-label="SagemakerEntrypointConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config.SagemakerEntrypointConfiguration.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/zenml-io/zenml/docs/integration_code_docs/integrations-aws.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="aws">Aws</h1>


  <div class="doc doc-object doc-module">



<h2 id="zenml.integrations.aws" class="doc doc-heading">
        <code>zenml.integrations.aws</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents first">

      <p>Integrates multiple AWS Tools as Stack Components.</p>
<p>The AWS integration provides a way for our users to manage their secrets
through AWS, a way to use the aws container registry. Additionally, the
Sagemaker integration submodule provides a way to run ZenML steps in
Sagemaker.</p>



  <div class="doc doc-children">














  <div class="doc doc-object doc-class">



<h3 id="zenml.integrations.aws.AWSIntegration" class="doc doc-heading">
        <code>
AWSIntegration            (<a class="autorefs autorefs-internal" title="zenml.integrations.integration.Integration" href="../integrations-integration/#zenml.integrations.integration.Integration">Integration</a>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>Definition of AWS integration for ZenML.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSIntegration</span><span class="p">(</span><span class="n">Integration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Definition of AWS integration for ZenML.&quot;&quot;&quot;</span>

    <span class="n">NAME</span> <span class="o">=</span> <span class="n">AWS</span>
    <span class="n">REQUIREMENTS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;sagemaker&gt;=2.117.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;kubernetes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;aws-profile-manager&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">REQUIREMENTS_IGNORED_ON_UNINSTALL</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kubernetes&quot;</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">activate</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Activate the AWS integration.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.aws</span> <span class="kn">import</span> <span class="n">service_connectors</span>  <span class="c1"># noqa</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the AWS integration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of stack component flavors for this integration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.aws.flavors</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">AWSContainerRegistryFlavor</span><span class="p">,</span>
            <span class="n">SagemakerOrchestratorFlavor</span><span class="p">,</span>
            <span class="n">SagemakerStepOperatorFlavor</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">AWSContainerRegistryFlavor</span><span class="p">,</span>
            <span class="n">SagemakerStepOperatorFlavor</span><span class="p">,</span>
            <span class="n">SagemakerOrchestratorFlavor</span><span class="p">,</span>
        <span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h4 id="zenml.integrations.aws.AWSIntegration.activate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">activate</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Activate the AWS integration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">activate</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Activate the AWS integration.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.integrations.aws</span> <span class="kn">import</span> <span class="n">service_connectors</span>  <span class="c1"># noqa</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="zenml.integrations.aws.AWSIntegration.flavors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">flavors</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Declare the stack component flavors for the AWS integration.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[Type[zenml.stack.flavor.Flavor]]</code></td>
      <td><p>List of stack component flavors for this integration.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">flavors</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Flavor</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Declare the stack component flavors for the AWS integration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of stack component flavors for this integration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.integrations.aws.flavors</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">AWSContainerRegistryFlavor</span><span class="p">,</span>
        <span class="n">SagemakerOrchestratorFlavor</span><span class="p">,</span>
        <span class="n">SagemakerStepOperatorFlavor</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span>
        <span class="n">AWSContainerRegistryFlavor</span><span class="p">,</span>
        <span class="n">SagemakerStepOperatorFlavor</span><span class="p">,</span>
        <span class="n">SagemakerOrchestratorFlavor</span><span class="p">,</span>
    <span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.aws.container_registries" class="doc doc-heading">
        <code>container_registries</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialization of AWS Container Registry integration.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.container_registries.aws_container_registry" class="doc doc-heading">
        <code>aws_container_registry</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the AWS container registry integration.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry" class="doc doc-heading">
        <code>
AWSContainerRegistry            (<a class="autorefs autorefs-internal" title="zenml.container_registries.base_container_registry.BaseContainerRegistry" href="../../core_code_docs/core-container_registries/#zenml.container_registries.base_container_registry.BaseContainerRegistry">BaseContainerRegistry</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Class for AWS Container Registry.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/container_registries/aws_container_registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSContainerRegistry</span><span class="p">(</span><span class="n">BaseContainerRegistry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for AWS Container Registry.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AWSContainerRegistryConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the `AWSContainerRegistryConfig` config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">AWSContainerRegistryConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_region</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parses the AWS region from the registry URI.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the region parsing fails due to an invalid URI.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The region string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;.*\.dkr\.ecr\.(.*)\.amazonaws\.com&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unable to parse region from ECR URI </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_ecr_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an ECR client.</span>

<span class="sd">        If this container registry is configured with an AWS service connector,</span>
<span class="sd">        we use that connector to create an authenticated client. Otherwise</span>
<span class="sd">        local AWS credentials will be used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ECR client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">model</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connector</span><span class="p">)</span>
                <span class="n">connector</span> <span class="o">=</span> <span class="n">service_connector_registry</span><span class="o">.</span><span class="n">instantiate_connector</span><span class="p">(</span>
                    <span class="n">model</span><span class="o">=</span><span class="n">model</span>
                <span class="p">)</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connector</span><span class="p">,</span> <span class="n">AWSServiceConnector</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">connector</span><span class="o">.</span><span class="n">get_ecr_client</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;Unable to get ECR client from service connector: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
            <span class="s2">&quot;ecr&quot;</span><span class="p">,</span>
            <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_region</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepare_image_push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Logs warning message if trying to push an image for which no repository exists.</span>

<span class="sd">        Args:</span>
<span class="sd">            image_name: Name of the docker image that will be pushed.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the docker image name is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find repository name from image name</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">/(.*):.*&quot;</span><span class="p">,</span> <span class="n">image_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid docker image name &#39;</span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
        <span class="n">repo_name</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ecr_client</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">describe_repositories</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BotoCoreError</span><span class="p">,</span> <span class="n">ClientError</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Amazon ECR requires you to create a repository before you can &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;push an image to it. ZenML is trying to push the image &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2"> but could not find any repositories because &quot;</span>
                <span class="s2">&quot;your local AWS credentials are not set. We will try to push &quot;</span>
                <span class="s2">&quot;anyway, but in case it fails you need to create a repository &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;named `</span><span class="si">{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">repo_uris</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">repository</span><span class="p">[</span><span class="s2">&quot;repositoryUri&quot;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;repositories&quot;</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">ClientError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># invalid boto response, let&#39;s hope for the best and just push</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error while trying to fetch ECR repositories: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">repo_exists</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
            <span class="n">image_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">repo_uris</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">repo_exists</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Amazon ECR requires you to create a repository before you can &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;push an image to it. ZenML is trying to push the image &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2"> but could only detect the following &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;repositories: </span><span class="si">{</span><span class="n">repo_uris</span><span class="si">}</span><span class="s2">. We will try to push anyway, but &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;in case it fails you need to create a repository named &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">post_registration_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional message printed after the stack component is registered.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Info message regarding docker repositories in AWS.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;Amazon ECR requires you to create a repository before you can &quot;</span>
            <span class="s2">&quot;push an image to it. If you want to for run a pipeline &quot;</span>
            <span class="s2">&quot;using a remote orchestrator, ZenML will automatically build a &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;docker image called `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">/zenml:&lt;PIPELINE_NAME&gt;` &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;and try to push it. This will fail unless you create a &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;repository called `zenml` inside your Amazon ECR.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">AWSContainerRegistryConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the <code>AWSContainerRegistryConfig</code> config.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>AWSContainerRegistryConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.post_registration_message" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_registration_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Optional message printed after the stack component is registered.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>Info message regarding docker repositories in AWS.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.container_registries.aws_container_registry.AWSContainerRegistry.prepare_image_push" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_image_push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_name</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Logs warning message if trying to push an image for which no repository exists.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the docker image that will be pushed.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the docker image name is invalid.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/container_registries/aws_container_registry.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_image_push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs warning message if trying to push an image for which no repository exists.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_name: Name of the docker image that will be pushed.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the docker image name is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Find repository name from image name</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">/(.*):.*&quot;</span><span class="p">,</span> <span class="n">image_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid docker image name &#39;</span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ecr_client</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">describe_repositories</span><span class="p">()</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">BotoCoreError</span><span class="p">,</span> <span class="n">ClientError</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Amazon ECR requires you to create a repository before you can &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;push an image to it. ZenML is trying to push the image &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2"> but could not find any repositories because &quot;</span>
            <span class="s2">&quot;your local AWS credentials are not set. We will try to push &quot;</span>
            <span class="s2">&quot;anyway, but in case it fails you need to create a repository &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;named `</span><span class="si">{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">repo_uris</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">repository</span><span class="p">[</span><span class="s2">&quot;repositoryUri&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">repository</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;repositories&quot;</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">ClientError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># invalid boto response, let&#39;s hope for the best and just push</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error while trying to fetch ECR repositories: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">repo_exists</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
        <span class="n">image_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">repo_uris</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">repo_exists</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Amazon ECR requires you to create a repository before you can &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;push an image to it. ZenML is trying to push the image &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2"> but could only detect the following &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;repositories: </span><span class="si">{</span><span class="n">repo_uris</span><span class="si">}</span><span class="s2">. We will try to push anyway, but &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;in case it fails you need to create a repository named &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.aws.flavors" class="doc doc-heading">
        <code>flavors</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>AWS integration flavors.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.flavors.aws_container_registry_flavor" class="doc doc-heading">
        <code>aws_container_registry_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>AWS container registry flavor.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig" class="doc doc-heading">
        <code>
AWSContainerRegistryConfig            (<a class="autorefs autorefs-internal" title="zenml.container_registries.base_container_registry.BaseContainerRegistryConfig" href="../../core_code_docs/core-container_registries/#zenml.container_registries.base_container_registry.BaseContainerRegistryConfig">BaseContainerRegistryConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Configuration for AWS Container Registry.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/aws_container_registry_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSContainerRegistryConfig</span><span class="p">(</span><span class="n">BaseContainerRegistryConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for AWS Container Registry.&quot;&quot;&quot;</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;uri&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate_aws_uri</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates that the URI is in the correct format.</span>

<span class="sd">        Args:</span>
<span class="sd">            uri: URI to validate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            URI in the correct format.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the URI contains a slash character.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">uri</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Property `uri` can not contain a `/`. An example of a valid &quot;</span>
                <span class="s2">&quot;URI is: `715803424592.dkr.ecr.us-east-1.amazonaws.com`&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">uri</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">

























  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig.validate_aws_uri" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_aws_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Validates that the URI is in the correct format.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>uri</code></td>
        <td><code>str</code></td>
        <td><p>URI to validate.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>URI in the correct format.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the URI contains a slash character.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/aws_container_registry_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;uri&quot;</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">validate_aws_uri</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates that the URI is in the correct format.</span>

<span class="sd">    Args:</span>
<span class="sd">        uri: URI to validate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        URI in the correct format.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the URI contains a slash character.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">uri</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Property `uri` can not contain a `/`. An example of a valid &quot;</span>
            <span class="s2">&quot;URI is: `715803424592.dkr.ecr.us-east-1.amazonaws.com`&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">uri</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor" class="doc doc-heading">
        <code>
AWSContainerRegistryFlavor            (<a class="autorefs autorefs-internal" title="zenml.container_registries.base_container_registry.BaseContainerRegistryFlavor" href="../../core_code_docs/core-container_registries/#zenml.container_registries.base_container_registry.BaseContainerRegistryFlavor">BaseContainerRegistryFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS Container Registry flavor.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/aws_container_registry_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSContainerRegistryFlavor</span><span class="p">(</span><span class="n">BaseContainerRegistryFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS Container Registry flavor.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AWS_CONTAINER_REGISTRY_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">service_connector_requirements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorRequirements</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Service connector resource requirements for service connectors.</span>

<span class="sd">        Specifies resource requirements that are used to filter the available</span>
<span class="sd">        service connector types that are compatible with this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Requirements for compatible service connectors, if a service</span>
<span class="sd">            connector is required for this flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceConnectorRequirements</span><span class="p">(</span>
            <span class="n">connector_type</span><span class="o">=</span><span class="n">AWS_CONNECTOR_TYPE</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">,</span>
            <span class="n">resource_id_attr</span><span class="o">=</span><span class="s2">&quot;uri&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/container_registry/aws.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">AWSContainerRegistryConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Config class for this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AWSContainerRegistryConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;AWSContainerRegistry&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.aws.container_registries</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">AWSContainerRegistry</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">AWSContainerRegistry</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">aws_container_registry_flavor</span><span class="o">.</span><span class="n">AWSContainerRegistryConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Config class for this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">AWSContainerRegistry</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[AWSContainerRegistry]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.aws_container_registry_flavor.AWSContainerRegistryFlavor.service_connector_requirements" class="doc doc-heading">
<code class="highlight language-python"><span class="n">service_connector_requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">v2</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">service_connector_type</span><span class="o">.</span><span class="n">ServiceConnectorRequirements</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Service connector resource requirements for service connectors.</p>
<p>Specifies resource requirements that are used to filter the available
service connector types that are compatible with this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.models.v2.misc.service_connector_type.ServiceConnectorRequirements]</code></td>
      <td><p>Requirements for compatible service connectors, if a service
connector is required for this flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor" class="doc doc-heading">
        <code>sagemaker_orchestrator_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>Amazon SageMaker orchestrator flavor.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig" class="doc doc-heading">
        <code>
SagemakerOrchestratorConfig            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorConfig">BaseOrchestratorConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings" href="#zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings">SagemakerOrchestratorSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Config for the Sagemaker orchestrator.</p>
<p>There are three ways to authenticate to AWS:
- By connecting a <code>ServiceConnector</code> to the orchestrator,
- By configuring explicit AWS credentials <code>aws_access_key_id</code>,
    <code>aws_secret_access_key</code>, and optional <code>aws_auth_role_arn</code>,
- If none of the above are provided, unspecified credentials will be
    loaded from the default AWS config.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>execution_role</code></td>
        <td><code>str</code></td>
        <td><p>The IAM role ARN to use for the pipeline.</p></td>
      </tr>
      <tr>
        <td><code>aws_access_key_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The AWS access key ID to use to authenticate to AWS.
If not provided, the value from the default AWS config will be used.</p></td>
      </tr>
      <tr>
        <td><code>aws_secret_access_key</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The AWS secret access key to use to authenticate
to AWS. If not provided, the value from the default AWS config will
be used.</p></td>
      </tr>
      <tr>
        <td><code>aws_profile</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The AWS profile to use for authentication if not using
service connectors or explicit credentials. If not provided, the
default profile will be used.</p></td>
      </tr>
      <tr>
        <td><code>aws_auth_role_arn</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The ARN of an intermediate IAM role to assume when
authenticating to AWS.</p></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The AWS region where the processing job will be run. If not
provided, the value from the default AWS config will be used.</p></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of the S3 bucket to use for storing artifacts
from the job run. If not provided, a default bucket will be created
based on the following format:
"sagemaker-{region}-{aws-account-id}".</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerOrchestratorConfig</span><span class="p">(</span>
    <span class="n">BaseOrchestratorConfig</span><span class="p">,</span> <span class="n">SagemakerOrchestratorSettings</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Config for the Sagemaker orchestrator.</span>

<span class="sd">    There are three ways to authenticate to AWS:</span>
<span class="sd">    - By connecting a `ServiceConnector` to the orchestrator,</span>
<span class="sd">    - By configuring explicit AWS credentials `aws_access_key_id`,</span>
<span class="sd">        `aws_secret_access_key`, and optional `aws_auth_role_arn`,</span>
<span class="sd">    - If none of the above are provided, unspecified credentials will be</span>
<span class="sd">        loaded from the default AWS config.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        execution_role: The IAM role ARN to use for the pipeline.</span>
<span class="sd">        aws_access_key_id: The AWS access key ID to use to authenticate to AWS.</span>
<span class="sd">            If not provided, the value from the default AWS config will be used.</span>
<span class="sd">        aws_secret_access_key: The AWS secret access key to use to authenticate</span>
<span class="sd">            to AWS. If not provided, the value from the default AWS config will</span>
<span class="sd">            be used.</span>
<span class="sd">        aws_profile: The AWS profile to use for authentication if not using</span>
<span class="sd">            service connectors or explicit credentials. If not provided, the</span>
<span class="sd">            default profile will be used.</span>
<span class="sd">        aws_auth_role_arn: The ARN of an intermediate IAM role to assume when</span>
<span class="sd">            authenticating to AWS.</span>
<span class="sd">        region: The AWS region where the processing job will be run. If not</span>
<span class="sd">            provided, the value from the default AWS config will be used.</span>
<span class="sd">        bucket: Name of the S3 bucket to use for storing artifacts</span>
<span class="sd">            from the job run. If not provided, a default bucket will be created</span>
<span class="sd">            based on the following format:</span>
<span class="sd">            &quot;sagemaker-{region}-{aws-account-id}&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">execution_role</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">aws_access_key_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">aws_secret_access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">SecretField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">aws_profile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">aws_auth_role_arn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">region</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">bucket</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running remotely.</span>

<span class="sd">        This designation is used to determine if the stack component can be</span>
<span class="sd">        used with a local ZenML database or if it requires a remote ZenML</span>
<span class="sd">        server.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a remote component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_synchronous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether the orchestrator runs synchronous or not.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Whether the orchestrator runs synchronous or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig.is_remote" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_remote</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running remotely.</p>
<p>This designation is used to determine if the stack component can be
used with a local ZenML database or if it requires a remote ZenML
server.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a remote component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig.is_synchronous" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_synchronous</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Whether the orchestrator runs synchronous or not.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the orchestrator runs synchronous or not.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor" class="doc doc-heading">
        <code>
SagemakerOrchestratorFlavor            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.base_orchestrator.BaseOrchestratorFlavor">BaseOrchestratorFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Flavor for the Sagemaker orchestrator.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerOrchestratorFlavor</span><span class="p">(</span><span class="n">BaseOrchestratorFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Flavor for the Sagemaker orchestrator.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AWS_SAGEMAKER_STEP_OPERATOR_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">service_connector_requirements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorRequirements</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Service connector resource requirements for service connectors.</span>

<span class="sd">        Specifies resource requirements that are used to filter the available</span>
<span class="sd">        service connector types that are compatible with this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Requirements for compatible service connectors, if a service</span>
<span class="sd">            connector is required for this flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceConnectorRequirements</span><span class="p">(</span><span class="n">resource_type</span><span class="o">=</span><span class="n">AWS_RESOURCE_TYPE</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/orchestrator/sagemaker.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SagemakerOrchestratorConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns SagemakerOrchestratorConfig config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SagemakerOrchestratorConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;SagemakerOrchestrator&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.aws.orchestrators</span> <span class="kn">import</span> <span class="n">SagemakerOrchestrator</span>

        <span class="k">return</span> <span class="n">SagemakerOrchestrator</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">sagemaker_orchestrator_flavor</span><span class="o">.</span><span class="n">SagemakerOrchestratorConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns SagemakerOrchestratorConfig config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">SagemakerOrchestrator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[SagemakerOrchestrator]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorFlavor.service_connector_requirements" class="doc doc-heading">
<code class="highlight language-python"><span class="n">service_connector_requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">v2</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">service_connector_type</span><span class="o">.</span><span class="n">ServiceConnectorRequirements</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Service connector resource requirements for service connectors.</p>
<p>Specifies resource requirements that are used to filter the available
service connector types that are compatible with this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.models.v2.misc.service_connector_type.ServiceConnectorRequirements]</code></td>
      <td><p>Requirements for compatible service connectors, if a service
connector is required for this flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings" class="doc doc-heading">
        <code>
SagemakerOrchestratorSettings            (<a class="autorefs autorefs-internal" title="zenml.config.base_settings.BaseSettings" href="../../core_code_docs/core-config/#zenml.config.base_settings.BaseSettings">BaseSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Settings for the Sagemaker orchestrator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>synchronous</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, the client running a pipeline using this
orchestrator waits until all steps finish running. If <code>False</code>,
the client returns immediately and the pipeline is executed
asynchronously. Defaults to <code>True</code>.</p></td>
      </tr>
      <tr>
        <td><code>instance_type</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The instance type to use for the processing job.</p></td>
      </tr>
      <tr>
        <td><code>execution_role</code></td>
        <td><code>str</code></td>
        <td><p>The IAM role to use for the step execution.</p></td>
      </tr>
      <tr>
        <td><code>processor_role</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>DEPRECATED: use <code>execution_role</code> instead.</p></td>
      </tr>
      <tr>
        <td><code>volume_size_in_gb</code></td>
        <td><code>int</code></td>
        <td><p>The size of the EBS volume to use for the processing
job.</p></td>
      </tr>
      <tr>
        <td><code>max_runtime_in_seconds</code></td>
        <td><code>int</code></td>
        <td><p>The maximum runtime in seconds for the
processing job.</p></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Tags to apply to the Processor/Estimator assigned to the step.</p></td>
      </tr>
      <tr>
        <td><code>pipeline_tags</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Tags to apply to the pipeline via the
sagemaker.workflow.pipeline.Pipeline.create method.</p></td>
      </tr>
      <tr>
        <td><code>processor_tags</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>DEPRECATED: use <code>tags</code> instead.</p></td>
      </tr>
      <tr>
        <td><code>keep_alive_period_in_seconds</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The time in seconds after which the
provisioned instance will be terminated if not used. This is only
applicable for TrainingStep type and it is not possible to use
TrainingStep type if the <code>output_data_s3_uri</code> is set to Dict[str, str].</p></td>
      </tr>
      <tr>
        <td><code>use_training_step</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Whether to use the TrainingStep type.
It is not possible to use TrainingStep type
if the <code>output_data_s3_uri</code> is set to Dict[str, str] or if the
<code>output_data_s3_mode</code> != "EndOfJob".</p></td>
      </tr>
      <tr>
        <td><code>processor_args</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Arguments that are directly passed to the SageMaker
Processor for a specific step, allowing for overriding the default
settings provided when configuring the component. See
https://sagemaker.readthedocs.io/en/stable/api/training/processing.html#sagemaker.processing.Processor
for a full list of arguments.
For processor_args.instance_type, check
https://docs.aws.amazon.com/sagemaker/latest/dg/notebooks-available-instance-types.html
for a list of available instance types.</p></td>
      </tr>
      <tr>
        <td><code>estimator_args</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Arguments that are directly passed to the SageMaker
Estimator for a specific step, allowing for overriding the default
settings provided when configuring the component. See
https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.Estimator
for a full list of arguments.
For a list of available instance types, check
https://docs.aws.amazon.com/sagemaker/latest/dg/cmn-info-instance-types.html.</p></td>
      </tr>
      <tr>
        <td><code>input_data_s3_mode</code></td>
        <td><code>str</code></td>
        <td><p>How data is made available to the container.
Two possible input modes: File, Pipe.</p></td>
      </tr>
      <tr>
        <td><code>input_data_s3_uri</code></td>
        <td><code>Union[str, Dict[str, str]]</code></td>
        <td><p>S3 URI where data is located if not locally,
e.g. s3://my-bucket/my-data/train. How data will be made available
to the container is configured with input_data_s3_mode. Two possible
input types:
    - str: S3 location where training data is saved.
    - Dict[str, str]: (ChannelName, S3Location) which represent
        channels (e.g. training, validation, testing) where
        specific parts of the data are saved in S3.</p></td>
      </tr>
      <tr>
        <td><code>output_data_s3_mode</code></td>
        <td><code>str</code></td>
        <td><p>How data is uploaded to the S3 bucket.
Two possible output modes: EndOfJob, Continuous.</p></td>
      </tr>
      <tr>
        <td><code>output_data_s3_uri</code></td>
        <td><code>Union[str, Dict[str, str]]</code></td>
        <td><p>S3 URI where data is uploaded after or during processing run.
e.g. s3://my-bucket/my-data/output. How data will be made available
to the container is configured with output_data_s3_mode. Two possible
input types:
    - str: S3 location where data will be uploaded from a local folder
        named /opt/ml/processing/output/data.
    - Dict[str, str]: (ChannelName, S3Location) which represent
        channels (e.g. output_one, output_two) where
        specific parts of the data are stored locally for S3 upload.
        Data must be available locally in /opt/ml/processing/output/data/<ChannelName>.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerOrchestratorSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Settings for the Sagemaker orchestrator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        synchronous: If `True`, the client running a pipeline using this</span>
<span class="sd">            orchestrator waits until all steps finish running. If `False`,</span>
<span class="sd">            the client returns immediately and the pipeline is executed</span>
<span class="sd">            asynchronously. Defaults to `True`.</span>
<span class="sd">        instance_type: The instance type to use for the processing job.</span>
<span class="sd">        execution_role: The IAM role to use for the step execution.</span>
<span class="sd">        processor_role: DEPRECATED: use `execution_role` instead.</span>
<span class="sd">        volume_size_in_gb: The size of the EBS volume to use for the processing</span>
<span class="sd">            job.</span>
<span class="sd">        max_runtime_in_seconds: The maximum runtime in seconds for the</span>
<span class="sd">            processing job.</span>
<span class="sd">        tags: Tags to apply to the Processor/Estimator assigned to the step.</span>
<span class="sd">        pipeline_tags: Tags to apply to the pipeline via the</span>
<span class="sd">            sagemaker.workflow.pipeline.Pipeline.create method.</span>
<span class="sd">        processor_tags: DEPRECATED: use `tags` instead.</span>
<span class="sd">        keep_alive_period_in_seconds: The time in seconds after which the</span>
<span class="sd">            provisioned instance will be terminated if not used. This is only</span>
<span class="sd">            applicable for TrainingStep type and it is not possible to use</span>
<span class="sd">            TrainingStep type if the `output_data_s3_uri` is set to Dict[str, str].</span>
<span class="sd">        use_training_step: Whether to use the TrainingStep type.</span>
<span class="sd">            It is not possible to use TrainingStep type</span>
<span class="sd">            if the `output_data_s3_uri` is set to Dict[str, str] or if the</span>
<span class="sd">            `output_data_s3_mode` != &quot;EndOfJob&quot;.</span>
<span class="sd">        processor_args: Arguments that are directly passed to the SageMaker</span>
<span class="sd">            Processor for a specific step, allowing for overriding the default</span>
<span class="sd">            settings provided when configuring the component. See</span>
<span class="sd">            https://sagemaker.readthedocs.io/en/stable/api/training/processing.html#sagemaker.processing.Processor</span>
<span class="sd">            for a full list of arguments.</span>
<span class="sd">            For processor_args.instance_type, check</span>
<span class="sd">            https://docs.aws.amazon.com/sagemaker/latest/dg/notebooks-available-instance-types.html</span>
<span class="sd">            for a list of available instance types.</span>
<span class="sd">        estimator_args: Arguments that are directly passed to the SageMaker</span>
<span class="sd">            Estimator for a specific step, allowing for overriding the default</span>
<span class="sd">            settings provided when configuring the component. See</span>
<span class="sd">            https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.Estimator</span>
<span class="sd">            for a full list of arguments.</span>
<span class="sd">            For a list of available instance types, check</span>
<span class="sd">            https://docs.aws.amazon.com/sagemaker/latest/dg/cmn-info-instance-types.html.</span>
<span class="sd">        input_data_s3_mode: How data is made available to the container.</span>
<span class="sd">            Two possible input modes: File, Pipe.</span>
<span class="sd">        input_data_s3_uri: S3 URI where data is located if not locally,</span>
<span class="sd">            e.g. s3://my-bucket/my-data/train. How data will be made available</span>
<span class="sd">            to the container is configured with input_data_s3_mode. Two possible</span>
<span class="sd">            input types:</span>
<span class="sd">                - str: S3 location where training data is saved.</span>
<span class="sd">                - Dict[str, str]: (ChannelName, S3Location) which represent</span>
<span class="sd">                    channels (e.g. training, validation, testing) where</span>
<span class="sd">                    specific parts of the data are saved in S3.</span>
<span class="sd">        output_data_s3_mode: How data is uploaded to the S3 bucket.</span>
<span class="sd">            Two possible output modes: EndOfJob, Continuous.</span>
<span class="sd">        output_data_s3_uri: S3 URI where data is uploaded after or during processing run.</span>
<span class="sd">            e.g. s3://my-bucket/my-data/output. How data will be made available</span>
<span class="sd">            to the container is configured with output_data_s3_mode. Two possible</span>
<span class="sd">            input types:</span>
<span class="sd">                - str: S3 location where data will be uploaded from a local folder</span>
<span class="sd">                    named /opt/ml/processing/output/data.</span>
<span class="sd">                - Dict[str, str]: (ChannelName, S3Location) which represent</span>
<span class="sd">                    channels (e.g. output_one, output_two) where</span>
<span class="sd">                    specific parts of the data are stored locally for S3 upload.</span>
<span class="sd">                    Data must be available locally in /opt/ml/processing/output/data/&lt;ChannelName&gt;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">synchronous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">instance_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">execution_role</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">volume_size_in_gb</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">max_runtime_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">86400</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">pipeline_tags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">keep_alive_period_in_seconds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># 5 minutes</span>
    <span class="n">use_training_step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">processor_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">estimator_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">input_data_s3_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;File&quot;</span>
    <span class="n">input_data_s3_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">union_mode</span><span class="o">=</span><span class="s2">&quot;left_to_right&quot;</span>
    <span class="p">)</span>

    <span class="n">output_data_s3_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span>
    <span class="n">output_data_s3_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">union_mode</span><span class="o">=</span><span class="s2">&quot;left_to_right&quot;</span>
    <span class="p">)</span>

    <span class="n">processor_role</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">processor_tags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_deprecation_validator</span> <span class="o">=</span> <span class="n">deprecation_utils</span><span class="o">.</span><span class="n">deprecate_pydantic_attributes</span><span class="p">(</span>
        <span class="p">(</span><span class="s2">&quot;processor_role&quot;</span><span class="p">,</span> <span class="s2">&quot;execution_role&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;processor_tags&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if model is configured correctly.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The model data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The validated model data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the model is configured incorrectly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">use_training_step</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_training_step&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">output_data_s3_uri</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;output_data_s3_uri&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">output_data_s3_mode</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;output_data_s3_mode&quot;</span><span class="p">,</span> <span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">use_training_step</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                <span class="ow">and</span> <span class="p">(</span><span class="n">output_data_s3_mode</span> <span class="o">!=</span> <span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`use_training_step=True` is not supported when `output_data_s3_uri` is a dict or &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;when `output_data_s3_mode` is not &#39;</span><span class="si">{</span><span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>
        <span class="n">instance_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">instance_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_TRAINING_INSTANCE_TYPE</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_PROCESSING_INSTANCE_TYPE</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">

























  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.flavors.sagemaker_orchestrator_flavor.SagemakerOrchestratorSettings.validate_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_model</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Check if model is configured correctly.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The model data.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The validated model data.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the model is configured incorrectly.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_orchestrator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">validate_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if model is configured correctly.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The model data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The validated model data.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the model is configured incorrectly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">use_training_step</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_training_step&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">output_data_s3_uri</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;output_data_s3_uri&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">output_data_s3_mode</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;output_data_s3_mode&quot;</span><span class="p">,</span> <span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">use_training_step</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="ow">or</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span><span class="n">output_data_s3_mode</span> <span class="o">!=</span> <span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;`use_training_step=True` is not supported when `output_data_s3_uri` is a dict or &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;when `output_data_s3_mode` is not &#39;</span><span class="si">{</span><span class="n">DEFAULT_OUTPUT_DATA_S3_MODE</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>
    <span class="n">instance_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">instance_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_TRAINING_INSTANCE_TYPE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;instance_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_PROCESSING_INSTANCE_TYPE</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor" class="doc doc-heading">
        <code>sagemaker_step_operator_flavor</code>



</h4>

    <div class="doc doc-contents ">

      <p>Amazon SageMaker step operator flavor.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig" class="doc doc-heading">
        <code>
SagemakerStepOperatorConfig            (<a class="autorefs autorefs-internal" title="zenml.step_operators.base_step_operator.BaseStepOperatorConfig" href="../../core_code_docs/core-step_operators/#zenml.step_operators.base_step_operator.BaseStepOperatorConfig">BaseStepOperatorConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorSettings" href="#zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorSettings">SagemakerStepOperatorSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Config for the Sagemaker step operator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>role</code></td>
        <td><code>str</code></td>
        <td><p>The role that has to be assigned to the jobs which are
running in Sagemaker.</p></td>
      </tr>
      <tr>
        <td><code>bucket</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name of the S3 bucket to use for storing artifacts
from the job run. If not provided, a default bucket will be created
based on the following format: "sagemaker-{region}-{aws-account-id}".</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_step_operator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerStepOperatorConfig</span><span class="p">(</span>
    <span class="n">BaseStepOperatorConfig</span><span class="p">,</span> <span class="n">SagemakerStepOperatorSettings</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Config for the Sagemaker step operator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        role: The role that has to be assigned to the jobs which are</span>
<span class="sd">            running in Sagemaker.</span>
<span class="sd">        bucket: Name of the S3 bucket to use for storing artifacts</span>
<span class="sd">            from the job run. If not provided, a default bucket will be created</span>
<span class="sd">            based on the following format: &quot;sagemaker-{region}-{aws-account-id}&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">role</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bucket</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this stack component is running remotely.</span>

<span class="sd">        This designation is used to determine if the stack component can be</span>
<span class="sd">        used with a local ZenML database or if it requires a remote ZenML</span>
<span class="sd">        server.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if this config is for a remote component, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig.is_remote" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_remote</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Checks if this stack component is running remotely.</p>
<p>This designation is used to determine if the stack component can be
used with a local ZenML database or if it requires a remote ZenML
server.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if this config is for a remote component, False otherwise.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor" class="doc doc-heading">
        <code>
SagemakerStepOperatorFlavor            (<a class="autorefs autorefs-internal" title="zenml.step_operators.base_step_operator.BaseStepOperatorFlavor" href="../../core_code_docs/core-step_operators/#zenml.step_operators.base_step_operator.BaseStepOperatorFlavor">BaseStepOperatorFlavor</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Flavor for the Sagemaker step operator.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_step_operator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerStepOperatorFlavor</span><span class="p">(</span><span class="n">BaseStepOperatorFlavor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Flavor for the Sagemaker step operator.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AWS_SAGEMAKER_STEP_OPERATOR_FLAVOR</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">service_connector_requirements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorRequirements</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Service connector resource requirements for service connectors.</span>

<span class="sd">        Specifies resource requirements that are used to filter the available</span>
<span class="sd">        service connector types that are compatible with this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Requirements for compatible service connectors, if a service</span>
<span class="sd">            connector is required for this flavor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceConnectorRequirements</span><span class="p">(</span><span class="n">resource_type</span><span class="o">=</span><span class="n">AWS_RESOURCE_TYPE</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdk_docs_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to point at SDK docs explaining this flavor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A flavor SDK docs url.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_default_sdk_docs_url</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logo_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A url to represent the flavor in the dashboard.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The flavor logo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;https://public-flavor-logos.s3.eu-central-1.amazonaws.com/step_operator/sagemaker.png&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SagemakerStepOperatorConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns SagemakerStepOperatorConfig config class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The config class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SagemakerStepOperatorConfig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;SagemakerStepOperator&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementation class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The implementation class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">zenml.integrations.aws.step_operators</span> <span class="kn">import</span> <span class="n">SagemakerStepOperator</span>

        <span class="k">return</span> <span class="n">SagemakerStepOperator</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">integrations</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">flavors</span><span class="o">.</span><span class="n">sagemaker_step_operator_flavor</span><span class="o">.</span><span class="n">SagemakerStepOperatorConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns SagemakerStepOperatorConfig config class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorConfig]</code></td>
      <td><p>The config class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.implementation_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">implementation_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">SagemakerStepOperator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Implementation class.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[SagemakerStepOperator]</code></td>
      <td><p>The implementation class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.logo_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logo_url</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to represent the flavor in the dashboard.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The flavor logo.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Name of the flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.sdk_docs_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sdk_docs_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>A url to point at SDK docs explaining this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>A flavor SDK docs url.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorFlavor.service_connector_requirements" class="doc doc-heading">
<code class="highlight language-python"><span class="n">service_connector_requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">v2</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">service_connector_type</span><span class="o">.</span><span class="n">ServiceConnectorRequirements</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Service connector resource requirements for service connectors.</p>
<p>Specifies resource requirements that are used to filter the available
service connector types that are compatible with this flavor.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.models.v2.misc.service_connector_type.ServiceConnectorRequirements]</code></td>
      <td><p>Requirements for compatible service connectors, if a service
connector is required for this flavor.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.flavors.sagemaker_step_operator_flavor.SagemakerStepOperatorSettings" class="doc doc-heading">
        <code>
SagemakerStepOperatorSettings            (<a class="autorefs autorefs-internal" title="zenml.config.base_settings.BaseSettings" href="../../core_code_docs/core-config/#zenml.config.base_settings.BaseSettings">BaseSettings</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Settings for the Sagemaker step operator.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>experiment_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name for the experiment to which the job
will be associated. If not provided, the job runs would be
independent.</p></td>
      </tr>
      <tr>
        <td><code>input_data_s3_uri</code></td>
        <td><code>Union[str, Dict[str, str]]</code></td>
        <td><p>S3 URI where training data is located if not locally,
e.g. s3://my-bucket/my-data/train. How data will be made available
to the container is configured with estimator_args.input_mode. Two possible
input types:
    - str: S3 location where training data is saved.
    - Dict[str, str]: (ChannelName, S3Location) which represent
        channels (e.g. training, validation, testing) where
        specific parts of the data are saved in S3.</p></td>
      </tr>
      <tr>
        <td><code>estimator_args</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>Arguments that are directly passed to the SageMaker
Estimator. See
https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.Estimator
for a full list of arguments.
For estimator_args.instance_type, check
https://docs.aws.amazon.com/sagemaker/latest/dg/notebooks-available-instance-types.html
for a list of available instance types.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/flavors/sagemaker_step_operator_flavor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerStepOperatorSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Settings for the Sagemaker step operator.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        experiment_name: The name for the experiment to which the job</span>
<span class="sd">            will be associated. If not provided, the job runs would be</span>
<span class="sd">            independent.</span>
<span class="sd">        input_data_s3_uri: S3 URI where training data is located if not locally,</span>
<span class="sd">            e.g. s3://my-bucket/my-data/train. How data will be made available</span>
<span class="sd">            to the container is configured with estimator_args.input_mode. Two possible</span>
<span class="sd">            input types:</span>
<span class="sd">                - str: S3 location where training data is saved.</span>
<span class="sd">                - Dict[str, str]: (ChannelName, S3Location) which represent</span>
<span class="sd">                    channels (e.g. training, validation, testing) where</span>
<span class="sd">                    specific parts of the data are saved in S3.</span>
<span class="sd">        estimator_args: Arguments that are directly passed to the SageMaker</span>
<span class="sd">            Estimator. See</span>
<span class="sd">            https://sagemaker.readthedocs.io/en/stable/api/training/estimators.html#sagemaker.estimator.Estimator</span>
<span class="sd">            for a full list of arguments.</span>
<span class="sd">            For estimator_args.instance_type, check</span>
<span class="sd">            https://docs.aws.amazon.com/sagemaker/latest/dg/notebooks-available-instance-types.html</span>
<span class="sd">            for a list of available instance types.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">instance_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">experiment_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">input_data_s3_uri</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">union_mode</span><span class="o">=</span><span class="s2">&quot;left_to_right&quot;</span>
    <span class="p">)</span>
    <span class="n">estimator_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">_deprecation_validator</span> <span class="o">=</span> <span class="n">deprecation_utils</span><span class="o">.</span><span class="n">deprecate_pydantic_attributes</span><span class="p">(</span>
        <span class="s2">&quot;instance_type&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">



























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.aws.orchestrators" class="doc doc-heading">
        <code>orchestrators</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>AWS Sagemaker orchestrator.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator" class="doc doc-heading">
        <code>sagemaker_orchestrator</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the SageMaker orchestrator.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator" class="doc doc-heading">
        <code>
SagemakerOrchestrator            (<a class="autorefs autorefs-internal" title="zenml.orchestrators.containerized_orchestrator.ContainerizedOrchestrator" href="../../core_code_docs/core-orchestrators/#zenml.orchestrators.containerized_orchestrator.ContainerizedOrchestrator">ContainerizedOrchestrator</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Orchestrator responsible for running pipelines on Sagemaker.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerOrchestrator</span><span class="p">(</span><span class="n">ContainerizedOrchestrator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Orchestrator responsible for running pipelines on Sagemaker.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SagemakerOrchestratorConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the `SagemakerOrchestratorConfig` config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">SagemakerOrchestratorConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StackValidator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates the stack.</span>

<span class="sd">        In the remote case, checks that the stack contains a container registry,</span>
<span class="sd">        image builder and only remote components.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A `StackValidator` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_validate_remote_components</span><span class="p">(</span>
            <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">component</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The Sagemaker orchestrator runs pipelines remotely, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;but the &#39;</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> is &quot;</span>
                    <span class="s2">&quot;a local stack component and will not be available in &quot;</span>
                    <span class="s2">&quot;the Sagemaker step.</span><span class="se">\n</span><span class="s2">Please ensure that you always &quot;</span>
                    <span class="s2">&quot;use non-local stack components with the Sagemaker &quot;</span>
                    <span class="s2">&quot;orchestrator.&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">StackValidator</span><span class="p">(</span>
            <span class="n">required_components</span><span class="o">=</span><span class="p">{</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">CONTAINER_REGISTRY</span><span class="p">,</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">IMAGE_BUILDER</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_validation_function</span><span class="o">=</span><span class="n">_validate_remote_components</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the run id of the active orchestrator run.</span>

<span class="sd">        Important: This needs to be a unique ID and return the same value for</span>
<span class="sd">        all steps of a pipeline run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The orchestrator run id.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the run id cannot be read from the environment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseSettings&quot;</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Settings class for the Sagemaker orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The settings class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SagemakerOrchestratorSettings</span>

    <span class="k">def</span> <span class="nf">_get_sagemaker_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">Session</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to create the sagemaker session with proper authentication.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Sagemaker Session.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the connector returns the wrong type for the</span>
<span class="sd">                session.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get authenticated session</span>
        <span class="c1"># Option 1: Service connector</span>
        <span class="n">boto_session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span>
        <span class="k">if</span> <span class="n">connector</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">():</span>
            <span class="n">boto_session</span> <span class="o">=</span> <span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">boto_session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Expected to receive a `boto3.Session` object from the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;linked connector, but got type `</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">boto_session</span><span class="p">)</span><span class="si">}</span><span class="s2">`.&quot;</span>
                <span class="p">)</span>
        <span class="c1"># Option 2: Explicit configuration</span>
        <span class="c1"># Args that are not provided will be taken from the default AWS config.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">boto_session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">aws_access_key_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">aws_access_key_id</span><span class="p">,</span>
                <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">aws_secret_access_key</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">profile_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">aws_profile</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># If a role ARN is provided for authentication, assume the role</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">aws_auth_role_arn</span><span class="p">:</span>
                <span class="n">sts</span> <span class="o">=</span> <span class="n">boto_session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">)</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">assume_role</span><span class="p">(</span>
                    <span class="n">RoleArn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">aws_auth_role_arn</span><span class="p">,</span>
                    <span class="n">RoleSessionName</span><span class="o">=</span><span class="s2">&quot;zenml-sagemaker-orchestrator&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">credentials</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">]</span>
                <span class="n">boto_session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;AccessKeyId&quot;</span><span class="p">],</span>
                    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;SecretAccessKey&quot;</span><span class="p">],</span>
                    <span class="n">aws_session_token</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;SessionToken&quot;</span><span class="p">],</span>
                    <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
            <span class="n">boto_session</span><span class="o">=</span><span class="n">boto_session</span><span class="p">,</span> <span class="n">default_bucket</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">bucket</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
        <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataType</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepares or runs a pipeline on Sagemaker.</span>

<span class="sd">        Args:</span>
<span class="sd">            deployment: The deployment to prepare or run.</span>
<span class="sd">            stack: The stack to run on.</span>
<span class="sd">            environment: Environment variables to set in the orchestration</span>
<span class="sd">                environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If a connector is used that does not return a</span>
<span class="sd">                `boto3.Session` object.</span>
<span class="sd">            TypeError: If the network_config passed is not compatible with the</span>
<span class="sd">                AWS SageMaker NetworkConfig class.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A dictionary of metadata related to the pipeline run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;The Sagemaker Orchestrator currently does not support the &quot;</span>
                <span class="s2">&quot;use of schedules. The `schedule` will be ignored &quot;</span>
                <span class="s2">&quot;and the pipeline will be run immediately.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># sagemaker requires pipelineName to use alphanum and hyphens only</span>
        <span class="n">unsanitized_orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
        <span class="p">)</span>
        <span class="c1"># replace all non-alphanum and non-hyphens with hyphens</span>
        <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;[^a-zA-Z0-9\-]&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">unsanitized_orchestrator_run_name</span>
        <span class="p">)</span>

        <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sagemaker_session</span><span class="p">()</span>

        <span class="c1"># Sagemaker does not allow environment variables longer than 256</span>
        <span class="c1"># characters to be passed to Processor steps. If an environment variable</span>
        <span class="c1"># is longer than 256 characters, we split it into multiple environment</span>
        <span class="c1"># variables (chunks) and re-construct it on the other side using the</span>
        <span class="c1"># custom entrypoint configuration.</span>
        <span class="n">split_environment_variables</span><span class="p">(</span>
            <span class="n">size_limit</span><span class="o">=</span><span class="n">SAGEMAKER_PROCESSOR_STEP_ENV_VAR_SIZE_LIMIT</span><span class="p">,</span>
            <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">sagemaker_steps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">)</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">SagemakerEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">SagemakerEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
                    <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span> <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">id</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">entrypoint</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">arguments</span>

            <span class="n">step_settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
                <span class="n">SagemakerOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">environment</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ExecutionVariables</span><span class="o">.</span><span class="n">PIPELINE_EXECUTION_ARN</span>
            <span class="p">)</span>

            <span class="n">use_training_step</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">step_settings</span><span class="o">.</span><span class="n">use_training_step</span>
                <span class="k">if</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">use_training_step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_training_step</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_training_step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="k">else</span> <span class="kc">True</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Retrieve Executor arguments provided in the Step settings.</span>
            <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
                <span class="n">args_for_step_executor</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">estimator_args</span> <span class="ow">or</span> <span class="p">{}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args_for_step_executor</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">processor_args</span> <span class="ow">or</span> <span class="p">{}</span>

            <span class="c1"># Set default values from configured orchestrator Component to</span>
            <span class="c1"># arguments to be used when they are not present in processor_args.</span>
            <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
                <span class="s2">&quot;role&quot;</span><span class="p">,</span>
                <span class="n">step_settings</span><span class="o">.</span><span class="n">execution_role</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">execution_role</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
                <span class="s2">&quot;volume_size_in_gb&quot;</span><span class="p">,</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">volume_size_in_gb</span>
            <span class="p">)</span>
            <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
                <span class="s2">&quot;max_runtime_in_seconds&quot;</span><span class="p">,</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">max_runtime_in_seconds</span>
            <span class="p">)</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">tags</span>
            <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
                <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
                <span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">{</span><span class="s2">&quot;Key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="p">]</span>
                    <span class="k">if</span> <span class="n">tags</span>
                    <span class="k">else</span> <span class="kc">None</span>
                <span class="p">),</span>
            <span class="p">)</span>

            <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
                <span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">instance_type</span>
            <span class="p">)</span>

            <span class="c1"># Set values that cannot be overwritten</span>
            <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;image_uri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
            <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;instance_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;sagemaker_session&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span>
            <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;base_job_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">orchestrator_run_name</span>

            <span class="c1"># Convert network_config to sagemaker.network.NetworkConfig if</span>
            <span class="c1"># present</span>
            <span class="n">network_config</span> <span class="o">=</span> <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;network_config&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">network_config</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">network_config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;network_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NetworkConfig</span><span class="p">(</span>
                        <span class="o">**</span><span class="n">network_config</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="c1"># If the network_config passed is not compatible with the</span>
                    <span class="c1"># NetworkConfig class, raise a more informative error.</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="s2">&quot;Expected a sagemaker.network.NetworkConfig &quot;</span>
                        <span class="s2">&quot;compatible object for the network_config argument, &quot;</span>
                        <span class="s2">&quot;but the network_config processor argument is invalid.&quot;</span>
                        <span class="s2">&quot;See https://sagemaker.readthedocs.io/en/stable/api/utility/network.html#sagemaker.network.NetworkConfig &quot;</span>
                        <span class="s2">&quot;for more information about the NetworkConfig class.&quot;</span>
                    <span class="p">)</span>

            <span class="c1"># Construct S3 inputs to container for step</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ProcessingInput</span><span class="p">(</span>
                        <span class="n">source</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span>
                        <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;/opt/ml/processing/input/data&quot;</span><span class="p">,</span>
                        <span class="n">s3_input_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_mode</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">channel</span><span class="p">,</span> <span class="n">s3_uri</span> <span class="ow">in</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">ProcessingInput</span><span class="p">(</span>
                            <span class="n">source</span><span class="o">=</span><span class="n">s3_uri</span><span class="p">,</span>
                            <span class="n">destination</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/opt/ml/processing/input/data/</span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">s3_input_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_mode</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

            <span class="c1"># Construct S3 outputs from container for step</span>
            <span class="n">outputs</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">output_path</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
                    <span class="n">output_path</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">ProcessingOutput</span><span class="p">(</span>
                            <span class="n">source</span><span class="o">=</span><span class="s2">&quot;/opt/ml/processing/output/data&quot;</span><span class="p">,</span>
                            <span class="n">destination</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="p">,</span>
                            <span class="n">s3_upload_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_mode</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="p">(</span>
                    <span class="n">channel</span><span class="p">,</span>
                    <span class="n">s3_uri</span><span class="p">,</span>
                <span class="p">)</span> <span class="ow">in</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">ProcessingOutput</span><span class="p">(</span>
                            <span class="n">source</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/opt/ml/processing/output/data/</span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">destination</span><span class="o">=</span><span class="n">s3_uri</span><span class="p">,</span>
                            <span class="n">s3_upload_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_mode</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>

            <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
                <span class="c1"># Create Estimator and TrainingStep</span>
                <span class="n">estimator</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">Estimator</span><span class="p">(</span>
                    <span class="n">keep_alive_period_in_seconds</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">keep_alive_period_in_seconds</span><span class="p">,</span>
                    <span class="n">output_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
                    <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                    <span class="n">container_entry_point</span><span class="o">=</span><span class="n">entrypoint</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">args_for_step_executor</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">sagemaker_step</span> <span class="o">=</span> <span class="n">TrainingStep</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                    <span class="n">depends_on</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span><span class="p">,</span>
                    <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
                    <span class="n">estimator</span><span class="o">=</span><span class="n">estimator</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Create Processor and ProcessingStep</span>
                <span class="n">processor</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">Processor</span><span class="p">(</span>
                    <span class="n">entrypoint</span><span class="o">=</span><span class="n">entrypoint</span><span class="p">,</span>
                    <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">args_for_step_executor</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">sagemaker_step</span> <span class="o">=</span> <span class="n">ProcessingStep</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                    <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span>
                    <span class="n">depends_on</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span><span class="p">,</span>
                    <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
                    <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="n">sagemaker_steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sagemaker_step</span><span class="p">)</span>

        <span class="c1"># construct the pipeline from the sagemaker_steps</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
            <span class="n">steps</span><span class="o">=</span><span class="n">sagemaker_steps</span><span class="p">,</span>
            <span class="n">sagemaker_session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">SagemakerOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">pipeline</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">role_arn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">execution_role</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;Key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">pipeline_tags</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">pipeline_tags</span>
            <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">execution</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Steps can take 5-15 minutes to start running &quot;</span>
            <span class="s2">&quot;when using the Sagemaker Orchestrator.&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Yield metadata based on the generated execution object</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_metadata</span><span class="p">(</span><span class="n">execution</span><span class="o">=</span><span class="n">execution</span><span class="p">)</span>

        <span class="c1"># mainly for testing purposes, we wait for the pipeline to finish</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">synchronous</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Executing synchronously. Waiting for pipeline to finish... </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;At this point you can `Ctrl-C` out without cancelling the &quot;</span>
                <span class="s2">&quot;execution.&quot;</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">execution</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span>
                    <span class="n">delay</span><span class="o">=</span><span class="n">POLLING_DELAY</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="n">MAX_POLLING_ATTEMPTS</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline completed successfully.&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">WaiterError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s2">&quot;Timed out while waiting for pipeline execution to &quot;</span>
                    <span class="s2">&quot;finish. For long-running pipelines we recommend &quot;</span>
                    <span class="s2">&quot;configuring your orchestrator for asynchronous execution. &quot;</span>
                    <span class="s2">&quot;The following command does this for you: </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;`zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;--synchronous=False`&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pipeline_run_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get general component-specific metadata for a pipeline run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: The ID of the pipeline run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pipeline_execution_arn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span>
        <span class="n">run_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;pipeline_execution_arn&quot;</span><span class="p">:</span> <span class="n">pipeline_execution_arn</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">aws_run_id</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">region_name</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dissect_pipeline_execution_arn</span><span class="p">(</span>
            <span class="n">pipeline_execution_arn</span><span class="o">=</span><span class="n">pipeline_execution_arn</span>
        <span class="p">)</span>

        <span class="n">orchestrator_logs_url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">.console.aws.amazon.com/&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;cloudwatch/home?region=</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">#logsV2:log-groups/log-group&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;/$252Faws$252Fsagemaker$252FProcessingJobs$3FlogStreamNameFilter&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;$3Dpipelines-</span><span class="si">{</span><span class="n">aws_run_id</span><span class="si">}</span><span class="s2">-&quot;</span>
        <span class="p">)</span>
        <span class="n">run_metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">orchestrator_logs_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">run_metadata</span>

    <span class="k">def</span> <span class="nf">fetch_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run</span><span class="p">:</span> <span class="s2">&quot;PipelineRunResponse&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExecutionStatus</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Refreshes the status of a specific pipeline run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run: The run that was executed by this orchestrator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the actual status of the pipeline job.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: If the run was not executed by to this orchestrator.</span>
<span class="sd">            ValueError: If it fetches an unknown state or if we can not fetch</span>
<span class="sd">                the orchestrator run ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure that the stack exists and is accessible</span>
        <span class="k">if</span> <span class="n">run</span><span class="o">.</span><span class="n">stack</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The stack that the run was executed on is not available &quot;</span>
                <span class="s2">&quot;anymore.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Make sure that the run belongs to this orchestrator</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
            <span class="o">==</span> <span class="n">run</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">StackComponentType</span><span class="o">.</span><span class="n">ORCHESTRATOR</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
        <span class="p">)</span>

        <span class="c1"># Initialize the Sagemaker client</span>
        <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sagemaker_session</span><span class="p">()</span>
        <span class="n">sagemaker_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">sagemaker_client</span>

        <span class="c1"># Fetch the status of the _PipelineExecution</span>
        <span class="k">if</span> <span class="n">METADATA_ORCHESTRATOR_RUN_ID</span> <span class="ow">in</span> <span class="n">run</span><span class="o">.</span><span class="n">run_metadata</span><span class="p">:</span>
            <span class="n">run_id</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">run_metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_RUN_ID</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="k">elif</span> <span class="n">run</span><span class="o">.</span><span class="n">orchestrator_run_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">run_id</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">orchestrator_run_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Can not find the orchestrator run ID, thus can not fetch &quot;</span>
                <span class="s2">&quot;the status.&quot;</span>
            <span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">sagemaker_client</span><span class="o">.</span><span class="n">describe_pipeline_execution</span><span class="p">(</span>
            <span class="n">PipelineExecutionArn</span><span class="o">=</span><span class="n">run_id</span>
        <span class="p">)[</span><span class="s2">&quot;PipelineExecutionStatus&quot;</span><span class="p">]</span>

        <span class="c1"># Map the potential outputs to ZenML ExecutionStatus. Potential values:</span>
        <span class="c1"># https://cloud.google.com/vertex-ai/docs/reference/rest/v1beta1/PipelineState</span>
        <span class="k">if</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Executing&quot;</span><span class="p">,</span> <span class="s2">&quot;Stopping&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
        <span class="k">elif</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Stopped&quot;</span><span class="p">,</span> <span class="s2">&quot;Failed&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">FAILED</span>
        <span class="k">elif</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Succeeded&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown status for the pipeline execution.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">compute_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">execution</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataType</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate run metadata based on the generated Sagemaker Execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            execution: The corresponding _PipelineExecution object.</span>

<span class="sd">        Yields:</span>
<span class="sd">            A dictionary of metadata related to the pipeline run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Metadata</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataType</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Orchestrator Run ID</span>
        <span class="k">if</span> <span class="n">run_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_orchestrator_run_id</span><span class="p">(</span><span class="n">execution</span><span class="p">):</span>
            <span class="n">metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>

        <span class="c1"># URL to the Sagemaker&#39;s pipeline view</span>
        <span class="k">if</span> <span class="n">orchestrator_url</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_orchestrator_url</span><span class="p">(</span><span class="n">execution</span><span class="p">):</span>
            <span class="n">metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">orchestrator_url</span><span class="p">)</span>

        <span class="c1"># URL to the corresponding CloudWatch page</span>
        <span class="k">if</span> <span class="n">logs_url</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_orchestrator_logs_url</span><span class="p">(</span><span class="n">execution</span><span class="p">):</span>
            <span class="n">metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_LOGS_URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">logs_url</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">metadata</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_compute_orchestrator_url</span><span class="p">(</span>
        <span class="n">pipeline_execution</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the Orchestrator Dashboard URL upon pipeline execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_execution: The corresponding _PipelineExecution object.</span>

<span class="sd">        Returns:</span>
<span class="sd">             the URL to the dashboard view in SageMaker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">region_name</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">execution_id</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">dissect_pipeline_execution_arn</span><span class="p">(</span><span class="n">pipeline_execution</span><span class="o">.</span><span class="n">arn</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Get the Sagemaker session</span>
            <span class="n">session</span> <span class="o">=</span> <span class="n">pipeline_execution</span><span class="o">.</span><span class="n">sagemaker_session</span>

            <span class="c1"># List the Studio domains and get the Studio Domain ID</span>
            <span class="n">domains_response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">sagemaker_client</span><span class="o">.</span><span class="n">list_domains</span><span class="p">()</span>
            <span class="n">studio_domain_id</span> <span class="o">=</span> <span class="n">domains_response</span><span class="p">[</span><span class="s2">&quot;Domains&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;DomainId&quot;</span><span class="p">]</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;https://studio-</span><span class="si">{</span><span class="n">studio_domain_id</span><span class="si">}</span><span class="s2">.studio.</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;sagemaker.aws/pipelines/view/</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">/executions&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">execution_id</span><span class="si">}</span><span class="s2">/graph&quot;</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;There was an issue while extracting the pipeline url: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_compute_orchestrator_logs_url</span><span class="p">(</span>
        <span class="n">pipeline_execution</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the CloudWatch URL upon pipeline execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_execution: The corresponding _PipelineExecution object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the URL querying the pipeline logs in CloudWatch on AWS.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">region_name</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">execution_id</span> <span class="o">=</span> <span class="n">dissect_pipeline_execution_arn</span><span class="p">(</span>
                <span class="n">pipeline_execution</span><span class="o">.</span><span class="n">arn</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">.console.aws.amazon.com/&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;cloudwatch/home?region=</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">#logsV2:log-groups/log-group&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;/$252Faws$252Fsagemaker$252FProcessingJobs$3FlogStreamNameFilter&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;$3Dpipelines-</span><span class="si">{</span><span class="n">execution_id</span><span class="si">}</span><span class="s2">-&quot;</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;There was an issue while extracting the logs url: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_compute_orchestrator_run_id</span><span class="p">(</span>
        <span class="n">pipeline_execution</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the Orchestrator Run ID upon pipeline execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_execution: The corresponding _PipelineExecution object.</span>

<span class="sd">        Returns:</span>
<span class="sd">             the Execution ID of the run in SageMaker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">pipeline_execution</span><span class="o">.</span><span class="n">arn</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;There was an issue while extracting the pipeline run ID: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">SagemakerOrchestratorConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the <code>SagemakerOrchestratorConfig</code> config.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>SagemakerOrchestratorConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.settings_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">settings_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Settings class for the Sagemaker orchestrator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Type[BaseSettings]]</code></td>
      <td><p>The settings class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">stack_validator</span><span class="o">.</span><span class="n">StackValidator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Validates the stack.</p>
<p>In the remote case, checks that the stack contains a container registry,
image builder and only remote components.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.stack.stack_validator.StackValidator]</code></td>
      <td><p>A <code>StackValidator</code> instance.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.compute_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">execution</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Generate run metadata based on the generated Sagemaker Execution.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>execution</code></td>
        <td><code>Any</code></td>
        <td><p>The corresponding _PipelineExecution object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterator[Dict[str, Union[str, int, float, bool, Dict[Any, Any], List[Any], Set[Any], Tuple[Any, ...], zenml.metadata.metadata_types.Uri, zenml.metadata.metadata_types.Path, zenml.metadata.metadata_types.DType, zenml.metadata.metadata_types.StorageSize]]]</code></td>
      <td><p>A dictionary of metadata related to the pipeline run.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">compute_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">execution</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataType</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate run metadata based on the generated Sagemaker Execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        execution: The corresponding _PipelineExecution object.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A dictionary of metadata related to the pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Metadata</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataType</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Orchestrator Run ID</span>
    <span class="k">if</span> <span class="n">run_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_orchestrator_run_id</span><span class="p">(</span><span class="n">execution</span><span class="p">):</span>
        <span class="n">metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>

    <span class="c1"># URL to the Sagemaker&#39;s pipeline view</span>
    <span class="k">if</span> <span class="n">orchestrator_url</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_orchestrator_url</span><span class="p">(</span><span class="n">execution</span><span class="p">):</span>
        <span class="n">metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">orchestrator_url</span><span class="p">)</span>

    <span class="c1"># URL to the corresponding CloudWatch page</span>
    <span class="k">if</span> <span class="n">logs_url</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_orchestrator_logs_url</span><span class="p">(</span><span class="n">execution</span><span class="p">):</span>
        <span class="n">metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_LOGS_URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">logs_url</span><span class="p">)</span>

    <span class="k">yield</span> <span class="n">metadata</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.fetch_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fetch_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Refreshes the status of a specific pipeline run.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>run</code></td>
        <td><code>PipelineRunResponse</code></td>
        <td><p>The run that was executed by this orchestrator.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ExecutionStatus</code></td>
      <td><p>the actual status of the pipeline job.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>AssertionError</code></td>
        <td><p>If the run was not executed by to this orchestrator.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If it fetches an unknown state or if we can not fetch
the orchestrator run ID.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fetch_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run</span><span class="p">:</span> <span class="s2">&quot;PipelineRunResponse&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExecutionStatus</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Refreshes the status of a specific pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run: The run that was executed by this orchestrator.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the actual status of the pipeline job.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AssertionError: If the run was not executed by to this orchestrator.</span>
<span class="sd">        ValueError: If it fetches an unknown state or if we can not fetch</span>
<span class="sd">            the orchestrator run ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Make sure that the stack exists and is accessible</span>
    <span class="k">if</span> <span class="n">run</span><span class="o">.</span><span class="n">stack</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The stack that the run was executed on is not available &quot;</span>
            <span class="s2">&quot;anymore.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Make sure that the run belongs to this orchestrator</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
        <span class="o">==</span> <span class="n">run</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">StackComponentType</span><span class="o">.</span><span class="n">ORCHESTRATOR</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
    <span class="p">)</span>

    <span class="c1"># Initialize the Sagemaker client</span>
    <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sagemaker_session</span><span class="p">()</span>
    <span class="n">sagemaker_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">sagemaker_client</span>

    <span class="c1"># Fetch the status of the _PipelineExecution</span>
    <span class="k">if</span> <span class="n">METADATA_ORCHESTRATOR_RUN_ID</span> <span class="ow">in</span> <span class="n">run</span><span class="o">.</span><span class="n">run_metadata</span><span class="p">:</span>
        <span class="n">run_id</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">run_metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_RUN_ID</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
    <span class="k">elif</span> <span class="n">run</span><span class="o">.</span><span class="n">orchestrator_run_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">run_id</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">orchestrator_run_id</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Can not find the orchestrator run ID, thus can not fetch &quot;</span>
            <span class="s2">&quot;the status.&quot;</span>
        <span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">sagemaker_client</span><span class="o">.</span><span class="n">describe_pipeline_execution</span><span class="p">(</span>
        <span class="n">PipelineExecutionArn</span><span class="o">=</span><span class="n">run_id</span>
    <span class="p">)[</span><span class="s2">&quot;PipelineExecutionStatus&quot;</span><span class="p">]</span>

    <span class="c1"># Map the potential outputs to ZenML ExecutionStatus. Potential values:</span>
    <span class="c1"># https://cloud.google.com/vertex-ai/docs/reference/rest/v1beta1/PipelineState</span>
    <span class="k">if</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Executing&quot;</span><span class="p">,</span> <span class="s2">&quot;Stopping&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">RUNNING</span>
    <span class="k">elif</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Stopped&quot;</span><span class="p">,</span> <span class="s2">&quot;Failed&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">FAILED</span>
    <span class="k">elif</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Succeeded&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown status for the pipeline execution.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.get_orchestrator_run_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Returns the run id of the active orchestrator run.</p>
<p>Important: This needs to be a unique ID and return the same value for
all steps of a pipeline run.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The orchestrator run id.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the run id cannot be read from the environment.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_orchestrator_run_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the run id of the active orchestrator run.</span>

<span class="sd">    Important: This needs to be a unique ID and return the same value for</span>
<span class="sd">    all steps of a pipeline run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The orchestrator run id.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the run id cannot be read from the environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to read run id from environment variable &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.get_pipeline_run_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_run_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get general component-specific metadata for a pipeline run.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>run_id</code></td>
        <td><code>UUID</code></td>
        <td><p>The ID of the pipeline run.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, MetadataType]</code></td>
      <td><p>A dictionary of metadata.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_run_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get general component-specific metadata for a pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: The ID of the pipeline run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary of metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pipeline_execution_arn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span>
    <span class="n">run_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;pipeline_execution_arn&quot;</span><span class="p">:</span> <span class="n">pipeline_execution_arn</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">aws_run_id</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">region_name</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dissect_pipeline_execution_arn</span><span class="p">(</span>
        <span class="n">pipeline_execution_arn</span><span class="o">=</span><span class="n">pipeline_execution_arn</span>
    <span class="p">)</span>

    <span class="n">orchestrator_logs_url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">.console.aws.amazon.com/&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;cloudwatch/home?region=</span><span class="si">{</span><span class="n">region_name</span><span class="si">}</span><span class="s2">#logsV2:log-groups/log-group&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;/$252Faws$252Fsagemaker$252FProcessingJobs$3FlogStreamNameFilter&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;$3Dpipelines-</span><span class="si">{</span><span class="n">aws_run_id</span><span class="si">}</span><span class="s2">-&quot;</span>
    <span class="p">)</span>
    <span class="n">run_metadata</span><span class="p">[</span><span class="n">METADATA_ORCHESTRATOR_URL</span><span class="p">]</span> <span class="o">=</span> <span class="n">Uri</span><span class="p">(</span><span class="n">orchestrator_logs_url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">run_metadata</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.SagemakerOrchestrator.prepare_or_run_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_or_run_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Prepares or runs a pipeline on Sagemaker.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>deployment</code></td>
        <td><code>PipelineDeploymentResponse</code></td>
        <td><p>The deployment to prepare or run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack to run on.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>environment</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Environment variables to set in the orchestration
environment.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If a connector is used that does not return a
<code>boto3.Session</code> object.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the network_config passed is not compatible with the
AWS SageMaker NetworkConfig class.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterator[Dict[str, Union[str, int, float, bool, Dict[Any, Any], List[Any], Set[Any], Tuple[Any, ...], zenml.metadata.metadata_types.Uri, zenml.metadata.metadata_types.Path, zenml.metadata.metadata_types.DType, zenml.metadata.metadata_types.StorageSize]]]</code></td>
      <td><p>A dictionary of metadata related to the pipeline run.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_or_run_pipeline</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentResponse&quot;</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataType</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepares or runs a pipeline on Sagemaker.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment: The deployment to prepare or run.</span>
<span class="sd">        stack: The stack to run on.</span>
<span class="sd">        environment: Environment variables to set in the orchestration</span>
<span class="sd">            environment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If a connector is used that does not return a</span>
<span class="sd">            `boto3.Session` object.</span>
<span class="sd">        TypeError: If the network_config passed is not compatible with the</span>
<span class="sd">            AWS SageMaker NetworkConfig class.</span>

<span class="sd">    Yields:</span>
<span class="sd">        A dictionary of metadata related to the pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">deployment</span><span class="o">.</span><span class="n">schedule</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;The Sagemaker Orchestrator currently does not support the &quot;</span>
            <span class="s2">&quot;use of schedules. The `schedule` will be ignored &quot;</span>
            <span class="s2">&quot;and the pipeline will be run immediately.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># sagemaker requires pipelineName to use alphanum and hyphens only</span>
    <span class="n">unsanitized_orchestrator_run_name</span> <span class="o">=</span> <span class="n">get_orchestrator_run_name</span><span class="p">(</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>
    <span class="c1"># replace all non-alphanum and non-hyphens with hyphens</span>
    <span class="n">orchestrator_run_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;[^a-zA-Z0-9\-]&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">unsanitized_orchestrator_run_name</span>
    <span class="p">)</span>

    <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sagemaker_session</span><span class="p">()</span>

    <span class="c1"># Sagemaker does not allow environment variables longer than 256</span>
    <span class="c1"># characters to be passed to Processor steps. If an environment variable</span>
    <span class="c1"># is longer than 256 characters, we split it into multiple environment</span>
    <span class="c1"># variables (chunks) and re-construct it on the other side using the</span>
    <span class="c1"># custom entrypoint configuration.</span>
    <span class="n">split_environment_variables</span><span class="p">(</span>
        <span class="n">size_limit</span><span class="o">=</span><span class="n">SAGEMAKER_PROCESSOR_STEP_ENV_VAR_SIZE_LIMIT</span><span class="p">,</span>
        <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">sagemaker_steps</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">deployment</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">SagemakerEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">SagemakerEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
                <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span> <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment</span><span class="o">.</span><span class="n">id</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">entrypoint</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">arguments</span>

        <span class="n">step_settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">SagemakerOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">environment</span><span class="p">[</span><span class="n">ENV_ZENML_SAGEMAKER_RUN_ID</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ExecutionVariables</span><span class="o">.</span><span class="n">PIPELINE_EXECUTION_ARN</span>
        <span class="p">)</span>

        <span class="n">use_training_step</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">step_settings</span><span class="o">.</span><span class="n">use_training_step</span>
            <span class="k">if</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">use_training_step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_training_step</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_training_step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="kc">True</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Retrieve Executor arguments provided in the Step settings.</span>
        <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
            <span class="n">args_for_step_executor</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">estimator_args</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args_for_step_executor</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">processor_args</span> <span class="ow">or</span> <span class="p">{}</span>

        <span class="c1"># Set default values from configured orchestrator Component to</span>
        <span class="c1"># arguments to be used when they are not present in processor_args.</span>
        <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;role&quot;</span><span class="p">,</span>
            <span class="n">step_settings</span><span class="o">.</span><span class="n">execution_role</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">execution_role</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;volume_size_in_gb&quot;</span><span class="p">,</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">volume_size_in_gb</span>
        <span class="p">)</span>
        <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;max_runtime_in_seconds&quot;</span><span class="p">,</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">max_runtime_in_seconds</span>
        <span class="p">)</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">tags</span>
        <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
            <span class="p">(</span>
                <span class="p">[</span>
                    <span class="p">{</span><span class="s2">&quot;Key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="n">tags</span>
                <span class="k">else</span> <span class="kc">None</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">instance_type</span>
        <span class="p">)</span>

        <span class="c1"># Set values that cannot be overwritten</span>
        <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;image_uri&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
        <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;instance_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;sagemaker_session&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span>
        <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;base_job_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">orchestrator_run_name</span>

        <span class="c1"># Convert network_config to sagemaker.network.NetworkConfig if</span>
        <span class="c1"># present</span>
        <span class="n">network_config</span> <span class="o">=</span> <span class="n">args_for_step_executor</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;network_config&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">network_config</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">network_config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">args_for_step_executor</span><span class="p">[</span><span class="s2">&quot;network_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NetworkConfig</span><span class="p">(</span>
                    <span class="o">**</span><span class="n">network_config</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="c1"># If the network_config passed is not compatible with the</span>
                <span class="c1"># NetworkConfig class, raise a more informative error.</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;Expected a sagemaker.network.NetworkConfig &quot;</span>
                    <span class="s2">&quot;compatible object for the network_config argument, &quot;</span>
                    <span class="s2">&quot;but the network_config processor argument is invalid.&quot;</span>
                    <span class="s2">&quot;See https://sagemaker.readthedocs.io/en/stable/api/utility/network.html#sagemaker.network.NetworkConfig &quot;</span>
                    <span class="s2">&quot;for more information about the NetworkConfig class.&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Construct S3 inputs to container for step</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ProcessingInput</span><span class="p">(</span>
                    <span class="n">source</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span>
                    <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;/opt/ml/processing/input/data&quot;</span><span class="p">,</span>
                    <span class="n">s3_input_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_mode</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">channel</span><span class="p">,</span> <span class="n">s3_uri</span> <span class="ow">in</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">ProcessingInput</span><span class="p">(</span>
                        <span class="n">source</span><span class="o">=</span><span class="n">s3_uri</span><span class="p">,</span>
                        <span class="n">destination</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/opt/ml/processing/input/data/</span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">s3_input_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">input_data_s3_mode</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

        <span class="c1"># Construct S3 outputs from container for step</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
                <span class="n">output_path</span> <span class="o">=</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ProcessingOutput</span><span class="p">(</span>
                        <span class="n">source</span><span class="o">=</span><span class="s2">&quot;/opt/ml/processing/output/data&quot;</span><span class="p">,</span>
                        <span class="n">destination</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="p">,</span>
                        <span class="n">s3_upload_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_mode</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="p">(</span>
                <span class="n">channel</span><span class="p">,</span>
                <span class="n">s3_uri</span><span class="p">,</span>
            <span class="p">)</span> <span class="ow">in</span> <span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_uri</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">ProcessingOutput</span><span class="p">(</span>
                        <span class="n">source</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/opt/ml/processing/output/data/</span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">destination</span><span class="o">=</span><span class="n">s3_uri</span><span class="p">,</span>
                        <span class="n">s3_upload_mode</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">output_data_s3_mode</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">use_training_step</span><span class="p">:</span>
            <span class="c1"># Create Estimator and TrainingStep</span>
            <span class="n">estimator</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">Estimator</span><span class="p">(</span>
                <span class="n">keep_alive_period_in_seconds</span><span class="o">=</span><span class="n">step_settings</span><span class="o">.</span><span class="n">keep_alive_period_in_seconds</span><span class="p">,</span>
                <span class="n">output_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                <span class="n">container_entry_point</span><span class="o">=</span><span class="n">entrypoint</span><span class="p">,</span>
                <span class="o">**</span><span class="n">args_for_step_executor</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">sagemaker_step</span> <span class="o">=</span> <span class="n">TrainingStep</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                <span class="n">depends_on</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span><span class="p">,</span>
                <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
                <span class="n">estimator</span><span class="o">=</span><span class="n">estimator</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Create Processor and ProcessingStep</span>
            <span class="n">processor</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">Processor</span><span class="p">(</span>
                <span class="n">entrypoint</span><span class="o">=</span><span class="n">entrypoint</span><span class="p">,</span>
                <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                <span class="o">**</span><span class="n">args_for_step_executor</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">sagemaker_step</span> <span class="o">=</span> <span class="n">ProcessingStep</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span>
                <span class="n">depends_on</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">upstream_steps</span><span class="p">,</span>
                <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
                <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">sagemaker_steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sagemaker_step</span><span class="p">)</span>

    <span class="c1"># construct the pipeline from the sagemaker_steps</span>
    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">orchestrator_run_name</span><span class="p">,</span>
        <span class="n">steps</span><span class="o">=</span><span class="n">sagemaker_steps</span><span class="p">,</span>
        <span class="n">sagemaker_session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
        <span class="n">SagemakerOrchestratorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">deployment</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">pipeline</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">role_arn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">execution_role</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;Key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">pipeline_tags</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">pipeline_tags</span>
        <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">execution</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
        <span class="s2">&quot;Steps can take 5-15 minutes to start running &quot;</span>
        <span class="s2">&quot;when using the Sagemaker Orchestrator.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Yield metadata based on the generated execution object</span>
    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_metadata</span><span class="p">(</span><span class="n">execution</span><span class="o">=</span><span class="n">execution</span><span class="p">)</span>

    <span class="c1"># mainly for testing purposes, we wait for the pipeline to finish</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">synchronous</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Executing synchronously. Waiting for pipeline to finish... </span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;At this point you can `Ctrl-C` out without cancelling the &quot;</span>
            <span class="s2">&quot;execution.&quot;</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">execution</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span>
                <span class="n">delay</span><span class="o">=</span><span class="n">POLLING_DELAY</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="n">MAX_POLLING_ATTEMPTS</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline completed successfully.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">WaiterError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Timed out while waiting for pipeline execution to &quot;</span>
                <span class="s2">&quot;finish. For long-running pipelines we recommend &quot;</span>
                <span class="s2">&quot;configuring your orchestrator for asynchronous execution. &quot;</span>
                <span class="s2">&quot;The following command does this for you: </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`zenml orchestrator update </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;--synchronous=False`&quot;</span>
            <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h5 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator.dissect_pipeline_execution_arn" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dissect_pipeline_execution_arn</span><span class="p">(</span><span class="n">pipeline_execution_arn</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Extract region name, pipeline name, and execution id from the ARN.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline_execution_arn</code></td>
        <td><code>str</code></td>
        <td><p>the pipeline execution ARN</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Optional[str], Optional[str], Optional[str]]</code></td>
      <td><p>Region Name, Pipeline Name, Execution ID in order</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dissect_pipeline_execution_arn</span><span class="p">(</span>
    <span class="n">pipeline_execution_arn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract region name, pipeline name, and execution id from the ARN.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_execution_arn: the pipeline execution ARN</span>

<span class="sd">    Returns:</span>
<span class="sd">        Region Name, Pipeline Name, Execution ID in order</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Extract region_name</span>
    <span class="n">region_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;sagemaker:(.*?):&quot;</span><span class="p">,</span> <span class="n">pipeline_execution_arn</span><span class="p">)</span>
    <span class="n">region_name</span> <span class="o">=</span> <span class="n">region_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">region_match</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Extract pipeline_name</span>
    <span class="n">pipeline_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;pipeline/(.*?)/execution&quot;</span><span class="p">,</span> <span class="n">pipeline_execution_arn</span>
    <span class="p">)</span>
    <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">pipeline_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">pipeline_match</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Extract execution_id</span>
    <span class="n">execution_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;execution/(.*)&quot;</span><span class="p">,</span> <span class="n">pipeline_execution_arn</span><span class="p">)</span>
    <span class="n">execution_id</span> <span class="o">=</span> <span class="n">execution_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">execution_match</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">region_name</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">execution_id</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config" class="doc doc-heading">
        <code>sagemaker_orchestrator_entrypoint_config</code>



</h4>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for ZenML Sagemaker pipeline steps.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config.SagemakerEntrypointConfiguration" class="doc doc-heading">
        <code>
SagemakerEntrypointConfiguration            (<a class="autorefs autorefs-internal" title="zenml.entrypoints.step_entrypoint_configuration.StepEntrypointConfiguration" href="../../core_code_docs/core-entrypoints/#zenml.entrypoints.step_entrypoint_configuration.StepEntrypointConfiguration">StepEntrypointConfiguration</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for ZenML Sagemaker pipeline steps.</p>
<p>The only purpose of this entrypoint configuration is to reconstruct the
environment variables that exceed the maximum length of 256 characters
allowed for Sagemaker Processor steps from their individual components.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerEntrypointConfiguration</span><span class="p">(</span><span class="n">StepEntrypointConfiguration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Entrypoint configuration for ZenML Sagemaker pipeline steps.</span>

<span class="sd">    The only purpose of this entrypoint configuration is to reconstruct the</span>
<span class="sd">    environment variables that exceed the maximum length of 256 characters</span>
<span class="sd">    allowed for Sagemaker Processor steps from their individual components.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the step.&quot;&quot;&quot;</span>
        <span class="c1"># Reconstruct the environment variables that exceed the maximum length</span>
        <span class="c1"># of 256 characters from their individual chunks</span>
        <span class="n">reconstruct_environment_variables</span><span class="p">()</span>

        <span class="c1"># Run the step</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.orchestrators.sagemaker_orchestrator_entrypoint_config.SagemakerEntrypointConfiguration.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Runs the step.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/orchestrators/sagemaker_orchestrator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the step.&quot;&quot;&quot;</span>
    <span class="c1"># Reconstruct the environment variables that exceed the maximum length</span>
    <span class="c1"># of 256 characters from their individual chunks</span>
    <span class="n">reconstruct_environment_variables</span><span class="p">()</span>

    <span class="c1"># Run the step</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.aws.service_connectors" class="doc doc-heading">
        <code>service_connectors</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>AWS Service Connector.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.service_connectors.aws_service_connector" class="doc doc-heading">
        <code>aws_service_connector</code>



</h4>

    <div class="doc doc-contents ">

      <p>AWS Service Connector.</p>
<p>The AWS Service Connector implements various authentication methods for AWS
services:</p>
<ul>
<li>Explicit AWS secret key (access key, secret key)</li>
<li>Explicit  AWS STS tokens (access key, secret key, session token)</li>
<li>IAM roles (i.e. generating temporary STS tokens on the fly by assuming an
IAM role)</li>
<li>IAM user federation tokens</li>
<li>STS Session tokens</li>
</ul>



  <div class="doc doc-children">













  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSAuthenticationMethods" class="doc doc-heading">
        <code>
AWSAuthenticationMethods            (<a class="autorefs autorefs-internal" title="zenml.utils.enum_utils.StrEnum" href="../../core_code_docs/core-utils/#zenml.utils.enum_utils.StrEnum">StrEnum</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS Authentication methods.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSAuthenticationMethods</span><span class="p">(</span><span class="n">StrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS Authentication methods.&quot;&quot;&quot;</span>

    <span class="n">IMPLICIT</span> <span class="o">=</span> <span class="s2">&quot;implicit&quot;</span>
    <span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s2">&quot;secret-key&quot;</span>
    <span class="n">STS_TOKEN</span> <span class="o">=</span> <span class="s2">&quot;sts-token&quot;</span>
    <span class="n">IAM_ROLE</span> <span class="o">=</span> <span class="s2">&quot;iam-role&quot;</span>
    <span class="n">SESSION_TOKEN</span> <span class="o">=</span> <span class="s2">&quot;session-token&quot;</span>
    <span class="n">FEDERATION_TOKEN</span> <span class="o">=</span> <span class="s2">&quot;federation-token&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig" class="doc doc-heading">
        <code>
AWSBaseConfig            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.AuthenticationConfig" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.AuthenticationConfig">AuthenticationConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS base configuration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSBaseConfig</span><span class="p">(</span><span class="n">AuthenticationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS base configuration.&quot;&quot;&quot;</span>

    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS Region&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">endpoint_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS Endpoint URL&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSImplicitConfig" class="doc doc-heading">
        <code>
AWSImplicitConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig">AWSBaseConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy">AWSSessionPolicy</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS implicit configuration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSImplicitConfig</span><span class="p">(</span><span class="n">AWSBaseConfig</span><span class="p">,</span> <span class="n">AWSSessionPolicy</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS implicit configuration.&quot;&quot;&quot;</span>

    <span class="n">profile_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS Profile Name&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">role_arn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Optional AWS IAM Role ARN to assume&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey" class="doc doc-heading">
        <code>
AWSSecretKey            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.AuthenticationConfig" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.AuthenticationConfig">AuthenticationConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS secret key credentials.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSSecretKey</span><span class="p">(</span><span class="n">AuthenticationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS secret key credentials.&quot;&quot;&quot;</span>

    <span class="n">aws_access_key_id</span><span class="p">:</span> <span class="n">PlainSerializedSecretStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS Access Key ID&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An AWS access key ID associated with an AWS account or IAM user.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">aws_secret_access_key</span><span class="p">:</span> <span class="n">PlainSerializedSecretStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS Secret Access Key&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig" class="doc doc-heading">
        <code>
AWSSecretKeyConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig">AWSBaseConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey">AWSSecretKey</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS secret key authentication configuration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSSecretKeyConfig</span><span class="p">(</span><span class="n">AWSBaseConfig</span><span class="p">,</span> <span class="n">AWSSecretKey</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS secret key authentication configuration.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector" class="doc doc-heading">
        <code>
AWSServiceConnector            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.ServiceConnector" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.ServiceConnector">ServiceConnector</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS service connector.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSServiceConnector</span><span class="p">(</span><span class="n">ServiceConnector</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS service connector.&quot;&quot;&quot;</span>

    <span class="n">config</span><span class="p">:</span> <span class="n">AWSBaseConfig</span>

    <span class="n">_account_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_session_cache</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
        <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">Tuple</span><span class="p">[</span><span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]],</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_connector_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorTypeModel</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the service connector type specification.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The service connector type specification.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AWS_SERVICE_CONNECTOR_TYPE_SPEC</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">account_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the AWS account ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The AWS account ID.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If the AWS account ID could not be</span>
<span class="sd">                determined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting account ID from AWS...&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">)</span>
                <span class="n">sts_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">)</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">sts_client</span><span class="o">.</span><span class="n">get_caller_identity</span><span class="p">()</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to fetch the AWS account ID: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_account_id</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Account&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account_id</span>

    <span class="k">def</span> <span class="nf">get_boto3_session</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">auth_method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boto3 session for the specified resource.</span>

<span class="sd">        Args:</span>
<span class="sd">            auth_method: The authentication method to use.</span>
<span class="sd">            resource_type: The resource type to get a boto3 session for.</span>
<span class="sd">            resource_id: The resource ID to get a boto3 session for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A boto3 session for the specified resource and its expiration</span>
<span class="sd">            timestamp, if applicable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># We maintain a cache of all sessions to avoid re-authenticating</span>
        <span class="c1"># multiple times for the same resource</span>
        <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">auth_method</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_cache</span><span class="p">:</span>
            <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">expires_at</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="kc">None</span>

            <span class="c1"># Refresh expired sessions</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
            <span class="n">expires_at</span> <span class="o">=</span> <span class="n">expires_at</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
            <span class="c1"># check if the token expires in the near future</span>
            <span class="k">if</span> <span class="n">expires_at</span> <span class="o">&gt;</span> <span class="n">now</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                <span class="n">minutes</span><span class="o">=</span><span class="n">BOTO3_SESSION_EXPIRATION_BUFFER</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Creating boto3 session for auth method &#39;</span><span class="si">{</span><span class="n">auth_method</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;resource type &#39;</span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">&#39; and resource ID &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2">&#39;...&quot;</span>
        <span class="p">)</span>
        <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_authenticate</span><span class="p">(</span>
            <span class="n">auth_method</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session_cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span>

    <span class="k">def</span> <span class="nf">get_ecr_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an ECR client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the service connector is not able to instantiate an</span>
<span class="sd">                ECR client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An ECR client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="n">AWS_RESOURCE_TYPE</span><span class="p">,</span>
            <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">,</span>
        <span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unable to instantiate ECR client for a connector that is &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;configured to provide access to a &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                <span class="s2">&quot;resource type.&quot;</span>
            <span class="p">)</span>

        <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
            <span class="n">auth_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
            <span class="s2">&quot;ecr&quot;</span><span class="p">,</span>
            <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_iam_policy</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">region_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the IAM inline policy to use for the specified resource.</span>

<span class="sd">        Args:</span>
<span class="sd">            region_id: The AWS region ID to get the IAM inline policy for.</span>
<span class="sd">            resource_type: The resource type to get the IAM inline policy for.</span>
<span class="sd">            resource_id: The resource ID to get the IAM inline policy for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The IAM inline policy to use for the specified resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">S3_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">resource_id</span><span class="p">:</span>
                <span class="n">bucket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_s3_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
                <span class="n">resource</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;arn:aws:s3:::</span><span class="si">{</span><span class="n">bucket</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;arn:aws:s3:::</span><span class="si">{</span><span class="n">bucket</span><span class="si">}</span><span class="s2">/*&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resource</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;arn:aws:s3:::*&quot;</span><span class="p">,</span> <span class="s2">&quot;arn:aws:s3:::*/*&quot;</span><span class="p">]</span>
            <span class="n">policy</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AllowS3BucketAccess&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;s3:ListBucket&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:GetObject&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:PutObject&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:DeleteObject&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:ListAllMyBuckets&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:GetBucketVersioning&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:ListBucketVersions&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;s3:DeleteObjectVersion&quot;</span><span class="p">,</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="n">resource</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">policy</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">resource_id</span><span class="p">:</span>
                <span class="n">cluster_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_eks_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
                <span class="n">resource</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;arn:aws:eks:</span><span class="si">{</span><span class="n">region_id</span><span class="si">}</span><span class="s2">:*:cluster/</span><span class="si">{</span><span class="n">cluster_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resource</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;arn:aws:eks:</span><span class="si">{</span><span class="n">region_id</span><span class="si">}</span><span class="s2">:*:cluster/*&quot;</span><span class="p">]</span>
            <span class="n">policy</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AllowEKSClusterAccess&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;eks:ListClusters&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;eks:DescribeCluster&quot;</span><span class="p">,</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="n">resource</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">policy</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="n">resource</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;arn:aws:ecr:</span><span class="si">{</span><span class="n">region_id</span><span class="si">}</span><span class="s2">:*:repository/*&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;arn:aws:ecr:</span><span class="si">{</span><span class="n">region_id</span><span class="si">}</span><span class="s2">:*:repository&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">policy</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AllowECRRepositoryAccess&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;ecr:DescribeRegistry&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:DescribeRepositories&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:ListRepositories&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:BatchGetImage&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:DescribeImages&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:BatchCheckLayerAvailability&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:GetDownloadUrlForLayer&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:InitiateLayerUpload&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:UploadLayerPart&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:CompleteLayerUpload&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ecr:PutImage&quot;</span><span class="p">,</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="n">resource</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AllowECRRepositoryGetToken&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;ecr:GetAuthorizationToken&quot;</span><span class="p">,</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">policy</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_authenticate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">auth_method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticate to AWS and return a boto3 session.</span>

<span class="sd">        Args:</span>
<span class="sd">            auth_method: The authentication method to use.</span>
<span class="sd">            resource_type: The resource type to authenticate for.</span>
<span class="sd">            resource_id: The resource ID to authenticate for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An authenticated boto3 session and the expiration time of the</span>
<span class="sd">            temporary credentials if applicable.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If the IAM role authentication method is</span>
<span class="sd">                used and the role cannot be assumed.</span>
<span class="sd">            NotImplementedError: If the authentication method is not supported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
        <span class="n">policy_kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IMPLICIT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_implicit_auth_method_allowed</span><span class="p">()</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">AWSImplicitConfig</span><span class="p">)</span>
            <span class="c1"># Create a boto3 session and use the default credentials provider</span>
            <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">profile_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">profile_name</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">role_arn</span><span class="p">:</span>
                <span class="c1"># If an IAM role is configured, assume it</span>
                <span class="n">policy</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy_arns</span><span class="p">:</span>
                    <span class="n">policy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_iam_policy</span><span class="p">(</span>
                        <span class="n">region_id</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                        <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">policy</span><span class="p">:</span>
                    <span class="n">policy_kwargs</span><span class="p">[</span><span class="s2">&quot;Policy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">policy</span>
                <span class="k">elif</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy_arns</span><span class="p">:</span>
                    <span class="n">policy_kwargs</span><span class="p">[</span><span class="s2">&quot;PolicyArns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy_arns</span>

                <span class="n">sts</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
                <span class="n">session_name</span> <span class="o">=</span> <span class="s2">&quot;zenml-connector&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="n">session_name</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">assume_role</span><span class="p">(</span>
                        <span class="n">RoleArn</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">role_arn</span><span class="p">,</span>
                        <span class="n">RoleSessionName</span><span class="o">=</span><span class="n">session_name</span><span class="p">,</span>
                        <span class="n">DurationSeconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">expiration_seconds</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">policy_kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed to assume IAM role </span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">role_arn</span><span class="si">}</span><span class="s2"> &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;using the implicit AWS credentials: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

                <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span><span class="s2">&quot;AccessKeyId&quot;</span><span class="p">],</span>
                    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span>
                        <span class="s2">&quot;SecretAccessKey&quot;</span>
                    <span class="p">],</span>
                    <span class="n">aws_session_token</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span><span class="s2">&quot;SessionToken&quot;</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="n">expiration</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span><span class="s2">&quot;Expiration&quot;</span><span class="p">]</span>
                <span class="c1"># Add the UTC timezone to the expiration time</span>
                <span class="n">expiration</span> <span class="o">=</span> <span class="n">expiration</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expiration</span>

            <span class="n">credentials</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to get AWS credentials from the default provider. &quot;</span>
                    <span class="s2">&quot;Please check your AWS configuration or attached IAM role.&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">credentials</span><span class="o">.</span><span class="n">token</span><span class="p">:</span>
                <span class="c1"># Temporary credentials were generated. It&#39;s not possible to</span>
                <span class="c1"># determine the expiration time of the temporary credentials</span>
                <span class="c1"># from the boto3 session, so we assume the default IAM role</span>
                <span class="c1"># expiration date is used</span>
                <span class="n">expiration_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
                    <span class="n">tz</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
                <span class="p">)</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                    <span class="n">seconds</span><span class="o">=</span><span class="n">DEFAULT_IAM_ROLE_TOKEN_EXPIRATION</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expiration_time</span>

            <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SECRET_KEY</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">AWSSecretKeyConfig</span><span class="p">)</span>
            <span class="c1"># Create a boto3 session using long-term AWS credentials</span>
            <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_access_key_id</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_secret_access_key</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">region_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">STSTokenConfig</span><span class="p">)</span>
            <span class="c1"># Create a boto3 session using a temporary AWS STS token</span>
            <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_access_key_id</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_secret_access_key</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">aws_session_token</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_session_token</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">region_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expires_at</span>
        <span class="k">elif</span> <span class="n">auth_method</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span><span class="p">,</span>
            <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SESSION_TOKEN</span><span class="p">,</span>
            <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">FEDERATION_TOKEN</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">AWSSecretKey</span><span class="p">)</span>

            <span class="c1"># Create a boto3 session</span>
            <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_access_key_id</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">aws_secret_access_key</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(),</span>
                <span class="n">region_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">sts</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
            <span class="n">session_name</span> <span class="o">=</span> <span class="s2">&quot;zenml-connector&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="n">session_name</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="c1"># Next steps are different for each authentication method</span>

            <span class="c1"># The IAM role and federation token authentication methods</span>
            <span class="c1"># accept a managed IAM policy that restricts/grants permissions.</span>
            <span class="c1"># If one isn&#39;t explicitly configured, we generate one based on the</span>
            <span class="c1"># resource specified by the resource type and ID (if present).</span>
            <span class="k">if</span> <span class="n">auth_method</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span><span class="p">,</span>
                <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">FEDERATION_TOKEN</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">AWSSessionPolicy</span><span class="p">)</span>
                <span class="n">policy</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy_arns</span><span class="p">:</span>
                    <span class="n">policy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_iam_policy</span><span class="p">(</span>
                        <span class="n">region_id</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                        <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">policy</span><span class="p">:</span>
                    <span class="n">policy_kwargs</span><span class="p">[</span><span class="s2">&quot;Policy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">policy</span>
                <span class="k">elif</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy_arns</span><span class="p">:</span>
                    <span class="n">policy_kwargs</span><span class="p">[</span><span class="s2">&quot;PolicyArns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">policy_arns</span>

                <span class="k">if</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">IAMRoleAuthenticationConfig</span><span class="p">)</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">response</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">assume_role</span><span class="p">(</span>
                            <span class="n">RoleArn</span><span class="o">=</span><span class="n">cfg</span><span class="o">.</span><span class="n">role_arn</span><span class="p">,</span>
                            <span class="n">RoleSessionName</span><span class="o">=</span><span class="n">session_name</span><span class="p">,</span>
                            <span class="n">DurationSeconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">expiration_seconds</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">policy_kwargs</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Failed to assume IAM role </span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">role_arn</span><span class="si">}</span><span class="s2"> &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;using the AWS credentials configured in the &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;connector: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">FederationTokenAuthenticationConfig</span><span class="p">)</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">response</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">get_federation_token</span><span class="p">(</span>
                            <span class="n">Name</span><span class="o">=</span><span class="n">session_name</span><span class="p">[:</span><span class="mi">32</span><span class="p">],</span>
                            <span class="n">DurationSeconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">expiration_seconds</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">policy_kwargs</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                            <span class="s2">&quot;Failed to get federation token &quot;</span>
                            <span class="s2">&quot;using the AWS credentials configured in the &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;connector: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">SessionTokenAuthenticationConfig</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">get_session_token</span><span class="p">(</span>
                        <span class="n">DurationSeconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">expiration_seconds</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                        <span class="s2">&quot;Failed to get session token &quot;</span>
                        <span class="s2">&quot;using the AWS credentials configured in the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;connector: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span><span class="s2">&quot;AccessKeyId&quot;</span><span class="p">],</span>
                <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span>
                    <span class="s2">&quot;SecretAccessKey&quot;</span>
                <span class="p">],</span>
                <span class="n">aws_session_token</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span><span class="s2">&quot;SessionToken&quot;</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">expiration</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">][</span><span class="s2">&quot;Expiration&quot;</span><span class="p">]</span>
            <span class="c1"># Add the UTC timezone to the expiration time</span>
            <span class="n">expiration</span> <span class="o">=</span> <span class="n">expiration</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expiration</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Authentication method &#39;</span><span class="si">{</span><span class="n">auth_method</span><span class="si">}</span><span class="s2">&#39; is not supported by &quot;</span>
            <span class="s2">&quot;the AWS connector.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_eks_bearer_token</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">,</span>
        <span class="n">cluster_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a bearer token for authenticating to the EKS API server.</span>

<span class="sd">        Based on: https://github.com/kubernetes-sigs/aws-iam-authenticator/blob/master/README.md#api-authorization-from-outside-a-cluster</span>

<span class="sd">        Args:</span>
<span class="sd">            session: An authenticated boto3 session to use for generating the</span>
<span class="sd">                token.</span>
<span class="sd">            cluster_id: The name of the EKS cluster.</span>
<span class="sd">            region: The AWS region the EKS cluster is in.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A bearer token for authenticating to the EKS API server.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">STS_TOKEN_EXPIRES_IN</span> <span class="o">=</span> <span class="mi">60</span>

        <span class="n">client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="n">region</span><span class="p">)</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">service_id</span>

        <span class="n">signer</span> <span class="o">=</span> <span class="n">RequestSigner</span><span class="p">(</span>
            <span class="n">service_id</span><span class="p">,</span>
            <span class="n">region</span><span class="p">,</span>
            <span class="s2">&quot;sts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v4&quot;</span><span class="p">,</span>
            <span class="n">session</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">(),</span>
            <span class="n">session</span><span class="o">.</span><span class="n">events</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://sts.</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">.amazonaws.com/?Action=GetCallerIdentity&amp;Version=2011-06-15&quot;</span><span class="p">,</span>
            <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;x-k8s-aws-id&quot;</span><span class="p">:</span> <span class="n">cluster_id</span><span class="p">},</span>
            <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="p">}</span>

        <span class="n">signed_url</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">generate_presigned_url</span><span class="p">(</span>
            <span class="n">params</span><span class="p">,</span>
            <span class="n">region_name</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
            <span class="n">expires_in</span><span class="o">=</span><span class="n">STS_TOKEN_EXPIRES_IN</span><span class="p">,</span>
            <span class="n">operation_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">base64_url</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span>
            <span class="n">signed_url</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="c1"># remove any base64 encoding padding:</span>
        <span class="k">return</span> <span class="s2">&quot;k8s-aws-v1.&quot;</span> <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;=*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">base64_url</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_parse_s3_resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate and convert an S3 resource ID to an S3 bucket name.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_id: The resource ID to convert.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The S3 bucket name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the provided resource ID is not a valid S3 bucket</span>
<span class="sd">                name, ARN or URI.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The resource ID could mean different things:</span>
        <span class="c1">#</span>
        <span class="c1"># - an S3 bucket ARN</span>
        <span class="c1"># - an S3 bucket URI</span>
        <span class="c1"># - the S3 bucket name</span>
        <span class="c1">#</span>
        <span class="c1"># We need to extract the bucket name from the provided resource ID</span>
        <span class="n">bucket_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^arn:aws:s3:::[a-z0-9][a-z0-9\-\.]{1,61}[a-z0-9](/.*)*$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># The resource ID is an S3 bucket ARN</span>
            <span class="n">bucket_name</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^s3://[a-z0-9][a-z0-9\-\.]{1,61}[a-z0-9](/.*)*$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># The resource ID is an S3 bucket URI</span>
            <span class="n">bucket_name</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^[a-z0-9][a-z0-9\-\.]{1,61}[a-z0-9]$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># The resource ID is the S3 bucket name</span>
            <span class="n">bucket_name</span> <span class="o">=</span> <span class="n">resource_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid resource ID for an S3 bucket: </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Supported formats are:</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;S3 bucket ARN: arn:aws:s3:::&lt;bucket-name&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;S3 bucket URI: s3://&lt;bucket-name&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;S3 bucket name: &lt;bucket-name&gt;&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">bucket_name</span>

    <span class="k">def</span> <span class="nf">_parse_ecr_resource_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate and convert an ECR resource ID to an ECR registry ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_id: The resource ID to convert.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The ECR registry ID (AWS account ID).</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the provided resource ID is not a valid ECR</span>
<span class="sd">                repository ARN or URI.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The resource ID could mean different things:</span>
        <span class="c1">#</span>
        <span class="c1"># - an ECR repository ARN</span>
        <span class="c1"># - an ECR repository URI</span>
        <span class="c1">#</span>
        <span class="c1"># We need to extract the region ID and registry ID from</span>
        <span class="c1"># the provided resource ID</span>
        <span class="n">config_region_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span>
        <span class="n">region_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^arn:aws:ecr:[a-z0-9-]+:\d</span><span class="si">{12}</span><span class="s2">:repository(/.+)*$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># The resource ID is an ECR repository ARN</span>
            <span class="n">registry_id</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">region_id</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^(http[s]?://)?\d</span><span class="si">{12}</span><span class="s2">\.dkr\.ecr\.[a-z0-9-]+\.amazonaws\.com(/.+)*$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># The resource ID is an ECR repository URI</span>
            <span class="n">registry_id</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">region_id</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid resource ID for a ECR registry: </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Supported formats are:</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;ECR repository ARN: arn:aws:ecr:&lt;region&gt;:&lt;account-id&gt;:repository[/&lt;repository-name&gt;]</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;ECR repository URI: [https://]&lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com[/&lt;repository-name&gt;]&quot;</span>
            <span class="p">)</span>

        <span class="c1"># If the connector is configured with a region and the resource ID</span>
        <span class="c1"># is an ECR repository ARN or URI that specifies a different region</span>
        <span class="c1"># we raise an error</span>
        <span class="k">if</span> <span class="n">region_id</span> <span class="ow">and</span> <span class="n">region_id</span> <span class="o">!=</span> <span class="n">config_region_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The AWS region for the </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2"> ECR repository region &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">region_id</span><span class="si">}</span><span class="s2">&#39; does not match the region configured in &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;the connector: &#39;</span><span class="si">{</span><span class="n">config_region_id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">registry_id</span>

    <span class="k">def</span> <span class="nf">_parse_eks_resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate and convert an EKS resource ID to an AWS region and EKS cluster name.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_id: The resource ID to convert.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The EKS cluster name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the provided resource ID is not a valid EKS cluster</span>
<span class="sd">                name or ARN.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The resource ID could mean different things:</span>
        <span class="c1">#</span>
        <span class="c1"># - an EKS cluster ARN</span>
        <span class="c1"># - an EKS cluster ID</span>
        <span class="c1">#</span>
        <span class="c1"># We need to extract the cluster name and region ID from the</span>
        <span class="c1"># provided resource ID</span>
        <span class="n">config_region_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span>
        <span class="n">cluster_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">region_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^arn:aws:eks:[a-z0-9-]+:\d</span><span class="si">{12}</span><span class="s2">:cluster/[0-9A-Za-z][A-Za-z0-9\-_]*$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># The resource ID is an EKS cluster ARN</span>
            <span class="n">cluster_name</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">region_id</span> <span class="o">=</span> <span class="n">resource_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;^[0-9A-Za-z][A-Za-z0-9\-_]*$&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="c1"># Assume the resource ID is an EKS cluster name</span>
            <span class="n">cluster_name</span> <span class="o">=</span> <span class="n">resource_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid resource ID for a EKS cluster: </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Supported formats are:</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;EKS cluster ARN: arn:aws:eks:&lt;region&gt;:&lt;account-id&gt;:cluster/&lt;cluster-name&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;ECR cluster name: &lt;cluster-name&gt;&quot;</span>
            <span class="p">)</span>

        <span class="c1"># If the connector is configured with a region and the resource ID</span>
        <span class="c1"># is an EKS registry ARN or URI that specifies a different region</span>
        <span class="c1"># we raise an error</span>
        <span class="k">if</span> <span class="n">region_id</span> <span class="ow">and</span> <span class="n">region_id</span> <span class="o">!=</span> <span class="n">config_region_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The AWS region for the </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2"> EKS cluster &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">region_id</span><span class="si">}</span><span class="s2">) does not match the region configured in &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;the connector (</span><span class="si">{</span><span class="n">config_region_id</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">cluster_name</span>

    <span class="k">def</span> <span class="nf">_canonical_resource_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a resource ID to its canonical form.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_type: The resource type to canonicalize.</span>
<span class="sd">            resource_id: The resource ID to canonicalize.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The canonical resource ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">S3_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="n">bucket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_s3_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;s3://</span><span class="si">{</span><span class="n">bucket</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="n">cluster_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_eks_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">cluster_name</span>
        <span class="k">elif</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="n">registry_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_ecr_resource_id</span><span class="p">(</span>
                <span class="n">resource_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">registry_id</span><span class="si">}</span><span class="s2">.dkr.ecr.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">.amazonaws.com&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">resource_id</span>

    <span class="k">def</span> <span class="nf">_get_default_resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the default resource ID for a resource type.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_type: The type of the resource to get a default resource ID</span>
<span class="sd">                for. Only called with resource types that do not support</span>
<span class="sd">                multiple instances.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The default resource ID for the resource type.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the ECR registry ID (AWS account ID)</span>
<span class="sd">                cannot be retrieved from AWS because the connector is not</span>
<span class="sd">                authorized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">AWS_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span>
        <span class="k">elif</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="c1"># we need to get the account ID (same as registry ID) from the</span>
            <span class="c1"># caller identity AWS service</span>
            <span class="n">account_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_id</span>

            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">account_id</span><span class="si">}</span><span class="s2">.dkr.ecr.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">.amazonaws.com&quot;</span>

        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Default resource ID for &#39;</span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">&#39; not available.&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_connect_to_resource</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticate and connect to an AWS resource.</span>

<span class="sd">        Initialize and return a session or client object depending on the</span>
<span class="sd">        connector configuration:</span>

<span class="sd">        - initialize and return a boto3 session if the resource type</span>
<span class="sd">        is a generic AWS resource</span>
<span class="sd">        - initialize and return a boto3 client for an S3 resource type</span>

<span class="sd">        For the Docker and Kubernetes resource types, the connector does not</span>
<span class="sd">        support connecting to the resource directly. Instead, the connector</span>
<span class="sd">        supports generating a connector client object for the resource type</span>
<span class="sd">        in question.</span>

<span class="sd">        Args:</span>
<span class="sd">            kwargs: Additional implementation specific keyword arguments to pass</span>
<span class="sd">                to the session or client constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A boto3 session for AWS generic resources and a boto3 S3 client for</span>
<span class="sd">            S3 resources.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If the connector instance does not support</span>
<span class="sd">                directly connecting to the indicated resource type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resource_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span>
        <span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span>

        <span class="k">assert</span> <span class="n">resource_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="c1"># Regardless of the resource type, we must authenticate to AWS first</span>
        <span class="c1"># before we can connect to any AWS resource</span>
        <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">S3_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="c1"># Validate that the resource ID is a valid S3 bucket name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_s3_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>

            <span class="c1"># Create an S3 client for the bucket</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
                <span class="s2">&quot;s3&quot;</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># There is no way to retrieve the credentials from the S3 client</span>
            <span class="c1"># but some consumers need them to configure 3rd party services.</span>
            <span class="c1"># We therefore store the credentials in the client object so that</span>
            <span class="c1"># they can be retrieved later.</span>
            <span class="n">client</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">client</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">AWS_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">session</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Connecting to </span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> resources is not directly &quot;</span>
            <span class="s2">&quot;supported by the AWS connector. Please call the &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`get_connector_client` method to get a </span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> connector &quot;</span>
            <span class="s2">&quot;instance for the resource.&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_configure_local_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">profile_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure a local client to authenticate and connect to a resource.</span>

<span class="sd">        This method uses the connector&#39;s configuration to configure a local</span>
<span class="sd">        client or SDK installed on the localhost for the indicated resource.</span>

<span class="sd">        Args:</span>
<span class="sd">            profile_name: The name of the AWS profile to use. If not specified,</span>
<span class="sd">                a profile name is generated based on the first 8 digits of the</span>
<span class="sd">                connector&#39;s UUID in the form &#39;zenml-&lt;uuid[:8]&gt;&#39;. If a profile</span>
<span class="sd">                with the given or generated name already exists, the profile is</span>
<span class="sd">                overwritten.</span>
<span class="sd">            kwargs: Additional implementation specific keyword arguments to use</span>
<span class="sd">                to configure the client.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If the connector instance does not support</span>
<span class="sd">                local configuration for the configured resource type or</span>
<span class="sd">                authentication method.registry</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resource_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">AWS_RESOURCE_TYPE</span><span class="p">,</span> <span class="n">S3_RESOURCE_TYPE</span><span class="p">]:</span>
            <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
                <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                <span class="n">resource_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Configure a new AWS SDK profile with the credentials</span>
            <span class="c1"># from the session using the aws-profile-manager package</span>

            <span class="c1"># Generate a profile name based on the first 8 digits from the</span>
            <span class="c1"># connector UUID, if one is not supplied</span>
            <span class="n">aws_profile_name</span> <span class="o">=</span> <span class="n">profile_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;zenml-</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">common</span> <span class="o">=</span> <span class="n">Common</span><span class="p">()</span>
            <span class="n">users_home</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_users_home</span><span class="p">()</span>
            <span class="n">all_profiles</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_all_profiles</span><span class="p">(</span><span class="n">users_home</span><span class="p">)</span>

            <span class="n">credentials</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">()</span>
            <span class="n">all_profiles</span><span class="p">[</span><span class="n">aws_profile_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="s2">&quot;aws_access_key_id&quot;</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                <span class="s2">&quot;aws_secret_access_key&quot;</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">credentials</span><span class="o">.</span><span class="n">token</span><span class="p">:</span>
                <span class="n">all_profiles</span><span class="p">[</span><span class="n">aws_profile_name</span><span class="p">][</span><span class="s2">&quot;aws_session_token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">credentials</span><span class="o">.</span><span class="n">token</span>
                <span class="p">)</span>

            <span class="n">aws_credentials_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">users_home</span><span class="p">,</span> <span class="s2">&quot;.aws&quot;</span><span class="p">,</span> <span class="s2">&quot;credentials&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Create the file as well as the parent dir if needed.</span>
            <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">aws_credentials_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dirname</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">fdopen</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">aws_credentials_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">O_WRONLY</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_CREAT</span><span class="p">,</span> <span class="mo">0o600</span><span class="p">),</span>
                <span class="s2">&quot;w&quot;</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="k">pass</span>

            <span class="c1"># Write the credentials to the file</span>
            <span class="n">common</span><span class="o">.</span><span class="n">rewrite_credentials_file</span><span class="p">(</span><span class="n">all_profiles</span><span class="p">,</span> <span class="n">users_home</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Configured local AWS SDK profile &#39;</span><span class="si">{</span><span class="n">aws_profile_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Configuring the local client for </span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> resources is &quot;</span>
            <span class="s2">&quot;not directly supported by the AWS connector. Please call the &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`get_connector_client` method to get a </span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> connector &quot;</span>
            <span class="s2">&quot;instance for the resource.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_auto_configure</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">auth_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">region_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">profile_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">role_arn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AWSServiceConnector&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Auto-configure the connector.</span>

<span class="sd">        Instantiate an AWS connector with a configuration extracted from the</span>
<span class="sd">        authentication configuration available in the environment (e.g.</span>
<span class="sd">        environment variables or local AWS client/SDK configuration files).</span>

<span class="sd">        Args:</span>
<span class="sd">            auth_method: The particular authentication method to use. If not</span>
<span class="sd">                specified, the connector implementation must decide which</span>
<span class="sd">                authentication method to use or raise an exception.</span>
<span class="sd">            resource_type: The type of resource to configure.</span>
<span class="sd">            resource_id: The ID of the resource to configure. The</span>
<span class="sd">                implementation may choose to either require or ignore this</span>
<span class="sd">                parameter if it does not support or detect an resource type that</span>
<span class="sd">                supports multiple instances.</span>
<span class="sd">            region_name: The name of the AWS region to use. If not specified,</span>
<span class="sd">                the implicit region is used.</span>
<span class="sd">            profile_name: The name of the AWS profile to use. If not specified,</span>
<span class="sd">                the implicit profile is used.</span>
<span class="sd">            role_arn: The ARN of the AWS role to assume. Applicable only if the</span>
<span class="sd">                IAM role authentication method is specified or long-term</span>
<span class="sd">                credentials are discovered.</span>
<span class="sd">            kwargs: Additional implementation specific keyword arguments to use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An AWS connector instance configured with authentication credentials</span>
<span class="sd">            automatically extracted from the environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If the connector implementation does not</span>
<span class="sd">                support auto-configuration for the specified authentication</span>
<span class="sd">                method.</span>
<span class="sd">            ValueError: If the supplied arguments are not valid.</span>
<span class="sd">            AuthorizationException: If no AWS credentials can be loaded from</span>
<span class="sd">                the environment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">auth_config</span><span class="p">:</span> <span class="n">AWSBaseConfig</span>
        <span class="n">expiration_seconds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">expires_at</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IMPLICIT</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">region_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The AWS region name must be specified when using the &quot;</span>
                    <span class="s2">&quot;implicit authentication method&quot;</span>
                <span class="p">)</span>
            <span class="n">auth_config</span> <span class="o">=</span> <span class="n">AWSImplicitConfig</span><span class="p">(</span>
                <span class="n">profile_name</span><span class="o">=</span><span class="n">profile_name</span><span class="p">,</span>
                <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Initialize an AWS session with the default configuration loaded</span>
            <span class="c1"># from the environment.</span>
            <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
                <span class="n">profile_name</span><span class="o">=</span><span class="n">profile_name</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="n">region_name</span>
            <span class="p">)</span>

            <span class="n">region_name</span> <span class="o">=</span> <span class="n">region_name</span> <span class="ow">or</span> <span class="n">session</span><span class="o">.</span><span class="n">region_name</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">region_name</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The AWS region name was not specified and could not &quot;</span>
                    <span class="s2">&quot;be determined from the AWS session&quot;</span>
                <span class="p">)</span>
            <span class="n">endpoint_url</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">get_config_variable</span><span class="p">(</span><span class="s2">&quot;endpoint_url&quot;</span><span class="p">)</span>

            <span class="c1"># Extract the AWS credentials from the session and store them in</span>
            <span class="c1"># the connector secrets.</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="s2">&quot;Could not determine the AWS credentials from the &quot;</span>
                    <span class="s2">&quot;environment&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">credentials</span><span class="o">.</span><span class="n">token</span><span class="p">:</span>
                <span class="c1"># The session picked up temporary STS credentials</span>
                <span class="k">if</span> <span class="n">auth_method</span> <span class="ow">and</span> <span class="n">auth_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span><span class="p">,</span>
                    <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The specified authentication method &#39;</span><span class="si">{</span><span class="n">auth_method</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                        <span class="s2">&quot;could not be used to auto-configure the connector. &quot;</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">credentials</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;assume-role&quot;</span>
                    <span class="ow">and</span> <span class="n">auth_method</span> <span class="o">!=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span>
                <span class="p">):</span>
                    <span class="c1"># In the special case of IAM role authentication, the</span>
                    <span class="c1"># credentials in the boto3 session are the temporary STS</span>
                    <span class="c1"># credentials instead of the long-lived credentials, and the</span>
                    <span class="c1"># role ARN is not known. We have to dig deeper into the</span>
                    <span class="c1"># botocore session internals to retrieve the role ARN and</span>
                    <span class="c1"># the original long-lived credentials.</span>

                    <span class="n">botocore_session</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">_session</span>
                    <span class="n">profile_config</span> <span class="o">=</span> <span class="n">botocore_session</span><span class="o">.</span><span class="n">get_scoped_config</span><span class="p">()</span>
                    <span class="n">source_profile</span> <span class="o">=</span> <span class="n">profile_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>
                    <span class="n">role_arn</span> <span class="o">=</span> <span class="n">profile_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;role_arn&quot;</span><span class="p">)</span>
                    <span class="n">profile_map</span> <span class="o">=</span> <span class="n">botocore_session</span><span class="o">.</span><span class="n">_build_profile_map</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
                        <span class="n">role_arn</span>
                        <span class="ow">and</span> <span class="n">source_profile</span>
                        <span class="ow">and</span> <span class="n">source_profile</span> <span class="ow">in</span> <span class="n">profile_map</span>
                    <span class="p">):</span>
                        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                            <span class="s2">&quot;Could not determine the IAM role ARN and source &quot;</span>
                            <span class="s2">&quot;profile credentials from the environment&quot;</span>
                        <span class="p">)</span>

                    <span class="n">auth_method</span> <span class="o">=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span>
                    <span class="n">source_profile_config</span> <span class="o">=</span> <span class="n">profile_map</span><span class="p">[</span><span class="n">source_profile</span><span class="p">]</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">IAMRoleAuthenticationConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">source_profile_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="s2">&quot;aws_access_key_id&quot;</span>
                        <span class="p">),</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">source_profile_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="s2">&quot;aws_secret_access_key&quot;</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="n">role_arn</span><span class="o">=</span><span class="n">role_arn</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">expiration_seconds</span> <span class="o">=</span> <span class="n">DEFAULT_IAM_ROLE_TOKEN_EXPIRATION</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;The specified authentication method &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">auth_method</span><span class="si">}</span><span class="s2">&#39; could not be used to &quot;</span>
                            <span class="s2">&quot;auto-configure the connector.&quot;</span>
                        <span class="p">)</span>

                    <span class="c1"># Temporary credentials were picked up from the local</span>
                    <span class="c1"># configuration. It&#39;s not possible to determine the</span>
                    <span class="c1"># expiration time of the temporary credentials from the</span>
                    <span class="c1"># boto3 session, so we assume the default IAM role</span>
                    <span class="c1"># expiration period is used</span>
                    <span class="n">expires_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
                        <span class="n">tz</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
                    <span class="p">)</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                        <span class="n">seconds</span><span class="o">=</span><span class="n">DEFAULT_IAM_ROLE_TOKEN_EXPIRATION</span>
                    <span class="p">)</span>

                    <span class="n">auth_method</span> <span class="o">=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">STSTokenConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                        <span class="n">aws_session_token</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">token</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># The session picked up long-lived credentials</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_method</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">role_arn</span><span class="p">:</span>
                        <span class="n">auth_method</span> <span class="o">=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># If no authentication method was specified, use the</span>
                        <span class="c1"># session token as a default recommended authentication</span>
                        <span class="c1"># method to be used with long-lived credentials.</span>
                        <span class="n">auth_method</span> <span class="o">=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SESSION_TOKEN</span>

                <span class="n">region_name</span> <span class="o">=</span> <span class="n">region_name</span> <span class="ow">or</span> <span class="n">session</span><span class="o">.</span><span class="n">region_name</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">region_name</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;The AWS region name was not specified and could not &quot;</span>
                        <span class="s2">&quot;be determined from the AWS session&quot;</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span><span class="p">:</span>
                    <span class="c1"># Generate a session token from the long-lived credentials</span>
                    <span class="c1"># and store it in the connector secrets.</span>
                    <span class="n">sts_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">)</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">sts_client</span><span class="o">.</span><span class="n">get_session_token</span><span class="p">(</span>
                        <span class="n">DurationSeconds</span><span class="o">=</span><span class="n">DEFAULT_STS_TOKEN_EXPIRATION</span>
                    <span class="p">)</span>
                    <span class="n">credentials</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Credentials&quot;</span><span class="p">]</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">STSTokenConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;AccessKeyId&quot;</span><span class="p">],</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;SecretAccessKey&quot;</span><span class="p">],</span>
                        <span class="n">aws_session_token</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;SessionToken&quot;</span><span class="p">],</span>
                    <span class="p">)</span>
                    <span class="n">expires_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
                        <span class="n">tz</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
                    <span class="p">)</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                        <span class="n">seconds</span><span class="o">=</span><span class="n">DEFAULT_STS_TOKEN_EXPIRATION</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IAM_ROLE</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">role_arn</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="s2">&quot;The ARN of the AWS role to assume must be &quot;</span>
                            <span class="s2">&quot;specified when using the IAM role authentication &quot;</span>
                            <span class="s2">&quot;method.&quot;</span>
                        <span class="p">)</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">IAMRoleAuthenticationConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                        <span class="n">role_arn</span><span class="o">=</span><span class="n">role_arn</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">expiration_seconds</span> <span class="o">=</span> <span class="n">DEFAULT_IAM_ROLE_TOKEN_EXPIRATION</span>

                <span class="k">elif</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SECRET_KEY</span><span class="p">:</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">AWSSecretKeyConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SESSION_TOKEN</span><span class="p">:</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">SessionTokenAuthenticationConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">expiration_seconds</span> <span class="o">=</span> <span class="n">DEFAULT_STS_TOKEN_EXPIRATION</span>

                <span class="k">else</span><span class="p">:</span>  <span class="c1"># auth_method is AWSAuthenticationMethods.FEDERATION_TOKEN</span>
                    <span class="n">auth_config</span> <span class="o">=</span> <span class="n">FederationTokenAuthenticationConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">region_name</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">expiration_seconds</span> <span class="o">=</span> <span class="n">DEFAULT_STS_TOKEN_EXPIRATION</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">auth_method</span><span class="o">=</span><span class="n">auth_method</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span>
            <span class="k">if</span> <span class="n">resource_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">AWS_RESOURCE_TYPE</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
            <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">expiration_seconds</span><span class="o">=</span><span class="n">expiration_seconds</span><span class="p">,</span>
            <span class="n">expires_at</span><span class="o">=</span><span class="n">expires_at</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">auth_config</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify and list all the resources that the connector can access.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_type: The type of the resource to verify. If omitted and</span>
<span class="sd">                if the connector supports multiple resource types, the</span>
<span class="sd">                implementation must verify that it can authenticate and connect</span>
<span class="sd">                to any and all of the supported resource types.</span>
<span class="sd">            resource_id: The ID of the resource to connect to. Omitted if a</span>
<span class="sd">                resource type is not specified. It has the same value as the</span>
<span class="sd">                default resource ID if the supplied resource type doesn&#39;t</span>
<span class="sd">                support multiple instances. If the supplied resource type does</span>
<span class="sd">                allows multiple instances, this parameter may still be omitted</span>
<span class="sd">                to fetch a list of resource IDs identifying all the resources</span>
<span class="sd">                of the indicated type that the connector can access.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The list of resources IDs in canonical format identifying the</span>
<span class="sd">            resources that the connector can access. This list is empty only</span>
<span class="sd">            if the resource type is not specified (i.e. for multi-type</span>
<span class="sd">            connectors).</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If the connector cannot authenticate or</span>
<span class="sd">                access the specified resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the resource type is not specified, treat this the</span>
        <span class="c1"># same as a generic AWS connector.</span>
        <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span> <span class="ow">or</span> <span class="n">AWS_RESOURCE_TYPE</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Verify that the AWS account is accessible</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">)</span>
        <span class="n">sts_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;sts&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sts_client</span><span class="o">.</span><span class="n">get_caller_identity</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;failed to verify AWS account access: </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">resource_type</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">AWS_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">resource_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">S3_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="n">s3_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
                <span class="s2">&quot;s3&quot;</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">resource_id</span><span class="p">:</span>
                <span class="c1"># List all S3 buckets</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">s3_client</span><span class="o">.</span><span class="n">list_buckets</span><span class="p">()</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;failed to list S3 buckets: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

                <span class="k">return</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;s3://</span><span class="si">{</span><span class="n">bucket</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">bucket</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Buckets&quot;</span><span class="p">]</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Check if the specified S3 bucket exists</span>
                <span class="n">bucket_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_s3_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">s3_client</span><span class="o">.</span><span class="n">head_bucket</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="n">bucket_name</span><span class="p">)</span>
                    <span class="k">return</span> <span class="p">[</span><span class="n">resource_id</span><span class="p">]</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;failed to fetch S3 bucket </span><span class="si">{</span><span class="n">bucket_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="n">ecr_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
                <span class="s2">&quot;ecr&quot;</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># List all ECR repositories</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">repositories</span> <span class="o">=</span> <span class="n">ecr_client</span><span class="o">.</span><span class="n">describe_repositories</span><span class="p">()</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;failed to list ECR repositories: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">repositories</span><span class="p">[</span><span class="s2">&quot;repositories&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="s2">&quot;the AWS connector does not have access to any ECR &quot;</span>
                    <span class="s2">&quot;repositories. Please adjust the AWS permissions &quot;</span>
                    <span class="s2">&quot;associated with the authentication credentials to &quot;</span>
                    <span class="s2">&quot;include access to at least one ECR repository.&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="p">[</span><span class="n">resource_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="n">eks_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
                <span class="s2">&quot;eks&quot;</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">resource_id</span><span class="p">:</span>
                <span class="c1"># List all EKS clusters</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">clusters</span> <span class="o">=</span> <span class="n">eks_client</span><span class="o">.</span><span class="n">list_clusters</span><span class="p">()</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to list EKS clusters: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

                <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">clusters</span><span class="p">[</span><span class="s2">&quot;clusters&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Check if the specified EKS cluster exists</span>
                <span class="n">cluster_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_eks_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">clusters</span> <span class="o">=</span> <span class="n">eks_client</span><span class="o">.</span><span class="n">describe_cluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">cluster_name</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to fetch EKS cluster </span><span class="si">{</span><span class="n">cluster_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

                <span class="k">return</span> <span class="p">[</span><span class="n">resource_id</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">_get_connector_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ServiceConnector&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a connector instance that can be used to connect to a resource.</span>

<span class="sd">        This method generates a client-side connector instance that can be used</span>
<span class="sd">        to connect to a resource of the given type. The client-side connector</span>
<span class="sd">        is configured with temporary AWS credentials extracted from the</span>
<span class="sd">        current connector and, depending on resource type, it may also be</span>
<span class="sd">        of a different connector type:</span>

<span class="sd">        - a Kubernetes connector for Kubernetes clusters</span>
<span class="sd">        - a Docker connector for Docker registries</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_type: The type of the resources to connect to.</span>
<span class="sd">            resource_id: The ID of a particular resource to connect to.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An AWS, Kubernetes or Docker connector instance that can be used to</span>
<span class="sd">            connect to the specified resource.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AuthorizationException: If authentication failed.</span>
<span class="sd">            ValueError: If the resource type is not supported.</span>
<span class="sd">            RuntimeError: If the Kubernetes connector is not installed and the</span>
<span class="sd">                resource type is Kubernetes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">connector_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">connector_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">resource_id</span><span class="p">:</span>
            <span class="n">connector_name</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> | </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2"> client)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">connector_name</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> client)&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting connector client for </span><span class="si">{</span><span class="n">connector_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">AWS_RESOURCE_TYPE</span><span class="p">,</span> <span class="n">S3_RESOURCE_TYPE</span><span class="p">]:</span>
            <span class="n">auth_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SECRET_KEY</span><span class="p">,</span>
                <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="o">==</span> <span class="n">resource_type</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">==</span> <span class="n">resource_id</span>
                <span class="p">):</span>
                    <span class="c1"># If the requested type and resource ID are the same as</span>
                    <span class="c1"># those configured, we can return the current connector</span>
                    <span class="c1"># instance because it&#39;s fully formed and ready to use</span>
                    <span class="c1"># to connect to the specified resource</span>
                    <span class="k">return</span> <span class="bp">self</span>

                <span class="c1"># The secret key and STS token authentication methods do not</span>
                <span class="c1"># involve generating temporary credentials, so we can just</span>
                <span class="c1"># use the current connector configuration</span>
                <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
                <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expires_at</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Get an authenticated boto3 session</span>
                <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
                    <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                    <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">)</span>
                <span class="n">credentials</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_credentials</span><span class="p">()</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span> <span class="o">==</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">IMPLICIT</span>
                    <span class="ow">and</span> <span class="n">credentials</span><span class="o">.</span><span class="n">token</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="p">):</span>
                    <span class="c1"># The implicit authentication method may involve picking up</span>
                    <span class="c1"># long-lived credentials from the environment</span>
                    <span class="n">auth_method</span> <span class="o">=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">SECRET_KEY</span>
                    <span class="n">config</span> <span class="o">=</span> <span class="n">AWSSecretKeyConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="n">credentials</span><span class="o">.</span><span class="n">token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

                    <span class="c1"># Use the temporary credentials extracted from the boto3</span>
                    <span class="c1"># session</span>
                    <span class="n">auth_method</span> <span class="o">=</span> <span class="n">AWSAuthenticationMethods</span><span class="o">.</span><span class="n">STS_TOKEN</span>
                    <span class="n">config</span> <span class="o">=</span> <span class="n">STSTokenConfig</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                        <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
                        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
                        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
                        <span class="n">aws_session_token</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">token</span><span class="p">,</span>
                    <span class="p">)</span>

            <span class="c1"># Create a client-side AWS connector instance that is fully formed</span>
            <span class="c1"># and ready to use to connect to the specified resource (i.e. has</span>
            <span class="c1"># all the necessary configuration and credentials, a resource type</span>
            <span class="c1"># and a resource ID where applicable)</span>
            <span class="k">return</span> <span class="n">AWSServiceConnector</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">connector_name</span><span class="p">,</span>
                <span class="n">auth_method</span><span class="o">=</span><span class="n">auth_method</span><span class="p">,</span>
                <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
                <span class="n">expires_at</span><span class="o">=</span><span class="n">expires_at</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="c1"># Get an authenticated boto3 session</span>
            <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
                <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">)</span>

            <span class="n">registry_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_ecr_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>

            <span class="n">ecr_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
                <span class="s2">&quot;ecr&quot;</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ecr_client</span><span class="p">,</span> <span class="n">BaseClient</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">registry_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">auth_token</span> <span class="o">=</span> <span class="n">ecr_client</span><span class="o">.</span><span class="n">get_authorization_token</span><span class="p">(</span>
                    <span class="n">registryIds</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">registry_id</span><span class="p">,</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to get authorization token from ECR: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="n">token</span> <span class="o">=</span> <span class="n">auth_token</span><span class="p">[</span><span class="s2">&quot;authorizationData&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;authorizationToken&quot;</span><span class="p">]</span>
            <span class="n">endpoint</span> <span class="o">=</span> <span class="n">auth_token</span><span class="p">[</span><span class="s2">&quot;authorizationData&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;proxyEndpoint&quot;</span><span class="p">]</span>
            <span class="c1"># The token is base64 encoded and has the format</span>
            <span class="c1"># &quot;username:password&quot;</span>
            <span class="n">username</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Create a client-side Docker connector instance with the temporary</span>
            <span class="c1"># Docker credentials</span>
            <span class="k">return</span> <span class="n">DockerServiceConnector</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">connector_name</span><span class="p">,</span>
                <span class="n">auth_method</span><span class="o">=</span><span class="n">DockerAuthenticationMethods</span><span class="o">.</span><span class="n">PASSWORD</span><span class="p">,</span>
                <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="n">DockerConfiguration</span><span class="p">(</span>
                    <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
                    <span class="n">password</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
                    <span class="n">registry</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">expires_at</span><span class="o">=</span><span class="n">expires_at</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_type</span> <span class="o">==</span> <span class="n">KUBERNETES_CLUSTER_RESOURCE_TYPE</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="c1"># Get an authenticated boto3 session</span>
            <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
                <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">)</span>

            <span class="n">cluster_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_eks_resource_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>

            <span class="c1"># Get a boto3 EKS client</span>
            <span class="n">eks_client</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
                <span class="s2">&quot;eks&quot;</span><span class="p">,</span>
                <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eks_client</span><span class="p">,</span> <span class="n">BaseClient</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">cluster</span> <span class="o">=</span> <span class="n">eks_client</span><span class="o">.</span><span class="n">describe_cluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">cluster_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to get EKS cluster </span><span class="si">{</span><span class="n">cluster_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">user_token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_eks_bearer_token</span><span class="p">(</span>
                    <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
                    <span class="n">cluster_id</span><span class="o">=</span><span class="n">cluster_name</span><span class="p">,</span>
                    <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="n">ClientError</span><span class="p">,</span> <span class="n">BotoCoreError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to get EKS bearer token: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="c1"># Kubernetes authentication tokens issued by AWS EKS have a fixed</span>
            <span class="c1"># expiration time of 15 minutes</span>
            <span class="c1"># source: https://aws.github.io/aws-eks-best-practices/security/docs/iam/#controlling-access-to-eks-clusters</span>
            <span class="n">expires_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
                <span class="n">tz</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
            <span class="p">)</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">EKS_KUBE_API_TOKEN_EXPIRATION</span><span class="p">)</span>

            <span class="c1"># get cluster details</span>
            <span class="n">cluster_arn</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;cluster&quot;</span><span class="p">][</span><span class="s2">&quot;arn&quot;</span><span class="p">]</span>
            <span class="n">cluster_ca_cert</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;cluster&quot;</span><span class="p">][</span><span class="s2">&quot;certificateAuthority&quot;</span><span class="p">][</span>
                <span class="s2">&quot;data&quot;</span>
            <span class="p">]</span>
            <span class="n">cluster_server</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="s2">&quot;cluster&quot;</span><span class="p">][</span><span class="s2">&quot;endpoint&quot;</span><span class="p">]</span>

            <span class="c1"># Create a client-side Kubernetes connector instance with the</span>
            <span class="c1"># temporary Kubernetes credentials</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Import libraries only when needed</span>
                <span class="kn">from</span> <span class="nn">zenml.integrations.kubernetes.service_connectors.kubernetes_service_connector</span> <span class="kn">import</span> <span class="p">(</span>
                    <span class="n">KubernetesAuthenticationMethods</span><span class="p">,</span>
                    <span class="n">KubernetesServiceConnector</span><span class="p">,</span>
                    <span class="n">KubernetesTokenConfig</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The Kubernetes Service Connector functionality could not &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;be used due to missing dependencies: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">KubernetesServiceConnector</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">connector_name</span><span class="p">,</span>
                <span class="n">auth_method</span><span class="o">=</span><span class="n">KubernetesAuthenticationMethods</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">,</span>
                <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="n">KubernetesTokenConfig</span><span class="p">(</span>
                    <span class="n">cluster_name</span><span class="o">=</span><span class="n">cluster_arn</span><span class="p">,</span>
                    <span class="n">certificate_authority</span><span class="o">=</span><span class="n">cluster_ca_cert</span><span class="p">,</span>
                    <span class="n">server</span><span class="o">=</span><span class="n">cluster_server</span><span class="p">,</span>
                    <span class="n">token</span><span class="o">=</span><span class="n">user_token</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">expires_at</span><span class="o">=</span><span class="n">expires_at</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported resource type: </span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.account_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">account_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Get the AWS account ID.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The AWS account ID.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>AuthorizationException</code></td>
        <td><p>If the AWS account ID could not be
determined.</p></td>
      </tr>
  </tbody>
</table>    </div>

  </div>









  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.get_boto3_session" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_boto3_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_method</span><span class="p">,</span> <span class="n">resource_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get a boto3 session for the specified resource.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>auth_method</code></td>
        <td><code>str</code></td>
        <td><p>The authentication method to use.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>resource_type</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The resource type to get a boto3 session for.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>resource_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The resource ID to get a boto3 session for.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[boto3.Session, Optional[datetime.datetime]]</code></td>
      <td><p>A boto3 session for the specified resource and its expiration
timestamp, if applicable.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_boto3_session</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">auth_method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a boto3 session for the specified resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        auth_method: The authentication method to use.</span>
<span class="sd">        resource_type: The resource type to get a boto3 session for.</span>
<span class="sd">        resource_id: The resource ID to get a boto3 session for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A boto3 session for the specified resource and its expiration</span>
<span class="sd">        timestamp, if applicable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># We maintain a cache of all sessions to avoid re-authenticating</span>
    <span class="c1"># multiple times for the same resource</span>
    <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">auth_method</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_cache</span><span class="p">:</span>
        <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">expires_at</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1"># Refresh expired sessions</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">expires_at</span> <span class="o">=</span> <span class="n">expires_at</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="c1"># check if the token expires in the near future</span>
        <span class="k">if</span> <span class="n">expires_at</span> <span class="o">&gt;</span> <span class="n">now</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
            <span class="n">minutes</span><span class="o">=</span><span class="n">BOTO3_SESSION_EXPIRATION_BUFFER</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Creating boto3 session for auth method &#39;</span><span class="si">{</span><span class="n">auth_method</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;resource type &#39;</span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">&#39; and resource ID &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2">&#39;...&quot;</span>
    <span class="p">)</span>
    <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_authenticate</span><span class="p">(</span>
        <span class="n">auth_method</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_session_cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">session</span><span class="p">,</span> <span class="n">expires_at</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.get_ecr_client" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_ecr_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Get an ECR client.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the service connector is not able to instantiate an
ECR client.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>botocore.client.BaseClient</code></td>
      <td><p>An ECR client.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_ecr_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an ECR client.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the service connector is not able to instantiate an</span>
<span class="sd">            ECR client.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An ECR client.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span>
        <span class="n">AWS_RESOURCE_TYPE</span><span class="p">,</span>
        <span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">,</span>
    <span class="p">}:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to instantiate ECR client for a connector that is &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;configured to provide access to a &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
            <span class="s2">&quot;resource type.&quot;</span>
        <span class="p">)</span>

    <span class="n">session</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_boto3_session</span><span class="p">(</span>
        <span class="n">auth_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth_method</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">DOCKER_REGISTRY_RESOURCE_TYPE</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span>
        <span class="s2">&quot;ecr&quot;</span><span class="p">,</span>
        <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
        <span class="n">endpoint_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">endpoint_url</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSServiceConnector.model_post_init" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_post_init</span><span class="p">(</span><span class="o">/</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that's what pydantic-core passes when calling it.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>self</code></td>
        <td><code>BaseModel</code></td>
        <td><p>The BaseModel instance.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>context</code></td>
        <td><code>Any</code></td>
        <td><p>The context.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">init_private_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function is meant to behave like a BaseModel method to initialise private attributes.</span>

<span class="sd">    It takes context as an argument since that&#39;s what pydantic-core passes when calling it.</span>

<span class="sd">    Args:</span>
<span class="sd">        self: The BaseModel instance.</span>
<span class="sd">        context: The context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__pydantic_private__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pydantic_private</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">private_attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__private_attributes__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">private_attr</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">PydanticUndefined</span><span class="p">:</span>
                <span class="n">pydantic_private</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span>
        <span class="n">object_setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__pydantic_private__&#39;</span><span class="p">,</span> <span class="n">pydantic_private</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy" class="doc doc-heading">
        <code>
AWSSessionPolicy            (<a class="autorefs autorefs-internal" title="zenml.service_connectors.service_connector.AuthenticationConfig" href="../../core_code_docs/core-service_connectors/#zenml.service_connectors.service_connector.AuthenticationConfig">AuthenticationConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS session IAM policy configuration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSSessionPolicy</span><span class="p">(</span><span class="n">AuthenticationConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS session IAM policy configuration.&quot;&quot;&quot;</span>

    <span class="n">policy_arns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ARNs of the IAM managed policies that you want to use as a &quot;</span>
        <span class="s2">&quot;managed session policy. The policies must exist in the same account &quot;</span>
        <span class="s2">&quot;as the IAM user that is requesting temporary credentials.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">policy</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;An IAM policy in JSON format that you want to use as an inline &quot;</span>
        <span class="s2">&quot;session policy&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.FederationTokenAuthenticationConfig" class="doc doc-heading">
        <code>
FederationTokenAuthenticationConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig">AWSSecretKeyConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy">AWSSessionPolicy</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS federation token authentication config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FederationTokenAuthenticationConfig</span><span class="p">(</span>
    <span class="n">AWSSecretKeyConfig</span><span class="p">,</span> <span class="n">AWSSessionPolicy</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS federation token authentication config.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.IAMRoleAuthenticationConfig" class="doc doc-heading">
        <code>
IAMRoleAuthenticationConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig">AWSSecretKeyConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSessionPolicy">AWSSessionPolicy</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS IAM authentication config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">IAMRoleAuthenticationConfig</span><span class="p">(</span><span class="n">AWSSecretKeyConfig</span><span class="p">,</span> <span class="n">AWSSessionPolicy</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS IAM authentication config.&quot;&quot;&quot;</span>

    <span class="n">role_arn</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS IAM Role ARN&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.STSToken" class="doc doc-heading">
        <code>
STSToken            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKey">AWSSecretKey</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS STS token.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">STSToken</span><span class="p">(</span><span class="n">AWSSecretKey</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS STS token.&quot;&quot;&quot;</span>

    <span class="n">aws_session_token</span><span class="p">:</span> <span class="n">PlainSerializedSecretStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;AWS Session Token&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.STSTokenConfig" class="doc doc-heading">
        <code>
STSTokenConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSBaseConfig">AWSBaseConfig</a>, <a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.STSToken" href="#zenml.integrations.aws.service_connectors.aws_service_connector.STSToken">STSToken</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS STS token authentication configuration.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">STSTokenConfig</span><span class="p">(</span><span class="n">AWSBaseConfig</span><span class="p">,</span> <span class="n">STSToken</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS STS token authentication configuration.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.service_connectors.aws_service_connector.SessionTokenAuthenticationConfig" class="doc doc-heading">
        <code>
SessionTokenAuthenticationConfig            (<a class="autorefs autorefs-internal" title="zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig" href="#zenml.integrations.aws.service_connectors.aws_service_connector.AWSSecretKeyConfig">AWSSecretKeyConfig</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>AWS session token authentication config.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/service_connectors/aws_service_connector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SessionTokenAuthenticationConfig</span><span class="p">(</span><span class="n">AWSSecretKeyConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AWS session token authentication config.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.integrations.aws.step_operators" class="doc doc-heading">
        <code>step_operators</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialization of the Sagemaker Step Operator.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.step_operators.sagemaker_step_operator" class="doc doc-heading">
        <code>sagemaker_step_operator</code>



</h4>

    <div class="doc doc-contents ">

      <p>Implementation of the Sagemaker Step Operator.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator" class="doc doc-heading">
        <code>
SagemakerStepOperator            (<a class="autorefs autorefs-internal" title="zenml.step_operators.base_step_operator.BaseStepOperator" href="../../core_code_docs/core-step_operators/#zenml.step_operators.base_step_operator.BaseStepOperator">BaseStepOperator</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Step operator to run a step on Sagemaker.</p>
<p>This class defines code that builds an image with the ZenML entrypoint
to run using Sagemaker's Estimator.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/step_operators/sagemaker_step_operator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerStepOperator</span><span class="p">(</span><span class="n">BaseStepOperator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Step operator to run a step on Sagemaker.</span>

<span class="sd">    This class defines code that builds an image with the ZenML entrypoint</span>
<span class="sd">    to run using Sagemaker&#39;s Estimator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SagemakerStepOperatorConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the `SagemakerStepOperatorConfig` config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">SagemakerStepOperatorConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseSettings&quot;</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Settings class for the SageMaker step operator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The settings class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SagemakerStepOperatorSettings</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entrypoint_config_class</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">StepOperatorEntrypointConfiguration</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the entrypoint configuration class for this step operator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The entrypoint configuration class for this step operator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SagemakerEntrypointConfiguration</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StackValidator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates the stack.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A validator that checks that the stack contains a remote container</span>
<span class="sd">            registry and a remote artifact store.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_validate_remote_components</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">stack</span><span class="o">.</span><span class="n">artifact_store</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                    <span class="s2">&quot;The SageMaker step operator runs code remotely and &quot;</span>
                    <span class="s2">&quot;needs to write files into the artifact store, but the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;artifact store `</span><span class="si">{</span><span class="n">stack</span><span class="o">.</span><span class="n">artifact_store</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">` of the &quot;</span>
                    <span class="s2">&quot;active stack is local. Please ensure that your stack &quot;</span>
                    <span class="s2">&quot;contains a remote artifact store when using the SageMaker &quot;</span>
                    <span class="s2">&quot;step operator.&quot;</span>
                <span class="p">)</span>

            <span class="n">container_registry</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>
            <span class="k">assert</span> <span class="n">container_registry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span>
                    <span class="s2">&quot;The SageMaker step operator runs code remotely and &quot;</span>
                    <span class="s2">&quot;needs to push/pull Docker images, but the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;container registry `</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">` of the &quot;</span>
                    <span class="s2">&quot;active stack is local. Please ensure that your stack &quot;</span>
                    <span class="s2">&quot;contains a remote container registry when using the &quot;</span>
                    <span class="s2">&quot;SageMaker step operator.&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">StackValidator</span><span class="p">(</span>
            <span class="n">required_components</span><span class="o">=</span><span class="p">{</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">CONTAINER_REGISTRY</span><span class="p">,</span>
                <span class="n">StackComponentType</span><span class="o">.</span><span class="n">IMAGE_BUILDER</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_validation_function</span><span class="o">=</span><span class="n">_validate_remote_components</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_docker_builds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentBase&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;BuildConfiguration&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the Docker builds required for the component.</span>

<span class="sd">        Args:</span>
<span class="sd">            deployment: The pipeline deployment for which to get the builds.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The required Docker builds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">builds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">step_operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="n">build</span> <span class="o">=</span> <span class="n">BuildConfiguration</span><span class="p">(</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">SAGEMAKER_DOCKER_IMAGE_KEY</span><span class="p">,</span>
                    <span class="n">settings</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docker_settings</span><span class="p">,</span>
                    <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                    <span class="n">entrypoint</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;$</span><span class="si">{</span><span class="n">_ENTRYPOINT_ENV_VARIABLE</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">builds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">build</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">builds</span>

    <span class="k">def</span> <span class="nf">launch</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="s2">&quot;StepRunInfo&quot;</span><span class="p">,</span>
        <span class="n">entrypoint_command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Launches a step on SageMaker.</span>

<span class="sd">        Args:</span>
<span class="sd">            info: Information about the step run.</span>
<span class="sd">            entrypoint_command: Command that executes the step.</span>
<span class="sd">            environment: Environment variables to set in the step operator</span>
<span class="sd">                environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the connector returns an object that is not a</span>
<span class="sd">                `boto3.Session`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">resource_settings</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Specifying custom step resources is not supported for &quot;</span>
                <span class="s2">&quot;the SageMaker step operator. If you want to run this step &quot;</span>
                <span class="s2">&quot;operator on specific resources, you can do so by configuring &quot;</span>
                <span class="s2">&quot;a different instance type like this: &quot;</span>
                <span class="s2">&quot;`zenml step-operator update </span><span class="si">%s</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;--instance_type=&lt;INSTANCE_TYPE&gt;`&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Sagemaker does not allow environment variables longer than 512</span>
        <span class="c1"># characters to be passed to Estimator steps. If an environment variable</span>
        <span class="c1"># is longer than 512 characters, we split it into multiple environment</span>
        <span class="c1"># variables (chunks) and re-construct it on the other side using the</span>
        <span class="c1"># custom entrypoint configuration.</span>
        <span class="n">split_environment_variables</span><span class="p">(</span>
            <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
            <span class="n">size_limit</span><span class="o">=</span><span class="n">SAGEMAKER_ESTIMATOR_STEP_ENV_VAR_SIZE_LIMIT</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">image_name</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">SAGEMAKER_DOCKER_IMAGE_KEY</span><span class="p">)</span>
        <span class="n">environment</span><span class="p">[</span><span class="n">_ENTRYPOINT_ENV_VARIABLE</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">entrypoint_command</span><span class="p">)</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">SagemakerStepOperatorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">info</span><span class="p">))</span>

        <span class="c1"># Get and default fill SageMaker estimator arguments for full ZenML support</span>
        <span class="n">estimator_args</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">estimator_args</span>

        <span class="c1"># Get authenticated session</span>
        <span class="c1"># Option 1: Service connector</span>
        <span class="n">boto_session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span>
        <span class="k">if</span> <span class="n">connector</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">():</span>
            <span class="n">boto_session</span> <span class="o">=</span> <span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">boto_session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Expected to receive a `boto3.Session` object from the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;linked connector, but got type `</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">boto_session</span><span class="p">)</span><span class="si">}</span><span class="s2">`.&quot;</span>
                <span class="p">)</span>
        <span class="c1"># Option 2: Implicit configuration</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">boto_session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

        <span class="n">session</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
            <span class="n">boto_session</span><span class="o">=</span><span class="n">boto_session</span><span class="p">,</span> <span class="n">default_bucket</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">bucket</span>
        <span class="p">)</span>

        <span class="n">estimator_args</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">instance_type</span> <span class="ow">or</span> <span class="s2">&quot;ml.m5.large&quot;</span>
        <span class="p">)</span>

        <span class="n">estimator_args</span><span class="p">[</span><span class="s2">&quot;environment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">environment</span>
        <span class="n">estimator_args</span><span class="p">[</span><span class="s2">&quot;instance_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">estimator_args</span><span class="p">[</span><span class="s2">&quot;sagemaker_session&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span>

        <span class="c1"># Create Estimator</span>
        <span class="n">estimator</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">Estimator</span><span class="p">(</span>
            <span class="n">image_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">role</span><span class="p">,</span> <span class="o">**</span><span class="n">estimator_args</span>
        <span class="p">)</span>

        <span class="c1"># SageMaker allows 63 characters at maximum for job name - ZenML uses 60 for safety margin.</span>
        <span class="n">step_name</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">step_run_id</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
        <span class="n">training_job_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[:</span><span class="mi">55</span><span class="p">]</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="n">random_str</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">unique_training_job_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">training_job_name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Sagemaker doesn&#39;t allow any underscores in job/experiment/trial names</span>
        <span class="n">sanitized_training_job_name</span> <span class="o">=</span> <span class="n">unique_training_job_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Construct training input object, if necessary</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">TrainingInput</span><span class="p">(</span>
                <span class="n">s3_data</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">channel</span><span class="p">,</span> <span class="n">s3_uri</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">inputs</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">TrainingInput</span><span class="p">(</span>
                    <span class="n">s3_data</span><span class="o">=</span><span class="n">s3_uri</span>
                <span class="p">)</span>

        <span class="n">experiment_config</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">:</span>
            <span class="n">experiment_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;ExperimentName&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">,</span>
                <span class="s2">&quot;TrialName&quot;</span><span class="p">:</span> <span class="n">sanitized_training_job_name</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="n">info</span><span class="o">.</span><span class="n">force_write_logs</span><span class="p">()</span>
        <span class="n">estimator</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
            <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
            <span class="n">experiment_config</span><span class="o">=</span><span class="n">experiment_config</span><span class="p">,</span>
            <span class="n">job_name</span><span class="o">=</span><span class="n">sanitized_training_job_name</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">SagemakerStepOperatorConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the <code>SagemakerStepOperatorConfig</code> config.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>SagemakerStepOperatorConfig</code></td>
      <td><p>The configuration.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.entrypoint_config_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">entrypoint_config_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">step_operators</span><span class="o">.</span><span class="n">step_operator_entrypoint_configuration</span><span class="o">.</span><span class="n">StepOperatorEntrypointConfiguration</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Returns the entrypoint configuration class for this step operator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[zenml.step_operators.step_operator_entrypoint_configuration.StepOperatorEntrypointConfiguration]</code></td>
      <td><p>The entrypoint configuration class for this step operator.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.settings_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">settings_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Settings class for the SageMaker step operator.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Type[BaseSettings]]</code></td>
      <td><p>The settings class.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zenml</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">stack_validator</span><span class="o">.</span><span class="n">StackValidator</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h6>

    <div class="doc doc-contents ">

      <p>Validates the stack.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.stack.stack_validator.StackValidator]</code></td>
      <td><p>A validator that checks that the stack contains a remote container
registry and a remote artifact store.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.get_docker_builds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_docker_builds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Gets the Docker builds required for the component.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>deployment</code></td>
        <td><code>PipelineDeploymentBase</code></td>
        <td><p>The pipeline deployment for which to get the builds.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[BuildConfiguration]</code></td>
      <td><p>The required Docker builds.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/step_operators/sagemaker_step_operator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_docker_builds</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">deployment</span><span class="p">:</span> <span class="s2">&quot;PipelineDeploymentBase&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;BuildConfiguration&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the Docker builds required for the component.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment: The pipeline deployment for which to get the builds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The required Docker builds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">builds</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">deployment</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">step_operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">build</span> <span class="o">=</span> <span class="n">BuildConfiguration</span><span class="p">(</span>
                <span class="n">key</span><span class="o">=</span><span class="n">SAGEMAKER_DOCKER_IMAGE_KEY</span><span class="p">,</span>
                <span class="n">settings</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docker_settings</span><span class="p">,</span>
                <span class="n">step_name</span><span class="o">=</span><span class="n">step_name</span><span class="p">,</span>
                <span class="n">entrypoint</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;$</span><span class="si">{</span><span class="n">_ENTRYPOINT_ENV_VARIABLE</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">builds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">build</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">builds</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator.SagemakerStepOperator.launch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">launch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">entrypoint_command</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Launches a step on SageMaker.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>info</code></td>
        <td><code>StepRunInfo</code></td>
        <td><p>Information about the step run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>entrypoint_command</code></td>
        <td><code>List[str]</code></td>
        <td><p>Command that executes the step.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>environment</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Environment variables to set in the step operator
environment.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the connector returns an object that is not a
<code>boto3.Session</code>.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/step_operators/sagemaker_step_operator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">launch</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="s2">&quot;StepRunInfo&quot;</span><span class="p">,</span>
    <span class="n">entrypoint_command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Launches a step on SageMaker.</span>

<span class="sd">    Args:</span>
<span class="sd">        info: Information about the step run.</span>
<span class="sd">        entrypoint_command: Command that executes the step.</span>
<span class="sd">        environment: Environment variables to set in the step operator</span>
<span class="sd">            environment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the connector returns an object that is not a</span>
<span class="sd">            `boto3.Session`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">resource_settings</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Specifying custom step resources is not supported for &quot;</span>
            <span class="s2">&quot;the SageMaker step operator. If you want to run this step &quot;</span>
            <span class="s2">&quot;operator on specific resources, you can do so by configuring &quot;</span>
            <span class="s2">&quot;a different instance type like this: &quot;</span>
            <span class="s2">&quot;`zenml step-operator update </span><span class="si">%s</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;--instance_type=&lt;INSTANCE_TYPE&gt;`&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Sagemaker does not allow environment variables longer than 512</span>
    <span class="c1"># characters to be passed to Estimator steps. If an environment variable</span>
    <span class="c1"># is longer than 512 characters, we split it into multiple environment</span>
    <span class="c1"># variables (chunks) and re-construct it on the other side using the</span>
    <span class="c1"># custom entrypoint configuration.</span>
    <span class="n">split_environment_variables</span><span class="p">(</span>
        <span class="n">env</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
        <span class="n">size_limit</span><span class="o">=</span><span class="n">SAGEMAKER_ESTIMATOR_STEP_ENV_VAR_SIZE_LIMIT</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">image_name</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get_image</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">SAGEMAKER_DOCKER_IMAGE_KEY</span><span class="p">)</span>
    <span class="n">environment</span><span class="p">[</span><span class="n">_ENTRYPOINT_ENV_VARIABLE</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">entrypoint_command</span><span class="p">)</span>

    <span class="n">settings</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">SagemakerStepOperatorSettings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">info</span><span class="p">))</span>

    <span class="c1"># Get and default fill SageMaker estimator arguments for full ZenML support</span>
    <span class="n">estimator_args</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">estimator_args</span>

    <span class="c1"># Get authenticated session</span>
    <span class="c1"># Option 1: Service connector</span>
    <span class="n">boto_session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span>
    <span class="k">if</span> <span class="n">connector</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connector</span><span class="p">():</span>
        <span class="n">boto_session</span> <span class="o">=</span> <span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">boto_session</span><span class="p">,</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Expected to receive a `boto3.Session` object from the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;linked connector, but got type `</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">boto_session</span><span class="p">)</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>
    <span class="c1"># Option 2: Implicit configuration</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">boto_session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

    <span class="n">session</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
        <span class="n">boto_session</span><span class="o">=</span><span class="n">boto_session</span><span class="p">,</span> <span class="n">default_bucket</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">bucket</span>
    <span class="p">)</span>

    <span class="n">estimator_args</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
        <span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">instance_type</span> <span class="ow">or</span> <span class="s2">&quot;ml.m5.large&quot;</span>
    <span class="p">)</span>

    <span class="n">estimator_args</span><span class="p">[</span><span class="s2">&quot;environment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">environment</span>
    <span class="n">estimator_args</span><span class="p">[</span><span class="s2">&quot;instance_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">estimator_args</span><span class="p">[</span><span class="s2">&quot;sagemaker_session&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span>

    <span class="c1"># Create Estimator</span>
    <span class="n">estimator</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">Estimator</span><span class="p">(</span>
        <span class="n">image_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">role</span><span class="p">,</span> <span class="o">**</span><span class="n">estimator_args</span>
    <span class="p">)</span>

    <span class="c1"># SageMaker allows 63 characters at maximum for job name - ZenML uses 60 for safety margin.</span>
    <span class="n">step_name</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">step_run_id</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
    <span class="n">training_job_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">step_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[:</span><span class="mi">55</span><span class="p">]</span>
    <span class="n">suffix</span> <span class="o">=</span> <span class="n">random_str</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">unique_training_job_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">training_job_name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Sagemaker doesn&#39;t allow any underscores in job/experiment/trial names</span>
    <span class="n">sanitized_training_job_name</span> <span class="o">=</span> <span class="n">unique_training_job_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
        <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Construct training input object, if necessary</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">TrainingInput</span><span class="p">(</span>
            <span class="n">s3_data</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">channel</span><span class="p">,</span> <span class="n">s3_uri</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">input_data_s3_uri</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">inputs</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span> <span class="o">=</span> <span class="n">sagemaker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">TrainingInput</span><span class="p">(</span>
                <span class="n">s3_data</span><span class="o">=</span><span class="n">s3_uri</span>
            <span class="p">)</span>

    <span class="n">experiment_config</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">:</span>
        <span class="n">experiment_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;ExperimentName&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">,</span>
            <span class="s2">&quot;TrialName&quot;</span><span class="p">:</span> <span class="n">sanitized_training_job_name</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="n">info</span><span class="o">.</span><span class="n">force_write_logs</span><span class="p">()</span>
    <span class="n">estimator</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
        <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
        <span class="n">experiment_config</span><span class="o">=</span><span class="n">experiment_config</span><span class="p">,</span>
        <span class="n">job_name</span><span class="o">=</span><span class="n">sanitized_training_job_name</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config" class="doc doc-heading">
        <code>sagemaker_step_operator_entrypoint_config</code>



</h4>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for ZenML Sagemaker step operator.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config.SagemakerEntrypointConfiguration" class="doc doc-heading">
        <code>
SagemakerEntrypointConfiguration            (<a class="autorefs autorefs-internal" title="zenml.step_operators.step_operator_entrypoint_configuration.StepOperatorEntrypointConfiguration" href="../../core_code_docs/core-step_operators/#zenml.step_operators.step_operator_entrypoint_configuration.StepOperatorEntrypointConfiguration">StepOperatorEntrypointConfiguration</a>)
        </code>



</h5>

    <div class="doc doc-contents ">

      <p>Entrypoint configuration for ZenML Sagemaker step operator.</p>
<p>The only purpose of this entrypoint configuration is to reconstruct the
environment variables that exceed the maximum length of 512 characters
allowed for Sagemaker Estimator steps from their individual components.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/step_operators/sagemaker_step_operator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SagemakerEntrypointConfiguration</span><span class="p">(</span><span class="n">StepOperatorEntrypointConfiguration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Entrypoint configuration for ZenML Sagemaker step operator.</span>

<span class="sd">    The only purpose of this entrypoint configuration is to reconstruct the</span>
<span class="sd">    environment variables that exceed the maximum length of 512 characters</span>
<span class="sd">    allowed for Sagemaker Estimator steps from their individual components.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the step.&quot;&quot;&quot;</span>
        <span class="c1"># Reconstruct the environment variables that exceed the maximum length</span>
        <span class="c1"># of 512 characters from their individual chunks</span>
        <span class="n">reconstruct_environment_variables</span><span class="p">()</span>

        <span class="c1"># Run the step</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="zenml.integrations.aws.step_operators.sagemaker_step_operator_entrypoint_config.SagemakerEntrypointConfiguration.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h6>

    <div class="doc doc-contents ">

      <p>Runs the step.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/integrations/aws/step_operators/sagemaker_step_operator_entrypoint_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the step.&quot;&quot;&quot;</span>
    <span class="c1"># Reconstruct the environment variables that exceed the maximum length</span>
    <span class="c1"># of 512 characters from their individual chunks</span>
    <span class="n">reconstruct_environment_variables</span><span class="p">()</span>

    <span class="c1"># Run the step</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../integrations-argilla/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Argilla" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Argilla
            </div>
          </div>
        </a>
      
      
        
        <a href="../integrations-azure/" class="md-footer__link md-footer__link--next" aria-label="Next: Azure" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Azure
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 ZenML GmbH  <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>