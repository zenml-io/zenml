import{j as e}from"./@radix-sxciy0xP.js";import{C as j}from"./CodeSnippet-BP7hSf0D.js";import{C as $}from"./collapsible-chevron-DnUOzvs5.js";import{b8 as V,e as S,bc as g,ai as L,C as T,o as O,q as P,t as k,aK as z,bd as W,aL as f,aN as b,aP as H,a0 as Q,b6 as R}from"./index-Duh0NHGE.js";import{a as y}from"./@monaco-editor-Di1Jq_O0.js";import{b as D}from"./@tanstack-BjpQvXOk.js";import{a as X}from"./@react-router-B8Rvl3f4.js";import"./json-faker-TB_1tyv3.js";import{J as q}from"./@json-schema-faker-ZU6lJtJH.js";import{N as F,K as N,a as v,b as K,V as M}from"./KeyValue-DZ13WVJV.js";import{P as U}from"./pipeline-link-CtXAhVuF.js";import"./@elkjs-CmhuJAjY.js";import"./chevron-down-DPrYU2vK.js";import"./@reactflow-HpiAkQBO.js";import"./@zod-3snSrKBm.js";import"./@featureos-widget-OqfzE-b2.js";import"./eye-C2BdTq-f.js";import"./CollapsibleCard-VpXAuplI.js";function C({Component:s}){const{deploymentId:t}=X(),a=D({...V.detail(t),throwOnError:!0});if(a.isPending)return e.jsx(S,{className:"h-[200px] w-full"});if(a.isError)return null;const r=a.data;return e.jsx(s,{deployment:r})}function w(s){return"*".repeat(Math.min(s.length,10))}function J(s,t){if(!t)return s;const a=w(t);return s.replace(a,t)}function Z(s,t,a){const r=[];a&&r.push(`-H "Authorization: Bearer ${w(a)}"`),r.push('-H "Content-Type: application/json"');const n=r.join(` \\
  `);if(t){const o=g(JSON.stringify(t,null,2).split(`
`).join(`
    `));return`curl -X POST ${s}/invoke \\
  ${n} \\
  -d '{
    "parameters": ${o}
  }'`}return`curl -X POST ${s}/invoke \\
  ${n}`}function G(s,t){if(!t||typeof t!="object"||Array.isArray(t))return`zenml deployment invoke ${g(s)}`;const a=Object.entries(t).map(([r,n])=>{const o=typeof n=="object"&&n!==null,l=JSON.stringify(n),i=o?`'${g(l)}'`:g(l);return`--${r}=${i}`}).join(" ");return`zenml deployment invoke ${g(s)} ${a}`}function Y({deploymentId:s,defaultBody:t}){const a=`from zenml.deployers.utils import invoke_deployment

`;let r="";if(t&&typeof t=="object"&&!Array.isArray(t)){const n=Object.entries(t).map(([o,l])=>{const i=JSON.stringify(l);return`    ${o}=${i}`}).join(`,
`);n&&(r=`,
${n}`)}return`${a}response = invoke_deployment(
    deployment_name_or_id="${s}"${r}
)`}function B(s,t,a){const r=[];a&&r.push(`    "Authorization": "Bearer ${w(a)}"`),r.push('    "Content-Type": "application/json"');const n=r.join(`,
`);if(t){const o=JSON.stringify(t,null,2).split(`
`).map((l,i)=>i===0?l:`    ${l}`).join(`
`);return`const response = await fetch("${s}/invoke", {
  method: "POST",
  headers: {
${n}
  },
  body: JSON.stringify({
    parameters: ${o}
  })
});`}return`const response = await fetch("${s}/invoke", {
  method: "POST",
  headers: {
${n}
  }
});`}function ee(){return e.jsx(C,{Component:te})}function te({deployment:s}){var m,h,E,A,I,_;const[t,a]=y.useState(!0),[r,n]=y.useState("cli"),o=(h=(m=s.resources)==null?void 0:m.snapshot)==null?void 0:h.id,l=D({...L.detail(o),enabled:!!o});if(!o)return null;if(l.isPending)return e.jsx(S,{className:"h-[200px] w-full"});if(l.isError)return null;const u=(A=(E=l.data.metadata)==null?void 0:E.pipeline_spec)==null?void 0:A.input_schema,c=u?q.generate(u):{},p=(I=s.body)==null?void 0:I.url,d=((_=s.metadata)==null?void 0:_.auth_key)??void 0;return e.jsxs(T,{open:t,onOpenChange:a,children:[e.jsx(O,{className:"flex items-center gap-[10px]",children:e.jsxs(P,{className:"flex w-full gap-2",children:[e.jsx($,{open:t}),"Endpoint"]})}),e.jsx(k,{className:"space-y-5 border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsxs(z,{value:r,onValueChange:n,children:[e.jsxs(W,{children:[e.jsx(f,{className:"flex items-center gap-2 truncate text-text-md",value:"cli",children:e.jsx("span",{children:"CLI"})}),e.jsx(f,{className:"flex items-center gap-2 truncate text-text-md",value:"python",children:e.jsx("span",{children:"Python"})}),!!p&&e.jsx(f,{className:"flex items-center gap-2 truncate text-text-md",value:"curl",children:e.jsx("span",{children:"cURL"})}),!!p&&e.jsx(f,{className:"flex items-center gap-2 truncate text-text-md",value:"ts",children:e.jsx("span",{children:"Typescript"})})]}),e.jsx(b,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"cli",children:e.jsx(j,{fullWidth:!0,highlightCode:!0,language:"bash",wrap:!0,code:G(s.name,c)})}),e.jsx(b,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"python",children:e.jsx(j,{fullWidth:!0,highlightCode:!0,language:"python",wrap:!0,code:Y({deploymentId:s.id,defaultBody:c})})}),!!p&&e.jsx(b,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"curl",children:(()=>{const x=Z(p,c,d);return e.jsx(j,{fullWidth:!0,highlightCode:!0,wrap:!0,language:"bash",copyCode:J(x,d),code:x})})()}),!!p&&e.jsx(b,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"ts",children:(()=>{const x=B(p,c,d);return e.jsx(j,{fullWidth:!0,wrap:!0,highlightCode:!0,language:"ts",copyCode:J(x,d),code:x})})()})]})})]})}function se(){return e.jsx(C,{Component:ne})}function ne({deployment:s}){var n,o,l;const t=(o=(n=s.resources)==null?void 0:n.deployer)==null?void 0:o.id,a=D({...H.componentDetail(t),enabled:!!t});if(!t)return null;if(a.isPending)return e.jsx(S,{className:"h-[200px] w-full"});if(a.isError)return null;const r=a.data;return e.jsx(F,{isInitialOpen:!0,title:"Deployer Configuration",data:(l=r.metadata)==null?void 0:l.configuration})}function re(){return e.jsx(C,{Component:ae})}function ae({deployment:s}){var c,p,d,m,h;const[t,a]=y.useState(!0),r=s.id,n=(c=s.resources)==null?void 0:c.snapshot,o=n==null?void 0:n.id,l=n==null?void 0:n.name,i=(d=(p=s.resources)==null?void 0:p.pipeline)==null?void 0:d.id,u=(h=(m=s.resources)==null?void 0:m.pipeline)==null?void 0:h.name;return e.jsxs(T,{open:t,onOpenChange:a,children:[e.jsx(O,{className:"flex items-center gap-[10px]",children:e.jsxs(P,{className:"flex w-full gap-2",children:[e.jsx($,{open:t}),"Details"]})}),e.jsx(k,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-x-[10px] gap-y-2 md:grid-cols-3 md:gap-y-4",children:[e.jsx(N,{label:"Id",value:e.jsxs("div",{className:"group/copybutton flex items-center gap-0.5",children:[r,e.jsx(Q,{copyText:r})]})}),e.jsx(N,{label:"Snapshot",value:o&&l?e.jsx(R,{snapshotId:o,snapshotName:l}):e.jsx(v,{})}),e.jsx(K,{className:"h-auto",children:"Pipeline"}),e.jsx(M,{className:"h-auto",children:i&&u?e.jsx(U,{pipelineId:i,pipelineName:u}):e.jsx(v,{})})]})})]})}function oe(){return e.jsx(C,{Component:le})}function le({deployment:s}){var n;const[t,a]=y.useState(!0),r=(n=s.body)==null?void 0:n.url;return e.jsxs(T,{open:t,onOpenChange:a,children:[e.jsx(O,{className:"flex items-center gap-[10px]",children:e.jsxs(P,{className:"flex w-full gap-2",children:[e.jsx($,{open:t}),"Endpoint"]})}),e.jsx(k,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsx("dl",{className:"grid grid-cols-1 gap-x-[10px] gap-y-2 md:grid-cols-3 md:gap-y-4",children:e.jsx(N,{label:"Endpoint",value:r?e.jsxs("div",{className:"group/copybutton flex items-center gap-0.5",children:[e.jsx("a",{className:"link",href:r,target:"_blank",rel:"noopener noreferrer",children:r}),e.jsx(Q,{copyText:r})]}):e.jsx(v,{})})})})]})}function Te(){return e.jsxs("div",{className:"grid grid-cols-1 gap-5 p-5 lg:grid-cols-2 lg:px-[80px]",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx(oe,{}),e.jsx(re,{})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(se,{}),e.jsx(ee,{})]})]})}export{Te as default};
