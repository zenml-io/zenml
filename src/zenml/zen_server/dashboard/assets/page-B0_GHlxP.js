import{j as e}from"./@radix-sxciy0xP.js";import{C as _}from"./CodeSnippet-BP7hSf0D.js";import{C as u}from"./collapsible-chevron-DnUOzvs5.js";import{ai as O,e as d,C as x,o as h,q as j,t as f,a0 as T,r as q,T as L,d as R}from"./index-Duh0NHGE.js";import{a as b}from"./@monaco-editor-Di1Jq_O0.js";import{b as m}from"./@tanstack-BjpQvXOk.js";import{a as E,L as z}from"./@react-router-B8Rvl3f4.js";import{D as B}from"./deployment-status-tag--oYSgHCy.js";import{K as p,a as c}from"./KeyValue-DZ13WVJV.js";import{P as F}from"./pipeline-link-CtXAhVuF.js";import{R as K,C as W}from"./ComponentCollapsible-Dtc6K_q5.js";import{s as A}from"./index-BT4VYFB7.js";import"./@elkjs-CmhuJAjY.js";import"./chevron-down-DPrYU2vK.js";import"./@reactflow-HpiAkQBO.js";import"./@zod-3snSrKBm.js";import"./@featureos-widget-OqfzE-b2.js";import"./eye-C2BdTq-f.js";import"./CollapsibleCard-VpXAuplI.js";import"./ComponentBadge-DFdPRD6s.js";import"./ComponentIcon-DGLUMxEG.js";import"./bar-chart-square-check-CVLivjI6.js";import"./layout-BtXy9gkl.js";import"./transform-CoT5Lusb.js";import"./stack-detail-query-ZtZga-eQ.js";function Q({Component:s}){const{snapshotId:r}=E(),a=m({...O.detail(r),throwOnError:!0});if(a.isPending)return e.jsx(d,{className:"h-[200px] w-full"});if(a.isError)return null;const o=a.data;return e.jsx(s,{snapshot:o})}function H(){return e.jsx(Q,{Component:V})}function V({snapshot:s}){var t;const[r,a]=b.useState(!0);if(!((t=s.body)==null?void 0:t.runnable))return null;const n=`from zenml.client import Client

Client().trigger_pipeline(snapshot_name_or_id="${s.id}")`;return e.jsxs(x,{open:r,onOpenChange:a,children:[e.jsx(h,{className:"flex items-center gap-[10px]",children:e.jsxs(j,{className:"flex w-full gap-2",children:[e.jsx(u,{open:r}),e.jsx("span",{children:"Code"})]})}),e.jsxs(f,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:[e.jsx("p",{className:"mb-2",children:"Run the snapshot"}),e.jsx(_,{fullWidth:!0,highlightCode:!0,wrap:!0,code:n})]})]})}function $(){return e.jsx(Q,{Component:G})}function G({snapshot:s}){var v,S,k,w,I,D,P;const[r,a]=b.useState(!0),o=s.id,i=(v=s.resources)==null?void 0:v.pipeline.name,n=(S=s.resources)==null?void 0:S.pipeline.id,t=(k=s.resources)==null?void 0:k.code_reference,g=(w=t==null?void 0:t.body)==null?void 0:w.code_repository.id,C=(I=t==null?void 0:t.body)==null?void 0:I.commit,l=(D=s.resources)==null?void 0:D.deployment,y=l==null?void 0:l.id,N=(P=l==null?void 0:l.body)==null?void 0:P.status;return e.jsxs(x,{open:r,onOpenChange:a,children:[e.jsx(h,{className:"flex items-center gap-[10px]",children:e.jsxs(j,{className:"flex w-full gap-2",children:[e.jsx(u,{open:r}),"Details"]})}),e.jsx(f,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-x-[10px] gap-y-2 md:grid-cols-3 md:gap-y-4",children:[e.jsx(p,{label:"Id",value:e.jsxs("div",{className:"group/copybutton flex items-center gap-0.5",children:[o,e.jsx(T,{copyText:o})]})}),e.jsx(p,{label:"Pipeline",value:i&&n?e.jsx(F,{pipelineId:n,pipelineName:i}):e.jsx(c,{})}),e.jsx(p,{label:"Deployment",value:y&&N?e.jsx(z,{to:q.projects.deployments.detail.overview(y),children:e.jsx(B,{size:"sm",status:N})}):e.jsx(c,{})}),e.jsx(p,{label:"Repository/Commit",value:g&&C?e.jsx(K,{repositoryId:g,commit:C}):e.jsx(c,{})})]})})]})}function J({stack:s}){var n;const[r,a]=b.useState(!0),o=s.name,i=Object.values(((n=s.metadata)==null?void 0:n.components)??{}).flat();return e.jsxs(x,{open:r,onOpenChange:a,children:[e.jsxs(h,{className:"flex items-center justify-between",children:[e.jsxs(j,{className:"flex w-full gap-2",children:[e.jsx(u,{open:r}),"Stack"]}),e.jsx("div",{children:e.jsxs(L,{className:"flex w-fit items-center gap-1 whitespace-nowrap text-turquoise-600",color:"turquoise",emphasis:"subtle",rounded:!1,children:[e.jsx(R,{className:"h-4 w-4 fill-current"}),o]})})]}),e.jsx(f,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsx("ul",{className:"space-y-5",children:i.map(t=>e.jsx("li",{className:"w-full",children:e.jsx(W,{component:t,objectConfig:{}})},t.id))})})]})}function M(){var i,n,t;const{snapshotId:s}=E(),r=m({...O.detail(s)}),a=(t=(n=(i=r.data)==null?void 0:i.resources)==null?void 0:n.stack)==null?void 0:t.id,o=m({...A.stackDetail(a??""),enabled:!!a});return r.isPending?e.jsx(d,{className:"h-[300px] w-full"}):r.isError?e.jsx("div",{children:"Failed to load snapshot."}):a?o.isPending?e.jsx(d,{className:"h-[300px] w-full"}):o.isError?e.jsx("div",{children:"Failed to load stack."}):e.jsx(J,{stack:o.data}):e.jsx("div",{children:"Stack not available for this snapshot."})}function ye(){return e.jsxs("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx($,{}),e.jsx(H,{})]}),e.jsx("div",{children:e.jsx(M,{})})]})}export{ye as default};
