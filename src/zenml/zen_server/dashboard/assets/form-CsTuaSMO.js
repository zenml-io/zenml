import{z as c,a as d,b as O,C as x}from"./@zod-3snSrKBm.js";import{j as t}from"./@radix-sxciy0xP.js";import{S as R}from"./plus-E8wmxLMS.js";import{S as $}from"./trash-DsZfFPdX.js";import{bf as y,aD as v,aG as z,X as E,Y as I,Z as A,ar as J,$ as V,B as T,bl as k,ak as q,al as B,am as D,an as P,ao as Z,ap as _,I as F,bT as H}from"./index-Duh0NHGE.js";function Y(e){return e.type==="string"}function G(e){return e.type==="string"&&e.enum!==void 0}function K(e){return e.type==="string"&&!!e.sensitive}function b(e){return e.type==="boolean"}function w(e){return e.type==="object"}function N(e){return e.type==="array"}function M(e){return e.type==="integer"}function U(e){var s;return((s=e.enum)==null?void 0:s.map(n=>n.toString()))||[]}function j(e,s){if(!e.$ref||!s)return e;const n=e.$ref.replace("#/$defs/",""),o=s[n];return o||console.error(`Could not resolve $ref: ${e.$ref}`),o}function X(e,s){return e.title?e.title:z(s)}function fe(e,s){const n=Object.entries(e.properties||{}).reduce((o,[l,r])=>{let a="";return r.default?b(r)?a=r.default:w(r)?a=JSON.stringify(r.default):N(r)||y(r.default)?a=r.default:a=r.default.toString():N(r)&&(a=[]),{...o,[l]:a}},{});return s&&Object.entries(s).forEach(([o,l])=>{var a;const r=(a=e.properties)==null?void 0:a[o];r&&b(r)?n[o]=l==="True"?!0:l==="False"?!1:!!l:n[o]=y(l)?l.map(i=>v(i)||y(i)?JSON.stringify(i):i):v(l)?JSON.stringify(l):l}),n}function me(e){const s=Object.keys(e).reduce((n,o)=>(n[o]=c.string().trim().min(1),n),{});return c.object(s)}function xe(e){if(!e.properties)return c.object({});const s=e.required||[],n=e.properties,o=Object.keys(n).reduce((l,r)=>{const a=n[r];if(!a)return l;const i=L(r,s);return l[r]=C(a,e.$defs,i),l},{});return c.object(o)}function C(e,s,n,o=!1){var a;let l=S(e,s);if(l.anyOf){const i=l.anyOf.find(u=>u.type!==null);i&&(l=S(i,s))}switch(l.allOf&&(l=S(l.allOf[0],s)),l.type){case"string":return n?c.string().trim():c.string().trim().min(1,"Required");case"boolean":return n?c.union([c.literal(""),c.boolean()]):c.boolean();case"array":{if(o)return n?c.union([c.literal(""),p]):p;const i=c.array(C(l.items||((a=l.prefixItems)==null?void 0:a[0])||{},s,!1,!0));return n?i:i.min(1)}case"object":return n?c.union([c.literal(""),p]):p;case"integer":return n?c.union([c.literal(""),c.preprocess(i=>Number(i),c.number().int())]):c.preprocess(i=>Number(i),c.number().int());default:return n?c.union([c.literal(""),c.string()]):c.string().min(1,"Required")}}function L(e,s){return!s.includes(e)}const p=c.string().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}},{message:"Invalid JSON"}).transform(e=>e===""?e:JSON.parse(e));function S(e,s){if(!e.$ref||!s)return e;const n=e.$ref.split("/").pop();return!n||!s[n]?e:s[n]}function Q({schema:e,fieldName:s}){const n=e.description;return n?t.jsx(E,{children:t.jsxs(I,{children:[t.jsx(A,{type:"button",children:t.jsx(J,{className:"size-4 shrink-0 fill-theme-text-secondary"})}),t.jsx(V,{className:"z-20 max-w-[400px] bg-theme-surface-primary p-5 text-text-sm text-theme-text-primary",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"w-fit rounded-sm bg-primary-25 px-1 py-0.5 font-mono text-primary-400",children:s}),t.jsx("p",{children:n})]})})]})}):null}function f({label:e,isOptional:s,schema:n,fieldName:o}){return t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("p",{children:[e,!s&&t.jsx("span",{className:"text-theme-text-error","aria-label":"required",children:"*"})]}),n&&o&&t.jsx(Q,{schema:n,fieldName:o})]})}function W({name:e,label:s,isOptional:n,schema:o,definitions:l}){const r=d(),{fields:a,append:i,remove:u}=O({name:e,control:r.control});return t.jsxs("div",{className:"space-y-3",children:[!!s&&t.jsx("label",{className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx("ul",{className:"space-y-5",children:a.map((h,m)=>t.jsxs("li",{className:"flex w-full items-center gap-4 [&>div]:w-full",children:[t.jsx(ae,{isNested:!0,name:`${e}.${m}`,schema:o,isOptional:n,definitions:l}),t.jsxs(T,{className:"h-7 w-7",emphasis:"subtle",size:"sm",type:"button",onClick:()=>u(m),children:[t.jsx($,{className:"h-5 w-5 fill-primary-900"}),t.jsx("span",{className:"sr-only",children:"remove"})]})]},h.id))}),t.jsxs(T,{className:"h-7 w-7",emphasis:"subtle",type:"button",onClick:()=>i(""),children:[t.jsx(R,{className:"h-5 w-5 fill-primary-900"}),t.jsx("p",{className:"sr-only",children:"Add Item"})]})]})}function ee({name:e,isOptional:s,label:n,schema:o}){var a;const l=d(),r=l.formState.errors[e];return t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:l.control,name:e,render:({field:{onChange:i,value:u,...h}})=>t.jsx(k,{id:e,checked:u,onCheckedChange:m=>i(m),...h})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(a=r.message)==null?void 0:a.toString()})]})}function re({name:e,label:s,isOptional:n,schema:o,enumValues:l}){var i;const r=d(),a=r.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:r.control,name:e,render:({field:{onChange:u,ref:h,...m}})=>t.jsxs(q,{...m,onValueChange:u,children:[t.jsx(B,{"data-error":a?"true":"false",className:"h-7 max-w-full truncate border border-neutral-300 px-2 text-left text-text-sm data-[error=true]:border-error-500",children:t.jsx(D,{placeholder:"Select Option"})}),t.jsx(P,{children:t.jsx(Z,{viewportClassName:"max-h-[300px]",children:l.map(g=>t.jsx(_,{className:"space-x-2",value:g,children:g},g))})})]})}),a&&t.jsx("p",{className:"text-text-sm text-error-500",children:(i=a.message)==null?void 0:i.toString()})]})}function te({name:e,isOptional:s,label:n,schema:o}){var a;const l=d(),r=l.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:l.control,name:e,render:({field:i})=>t.jsx(F,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...i,type:"number","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(a=r.message)==null?void 0:a.toString()})]})}function se({name:e,label:s,isOptional:n,schema:o}){var a;const l=d(),r=l.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:l.control,name:e,render:({field:i})=>t.jsx("textarea",{rows:4,placeholder:"Please paste your JSON",className:H({inputSize:"md",className:"h-auto w-full resize-none font-mono data-[error=true]:border-error-500"}),id:e,...i,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(a=r.message)==null?void 0:a.toString()})]})}function ne({name:e,isOptional:s,label:n,schema:o}){var a;const l=d(),r=l.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:l.control,name:e,render:({field:i})=>t.jsx(F,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...i,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(a=r.message)==null?void 0:a.toString()})]})}function le({name:e,label:s,isOptional:n,schema:o}){var a;const l=d(),r=l.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:l.control,name:e,render:({field:i})=>t.jsx(F,{placeholder:"Use {{<SECRET_NAME>.<SECRET_KEY>}} to reference a secret",inputSize:"md",className:"w-full placeholder:font-mono data-[error=true]:border-error-500",id:e,...i,type:"text","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(a=r.message)==null?void 0:a.toString()})]})}function ae({schema:e,name:s,isOptional:n,definitions:o,isNested:l}){let r=j(e,o);l&&r.items&&(r=j(r.items,o)),l&&r.prefixItems&&(r=j(r.prefixItems[0],o));const a=l?"":X(r,s);if(r.anyOf){const i=r.anyOf.find(u=>u.type!==null);if(i){const u=j(i,o);r={...r,...u}}}if(r.allOf){const i=j(r.allOf[0],o);r={...r,...i}}if(G(r))return t.jsx(re,{name:s,label:a,schema:r,isOptional:n,enumValues:U(r)});if(K(r))return t.jsx(le,{name:s,label:a,schema:r,isOptional:n});if(M(r))return t.jsx(te,{name:s,label:a,schema:r,isOptional:n});if(Y(r))return t.jsx(ne,{name:s,label:a,schema:r,isOptional:n});if(b(r))return t.jsx(ee,{name:s,label:a,schema:r,isOptional:n});if(w(r)||N(r)&&l)return t.jsx(se,{name:s,label:a,schema:r,isOptional:n});if(N(r))return t.jsx(W,{definitions:o,name:s,label:a,schema:r,isOptional:n})}export{ae as D,fe as a,L as b,xe as g,me as z};
