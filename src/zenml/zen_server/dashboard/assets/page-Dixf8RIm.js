import{j as e}from"./@radix-sxciy0xP.js";import{u as l,S as x,a as f,b as y}from"./form-schemas-D_JkxXIX.js";import{A as h,a as v,P as j,S as _}from"./primary-role-KaFyZ1iQ.js";import{w as C,x as b,bZ as g,u as U,e as w}from"./index-Duh0NHGE.js";import{a as c}from"./@monaco-editor-Di1Jq_O0.js";import{u as P}from"./update-current-user-mutation-DWfHfWSs.js";import{h as A}from"./@tanstack-BjpQvXOk.js";import"./@elkjs-CmhuJAjY.js";import"./@react-router-B8Rvl3f4.js";import"./@zod-3snSrKBm.js";import"./UpdatePasswordSchemas-CIxLNPTO.js";import"./bar-chart-square-check-CVLivjI6.js";import"./dataflow-2-CJA70yym.js";import"./credit-card-Cwl9pA7u.js";import"./eye-C2BdTq-f.js";import"./file-text-_omkpCSq.js";import"./layout-BtXy9gkl.js";import"./message-chat-square-1TvGjjXb.js";import"./slash-circle-CYsBwUf4.js";import"./transform-CoT5Lusb.js";import"./@reactflow-HpiAkQBO.js";import"./@featureos-widget-OqfzE-b2.js";const d=c.createContext(null);function E({children:t,initialUser:s}){const[n,r]=c.useState(s||{});return e.jsx(d.Provider,{value:{user:n,setUser:r},children:t})}function p(){const t=c.useContext(d);if(t===null)throw new Error("useSurveyUserContext must be used within an SurveyUserProvider");return t}function k({user:t}){var a,u;const{setSurveyStep:s}=l(),{setUser:n}=p();function r({fullName:o,getUpdates:m,email:i}){n(S=>({...S,...i?{email:i}:{email:null},full_name:o,email_opted_in:m})),s(2)}return e.jsx(h,{email:(a=t.metadata)==null?void 0:a.email,fullName:(u=t.body)==null?void 0:u.full_name,submitHandler:r})}function D(){const{user:t}=p(),{setSurveyStep:s}=l(),{toast:n}=C(),r=A(),{mutate:a}=P({onSuccess:async()=>{await r.invalidateQueries({queryKey:g()}),s(o=>o+1)},onError:o=>{o instanceof Error&&n({status:"error",emphasis:"subtle",icon:e.jsx(b,{className:"h-5 w-5 shrink-0 fill-error-700"}),description:o.message,rounded:!0})}});function u({biggestChallenge:o,aiTypes:m}){const i={ai_types_working_with:m,biggest_ai_challenges:o,finished_onboarding_survey:!0};a({...t,user_metadata:{...t.user_metadata,...i}})}return e.jsx(v,{submitHandler:u})}function F({user:t}){const{setSurveyStep:s}=l(),{setUser:n}=p();function r({primaryRole:a,otherVal:u}){const m={primary_role:a==="other"?u:a};n(i=>({...i,user_metadata:{...i.user_metadata,...m}})),s(3)}return e.jsx(j,{user:t,submitHandler:r})}function H(){const{data:t,isPending:s,isError:n}=U({throwOnError:!0}),{surveyStep:r}=l();return n?null:s?e.jsx(w,{className:"h-[300px]"}):e.jsx(e.Fragment,{children:e.jsxs(E,{children:[e.jsx(x,{stepAmount:4}),r===1&&e.jsx(k,{user:t}),r===2&&e.jsx(F,{user:t}),r===3&&e.jsx(D,{}),r===4&&e.jsx(_,{}),r===5&&e.jsx(f,{subHeader:"Your ZenML account is now updated",displayBody:!1,username:t.name})]})})}function re(){return e.jsx("div",{children:e.jsx(y,{children:e.jsx(H,{})})})}export{re as default};
