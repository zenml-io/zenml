
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.91.0/core_code_docs/core-zen_server.html">
      
      
        <link rel="prev" href="core-utils.html">
      
      
        <link rel="next" href="core-zen_stores.html">
      
      
      <link rel="icon" href="../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>Zen Server - ZenML SDK Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  // Load Segment analytics library first
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  
  // Bot detection function
  function isBotTraffic() {
    const userAgent = navigator.userAgent || '';
    
    // Check for specific bot signatures found in your traffic
    const botSignatures = [
      'ClaudeBot',           // The main culprit from your debugger data
      'HeadlessChrome',      // Also found in your userAgentData
      'crawler',
      'spider',
      'bot',
      'scraper',
      'Googlebot',
      'Bingbot',
      'SemrushBot',
      'AhrefsBot'
    ];
    
    // Check user agent string
    for (let signature of botSignatures) {
      if (userAgent.toLowerCase().includes(signature.toLowerCase())) {
        return true;
      }
    }
    
    // Check userAgentData brands (modern bot detection)
    try {
      if (navigator.userAgentData && navigator.userAgentData.brands) {
        const brands = navigator.userAgentData.brands;
        for (let brand of brands) {
          // Check for specific bot signatures in brand names
          if (brand.brand === 'HeadlessChrome' || 
              /^Not.?A_Brand$/i.test(brand.brand) || // Matches 'Not?A_Brand' and similar variations
              brand.brand.toLowerCase().includes('bot')) {
            return true;
          }
        }
      }
    } catch (e) {
      // userAgentData API not supported or error accessing it
      // Continue with other bot detection methods
    }
    
    // Check for webdriver (automated browser indicator)
    if (navigator.webdriver === true) {
      return true;
    }
    
    return false;
  }
  
  // Only send analytics data if this is NOT bot traffic
  if (!isBotTraffic()) {
    analytics.page();
  } else {
    // Optional: Log for debugging (only in non-production environments)
    if (window.location.hostname === 'localhost' || window.location.hostname.includes('dev')) {
      console.log('Bot traffic detected, skipping Segment analytics');
    }
  }
  }}();
</script>

<!-- Plausible and Reo continue unchanged -->
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>

<!-- Start of Reo Javascript -->
<script type="text/javascript">
  !function(){var e,t,n;e="4d2a332d9b3113a",t=function(){Reo.init({clientID:"4d2a332d9b3113a"})},(n=document.createElement("script")).src="https://static.reo.dev/"+e+"/reo.js",n.defer=!0,n.onload=t,document.head.appendChild(n)}();
</script>
<!-- End of Reo Javascript -->


  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#zen-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="ZenML SDK Docs" class="md-header__button md-logo" aria-label="ZenML SDK Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML SDK Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Zen Server
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="ZenML SDK Docs" class="md-nav__button md-logo" aria-label="ZenML SDK Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ZenML SDK Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZenML
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI docs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core code docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Core code docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-actions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-alerter.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alerter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-analytics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analytics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-annotators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-artifact_stores.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artifact Stores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-artifacts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artifacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-client.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-client_lazy_loader.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client Lazy Loader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-code_repositories.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Repositories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-config.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-console.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Console
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-constants.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-container_registries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Container Registries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-data_validators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Validators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-deployers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-entrypoints.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entrypoints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-enums.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-environment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-event_hub.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Hub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-event_sources.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Sources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-exceptions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-experiment_trackers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experiment Trackers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-feature_stores.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feature Stores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-hooks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-image_builders.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Builders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-io.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Io
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-logger.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-logging.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-login.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Login
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-materializers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Materializers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-metadata.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-model.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-model_deployers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Deployers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-model_registries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Registries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-models.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-orchestrators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orchestrators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-pipelines.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-plugins.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-secret.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secret
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-service_connectors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service Connectors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-services.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-stack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-stack_deployments.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stack Deployments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-step_operators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-steps.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Steps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-types.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Zen Server
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="core-zen_server.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Zen Server
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.zen_server" class="md-nav__link">
    <span class="md-ellipsis">
      zen_server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="zen_server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth" class="md-nav__link">
    <span class="md-ellipsis">
      auth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.AuthContext" class="md-nav__link">
    <span class="md-ellipsis">
      AuthContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.CookieOAuth2TokenBearer" class="md-nav__link">
    <span class="md-ellipsis">
      CookieOAuth2TokenBearer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_api_key" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_api_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_credentials" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_device" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_external_user" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_external_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authentication_provider" class="md-nav__link">
    <span class="md-ellipsis">
      authentication_provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.generate_access_token" class="md-nav__link">
    <span class="md-ellipsis">
      generate_access_token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.generate_download_token" class="md-nav__link">
    <span class="md-ellipsis">
      generate_download_token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.get_authorization_provider" class="md-nav__link">
    <span class="md-ellipsis">
      get_authorization_provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.http_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      http_authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.http_authentication--noqa-dar401" class="md-nav__link">
    <span class="md-ellipsis">
      noqa: DAR401
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.no_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      no_authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.oauth2_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      oauth2_authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.oauth2_authentication--noqa-dar401" class="md-nav__link">
    <span class="md-ellipsis">
      noqa: DAR401
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.verify_download_token" class="md-nav__link">
    <span class="md-ellipsis">
      verify_download_token
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache" class="md-nav__link">
    <span class="md-ellipsis">
      cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache.MemoryCache" class="md-nav__link">
    <span class="md-ellipsis">
      MemoryCache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache.MemoryCacheEntry" class="md-nav__link">
    <span class="md-ellipsis">
      MemoryCacheEntry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache.cache_result" class="md-nav__link">
    <span class="md-ellipsis">
      cache_result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils" class="md-nav__link">
    <span class="md-ellipsis">
      cloud_utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cloud_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils.ZenMLCloudConnection" class="md-nav__link">
    <span class="md-ellipsis">
      ZenMLCloudConnection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils.cloud_connection" class="md-nav__link">
    <span class="md-ellipsis">
      cloud_connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils.send_pro_workspace_status_update" class="md-nav__link">
    <span class="md-ellipsis">
      send_pro_workspace_status_update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf" class="md-nav__link">
    <span class="md-ellipsis">
      csrf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="csrf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf.CSRFToken" class="md-nav__link">
    <span class="md-ellipsis">
      CSRFToken
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy" class="md-nav__link">
    <span class="md-ellipsis">
      deploy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="deploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.LocalServerDeployer" class="md-nav__link">
    <span class="md-ellipsis">
      LocalServerDeployer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.LocalServerDeployment" class="md-nav__link">
    <span class="md-ellipsis">
      LocalServerDeployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.LocalServerDeploymentConfig" class="md-nav__link">
    <span class="md-ellipsis">
      LocalServerDeploymentConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.base_provider" class="md-nav__link">
    <span class="md-ellipsis">
      base_provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.daemon" class="md-nav__link">
    <span class="md-ellipsis">
      daemon
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="core-zen_stores.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zen Stores
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integration code docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Integration code docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-airflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-argilla.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Argilla
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-aws.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aws
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-azure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-bentoml.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bentoml
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-bitbucket.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bitbucket
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-comet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-constants.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-databricks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-deepchecks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deepchecks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-discord.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discord
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-evidently.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evidently
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-facets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Facets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-feast.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feast
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-gcp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gcp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-github.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Github
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-gitlab.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gitlab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-great_expectations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Great Expectations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-huggingface.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Huggingface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-hyperai.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hyperai
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-integration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-jax.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-kaniko.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kaniko
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-kubeflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubeflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-kubernetes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-label_studio.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Label Studio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-langchain.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Langchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-lightgbm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lightgbm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-lightning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lightning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-llama_index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Llama Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-mlflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mlflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-mlx.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mlx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-modal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-neptune.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neptune
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-neural_prophet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neural Prophet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-numpy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Numpy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-openai.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Openai
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-pandas.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pandas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-pigeon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pigeon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-pillow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pillow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-polars.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Polars
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-prodigy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prodigy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-pycaret.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pycaret
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-pytorch.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pytorch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-pytorch_lightning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pytorch Lightning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-registry.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-s3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-scipy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scipy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-seldon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seldon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-sklearn.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sklearn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-skypilot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skypilot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-skypilot_aws.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skypilot Aws
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-skypilot_azure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skypilot Azure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-skypilot_gcp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skypilot Gcp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-skypilot_kubernetes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skypilot Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-skypilot_lambda.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skypilot Lambda
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-slack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-spark.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-tekton.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tekton
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-tensorboard.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tensorboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-tensorflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tensorflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-vllm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vllm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-wandb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wandb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-whylogs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Whylogs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration_code_docs/integrations-xgboost.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Xgboost
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.zen_server" class="md-nav__link">
    <span class="md-ellipsis">
      zen_server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="zen_server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth" class="md-nav__link">
    <span class="md-ellipsis">
      auth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.AuthContext" class="md-nav__link">
    <span class="md-ellipsis">
      AuthContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.CookieOAuth2TokenBearer" class="md-nav__link">
    <span class="md-ellipsis">
      CookieOAuth2TokenBearer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_api_key" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_api_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_credentials" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_device" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authenticate_external_user" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate_external_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.authentication_provider" class="md-nav__link">
    <span class="md-ellipsis">
      authentication_provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.generate_access_token" class="md-nav__link">
    <span class="md-ellipsis">
      generate_access_token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.generate_download_token" class="md-nav__link">
    <span class="md-ellipsis">
      generate_download_token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.get_authorization_provider" class="md-nav__link">
    <span class="md-ellipsis">
      get_authorization_provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.http_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      http_authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.http_authentication--noqa-dar401" class="md-nav__link">
    <span class="md-ellipsis">
      noqa: DAR401
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.no_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      no_authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.oauth2_authentication" class="md-nav__link">
    <span class="md-ellipsis">
      oauth2_authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.oauth2_authentication--noqa-dar401" class="md-nav__link">
    <span class="md-ellipsis">
      noqa: DAR401
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.auth.verify_download_token" class="md-nav__link">
    <span class="md-ellipsis">
      verify_download_token
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache" class="md-nav__link">
    <span class="md-ellipsis">
      cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache.MemoryCache" class="md-nav__link">
    <span class="md-ellipsis">
      MemoryCache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache.MemoryCacheEntry" class="md-nav__link">
    <span class="md-ellipsis">
      MemoryCacheEntry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cache.cache_result" class="md-nav__link">
    <span class="md-ellipsis">
      cache_result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils" class="md-nav__link">
    <span class="md-ellipsis">
      cloud_utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cloud_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils.ZenMLCloudConnection" class="md-nav__link">
    <span class="md-ellipsis">
      ZenMLCloudConnection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils.cloud_connection" class="md-nav__link">
    <span class="md-ellipsis">
      cloud_connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.cloud_utils.send_pro_workspace_status_update" class="md-nav__link">
    <span class="md-ellipsis">
      send_pro_workspace_status_update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf" class="md-nav__link">
    <span class="md-ellipsis">
      csrf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="csrf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf.CSRFToken" class="md-nav__link">
    <span class="md-ellipsis">
      CSRFToken
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.csrf-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy" class="md-nav__link">
    <span class="md-ellipsis">
      deploy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="deploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.LocalServerDeployer" class="md-nav__link">
    <span class="md-ellipsis">
      LocalServerDeployer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.LocalServerDeployment" class="md-nav__link">
    <span class="md-ellipsis">
      LocalServerDeployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.LocalServerDeploymentConfig" class="md-nav__link">
    <span class="md-ellipsis">
      LocalServerDeploymentConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.base_provider" class="md-nav__link">
    <span class="md-ellipsis">
      base_provider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.zen_server.deploy.daemon" class="md-nav__link">
    <span class="md-ellipsis">
      daemon
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="zen-server">Zen Server</h1>


<div class="doc doc-object doc-module">



<h2 id="zenml.zen_server" class="doc doc-heading">
            <code>zenml.zen_server</code>


</h2>

    <div class="doc doc-contents first">

        <p>ZenML Server Implementation.</p>
<p>The ZenML Server is a centralized service meant for use in a collaborative
setting in which stacks, stack components, flavors, pipeline and pipeline runs
can be shared over the network with other users.</p>
<p>You can use the <code>zenml server up</code> command to spin up ZenML server instances
that are either running locally as daemon processes or docker containers, or
to deploy a ZenML server remotely on a managed cloud platform. The other CLI
commands in the same <code>zenml server</code> group can be used to manage the server
instances deployed from your local machine.</p>
<p>To connect the local ZenML client to one of the managed ZenML servers, call
<code>zenml server connect</code> with the name of the server you want to connect to.</p>










  <div class="doc doc-children">









<h3 id="zenml.zen_server-modules">Modules</h3>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.auth" class="doc doc-heading">
            <code>auth</code>


</h4>

    <div class="doc doc-contents ">

        <p>Authentication module for ZenML server.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.auth-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.auth.AuthContext" class="doc doc-heading">
            <code>AuthContext</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>The authentication context.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.auth.CookieOAuth2TokenBearer" class="doc doc-heading">
            <code>CookieOAuth2TokenBearer</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="fastapi.security.OAuth2PasswordBearer">OAuth2PasswordBearer</span></code></p>


        <p>OAuth2 token bearer authentication scheme that uses a cookie.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>
<h5 id="zenml.zen_server.auth-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.authenticate_api_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">authenticate_api_key</span><span class="p">(</span><span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Implement service account API key authentication.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service account API key.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context reflecting the authenticated service account.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CredentialsNotValid(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.CredentialsNotValid)" href="core-exceptions.html#zenml.exceptions.CredentialsNotValid">CredentialsNotValid</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the service account could not be authorized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">authenticate_api_key</span><span class="p">(</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Implement service account API key authentication.</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key: The service account API key.</span>


<span class="sd">    Returns:</span>
<span class="sd">        The authentication context reflecting the authenticated service account.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CredentialsNotValid: If the service account could not be authorized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded_api_key</span> <span class="o">=</span> <span class="n">APIKey</span><span class="o">.</span><span class="n">decode_api_key</span><span class="p">(</span><span class="n">api_key</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Authentication error: error decoding API key&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="n">internal_api_key</span> <span class="o">=</span> <span class="n">_fetch_and_verify_api_key</span><span class="p">(</span>
        <span class="n">api_key_id</span><span class="o">=</span><span class="n">decoded_api_key</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">key_to_verify</span><span class="o">=</span><span class="n">decoded_api_key</span><span class="o">.</span><span class="n">key</span>
    <span class="p">)</span>

    <span class="c1"># For now, a lot of code still relies on the active user in the auth</span>
    <span class="c1"># context being a UserResponse object, which is a superset of the</span>
    <span class="c1"># ServiceAccountResponse object. So we need to convert the service</span>
    <span class="c1"># account to a user here.</span>
    <span class="n">user_model</span> <span class="o">=</span> <span class="n">internal_api_key</span><span class="o">.</span><span class="n">service_account</span><span class="o">.</span><span class="n">to_user_model</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">AuthContext</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user_model</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="n">internal_api_key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.authenticate_credentials" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">authenticate_credentials</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">access_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">csrf_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">activation_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Verify if user authentication credentials are valid.</p>
<p>This function can be used to validate all supplied user credentials to
cover a range of possibilities:</p>
<ul>
<li>username only - only when the no-auth scheme is used</li>
<li>username+password - for basic HTTP authentication or the OAuth2 password
   grant</li>
<li>access token (with embedded user id) - after successful authentication
   using one of the supported grants</li>
<li>username+activation token - for user activation</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The username or user ID.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>password</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The password.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>access_token</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The access token.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>csrf_token</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The CSRF token.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>activation_token</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The activation token.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authenticated account details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CredentialsNotValid(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.CredentialsNotValid)" href="core-exceptions.html#zenml.exceptions.CredentialsNotValid">CredentialsNotValid</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the credentials are invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">authenticate_credentials</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">access_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">csrf_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">activation_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify if user authentication credentials are valid.</span>

<span class="sd">    This function can be used to validate all supplied user credentials to</span>
<span class="sd">    cover a range of possibilities:</span>

<span class="sd">     * username only - only when the no-auth scheme is used</span>
<span class="sd">     * username+password - for basic HTTP authentication or the OAuth2 password</span>
<span class="sd">       grant</span>
<span class="sd">     * access token (with embedded user id) - after successful authentication</span>
<span class="sd">       using one of the supported grants</span>
<span class="sd">     * username+activation token - for user activation</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: The username or user ID.</span>
<span class="sd">        password: The password.</span>
<span class="sd">        access_token: The access token.</span>
<span class="sd">        csrf_token: The CSRF token.</span>
<span class="sd">        activation_token: The activation token.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authenticated account details.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CredentialsNotValid: If the credentials are invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UserAuthModel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AuthContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">user_name_or_id</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># NOTE: this method will not return a user if the user name or ID</span>
            <span class="c1"># identifies a service account instead of a regular user. This</span>
            <span class="c1"># is intentional because service accounts are not allowed to</span>
            <span class="c1"># be used to authenticate to the API using a username and password,</span>
            <span class="c1"># or an activation token.</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_auth_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>
            <span class="n">user_model</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span>
                <span class="n">user_name_or_id</span><span class="o">=</span><span class="n">user_name_or_id</span><span class="p">,</span> <span class="n">include_private</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">auth_context</span> <span class="o">=</span> <span class="n">AuthContext</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user_model</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="c1"># even when the user does not exist, we still want to execute the</span>
            <span class="c1"># password/token verification to protect against response discrepancy</span>
            <span class="c1"># attacks (https://cwe.mitre.org/data/definitions/204.html)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Authentication error: error retrieving account &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user_name_or_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">pass</span>

    <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">UserAuthModel</span><span class="o">.</span><span class="n">verify_password</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Authentication error: invalid username or password&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">user</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Authentication error: user </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not active&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">activation_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">UserAuthModel</span><span class="o">.</span><span class="n">verify_activation_token</span><span class="p">(</span><span class="n">activation_token</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
            <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Authentication error: invalid activation token for user &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user_name_or_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">decoded_token</span> <span class="o">=</span> <span class="n">JWTToken</span><span class="o">.</span><span class="n">decode_token</span><span class="p">(</span>
                <span class="n">token</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">CredentialsNotValid</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Authentication error: error decoding access token: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">decoded_token</span><span class="o">.</span><span class="n">session_id</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">csrf_token</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Authentication error: missing CSRF token&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="n">decoded_csrf_token</span> <span class="o">=</span> <span class="n">CSRFToken</span><span class="o">.</span><span class="n">decode_token</span><span class="p">(</span><span class="n">csrf_token</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">decoded_csrf_token</span><span class="o">.</span><span class="n">session_id</span> <span class="o">!=</span> <span class="n">decoded_token</span><span class="o">.</span><span class="n">session_id</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Authentication error: CSRF token does not match the &quot;</span>
                    <span class="s2">&quot;access token&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_model</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span>
                <span class="n">user_name_or_id</span><span class="o">=</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span> <span class="n">include_private</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Authentication error: error retrieving token account &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_model</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Authentication error: account </span><span class="si">{</span><span class="n">user_model</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;active&quot;</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="n">api_key_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">APIKeyInternalResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">decoded_token</span><span class="o">.</span><span class="n">api_key_id</span><span class="p">:</span>
            <span class="c1"># The API token was generated from an API key. We still have to</span>
            <span class="c1"># verify if the API key hasn&#39;t been deactivated or deleted in the</span>
            <span class="c1"># meantime.</span>
            <span class="n">api_key_model</span> <span class="o">=</span> <span class="n">_fetch_and_verify_api_key</span><span class="p">(</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">api_key_id</span><span class="p">)</span>

        <span class="n">device_model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OAuthDeviceInternalResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">decoded_token</span><span class="o">.</span><span class="n">device_id</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">,</span>
                <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Authentication error: device authorization is not supported.&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="c1"># Access tokens that have been issued for a device are only valid</span>
            <span class="c1"># for that device, so we need to check if the device ID matches any</span>
            <span class="c1"># of the valid devices in the database.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">device_model</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_internal_authorized_device</span><span class="p">(</span>
                    <span class="n">device_id</span><span class="o">=</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">device_id</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: error retrieving token device &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">device_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">device_model</span><span class="o">.</span><span class="n">user_id</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="n">device_model</span><span class="o">.</span><span class="n">user_id</span> <span class="o">!=</span> <span class="n">user_model</span><span class="o">.</span><span class="n">id</span>
            <span class="p">):</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: device </span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">device_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;does not belong to user </span><span class="si">{</span><span class="n">user_model</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">device_model</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: device </span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">device_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;is not active&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">device_model</span><span class="o">.</span><span class="n">expires</span>
                <span class="ow">and</span> <span class="n">utc_now</span><span class="p">(</span><span class="n">tz_aware</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">expires</span><span class="p">)</span>
                <span class="o">&gt;=</span> <span class="n">device_model</span><span class="o">.</span><span class="n">expires</span>
            <span class="p">):</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: device </span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">device_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="s2">&quot;has expired&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_internal_authorized_device</span><span class="p">(</span>
                <span class="n">device_id</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">update</span><span class="o">=</span><span class="n">OAuthDeviceInternalUpdate</span><span class="p">(</span>
                    <span class="n">update_last_login</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">decoded_token</span><span class="o">.</span><span class="n">schedule_id</span><span class="p">:</span>
            <span class="c1"># If the token contains a schedule ID, we need to check if the</span>
            <span class="c1"># schedule still exists in the database. We use a cached version</span>
            <span class="c1"># of the schedule active status to avoid unnecessary database</span>
            <span class="c1"># queries.</span>

            <span class="nd">@cache_result</span><span class="p">(</span><span class="n">expiry</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">get_schedule_active</span><span class="p">(</span><span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Get the active status of a schedule.</span>

<span class="sd">                Args:</span>
<span class="sd">                    schedule_id: The schedule ID.</span>

<span class="sd">                Returns:</span>
<span class="sd">                    The schedule active status or None if the schedule does not</span>
<span class="sd">                    exist.</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">schedule</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_schedule</span><span class="p">(</span>
                        <span class="n">schedule_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="k">return</span> <span class="n">schedule</span><span class="o">.</span><span class="n">active</span>

            <span class="n">schedule_active</span> <span class="o">=</span> <span class="n">get_schedule_active</span><span class="p">(</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">schedule_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">schedule_active</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: error retrieving token schedule &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">schedule_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">schedule_active</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: schedule </span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">schedule_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="s2">&quot;is not active&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">decoded_token</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">:</span>
            <span class="c1"># If the token contains a pipeline run ID, we need to check if the</span>
            <span class="c1"># pipeline run exists in the database and the pipeline run has</span>
            <span class="c1"># not concluded. We use a cached version of the pipeline run status</span>
            <span class="c1"># to avoid unnecessary database queries.</span>

            <span class="nd">@cache_result</span><span class="p">(</span><span class="n">expiry</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">check_if_pipeline_run_in_progress</span><span class="p">(</span>
                <span class="n">pipeline_run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]]:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Get the status of a pipeline run.</span>

<span class="sd">                Args:</span>
<span class="sd">                    pipeline_run_id: The pipeline run ID.</span>

<span class="sd">                Returns:</span>
<span class="sd">                    The pipeline run status and end time or None if the pipeline</span>
<span class="sd">                    run does not exist.</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">_check_if_run_in_progress</span><span class="p">(</span>
                        <span class="n">pipeline_run_id</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="p">(</span>
                <span class="n">pipeline_run_in_progress</span><span class="p">,</span>
                <span class="n">pipeline_run_end_time</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">=</span> <span class="n">check_if_pipeline_run_in_progress</span><span class="p">(</span>
                <span class="n">decoded_token</span><span class="o">.</span><span class="n">pipeline_run_id</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">pipeline_run_in_progress</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Authentication error: error retrieving token. Pipeline run &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

            <span class="n">leeway</span> <span class="o">=</span> <span class="n">handle_int_env_var</span><span class="p">(</span>
                <span class="n">ENV_ZENML_WORKLOAD_TOKEN_EXPIRATION_LEEWAY</span><span class="p">,</span>
                <span class="n">DEFAULT_ZENML_SERVER_GENERIC_API_TOKEN_LIFETIME</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_run_in_progress</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">leeway</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># The token should never expire, we don&#39;t need to check</span>
                    <span class="c1"># the end time.</span>
                    <span class="k">pass</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="c1"># We don&#39;t know the end time. This should never happen, but</span>
                    <span class="c1"># just in case we always expire the token.</span>
                    <span class="n">pipeline_run_end_time</span> <span class="ow">is</span> <span class="kc">None</span>
                    <span class="c1"># Calculate whether the token has expired.</span>
                    <span class="ow">or</span> <span class="n">utc_now</span><span class="p">(</span><span class="n">tz_aware</span><span class="o">=</span><span class="n">pipeline_run_end_time</span><span class="p">)</span>
                    <span class="o">&gt;</span> <span class="n">pipeline_run_end_time</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">leeway</span><span class="p">)</span>
                <span class="p">):</span>
                    <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The pipeline run </span><span class="si">{</span><span class="n">decoded_token</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="si">}</span><span class="s2"> has &quot;</span>
                        <span class="s2">&quot;finished and API tokens scoped to it are no longer &quot;</span>
                        <span class="s2">&quot;valid. If you want to increase the expiration time &quot;</span>
                        <span class="s2">&quot;of the token to allow steps to continue for longer &quot;</span>
                        <span class="s2">&quot;after other steps have failed, you can do so by &quot;</span>
                        <span class="s2">&quot;configuring the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">ENV_ZENML_WORKLOAD_TOKEN_EXPIRATION_LEEWAY</span><span class="si">}</span><span class="s2">` &quot;</span>
                        <span class="s2">&quot;ZenML server environment variable.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">AuthContext</span><span class="p">(</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user_model</span><span class="p">,</span>
            <span class="n">access_token</span><span class="o">=</span><span class="n">decoded_token</span><span class="p">,</span>
            <span class="n">encoded_access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
            <span class="n">device</span><span class="o">=</span><span class="n">device_model</span><span class="p">,</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key_model</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># IMPORTANT: the ONLY way we allow the authentication process to</span>
        <span class="c1"># continue without any credentials (i.e. no password, activation</span>
        <span class="c1"># token or access token) is if authentication is explicitly disabled</span>
        <span class="c1"># by setting the auth_scheme to NO_AUTH.</span>
        <span class="k">if</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="o">!=</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Authentication error: no credentials provided&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_context</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Authentication error: invalid credentials&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">auth_context</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.authenticate_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">authenticate_device</span><span class="p">(</span><span class="n">client_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">device_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Verify if device authorization credentials are valid.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>client_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OAuth2 client ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>device_code</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device code.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authenticated account details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthError(error: str, status_code: int = 400, error_description: Optional[str] = None, error_uri: Optional[str] = None) (zenml.exceptions.OAuthError)" href="core-exceptions.html#zenml.exceptions.OAuthError">OAuthError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device authorization credentials are invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">authenticate_device</span><span class="p">(</span><span class="n">client_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">device_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify if device authorization credentials are valid.</span>

<span class="sd">    Args:</span>
<span class="sd">        client_id: The OAuth2 client ID.</span>
<span class="sd">        device_code: The device code.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authenticated account details.</span>

<span class="sd">    Raises:</span>
<span class="sd">        OAuthError: If the device authorization credentials are invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># This is the part of the OAuth2 device code grant flow where a client</span>
    <span class="c1"># device is continuously polling the server to check if the user has</span>
    <span class="c1"># authorized a device. The following needs to happen to successfully</span>
    <span class="c1"># authenticate the device and return a valid access token:</span>
    <span class="c1">#</span>
    <span class="c1"># 1. the device code and client ID must match a device in the DB</span>
    <span class="c1"># 2. the device must be in the VERIFIED state, meaning that the user</span>
    <span class="c1"># has successfully authorized the device via the user code but the</span>
    <span class="c1"># device client hasn&#39;t yet fetched the associated API access token yet.</span>
    <span class="c1"># 3. the device must not be expired</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">device_model</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_internal_authorized_device</span><span class="p">(</span>
            <span class="n">client_id</span><span class="o">=</span><span class="n">client_id</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Authentication error: error retrieving device with client ID &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">OAuthError</span><span class="p">(</span>
            <span class="n">error</span><span class="o">=</span><span class="s2">&quot;invalid_client&quot;</span><span class="p">,</span>
            <span class="n">error_description</span><span class="o">=</span><span class="n">error</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">device_model</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">VERIFIED</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Authentication error: device with client ID </span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="s2"> is &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">device_model</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">device_model</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">PENDING</span><span class="p">:</span>
            <span class="n">oauth_error</span> <span class="o">=</span> <span class="s2">&quot;authorization_pending&quot;</span>
        <span class="k">elif</span> <span class="n">device_model</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">LOCKED</span><span class="p">:</span>
            <span class="n">oauth_error</span> <span class="o">=</span> <span class="s2">&quot;access_denied&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">oauth_error</span> <span class="o">=</span> <span class="s2">&quot;expired_token&quot;</span>
        <span class="k">raise</span> <span class="n">OAuthError</span><span class="p">(</span>
            <span class="n">error</span><span class="o">=</span><span class="n">oauth_error</span><span class="p">,</span>
            <span class="n">error_description</span><span class="o">=</span><span class="n">error</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">device_model</span><span class="o">.</span><span class="n">expires</span>
        <span class="ow">and</span> <span class="n">utc_now</span><span class="p">(</span><span class="n">tz_aware</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">expires</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">device_model</span><span class="o">.</span><span class="n">expires</span>
    <span class="p">):</span>
        <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Authentication error: device for client ID </span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="s2"> has &quot;</span>
            <span class="s2">&quot;expired&quot;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">OAuthError</span><span class="p">(</span>
            <span class="n">error</span><span class="o">=</span><span class="s2">&quot;expired_token&quot;</span><span class="p">,</span>
            <span class="n">error_description</span><span class="o">=</span><span class="n">error</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Check the device code</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">device_model</span><span class="o">.</span><span class="n">verify_device_code</span><span class="p">(</span><span class="n">device_code</span><span class="p">):</span>
        <span class="c1"># If the device code is invalid, increment the failed auth attempts</span>
        <span class="c1"># counter and lock the device if the maximum number of failed auth</span>
        <span class="c1"># attempts has been reached.</span>
        <span class="n">failed_auth_attempts</span> <span class="o">=</span> <span class="n">device_model</span><span class="o">.</span><span class="n">failed_auth_attempts</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">update</span> <span class="o">=</span> <span class="n">OAuthDeviceInternalUpdate</span><span class="p">(</span>
            <span class="n">failed_auth_attempts</span><span class="o">=</span><span class="n">failed_auth_attempts</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">failed_auth_attempts</span> <span class="o">&gt;=</span> <span class="n">config</span><span class="o">.</span><span class="n">max_failed_device_auth_attempts</span><span class="p">:</span>
            <span class="n">update</span><span class="o">.</span><span class="n">locked</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">store</span><span class="o">.</span><span class="n">update_internal_authorized_device</span><span class="p">(</span>
            <span class="n">device_id</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">update</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">failed_auth_attempts</span> <span class="o">&gt;=</span> <span class="n">config</span><span class="o">.</span><span class="n">max_failed_device_auth_attempts</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Authentication error: device for client ID </span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;has been locked due to too many failed authentication &quot;</span>
                <span class="s2">&quot;attempts.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Authentication error: device for client ID </span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;has an invalid device code.&quot;</span>
            <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">OAuthError</span><span class="p">(</span>
            <span class="n">error</span><span class="o">=</span><span class="s2">&quot;access_denied&quot;</span><span class="p">,</span>
            <span class="n">error_description</span><span class="o">=</span><span class="n">error</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># The device is valid, so we can return the user associated with it.</span>
    <span class="c1"># This is the one and only time we return an AuthContext authorized by</span>
    <span class="c1"># a device code in order to be exchanged for an access token. Subsequent</span>
    <span class="c1"># requests to the API will be authenticated using the access token.</span>
    <span class="c1">#</span>
    <span class="c1"># Update the device state to ACTIVE and set an expiration date for it</span>
    <span class="c1"># past which it can no longer be used for authentication. The expiration</span>
    <span class="c1"># date also determines the expiration date of the access token issued</span>
    <span class="c1"># for this device.</span>
    <span class="n">expires_in</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">jwt_token_expire_minutes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">device_model</span><span class="o">.</span><span class="n">trusted_device</span><span class="p">:</span>
            <span class="n">expires_in</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">trusted_device_expiration_minutes</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">expires_in</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">device_expiration_minutes</span> <span class="ow">or</span> <span class="mi">0</span>

    <span class="n">update</span> <span class="o">=</span> <span class="n">OAuthDeviceInternalUpdate</span><span class="p">(</span>
        <span class="n">status</span><span class="o">=</span><span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">,</span>
        <span class="n">expires_in</span><span class="o">=</span><span class="n">expires_in</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">device_model</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_internal_authorized_device</span><span class="p">(</span>
        <span class="n">device_id</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># This can never happen because the VERIFIED state is only set if</span>
    <span class="c1"># a user verified and has been associated with the device.</span>
    <span class="k">assert</span> <span class="n">device_model</span><span class="o">.</span><span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">AuthContext</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device_model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.authenticate_external_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">authenticate_external_user</span><span class="p">(</span><span class="n">external_access_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Implement external authentication.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>external_access_token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The access token used to authenticate the user
to the external authenticator.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context reflecting the authenticated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthorizationException(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.AuthorizationException)" href="core-exceptions.html#zenml.exceptions.AuthorizationException">AuthorizationException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the external user could not be authorized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">authenticate_external_user</span><span class="p">(</span>
    <span class="n">external_access_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Implement external authentication.</span>

<span class="sd">    Args:</span>
<span class="sd">        external_access_token: The access token used to authenticate the user</span>
<span class="sd">            to the external authenticator.</span>
<span class="sd">        request: The request object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authentication context reflecting the authenticated user.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AuthorizationException: If the external user could not be authorized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">external_user_info_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="c1"># Use the external access token to extract the user information and</span>
    <span class="c1"># permissions</span>

    <span class="c1"># Get the user information from the external authenticator</span>
    <span class="n">user_info_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">external_user_info_url</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer &quot;</span> <span class="o">+</span> <span class="n">external_access_token</span><span class="p">}</span>
    <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">get_zenml_headers</span><span class="p">())</span>
    <span class="n">query_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">server_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_external_server_id</span><span class="p">()))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">user_info_url</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">urlencode</span><span class="p">(</span><span class="n">query_params</span><span class="p">),</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">EXTERNAL_AUTHENTICATOR_TIMEOUT</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error fetching user information from external authenticator: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="s2">&quot;Error fetching user information from external authenticator.&quot;</span>
        <span class="p">)</span>

    <span class="n">external_user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExternalUserModel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">auth_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">payload</span> <span class="o">=</span> <span class="n">auth_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Error decoding JSON response from external authenticator.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
                <span class="s2">&quot;Unknown external authenticator error&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">external_user</span> <span class="o">=</span> <span class="n">ExternalUserModel</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Error parsing user information from external &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;authenticator: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="k">pass</span>

    <span class="k">elif</span> <span class="n">auth_response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">401</span><span class="p">,</span> <span class="mi">403</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="s2">&quot;Not authorized to access this server.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">auth_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="s2">&quot;External authenticator did not recognize this server.&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error fetching user information from external authenticator. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Status code: </span><span class="si">{</span><span class="n">auth_response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Response: </span><span class="si">{</span><span class="n">auth_response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="s2">&quot;Error fetching user information from external authenticator. &quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">external_user</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="s2">&quot;Unknown external authenticator error&quot;</span><span class="p">)</span>

    <span class="c1"># With an external user object, we can now authenticate the user against</span>
    <span class="c1"># the ZenML server</span>

    <span class="c1"># Check if the external user already exists in the ZenML server database</span>
    <span class="c1"># If not, create a new user. If yes, update the existing user.</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UserResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">external_user</span><span class="o">.</span><span class="n">is_service_account</span><span class="p">:</span>
        <span class="n">users</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">list_users</span><span class="p">(</span>
            <span class="n">UserFilter</span><span class="p">(</span>
                <span class="n">external_user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">users</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Found user with ID </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> matching the external user ID &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;User with external user ID </span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span>
            <span class="p">)</span>
            <span class="c1"># Try finding a user or service account with the same username.</span>
            <span class="c1"># This is to handle migration of accounts from ZenML OSS to ZenML</span>
            <span class="c1"># Pro: if the server contains an internal account with the same</span>
            <span class="c1"># username as the ZenML Pro account, we adopt the existing</span>
            <span class="c1"># user/service account.</span>
            <span class="n">users</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">list_users</span><span class="p">(</span>
                <span class="n">UserFilter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">users</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
                <span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Adopting existing user with username </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> and &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;internal ID </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> as external user with ID &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">service_accounts</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">list_service_accounts</span><span class="p">(</span>
            <span class="n">ServiceAccountFilter</span><span class="p">(</span>
                <span class="n">external_user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">service_accounts</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">service_account</span> <span class="o">=</span> <span class="n">service_accounts</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Found service account with ID </span><span class="si">{</span><span class="n">service_account</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> matching &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;the external user ID </span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">service_account</span><span class="o">.</span><span class="n">to_user_model</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Service account with external user ID </span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;not found.&quot;</span>
            <span class="p">)</span>
            <span class="c1"># Try finding a service account with the same username.</span>
            <span class="c1"># This is to handle migration of accounts from ZenML OSS to ZenML</span>
            <span class="c1"># Pro: if the server contains an internal service account with the</span>
            <span class="c1"># same username as the ZenML Pro service account, we adopt the</span>
            <span class="c1"># existing service account.</span>
            <span class="n">service_accounts</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">list_service_accounts</span><span class="p">(</span>
                <span class="n">ServiceAccountFilter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">service_accounts</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
                <span class="n">service_account</span> <span class="o">=</span> <span class="n">service_accounts</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Adopting existing service account with username &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">service_account</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> and internal ID &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">service_account</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> as external service account with &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;ID </span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
                <span class="n">user</span> <span class="o">=</span> <span class="n">service_account</span><span class="o">.</span><span class="n">to_user_model</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="o">.</span><span class="n">is_service_account</span><span class="p">:</span>
            <span class="c1"># Update the user information</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">update_user</span><span class="p">(</span>
                <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">user_update</span><span class="o">=</span><span class="n">UserUpdate</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                    <span class="n">full_name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">email_opted_in</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">email</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                    <span class="n">is_admin</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span>
                    <span class="n">avatar_url</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">avatar_url</span><span class="p">,</span>
                    <span class="n">external_user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Update the service account information</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">update_service_account</span><span class="p">(</span>
                <span class="n">service_account_name_or_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">service_account_update</span><span class="o">=</span><span class="n">ServiceAccountInternalUpdate</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                    <span class="n">full_name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">external_user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">avatar_url</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">avatar_url</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">to_user_model</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;External account with ID </span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> or name &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2"> not found in ZenML server database. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Creating a new account.&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">external_user</span><span class="o">.</span><span class="n">is_service_account</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">create_service_account</span><span class="p">(</span>
                <span class="n">service_account</span><span class="o">=</span><span class="n">ServiceAccountInternalRequest</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                    <span class="n">full_name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">external_user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">avatar_url</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">avatar_url</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">to_user_model</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span>
                <span class="n">UserRequest</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                    <span class="n">full_name</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">external_user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">email_opted_in</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">email</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                    <span class="n">is_admin</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span>
                    <span class="n">avatar_url</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">avatar_url</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">with</span> <span class="n">AnalyticsContext</span><span class="p">()</span> <span class="k">as</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">context</span><span class="o">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span>
            <span class="n">context</span><span class="o">.</span><span class="n">identify</span><span class="p">(</span>
                <span class="n">traits</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">external_user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;external_auth&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="n">context</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">external_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">previous_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="c1"># This is the best spot to update the onboarding state to mark the</span>
    <span class="c1"># &quot;zenml login&quot; step as completed for ZenML Pro servers, because the</span>
    <span class="c1"># user has just successfully logged in. However, we need to differentiate</span>
    <span class="c1"># between web clients (i.e. the dashboard) and CLI clients (i.e. the</span>
    <span class="c1"># zenml CLI).</span>
    <span class="n">user_agent</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;zenml/&quot;</span> <span class="ow">in</span> <span class="n">user_agent</span><span class="p">:</span>
        <span class="n">store</span><span class="o">.</span><span class="n">update_onboarding_state</span><span class="p">(</span>
            <span class="n">completed_steps</span><span class="o">=</span><span class="p">{</span>
                <span class="n">OnboardingStep</span><span class="o">.</span><span class="n">DEVICE_VERIFIED</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">AuthContext</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.authentication_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">authentication_provider</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">AuthContext</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Returns the authentication provider.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication provider.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the authentication scheme is not supported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">authentication_provider</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">AuthContext</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the authentication provider.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authentication provider.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the authentication scheme is not supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">auth_scheme</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">auth_scheme</span>
    <span class="k">if</span> <span class="n">auth_scheme</span> <span class="o">==</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">no_authentication</span>
    <span class="k">elif</span> <span class="n">auth_scheme</span> <span class="o">==</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">HTTP_BASIC</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http_authentication</span>
    <span class="k">elif</span> <span class="n">auth_scheme</span> <span class="o">==</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">OAUTH2_PASSWORD_BEARER</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">oauth2_authentication</span>
    <span class="k">elif</span> <span class="n">auth_scheme</span> <span class="o">==</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">oauth2_authentication</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown authentication scheme: </span><span class="si">{</span><span class="n">auth_scheme</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.generate_access_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_access_token</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Response</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Request</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OAuthDeviceInternalResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">APIKeyInternalResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">expires_in</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">schedule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pipeline_run_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">deployment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OAuthTokenResponse</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Generates an access token for the given user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>response</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="fastapi.Response">Response</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI response object. If passed, the access
token will also be set as an HTTP only cookie in the response.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="starlette.requests.Request">Request</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI request object. Used to determine the request
origin and to decide whether to use cross-site security measures for
the access token cookie.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>device</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="OAuthDeviceInternalResponse (zenml.models.OAuthDeviceInternalResponse)" href="core-models.html#zenml.models.OAuthDeviceInternalResponse">OAuthDeviceInternalResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device used for authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="APIKeyInternalResponse (zenml.models.APIKeyInternalResponse)" href="core-models.html#zenml.models.APIKeyInternalResponse">APIKeyInternalResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service account API key used for authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expires_in</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of seconds until the token expires. If not set,
the default value is determined automatically based on the server
configuration and type of token. If set to 0, the token will not
expire.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schedule_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the schedule to scope the token to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_run_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the pipeline run to scope the token to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the deployment to scope the token to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthTokenResponse (zenml.models.OAuthTokenResponse)" href="core-models.html#zenml.models.OAuthTokenResponse">OAuthTokenResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An authentication response with an access token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_access_token</span><span class="p">(</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">response</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Response</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Request</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OAuthDeviceInternalResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">APIKeyInternalResponse</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">expires_in</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">schedule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pipeline_run_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OAuthTokenResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates an access token for the given user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_id: The ID of the user.</span>
<span class="sd">        response: The FastAPI response object. If passed, the access</span>
<span class="sd">            token will also be set as an HTTP only cookie in the response.</span>
<span class="sd">        request: The FastAPI request object. Used to determine the request</span>
<span class="sd">            origin and to decide whether to use cross-site security measures for</span>
<span class="sd">            the access token cookie.</span>
<span class="sd">        device: The device used for authentication.</span>
<span class="sd">        api_key: The service account API key used for authentication.</span>
<span class="sd">        expires_in: The number of seconds until the token expires. If not set,</span>
<span class="sd">            the default value is determined automatically based on the server</span>
<span class="sd">            configuration and type of token. If set to 0, the token will not</span>
<span class="sd">            expire.</span>
<span class="sd">        schedule_id: The ID of the schedule to scope the token to.</span>
<span class="sd">        pipeline_run_id: The ID of the pipeline run to scope the token to.</span>
<span class="sd">        deployment_id: The ID of the deployment to scope the token to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An authentication response with an access token.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="c1"># If the expiration time is not supplied, the JWT tokens are set to expire</span>
    <span class="c1"># according to the values configured in the server config. Device tokens are</span>
    <span class="c1"># handled separately from regular user tokens.</span>
    <span class="n">expires</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">expires_in</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">expires_in</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">expires_in</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">expires</span> <span class="o">=</span> <span class="n">utc_now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">expires_in</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">device</span><span class="p">:</span>
        <span class="c1"># If a device was used for authentication, the token will expire</span>
        <span class="c1"># at the same time as the device.</span>
        <span class="n">expires</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">expires</span>
        <span class="k">if</span> <span class="n">expires</span><span class="p">:</span>
            <span class="n">expires_in</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">expires</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">-</span> <span class="n">utc_now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()),</span>
                <span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">jwt_token_expire_minutes</span><span class="p">:</span>
        <span class="n">expires</span> <span class="o">=</span> <span class="n">utc_now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span>
            <span class="n">minutes</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_expire_minutes</span>
        <span class="p">)</span>
        <span class="n">expires_in</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">jwt_token_expire_minutes</span> <span class="o">*</span> <span class="mi">60</span>

    <span class="c1"># Figure out if this is a same-site request or a cross-site request</span>
    <span class="n">same_site</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">response</span> <span class="ow">and</span> <span class="n">request</span><span class="p">:</span>
        <span class="c1"># Extract the origin domain from the request; use the referer as a</span>
        <span class="c1"># fallback</span>
        <span class="n">origin_domain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;origin&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;referer&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">origin</span><span class="p">:</span>
            <span class="c1"># If the request origin is known, we use it to determine whether</span>
            <span class="c1"># this is a cross-site request and enable additional security</span>
            <span class="c1"># measures.</span>
            <span class="n">origin_domain</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">netloc</span>

        <span class="n">server_domain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_cookie_domain</span>
        <span class="c1"># If the server&#39;s cookie domain is not explicitly set in the</span>
        <span class="c1"># server&#39;s configuration, we use other sources to determine it:</span>
        <span class="c1">#</span>
        <span class="c1"># 1. the server&#39;s root URL, if set in the server&#39;s configuration</span>
        <span class="c1"># 2. the X-Forwarded-Host header, if set by the reverse proxy</span>
        <span class="c1"># 3. the request URL, if all else fails</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">server_domain</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">server_url</span><span class="p">:</span>
            <span class="n">server_domain</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">server_url</span><span class="p">)</span><span class="o">.</span><span class="n">netloc</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">server_domain</span><span class="p">:</span>
            <span class="n">server_domain</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;x-forwarded-host&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">netloc</span>
            <span class="p">)</span>

        <span class="c1"># Same-site requests can come from the same domain or from a</span>
        <span class="c1"># subdomain of the domain used to issue cookies.</span>
        <span class="k">if</span> <span class="n">origin_domain</span> <span class="ow">and</span> <span class="n">server_domain</span><span class="p">:</span>
            <span class="n">same_site</span> <span class="o">=</span> <span class="n">is_same_or_subdomain</span><span class="p">(</span><span class="n">origin_domain</span><span class="p">,</span> <span class="n">server_domain</span><span class="p">)</span>

    <span class="n">csrf_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">session_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">same_site</span><span class="p">:</span>
        <span class="c1"># If responding to a cross-site login request, we need to generate and</span>
        <span class="c1"># sign a CSRF token associated with the authentication session.</span>
        <span class="n">session_id</span> <span class="o">=</span> <span class="n">uuid4</span><span class="p">()</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">CSRFToken</span><span class="p">(</span><span class="n">session_id</span><span class="o">=</span><span class="n">session_id</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

    <span class="n">access_token</span> <span class="o">=</span> <span class="n">JWTToken</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">device_id</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="n">device</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">api_key_id</span><span class="o">=</span><span class="n">api_key</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="n">api_key</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schedule_id</span><span class="o">=</span><span class="n">schedule_id</span><span class="p">,</span>
        <span class="n">pipeline_run_id</span><span class="o">=</span><span class="n">pipeline_run_id</span><span class="p">,</span>
        <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="c1"># Set the session ID if this is a cross-site request</span>
        <span class="n">session_id</span><span class="o">=</span><span class="n">session_id</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">expires</span><span class="o">=</span><span class="n">expires</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
        <span class="c1"># Also set the access token as an HTTP only cookie in the response</span>
        <span class="n">response</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get_auth_cookie_name</span><span class="p">(),</span>
            <span class="n">value</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
            <span class="n">httponly</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">secure</span><span class="o">=</span><span class="ow">not</span> <span class="n">same_site</span><span class="p">,</span>
            <span class="n">samesite</span><span class="o">=</span><span class="s2">&quot;lax&quot;</span> <span class="k">if</span> <span class="n">same_site</span> <span class="k">else</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
            <span class="n">max_age</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_expire_minutes</span> <span class="o">*</span> <span class="mi">60</span>
            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">jwt_token_expire_minutes</span>
            <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">domain</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">auth_cookie_domain</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">OAuthTokenResponse</span><span class="p">(</span>
        <span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
        <span class="n">expires_in</span><span class="o">=</span><span class="n">expires_in</span><span class="p">,</span>
        <span class="n">token_type</span><span class="o">=</span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
        <span class="n">csrf_token</span><span class="o">=</span><span class="n">csrf_token</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.generate_download_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_download_token</span><span class="p">(</span><span class="n">download_type</span><span class="p">:</span> <span class="n">DownloadType</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">extra_claims</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">expires_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Generate a JWT token for downloading content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>download_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DownloadType (zenml.enums.DownloadType)" href="core-enums.html#zenml.enums.DownloadType">DownloadType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of content being downloaded.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the resource to download.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>extra_claims</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional extra claims to include in the token.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expires_in_seconds</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token expiration time in seconds.</p>
              </div>
            </td>
            <td>
                  <code>30</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JWT token for the download.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_download_token</span><span class="p">(</span>
    <span class="n">download_type</span><span class="p">:</span> <span class="n">DownloadType</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">extra_claims</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">expires_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a JWT token for downloading content.</span>

<span class="sd">    Args:</span>
<span class="sd">        download_type: The type of content being downloaded.</span>
<span class="sd">        resource_id: The ID of the resource to download.</span>
<span class="sd">        extra_claims: Optional extra claims to include in the token.</span>
<span class="sd">        expires_in_seconds: Token expiration time in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The JWT token for the download.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;exp&quot;</span><span class="p">:</span> <span class="n">utc_now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">expires_in_seconds</span><span class="p">),</span>
        <span class="s2">&quot;download_type&quot;</span><span class="p">:</span> <span class="n">download_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource_id</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">extra_claims</span><span class="p">:</span>
        <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra_claims</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">payload</span><span class="p">,</span>
        <span class="n">key</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_secret_key</span><span class="p">,</span>
        <span class="n">algorithm</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_algorithm</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.get_authorization_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_authorization_provider</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">AuthContext</span><span class="p">]]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Fetches the async authorization provider.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The async authorization provider.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_authorization_provider</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">AuthContext</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetches the async authorization provider.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The async authorization provider.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="n">authentication_provider</span><span class="p">()</span>
    <span class="c1"># Create a custom thread pool limiter with a limit of 1 thread for all</span>
    <span class="c1"># auth calls</span>
    <span class="n">thread_limiter</span> <span class="o">=</span> <span class="n">CapacityLimiter</span><span class="p">(</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">auth_thread_pool_size</span><span class="p">)</span>

    <span class="nd">@wraps</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_authorize_fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_system_metrics_log_str</span>

        <span class="n">request_context</span> <span class="o">=</span> <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">current_request</span>

        <span class="nd">@wraps</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">sync_authorize_fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">request_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] API STATS - &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;AUTHORIZING &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">auth_context</span> <span class="o">=</span> <span class="n">provider</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">request_context</span><span class="o">.</span><span class="n">auth_context</span> <span class="o">=</span> <span class="n">auth_context</span>
                <span class="k">return</span> <span class="n">auth_context</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] API STATS - &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;AUTHORIZED &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">sync_authorize_fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">to_thread</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">limiter</span><span class="o">=</span><span class="n">thread_limiter</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">async_authorize_fn</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.http_authentication" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">http_authentication</span><span class="p">(</span><span class="n">credentials</span><span class="p">:</span> <span class="n">HTTPBasicCredentials</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">HTTPBasic</span><span class="p">()))</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Authenticates any request to the ZenML Server with basic HTTP authentication.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>credentials</code>
            </td>
            <td>
                  <code><span title="fastapi.security.HTTPBasicCredentials">HTTPBasicCredentials</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTP basic auth credentials passed to the request.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<span title="fastapi.security.HTTPBasic">HTTPBasic</span>())</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context reflecting the authenticated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <h6 id="zenml.zen_server.auth.http_authentication--noqa-dar401">noqa: DAR401</h6>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">http_authentication</span><span class="p">(</span>
    <span class="n">credentials</span><span class="p">:</span> <span class="n">HTTPBasicCredentials</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">HTTPBasic</span><span class="p">()),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Authenticates any request to the ZenML Server with basic HTTP authentication.</span>

<span class="sd">    Args:</span>
<span class="sd">        credentials: HTTP basic auth credentials passed to the request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authentication context reflecting the authenticated user.</span>

<span class="sd">    # noqa: DAR401</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">authenticate_credentials</span><span class="p">(</span>
            <span class="n">user_name_or_id</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">password</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">CredentialsNotValid</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># We want to be very explicit here and return a CredentialsNotValid</span>
        <span class="c1"># exception encoded as a 401 Unauthorized error encoded, so that the</span>
        <span class="c1"># client can distinguish between a 401 error due to invalid credentials</span>
        <span class="c1"># and other 401 errors and handle them accordingly by throwing away the</span>
        <span class="c1"># current access token and re-authenticating.</span>
        <span class="k">raise</span> <span class="n">http_exception_from_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.no_authentication" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">no_authentication</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Doesn't authenticate requests to the ZenML server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context reflecting the default user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">no_authentication</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Doesn&#39;t authenticate requests to the ZenML server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authentication context reflecting the default user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">authenticate_credentials</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="o">=</span><span class="n">DEFAULT_USERNAME</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.oauth2_authentication" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">oauth2_authentication</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">CookieOAuth2TokenBearer</span><span class="p">(</span><span class="n">tokenUrl</span><span class="o">=</span><span class="p">(</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">root_url_path</span> <span class="o">+</span> <span class="n">API</span> <span class="o">+</span> <span class="n">VERSION_1</span> <span class="o">+</span> <span class="n">LOGIN</span><span class="p">))))</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Authenticates any request to the ZenML server with OAuth2 JWT tokens.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JWT bearer token to be authenticated.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="CookieOAuth2TokenBearer (zenml.zen_server.auth.CookieOAuth2TokenBearer)" href="#zenml.zen_server.auth.CookieOAuth2TokenBearer">CookieOAuth2TokenBearer</a>(tokenUrl=<span title="root_url_path">root_url_path</span> + <a class="autorefs autorefs-internal" title="API = '/api'

  
      module-attribute
   (zenml.constants.API)" href="core-constants.html#zenml.constants.API">API</a> + <a class="autorefs autorefs-internal" title="VERSION_1 = '/v1'

  
      module-attribute
   (zenml.constants.VERSION_1)" href="core-constants.html#zenml.constants.VERSION_1">VERSION_1</a> + <a class="autorefs autorefs-internal" title="LOGIN = '/login'

  
      module-attribute
   (zenml.constants.LOGIN)" href="core-constants.html#zenml.constants.LOGIN">LOGIN</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context reflecting the authenticated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <h6 id="zenml.zen_server.auth.oauth2_authentication--noqa-dar401">noqa: DAR401</h6>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">oauth2_authentication</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">CookieOAuth2TokenBearer</span><span class="p">(</span>
            <span class="n">tokenUrl</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">root_url_path</span> <span class="o">+</span> <span class="n">API</span> <span class="o">+</span> <span class="n">VERSION_1</span> <span class="o">+</span> <span class="n">LOGIN</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuthContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Authenticates any request to the ZenML server with OAuth2 JWT tokens.</span>

<span class="sd">    Args:</span>
<span class="sd">        token: The JWT bearer token to be authenticated.</span>
<span class="sd">        request: The FastAPI request object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authentication context reflecting the authenticated user.</span>

<span class="sd">    # noqa: DAR401</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-CSRF-Token&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">authenticate_credentials</span><span class="p">(</span>
            <span class="n">access_token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">csrf_token</span><span class="o">=</span><span class="n">csrf_token</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">CredentialsNotValid</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># We want to be very explicit here and return a CredentialsNotValid</span>
        <span class="c1"># exception encoded as a 401 Unauthorized error encoded, so that the</span>
        <span class="c1"># client can distinguish between a 401 error due to invalid credentials</span>
        <span class="c1"># and other 401 errors and handle them accordingly by throwing away the</span>
        <span class="c1"># current access token and re-authenticating.</span>
        <span class="k">raise</span> <span class="n">http_exception_from_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">auth_context</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.auth.verify_download_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_download_token</span><span class="p">(</span><span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">download_type</span><span class="p">:</span> <span class="n">DownloadType</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">extra_claims</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Verify a JWT token for downloading content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JWT token to verify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DownloadType (zenml.enums.DownloadType)" href="core-enums.html#zenml.enums.DownloadType">DownloadType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expected download type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expected resource ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>extra_claims</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional extra claims to verify in the token.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CredentialsNotValid(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.CredentialsNotValid)" href="core-exceptions.html#zenml.exceptions.CredentialsNotValid">CredentialsNotValid</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the token is invalid or doesn't match expected values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/auth.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_download_token</span><span class="p">(</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">download_type</span><span class="p">:</span> <span class="n">DownloadType</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">extra_claims</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify a JWT token for downloading content.</span>

<span class="sd">    Args:</span>
<span class="sd">        token: The JWT token to verify.</span>
<span class="sd">        download_type: The expected download type.</span>
<span class="sd">        resource_id: The expected resource ID.</span>
<span class="sd">        extra_claims: Optional extra claims to verify in the token.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CredentialsNotValid: If the token is invalid or doesn&#39;t match expected values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">claims</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
            <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
                <span class="n">token</span><span class="p">,</span>
                <span class="n">config</span><span class="o">.</span><span class="n">jwt_secret_key</span><span class="p">,</span>
                <span class="n">algorithms</span><span class="o">=</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_algorithm</span><span class="p">],</span>
            <span class="p">),</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">PyJWTError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid JWT token: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">if</span> <span class="n">claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;download_type&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">download_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="s2">&quot;Invalid download type&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;resource_id&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource_id</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="s2">&quot;Invalid resource ID&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">extra_claims</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">expected_value</span> <span class="ow">in</span> <span class="n">extra_claims</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">claims</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="n">expected_value</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.cache" class="doc doc-heading">
            <code>cache</code>


</h4>

    <div class="doc doc-contents ">

        <p>Memory cache module for the ZenML server.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.cache-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.cache.MemoryCache" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">MemoryCache</span><span class="p">(</span><span class="n">max_capacity</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">default_expiry</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>Simple in-memory cache with expiry and capacity management.</p>
<p>This cache is thread-safe and can be used in both synchronous and
asynchronous contexts. It uses a simple LRU (Least Recently Used) eviction
strategy to manage the cache size.</p>
<p>Each cache entry has a key, value, timestamp, and expiry. The cache
automatically removes expired entries and evicts the oldest entry when
the cache reaches its maximum capacity.</p>
<p>Usage Example:</p>
<pre><code>cache = MemoryCache()
uuid_key = UUID("12345678123456781234567812345678")

if not cache.get(uuid_key):
    # Get the value from the database or other source
    value = get_value_from_database()
    cache.set(uuid_key, value, expiry=60)
</code></pre>
<p>Usage Example with decorator:</p>
<pre><code>@cache_result(expiry=60)
def get_cached_value(key: UUID) -&gt; Any:
    return get_value_from_database(key)

uuid_key = UUID("12345678123456781234567812345678")

value = get_cached_value(uuid_key)
</code></pre>

        <p>Initialize the cache with a maximum capacity and default expiry time.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>max_capacity</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of entries the cache can hold.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_expiry</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default expiry time in seconds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/cache.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_capacity</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">default_expiry</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the cache with a maximum capacity and default expiry time.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_capacity: The maximum number of entries the cache can hold.</span>
<span class="sd">        default_expiry: The default expiry time in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span> <span class="n">OrderedDictType</span><span class="p">[</span><span class="n">UUID</span><span class="p">,</span> <span class="n">MemoryCacheEntry</span><span class="p">]</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_capacity</span> <span class="o">=</span> <span class="n">max_capacity</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_expiry</span> <span class="o">=</span> <span class="n">default_expiry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h7 id="zenml.zen_server.cache.MemoryCache-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cache.MemoryCache.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Retrieve value if it's still valid; otherwise, return None.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The key to retrieve the value for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value if it's still valid; otherwise, None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve value if it&#39;s still valid; otherwise, return None.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The key to retrieve the value for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The value if it&#39;s still valid; otherwise, None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_internal</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cache.MemoryCache.set" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">set</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">expiry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Insert value into cache with optional custom expiry time in seconds.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The key to insert the value with.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to insert into the cache.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expiry</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expiry time in seconds. If None, uses the default expiry.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">expiry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Insert value into cache with optional custom expiry time in seconds.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The key to insert the value with.</span>
<span class="sd">        value: The value to insert into the cache.</span>
<span class="sd">        expiry: The expiry time in seconds. If None, uses the default expiry.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">MemoryCacheEntry</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">expiry</span><span class="o">=</span><span class="n">expiry</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_expiry</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.cache.MemoryCacheEntry" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">MemoryCacheEntry</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">expiry</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>Simple class to hold cache entry data.</p>

        <p>Initialize a cache entry with value and expiry time.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to store in the cache.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expiry</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expiry time in seconds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/cache.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">expiry</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a cache entry with value and expiry time.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The value to store in the cache.</span>
<span class="sd">        expiry: The expiry time in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">expiry</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">expiry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">





<h7 id="zenml.zen_server.cache.MemoryCacheEntry-attributes">Attributes</h7>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.cache.MemoryCacheEntry.expired" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">expired</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Check if the cache entry has expired.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the cache entry has expired; otherwise, False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>


<h7 id="zenml.zen_server.cache.MemoryCacheEntry-functions">Functions</h7>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.cache-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.cache.cache_result" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cache_result</span><span class="p">(</span><span class="n">expiry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">F</span><span class="p">],</span> <span class="n">F</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>A decorator to cache the result of a function based on a UUID key argument.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>expiry</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Custom time in seconds for the cache entry to expire. If None,
uses the default expiry time.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.cache.F">F</span>], <span title="zenml.zen_server.cache.F">F</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A decorator that wraps a function, caching its results based on a UUID</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.cache.F">F</span>], <span title="zenml.zen_server.cache.F">F</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>key.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cache_result</span><span class="p">(</span>
    <span class="n">expiry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">F</span><span class="p">],</span> <span class="n">F</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A decorator to cache the result of a function based on a UUID key argument.</span>

<span class="sd">    Args:</span>
<span class="sd">        expiry: Custom time in seconds for the cache entry to expire. If None,</span>
<span class="sd">            uses the default expiry time.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A decorator that wraps a function, caching its results based on a UUID</span>
<span class="sd">        key.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">F</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">F</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The actual decorator that wraps the function with caching logic.</span>

<span class="sd">        Args:</span>
<span class="sd">            func: The function to wrap.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The wrapped function with caching logic.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;The wrapped function with caching logic.</span>

<span class="sd">            Args:</span>
<span class="sd">                key: The key to use for caching.</span>

<span class="sd">            Returns:</span>
<span class="sd">                The result of the original function, either from cache or</span>
<span class="sd">                freshly computed.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">memcache</span>

            <span class="n">cache</span> <span class="o">=</span> <span class="n">memcache</span><span class="p">()</span>

            <span class="c1"># Attempt to retrieve the result from cache</span>
            <span class="n">cached_value</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cached_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Memory cache hit for key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> and func: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">cached_value</span>

            <span class="c1"># Call the original function and cache its result</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">expiry</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="k">return</span> <span class="n">wrapper</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.cloud_utils" class="doc doc-heading">
            <code>cloud_utils</code>


</h4>

    <div class="doc doc-contents ">

        <p>Utils concerning anything concerning the cloud control plane backend.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.cloud_utils-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ZenMLCloudConnection</span><span class="p">()</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>Class to use for communication between server and control plane.</p>

        <p>Initialize the RBAC component.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the RBAC component.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">ServerProConfiguration</span><span class="o">.</span><span class="n">get_server_config</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_token_expires_at</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">





<h7 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection-attributes">Attributes</h7>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection.session" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">session</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Authenticate to the ZenML Pro Management Plane.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.Session">Session</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A requests session with the authentication token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>


<h7 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection.delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Send a DELETE request using the active session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The endpoint to send the request to. This will be appended
to the base URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a DELETE request using the active session.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint: The endpoint to send the request to. This will be appended</span>
<span class="sd">            to the base URL.</span>
<span class="sd">        params: Parameters to include in the request.</span>
<span class="sd">        data: Data to include in the request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;DELETE&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Send a GET request using the active session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The endpoint to send the request to. This will be appended
to the base URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters to include in the request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a GET request using the active session.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint: The endpoint to send the request to. This will be appended</span>
<span class="sd">            to the base URL.</span>
<span class="sd">        params: Parameters to include in the request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection.patch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">patch</span><span class="p">(</span><span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Send a PATCH request using the active session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The endpoint to send the request to. This will be appended
to the base URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">patch</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a PATCH request using the active session.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint: The endpoint to send the request to. This will be appended</span>
<span class="sd">            to the base URL.</span>
<span class="sd">        params: Parameters to include in the request.</span>
<span class="sd">        data: Data to include in the request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;PATCH&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection.post" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Send a POST request using the active session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The endpoint to send the request to. This will be appended
to the base URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">post</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a POST request using the active session.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint: The endpoint to send the request to. This will be appended</span>
<span class="sd">            to the base URL.</span>
<span class="sd">        params: Parameters to include in the request.</span>
<span class="sd">        data: Data to include in the request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.cloud_utils.ZenMLCloudConnection.request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Send a request using the active session.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTTP method to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The endpoint to send the request to. This will be appended
to the base URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameters to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data to include in the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SubscriptionUpgradeRequiredError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.SubscriptionUpgradeRequiredError)" href="core-exceptions.html#zenml.exceptions.SubscriptionUpgradeRequiredError">SubscriptionUpgradeRequiredError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the current subscription tier
is insufficient for the attempted operation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request failed with a 403 status code.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request failed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a request using the active session.</span>

<span class="sd">    Args:</span>
<span class="sd">        method: The HTTP method to use.</span>
<span class="sd">        endpoint: The endpoint to send the request to. This will be appended</span>
<span class="sd">            to the base URL.</span>
<span class="sd">        params: Parameters to include in the request.</span>
<span class="sd">        data: Data to include in the request.</span>

<span class="sd">    Raises:</span>
<span class="sd">        SubscriptionUpgradeRequiredError: If the current subscription tier</span>
<span class="sd">            is insufficient for the attempted operation.</span>
<span class="sd">        IllegalOperationError: If the request failed with a 403 status code.</span>
<span class="sd">        RuntimeError: If the request failed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_current_request_context</span>

    <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">api_url</span> <span class="o">+</span> <span class="n">endpoint</span>

    <span class="n">log_request_id</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">request_context</span> <span class="o">=</span> <span class="n">get_current_request_context</span><span class="p">()</span>
        <span class="n">log_request_id</span> <span class="o">=</span> <span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] RBAC STATS - </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2"> started </span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="n">status_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">http_timeout</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
            <span class="c1"># Refresh the auth token and try again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reset_login</span><span class="p">()</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">http_timeout</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">status_code</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">402</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SubscriptionUpgradeRequiredError</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed while trying to contact the central zenml pro &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;service: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] RBAC STATS - &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2"> completed in &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">duration</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms </span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.cloud_utils-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.cloud_utils.cloud_connection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cloud_connection</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ZenMLCloudConnection</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the initialized cloud connection.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ZenMLCloudConnection() (zenml.zen_server.cloud_utils.ZenMLCloudConnection)" href="#zenml.zen_server.cloud_utils.ZenMLCloudConnection">ZenMLCloudConnection</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The cloud connection.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cloud_connection</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ZenMLCloudConnection</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the initialized cloud connection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The cloud connection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_cloud_connection</span>
    <span class="k">if</span> <span class="n">_cloud_connection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_cloud_connection</span> <span class="o">=</span> <span class="n">ZenMLCloudConnection</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">_cloud_connection</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.cloud_utils.send_pro_workspace_status_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_pro_workspace_status_update</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Send a workspace status update to the Cloud API.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/cloud_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">send_pro_workspace_status_update</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a workspace status update to the Cloud API.&quot;&quot;&quot;</span>
    <span class="n">cloud_connection</span><span class="p">()</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s2">&quot;/workspace_status&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.csrf" class="doc doc-heading">
            <code>csrf</code>


</h4>

    <div class="doc doc-contents ">

        <p>CSRF token utilities module for ZenML server.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.csrf-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.csrf.CSRFToken" class="doc doc-heading">
            <code>CSRFToken</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Pydantic object representing a CSRF token.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.csrf.CSRFToken.session_id">session_id</span></code></td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the authenticated session.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">








<h7 id="zenml.zen_server.csrf.CSRFToken-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.csrf.CSRFToken.decode_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decode_token</span><span class="p">(</span><span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CSRFToken</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Decodes a CSRF token.</p>
<p>Decodes a CSRF access token and returns a <code>CSRFToken</code> object with the
information retrieved from its contents.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The encoded CSRF token.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CSRFToken (zenml.zen_server.csrf.CSRFToken)" href="#zenml.zen_server.csrf.CSRFToken">CSRFToken</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The decoded CSRF token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CredentialsNotValid(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.CredentialsNotValid)" href="core-exceptions.html#zenml.exceptions.CredentialsNotValid">CredentialsNotValid</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the token is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/csrf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">decode_token</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CSRFToken&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decodes a CSRF token.</span>

<span class="sd">    Decodes a CSRF access token and returns a `CSRFToken` object with the</span>
<span class="sd">    information retrieved from its contents.</span>

<span class="sd">    Args:</span>
<span class="sd">        token: The encoded CSRF token.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The decoded CSRF token.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CredentialsNotValid: If the token is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">itsdangerous</span><span class="w"> </span><span class="kn">import</span> <span class="n">BadData</span><span class="p">,</span> <span class="n">BadSignature</span><span class="p">,</span> <span class="n">URLSafeSerializer</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="n">serializer</span> <span class="o">=</span> <span class="n">URLSafeSerializer</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_secret_key</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Decode and verify the token</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadSignature</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
            <span class="s2">&quot;Invalid CSRF token: signature mismatch&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
    <span class="k">except</span> <span class="n">BadData</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="s2">&quot;Invalid CSRF token&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">CSRFToken</span><span class="p">(</span><span class="n">session_id</span><span class="o">=</span><span class="n">UUID</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
            <span class="s2">&quot;Invalid CSRF token: the session ID is not a valid UUID&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.csrf.CSRFToken.encode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">encode</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a CSRF token.</p>
<p>Encodes, signs and returns a CSRF access token.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generated CSRF token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/csrf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a CSRF token.</span>

<span class="sd">    Encodes, signs and returns a CSRF access token.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The generated CSRF token.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">itsdangerous</span><span class="w"> </span><span class="kn">import</span> <span class="n">URLSafeSerializer</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="n">serializer</span> <span class="o">=</span> <span class="n">URLSafeSerializer</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_secret_key</span><span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session_id</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">token</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.csrf-functions">Functions</h5>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.deploy" class="doc doc-heading">
            <code>deploy</code>


</h4>

    <div class="doc doc-contents ">

        <p>ZenML server deployments.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.deploy-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.deploy.LocalServerDeployer" class="doc doc-heading">
            <code>LocalServerDeployer</code>


</h6>


    <div class="doc doc-contents ">


        <p>Local server deployer singleton.</p>
<p>This class is responsible for managing the various server provider
implementations and for directing server deployment lifecycle requests to
the responsible provider. It acts as a facade built on top of the various
server providers.</p>











  <div class="doc doc-children">








<h7 id="zenml.zen_server.deploy.LocalServerDeployer-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.connect_to_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connect_to_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Connect to the local ZenML server instance.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentError">ServerDeploymentError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the local ZenML server is not running or
is unreachable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">connect_to_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Connect to the local ZenML server instance.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentError: If the local ZenML server is not running or</span>
<span class="sd">            is unreachable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>

    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server is not currently &quot;</span>
            <span class="s2">&quot;running or is unreachable.&quot;</span>
        <span class="p">)</span>

    <span class="n">store_config</span> <span class="o">=</span> <span class="n">RestZenStoreConfiguration</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span> <span class="o">==</span> <span class="n">store_config</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Your client is already connected to the local &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Connecting to the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">store_config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">).&quot;</span>
    <span class="p">)</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">set_store</span><span class="p">(</span><span class="n">store_config</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Connected to the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">store_config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">).&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.deploy_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deploy the local ZenML server or update the existing deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successful. If not supplied, the default timeout value specified
by the provider is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restart</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the existing server deployment will be torn down
and a new server will be deployed.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The local server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deploy_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deploy the local ZenML server or update the existing deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successful. If not supplied, the default timeout value specified</span>
<span class="sd">            by the provider is used.</span>
<span class="sd">        restart: If True, the existing server deployment will be torn down</span>
<span class="sd">            and a new server will be deployed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The local server deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that the local database is always initialized before any local</span>
    <span class="c1"># server is deployed or updated.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialize_local_database</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_server</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">restart</span><span class="o">=</span><span class="n">restart</span>
        <span class="p">)</span>

    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deploying a local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.disconnect_from_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disconnect_from_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Disconnect from the ZenML server instance.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">disconnect_from_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Disconnect from the ZenML server instance.&quot;&quot;&quot;</span>
    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="n">store_cfg</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span>

    <span class="k">if</span> <span class="n">store_cfg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Your client is not currently connected to a ZenML server.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Disconnecting from the local (</span><span class="si">{</span><span class="n">store_cfg</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">) ZenML server.&quot;</span>
    <span class="p">)</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">set_default_store</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Disconnected from the local ZenML server.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.get_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_provider</span><span class="p">(</span><span class="n">provider_type</span><span class="p">:</span> <span class="n">ServerProviderType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseServerProvider</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the server provider associated with a provider type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>provider_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerProviderType (zenml.enums.ServerProviderType)" href="core-enums.html#zenml.enums.ServerProviderType">ServerProviderType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider associated with the provider type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerProviderNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerProviderNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerProviderNotFoundError">ServerProviderNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no provider is registered for the
given provider type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_provider</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">provider_type</span><span class="p">:</span> <span class="n">ServerProviderType</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseServerProvider</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the server provider associated with a provider type.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider_type: The server provider type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The server provider associated with the provider type.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerProviderNotFoundError: If no provider is registered for the</span>
<span class="sd">            given provider type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">provider_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerProviderNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Server provider &#39;</span><span class="si">{</span><span class="n">provider_type</span><span class="si">}</span><span class="s2">&#39; is not registered.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">[</span><span class="n">provider_type</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.get_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the local server deployment.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The local server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError">ServerDeploymentNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no local server deployment is
found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the local server deployment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The local server deployment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentNotFoundError: If no local server deployment is</span>
<span class="sd">            found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_providers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">get_server</span><span class="p">(</span>
                <span class="n">LocalServerDeploymentConfig</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">raise</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span>
        <span class="s2">&quot;No local server deployment was found.&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.get_server_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server_logs</span><span class="p">(</span><span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Retrieve the logs for the local ZenML server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>follow</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, the logs will be streamed as they are written</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tail</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>only retrieve the last NUM lines of log output.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A generator that can be accessed to get the service logs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_server_logs</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the logs for the local ZenML server.</span>

<span class="sd">    Args:</span>
<span class="sd">        follow: if True, the logs will be streamed as they are written</span>
<span class="sd">        tail: only retrieve the last NUM lines of log output.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A generator that can be accessed to get the service logs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>

    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Fetching logs from the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server...&quot;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">get_server_logs</span><span class="p">(</span>
        <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="n">tail</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.initialize_local_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_local_database</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Initialize the local ZenML database.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_local_database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the local ZenML database.&quot;&quot;&quot;</span>
    <span class="n">default_store_cfg</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">get_default_store</span><span class="p">()</span>
    <span class="n">BaseZenStore</span><span class="o">.</span><span class="n">create_store</span><span class="p">(</span><span class="n">default_store_cfg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.is_connected_to_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_connected_to_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Check if the ZenML client is currently connected to the local ZenML server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the ZenML client is connected to the local ZenML server, False</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_connected_to_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the ZenML client is currently connected to the local ZenML server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the ZenML client is connected to the local ZenML server, False</span>
<span class="sd">        otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">server</span><span class="o">.</span><span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.register_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_provider</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseServerProvider</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Register a server provider.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>provider</code>
            </td>
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a provider with the same type is already registered.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">register_provider</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseServerProvider</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a server provider.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider: The server provider to register.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If a provider with the same type is already registered.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Server provider &#39;</span><span class="si">{</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="si">}</span><span class="s2">&#39; is already registered.&quot;</span>
        <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registering server provider &#39;</span><span class="si">{</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">[</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">provider</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.remove_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_server</span><span class="p">(</span><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Tears down and removes all resources and files associated with the local ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successfully torn down. If not supplied, a provider specific
default timeout value is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tears down and removes all resources and files associated with the local ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successfully torn down. If not supplied, a provider specific</span>
<span class="sd">            default timeout value is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_connected_to_server</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disconnect_from_server</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to disconnect from the local server: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tearing down the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span><span class="p">)</span>
    <span class="n">provider</span><span class="o">.</span><span class="n">remove_server</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.deploy.LocalServerDeployer.update_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update an existing local ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successful. If not supplied, a default timeout value of 30
seconds is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restart</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the existing server deployment will be torn down
and a new server will be deployed.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update an existing local ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The new server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successful. If not supplied, a default timeout value of 30</span>
<span class="sd">            seconds is used.</span>
<span class="sd">        restart: If True, the existing server deployment will be torn down</span>
<span class="sd">            and a new server will be deployed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated server deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="n">existing_server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>

    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">existing_server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span> <span class="o">!=</span> <span class="n">config</span><span class="o">.</span><span class="n">provider</span> <span class="ow">or</span> <span class="n">restart</span><span class="p">:</span>
        <span class="n">existing_provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span>
            <span class="n">existing_server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span>
        <span class="p">)</span>

        <span class="c1"># Tear down the existing server deployment</span>
        <span class="n">existing_provider</span><span class="o">.</span><span class="n">remove_server</span><span class="p">(</span>
            <span class="n">existing_server</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span>

        <span class="c1"># Deploy a new server with the new provider</span>
        <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">update_server</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.deploy.LocalServerDeployment" class="doc doc-heading">
            <code>LocalServerDeployment</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Server deployment.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.LocalServerDeployment.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment configuration.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.LocalServerDeployment.status">status</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="LocalServerDeploymentStatus (zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus">LocalServerDeploymentStatus</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment status.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">





<h7 id="zenml.zen_server.deploy.LocalServerDeployment-attributes">Attributes</h7>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.deploy.LocalServerDeployment.is_running" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_running</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Check if the server is running.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the server is running.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.deploy.LocalServerDeploymentConfig" class="doc doc-heading">
            <code>LocalServerDeploymentConfig</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Generic local server deployment configuration.</p>
<p>All local server deployment configurations should inherit from this class
and handle extra attributes as provider specific attributes.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.LocalServerDeploymentConfig.provider">provider</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerProviderType (zenml.enums.ServerProviderType)" href="core-enums.html#zenml.enums.ServerProviderType">ServerProviderType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">





<h7 id="zenml.zen_server.deploy.LocalServerDeploymentConfig-attributes">Attributes</h7>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.deploy.LocalServerDeploymentConfig.url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the configured server URL.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configured server URL.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>

<h5 id="zenml.zen_server.deploy-modules">Modules</h5>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.deploy.base_provider" class="doc doc-heading">
            <code>base_provider</code>


</h6>

    <div class="doc doc-contents ">

        <p>Base ZenML server provider class.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.deploy.base_provider-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.base_provider.BaseServerProvider" class="doc doc-heading">
            <code>BaseServerProvider</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base ZenML server provider class.</p>
<p>All ZenML server providers must extend and implement this base class.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.deploy.base_provider.BaseServerProvider-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.base_provider.BaseServerProvider.deploy_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Deploy a new ZenML server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generic server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successful. If not supplied, the default timeout value specified
by the provider is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The newly created server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentExistsError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentExistsError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentExistsError">ServerDeploymentExistsError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a deployment already exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/base_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deploy_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deploy a new ZenML server.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The generic server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successful. If not supplied, the default timeout value specified</span>
<span class="sd">            by the provider is used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The newly created server deployment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentExistsError: If a deployment already exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_service</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentExistsError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server deployment already exists&quot;</span>
        <span class="p">)</span>

    <span class="c1"># convert the generic deployment config to a provider specific</span>
    <span class="c1"># deployment config</span>
    <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_service</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_deployment</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.base_provider.BaseServerProvider.get_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Retrieve information about a ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generic server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError">ServerDeploymentNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a deployment doesn't exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/base_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve information about a ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The generic server deployment configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The server deployment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentNotFoundError: If a deployment doesn&#39;t exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_service</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server deployment was not &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;found&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_deployment</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.base_provider.BaseServerProvider.get_server_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server_logs</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Retrieve the logs of a ZenML server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generic server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>follow</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, the logs will be streamed as they are written</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tail</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>only retrieve the last NUM lines of log output.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A generator that can be accessed to get the service logs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError">ServerDeploymentNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a deployment doesn't exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/base_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_server_logs</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the logs of a ZenML server.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The generic server deployment configuration.</span>
<span class="sd">        follow: if True, the logs will be streamed as they are written</span>
<span class="sd">        tail: only retrieve the last NUM lines of log output.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A generator that can be accessed to get the service logs.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentNotFoundError: If a deployment doesn&#39;t exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_service</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server deployment was not &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;found&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="n">get_logs</span><span class="p">(</span><span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="n">tail</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.base_provider.BaseServerProvider.register_as_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_as_provider</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Register the class as a server provider.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/base_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">register_as_provider</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register the class as a server provider.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.deploy.deployer</span><span class="w"> </span><span class="kn">import</span> <span class="n">LocalServerDeployer</span>

    <span class="n">LocalServerDeployer</span><span class="o">.</span><span class="n">register_provider</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.base_provider.BaseServerProvider.remove_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Tears down and removes all resources and files associated with a ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generic server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the server is
removed. If not supplied, the default timeout value specified
by the provider is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError">ServerDeploymentNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a deployment doesn't exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/base_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tears down and removes all resources and files associated with a ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The generic server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the server is</span>
<span class="sd">            removed. If not supplied, the default timeout value specified</span>
<span class="sd">            by the provider is used.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentNotFoundError: If a deployment doesn&#39;t exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_service</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server deployment was not &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;found&quot;</span>
        <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shutting down the local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_delete_service</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.base_provider.BaseServerProvider.update_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Update an existing ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new generic server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the update is
successful. If not supplied, the default timeout value specified
by the provider is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError">ServerDeploymentNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a deployment doesn't exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/base_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update an existing ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The new generic server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the update is</span>
<span class="sd">            successful. If not supplied, the default timeout value specified</span>
<span class="sd">            by the provider is used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated server deployment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentNotFoundError: If a deployment doesn&#39;t exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_service</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server deployment was not &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;found&quot;</span>
        <span class="p">)</span>

    <span class="c1"># convert the generic deployment config to a provider specific</span>
    <span class="c1"># deployment config</span>
    <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">old_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_deployment_config</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">old_config</span> <span class="o">==</span> <span class="n">config</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server is already &quot;</span>
            <span class="s2">&quot;configured with the same parameters.&quot;</span>
        <span class="p">)</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_service</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating the local </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span><span class="p">)</span>
        <span class="n">service</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_service</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_deployment</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.deploy.base_provider-functions">Functions</h7>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.deploy.daemon" class="doc doc-heading">
            <code>daemon</code>


</h6>

    <div class="doc doc-contents ">

        <p>ZenML Server Local Daemon Deployment.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.deploy.daemon-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.daemon.DaemonServerProvider" class="doc doc-heading">
            <code>DaemonServerProvider</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a></code></p>


        <p>Daemon ZenML server provider.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.deploy.daemon.DaemonServerProvider-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.daemon.DaemonServerProvider.check_local_server_dependencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_local_server_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Check if local server dependencies are installed.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the dependencies are not installed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_local_server_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if local server dependencies are installed.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the dependencies are not installed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Make sure the ZenML Server dependencies are installed</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">fastapi</span>  <span class="c1"># noqa</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>  <span class="c1"># noqa</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">multipart</span>  <span class="c1"># noqa</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>  <span class="c1"># noqa</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="c1"># Unable to import the ZenML Server dependencies.</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The local daemon ZenML server provider is unavailable because the &quot;</span>
            <span class="s2">&quot;ZenML server requirements seems to be unavailable on your machine. &quot;</span>
            <span class="s2">&quot;This is probably because ZenML was installed without the optional &quot;</span>
            <span class="s2">&quot;ZenML Server dependencies. To install the missing dependencies &quot;</span>
            <span class="sa">f</span><span class="s1">&#39;run `pip install &quot;zenml[server]==</span><span class="si">{</span><span class="n">__version__</span><span class="si">}</span><span class="s1">&quot;`.&#39;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<h7 id="zenml.zen_server.deploy.daemon-modules">Modules</h7>

<div class="doc doc-object doc-module">



<h8 id="zenml.zen_server.deploy.daemon.daemon_provider" class="doc doc-heading">
            <code>daemon_provider</code>


</h8>

    <div class="doc doc-contents ">

        <p>Zen Server daemon provider implementation.</p>










  <div class="doc doc-children">







<h9 id="zenml.zen_server.deploy.daemon.daemon_provider-classes">Classes</h9>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.daemon.daemon_provider.DaemonServerProvider" class="doc doc-heading">
            <code>DaemonServerProvider</code>


</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a></code></p>


        <p>Daemon ZenML server provider.</p>











  <div class="doc doc-children">








<h11 id="zenml.zen_server.deploy.daemon.daemon_provider.DaemonServerProvider-functions">Functions</h11>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.daemon.daemon_provider.DaemonServerProvider.check_local_server_dependencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_local_server_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Check if local server dependencies are installed.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the dependencies are not installed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_provider.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_local_server_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if local server dependencies are installed.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the dependencies are not installed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Make sure the ZenML Server dependencies are installed</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">fastapi</span>  <span class="c1"># noqa</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">jwt</span>  <span class="c1"># noqa</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">multipart</span>  <span class="c1"># noqa</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>  <span class="c1"># noqa</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="c1"># Unable to import the ZenML Server dependencies.</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The local daemon ZenML server provider is unavailable because the &quot;</span>
            <span class="s2">&quot;ZenML server requirements seems to be unavailable on your machine. &quot;</span>
            <span class="s2">&quot;This is probably because ZenML was installed without the optional &quot;</span>
            <span class="s2">&quot;ZenML Server dependencies. To install the missing dependencies &quot;</span>
            <span class="sa">f</span><span class="s1">&#39;run `pip install &quot;zenml[server]==</span><span class="si">{</span><span class="n">__version__</span><span class="si">}</span><span class="s1">&quot;`.&#39;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h9 id="zenml.zen_server.deploy.daemon.daemon_provider-functions">Functions</h9>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h8 id="zenml.zen_server.deploy.daemon.daemon_zen_server" class="doc doc-heading">
            <code>daemon_zen_server</code>


</h8>

    <div class="doc doc-contents ">

        <p>Local daemon ZenML server deployment service implementation.</p>










  <div class="doc doc-children">







<h9 id="zenml.zen_server.deploy.daemon.daemon_zen_server-classes">Classes</h9>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig" class="doc doc-heading">
            <code>DaemonServerDeploymentConfig</code>


</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code></p>


        <p>Daemon server deployment configuration.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig.port">port</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The TCP port number where the server is accepting connections.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig.address">address</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The IP address where the server is reachable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig.blocking">blocking</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Run the server in blocking mode instead of using a daemon
process.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">





<h11 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig-attributes">Attributes</h11>

<div class="doc doc-object doc-attribute">



<h12 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig.url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Get the configured server URL.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configured server URL.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">DaemonZenServer</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>

</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LocalDaemonService(**attrs: Any) (zenml.services.LocalDaemonService)" href="core-services.html#zenml.services.LocalDaemonService">LocalDaemonService</a></code></p>


        <p>Service daemon that can be used to start a local daemon ZenML server.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DaemonZenServerConfig(**data: Any) (zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServerConfig)" href="#zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServerConfig">DaemonZenServerConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>service configuration</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.endpoint">endpoint</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalDaemonServiceEndpoint(*args: Any, **kwargs: Any) (zenml.services.LocalDaemonServiceEndpoint)" href="core-services.html#zenml.services.LocalDaemonServiceEndpoint">LocalDaemonServiceEndpoint</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional service endpoint</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/services/service.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the service instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        **attrs: keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h11 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer-functions">Functions</h11>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.config_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">config_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Path to the directory where the local daemon ZenML server files are located.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the local daemon ZenML server runtime directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">config_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Path to the directory where the local daemon ZenML server files are located.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Path to the local daemon ZenML server runtime directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">get_global_config_directory</span><span class="p">(),</span>
        <span class="s2">&quot;zen_server&quot;</span><span class="p">,</span>
        <span class="s2">&quot;daemon&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.get_service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DaemonZenServer</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Load and return the local daemon ZenML server service, if present.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="DaemonZenServer(**attrs: Any) (zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer)" href="#zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer">DaemonZenServer</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The local daemon ZenML server service or None, if the local server</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="DaemonZenServer(**attrs: Any) (zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer)" href="#zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer">DaemonZenServer</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>deployment is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;DaemonZenServer&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load and return the local daemon ZenML server service, if present.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The local daemon ZenML server service or None, if the local server</span>
<span class="sd">        deployment is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_path</span><span class="p">(),</span> <span class="s2">&quot;service.json&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
                <span class="s2">&quot;DaemonZenServer&quot;</span><span class="p">,</span> <span class="n">DaemonZenServer</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.provision" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">provision</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h12>


    <div class="doc doc-contents ">

        <p>Provision the service.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provision the service.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">provision</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h12>


    <div class="doc doc-contents ">

        <p>Run the ZenML Server.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if started with a global configuration that connects to
another ZenML server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the ZenML Server.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if started with a global configuration that connects to</span>
<span class="sd">            another ZenML server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>

    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The ZenML server cannot be started with REST store type.&quot;</span>
        <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Starting ZenML Server as blocking &quot;</span>
        <span class="s2">&quot;process... press CTRL+C once to stop it.&quot;</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">prepare_for_start</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">ZEN_SERVER_ENTRYPOINT</span><span class="p">,</span>
            <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">ip_address</span><span class="p">,</span>
            <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="mi">8000</span><span class="p">,</span>
            <span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
            <span class="n">server_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ZenML Server stopped. Resuming normal execution.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServer.start" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h12>


    <div class="doc doc-contents ">

        <p>Start the service and optionally wait for it to become active.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>amount of time to wait for the service to become active.
If set to 0, the method will return immediately after checking
the service status.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/daemon/daemon_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the service and optionally wait for it to become active.</span>

<span class="sd">    Args:</span>
<span class="sd">        timeout: amount of time to wait for the service to become active.</span>
<span class="sd">            If set to 0, the method will return immediately after checking</span>
<span class="sd">            the service status.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">blocking</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>

        <span class="c1"># In the blocking mode, we need to temporarily set the environment</span>
        <span class="c1"># variables for the running process to make it look like the server</span>
        <span class="c1"># is running in a separate environment (i.e. using a different</span>
        <span class="c1"># global configuration path). This is necessary to avoid polluting</span>
        <span class="c1"># the client environment with the server&#39;s configuration.</span>
        <span class="n">local_stores_path</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">local_stores_path</span>
        <span class="n">GlobalConfiguration</span><span class="o">.</span><span class="n">_reset_instance</span><span class="p">()</span>
        <span class="n">Client</span><span class="o">.</span><span class="n">_reset_instance</span><span class="p">()</span>
        <span class="n">original_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ENV_ZENML_CONFIG_PATH</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER_ALLOW_LOCAL_FILE_ACCESS</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_CONFIG_PATH</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_global_config_path</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_ANALYTICS_OPT_IN</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">gc</span><span class="o">.</span><span class="n">analytics_opt_in</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_USER_ID</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">gc</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
        <span class="c1"># Set the local stores path to the same path used by the client.</span>
        <span class="c1"># This ensures that the server&#39;s default store configuration is</span>
        <span class="c1"># initialized to point at the same local SQLite database as the</span>
        <span class="c1"># client.</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_LOCAL_STORES_PATH</span><span class="p">]</span> <span class="o">=</span> <span class="n">local_stores_path</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER_AUTH_SCHEME</span><span class="p">]</span> <span class="o">=</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="o">.</span><span class="n">value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Restore the original client environment variables</span>
            <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER_ALLOW_LOCAL_FILE_ACCESS</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">original_config_path</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_CONFIG_PATH</span><span class="p">]</span> <span class="o">=</span> <span class="n">original_config_path</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_CONFIG_PATH</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_LOCAL_STORES_PATH</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER_AUTH_SCHEME</span><span class="p">]</span>
            <span class="n">GlobalConfiguration</span><span class="o">.</span><span class="n">_reset_instance</span><span class="p">()</span>
            <span class="n">Client</span><span class="o">.</span><span class="n">_reset_instance</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServerConfig" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">DaemonZenServerConfig</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>

</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LocalDaemonServiceConfig(**data: Any) (zenml.services.LocalDaemonServiceConfig)" href="core-services.html#zenml.services.LocalDaemonServiceConfig">LocalDaemonServiceConfig</a></code></p>


        <p>Local daemon Zen server configuration.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonZenServerConfig.server">server</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DaemonServerDeploymentConfig (zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig)" href="#zenml.zen_server.deploy.daemon.daemon_zen_server.DaemonServerDeploymentConfig">DaemonServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The deployment configuration.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/services/service.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the service configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        **data: keyword arguments.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if neither &#39;name&#39; nor &#39;model_name&#39; is set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;service_name&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ZENM_ENDPOINT_PREFIX</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either &#39;name&#39; or &#39;model_name&#39; must be set.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>
<h9 id="zenml.zen_server.deploy.daemon.daemon_zen_server-functions">Functions</h9>



  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.deploy.deployer" class="doc doc-heading">
            <code>deployer</code>


</h6>

    <div class="doc doc-contents ">

        <p>ZenML server deployer singleton implementation.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.deploy.deployer-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.deployer.LocalServerDeployer" class="doc doc-heading">
            <code>LocalServerDeployer</code>


</h8>


    <div class="doc doc-contents ">


        <p>Local server deployer singleton.</p>
<p>This class is responsible for managing the various server provider
implementations and for directing server deployment lifecycle requests to
the responsible provider. It acts as a facade built on top of the various
server providers.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.deploy.deployer.LocalServerDeployer-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.connect_to_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connect_to_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Connect to the local ZenML server instance.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentError">ServerDeploymentError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the local ZenML server is not running or
is unreachable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">connect_to_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Connect to the local ZenML server instance.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentError: If the local ZenML server is not running or</span>
<span class="sd">            is unreachable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>

    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerDeploymentError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server is not currently &quot;</span>
            <span class="s2">&quot;running or is unreachable.&quot;</span>
        <span class="p">)</span>

    <span class="n">store_config</span> <span class="o">=</span> <span class="n">RestZenStoreConfiguration</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span> <span class="o">==</span> <span class="n">store_config</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Your client is already connected to the local &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Connecting to the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">store_config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">).&quot;</span>
    <span class="p">)</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">set_store</span><span class="p">(</span><span class="n">store_config</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Connected to the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">store_config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">).&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.deploy_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Deploy the local ZenML server or update the existing deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successful. If not supplied, the default timeout value specified
by the provider is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restart</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the existing server deployment will be torn down
and a new server will be deployed.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The local server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deploy_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deploy the local ZenML server or update the existing deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successful. If not supplied, the default timeout value specified</span>
<span class="sd">            by the provider is used.</span>
<span class="sd">        restart: If True, the existing server deployment will be torn down</span>
<span class="sd">            and a new server will be deployed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The local server deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that the local database is always initialized before any local</span>
    <span class="c1"># server is deployed or updated.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialize_local_database</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_server</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">restart</span><span class="o">=</span><span class="n">restart</span>
        <span class="p">)</span>

    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deploying a local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.disconnect_from_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disconnect_from_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Disconnect from the ZenML server instance.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">disconnect_from_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Disconnect from the ZenML server instance.&quot;&quot;&quot;</span>
    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="n">store_cfg</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span>

    <span class="k">if</span> <span class="n">store_cfg</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Your client is not currently connected to a ZenML server.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Disconnecting from the local (</span><span class="si">{</span><span class="n">store_cfg</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">) ZenML server.&quot;</span>
    <span class="p">)</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">set_default_store</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Disconnected from the local ZenML server.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.get_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_provider</span><span class="p">(</span><span class="n">provider_type</span><span class="p">:</span> <span class="n">ServerProviderType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseServerProvider</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Get the server provider associated with a provider type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>provider_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerProviderType (zenml.enums.ServerProviderType)" href="core-enums.html#zenml.enums.ServerProviderType">ServerProviderType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider associated with the provider type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerProviderNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerProviderNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerProviderNotFoundError">ServerProviderNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no provider is registered for the
given provider type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_provider</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">provider_type</span><span class="p">:</span> <span class="n">ServerProviderType</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseServerProvider</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the server provider associated with a provider type.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider_type: The server provider type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The server provider associated with the provider type.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerProviderNotFoundError: If no provider is registered for the</span>
<span class="sd">            given provider type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">provider_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ServerProviderNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Server provider &#39;</span><span class="si">{</span><span class="n">provider_type</span><span class="si">}</span><span class="s2">&#39; is not registered.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">[</span><span class="n">provider_type</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.get_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Get the local server deployment.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The local server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerDeploymentNotFoundError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError">ServerDeploymentNotFoundError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no local server deployment is
found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the local server deployment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The local server deployment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ServerDeploymentNotFoundError: If no local server deployment is</span>
<span class="sd">            found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_providers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">get_server</span><span class="p">(</span>
                <span class="n">LocalServerDeploymentConfig</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">raise</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span>
        <span class="s2">&quot;No local server deployment was found.&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.get_server_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server_logs</span><span class="p">(</span><span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Retrieve the logs for the local ZenML server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>follow</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, the logs will be streamed as they are written</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tail</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>only retrieve the last NUM lines of log output.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A generator that can be accessed to get the service logs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_server_logs</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">follow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">tail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the logs for the local ZenML server.</span>

<span class="sd">    Args:</span>
<span class="sd">        follow: if True, the logs will be streamed as they are written</span>
<span class="sd">        tail: only retrieve the last NUM lines of log output.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A generator that can be accessed to get the service logs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>

    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Fetching logs from the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server...&quot;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">get_server_logs</span><span class="p">(</span>
        <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">follow</span><span class="o">=</span><span class="n">follow</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="n">tail</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.initialize_local_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_local_database</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Initialize the local ZenML database.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_local_database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the local ZenML database.&quot;&quot;&quot;</span>
    <span class="n">default_store_cfg</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">get_default_store</span><span class="p">()</span>
    <span class="n">BaseZenStore</span><span class="o">.</span><span class="n">create_store</span><span class="p">(</span><span class="n">default_store_cfg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.is_connected_to_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_connected_to_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Check if the ZenML client is currently connected to the local ZenML server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the ZenML client is connected to the local ZenML server, False</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_connected_to_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the ZenML client is currently connected to the local ZenML server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the ZenML client is connected to the local ZenML server, False</span>
<span class="sd">        otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">server</span><span class="o">.</span><span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">server</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">url</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.register_provider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_provider</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseServerProvider</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Register a server provider.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>provider</code>
            </td>
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a provider with the same type is already registered.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">register_provider</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseServerProvider</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a server provider.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider: The server provider to register.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If a provider with the same type is already registered.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Server provider &#39;</span><span class="si">{</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="si">}</span><span class="s2">&#39; is already registered.&quot;</span>
        <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registering server provider &#39;</span><span class="si">{</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_providers</span><span class="p">[</span><span class="n">provider</span><span class="o">.</span><span class="n">TYPE</span><span class="p">]</span> <span class="o">=</span> <span class="n">provider</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.remove_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_server</span><span class="p">(</span><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Tears down and removes all resources and files associated with the local ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successfully torn down. If not supplied, a provider specific
default timeout value is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tears down and removes all resources and files associated with the local ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successfully torn down. If not supplied, a provider specific</span>
<span class="sd">            default timeout value is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ServerDeploymentNotFoundError</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">provider_name</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">value</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_connected_to_server</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disconnect_from_server</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to disconnect from the local server: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tearing down the local </span><span class="si">{</span><span class="n">provider_name</span><span class="si">}</span><span class="s2"> ZenML server.&quot;</span><span class="p">)</span>
    <span class="n">provider</span><span class="o">.</span><span class="n">remove_server</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.deploy.deployer.LocalServerDeployer.update_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_server</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Update an existing local ZenML server deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new server deployment configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout in seconds to wait until the deployment is
successful. If not supplied, a default timeout value of 30
seconds is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restart</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the existing server deployment will be torn down
and a new server will be deployed.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeployment (zenml.zen_server.deploy.deployment.LocalServerDeployment)" href="#zenml.zen_server.deploy.deployment.LocalServerDeployment">LocalServerDeployment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated server deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/deployer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_server</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">LocalServerDeploymentConfig</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">restart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalServerDeployment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update an existing local ZenML server deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The new server deployment configuration.</span>
<span class="sd">        timeout: The timeout in seconds to wait until the deployment is</span>
<span class="sd">            successful. If not supplied, a default timeout value of 30</span>
<span class="sd">            seconds is used.</span>
<span class="sd">        restart: If True, the existing server deployment will be torn down</span>
<span class="sd">            and a new server will be deployed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated server deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># this will also raise ServerDeploymentNotFoundError if the server</span>
    <span class="c1"># does not exist</span>
    <span class="n">existing_server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_server</span><span class="p">()</span>

    <span class="n">provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">existing_server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span> <span class="o">!=</span> <span class="n">config</span><span class="o">.</span><span class="n">provider</span> <span class="ow">or</span> <span class="n">restart</span><span class="p">:</span>
        <span class="n">existing_provider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span>
            <span class="n">existing_server</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">provider</span>
        <span class="p">)</span>

        <span class="c1"># Tear down the existing server deployment</span>
        <span class="n">existing_provider</span><span class="o">.</span><span class="n">remove_server</span><span class="p">(</span>
            <span class="n">existing_server</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span>

        <span class="c1"># Deploy a new server with the new provider</span>
        <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">deploy_server</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">update_server</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.deploy.deployer-functions">Functions</h7>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.deploy.deployment" class="doc doc-heading">
            <code>deployment</code>


</h6>

    <div class="doc doc-contents ">

        <p>Zen Server deployment definitions.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.deploy.deployment-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.deployment.LocalServerDeployment" class="doc doc-heading">
            <code>LocalServerDeployment</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Server deployment.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeployment.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment configuration.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeployment.status">status</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="LocalServerDeploymentStatus (zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus">LocalServerDeploymentStatus</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server deployment status.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">





<h9 id="zenml.zen_server.deploy.deployment.LocalServerDeployment-attributes">Attributes</h9>

<div class="doc doc-object doc-attribute">



<h10 id="zenml.zen_server.deploy.deployment.LocalServerDeployment.is_running" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_running</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Check if the server is running.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the server is running.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig" class="doc doc-heading">
            <code>LocalServerDeploymentConfig</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Generic local server deployment configuration.</p>
<p>All local server deployment configurations should inherit from this class
and handle extra attributes as provider specific attributes.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig.provider">provider</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerProviderType (zenml.enums.ServerProviderType)" href="core-enums.html#zenml.enums.ServerProviderType">ServerProviderType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The server provider type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">





<h9 id="zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig-attributes">Attributes</h9>

<div class="doc doc-object doc-attribute">



<h10 id="zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig.url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Get the configured server URL.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configured server URL.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus" class="doc doc-heading">
            <code>LocalServerDeploymentStatus</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Local server deployment status.</p>
<p>Ideally this should convey the following information:</p>
<ul>
<li>whether the server's deployment is managed by this client (i.e. if
the server was deployed with <code>zenml login --local</code>)</li>
<li>for a managed deployment, the status of the deployment/tear-down, e.g.
not deployed, deploying, running, deleting, deployment timeout/error,
tear-down timeout/error etc.</li>
<li>for an unmanaged deployment, the operational status (i.e. whether the
server is reachable)</li>
<li>the URL of the server</li>
</ul>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus.status">status</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceState (zenml.enums.ServiceState)" href="core-enums.html#zenml.enums.ServiceState">ServiceState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the server deployment.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus.status_message">status_message</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A message describing the last status.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus.connected">connected</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the client is currently connected to this server.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.deployment.LocalServerDeploymentStatus.url">url</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.deploy.docker" class="doc doc-heading">
            <code>docker</code>


</h6>

    <div class="doc doc-contents ">

        <p>ZenML Server Docker Deployment.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.deploy.docker-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.docker.DockerServerProvider" class="doc doc-heading">
            <code>DockerServerProvider</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a></code></p>


        <p>Docker ZenML server provider.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>

<h7 id="zenml.zen_server.deploy.docker-modules">Modules</h7>

<div class="doc doc-object doc-module">



<h8 id="zenml.zen_server.deploy.docker.docker_provider" class="doc doc-heading">
            <code>docker_provider</code>


</h8>

    <div class="doc doc-contents ">

        <p>Zen Server docker deployer implementation.</p>










  <div class="doc doc-children">







<h9 id="zenml.zen_server.deploy.docker.docker_provider-classes">Classes</h9>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.docker.docker_provider.DockerServerProvider" class="doc doc-heading">
            <code>DockerServerProvider</code>


</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseServerProvider (zenml.zen_server.deploy.base_provider.BaseServerProvider)" href="#zenml.zen_server.deploy.base_provider.BaseServerProvider">BaseServerProvider</a></code></p>


        <p>Docker ZenML server provider.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>
<h9 id="zenml.zen_server.deploy.docker.docker_provider-functions">Functions</h9>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h8 id="zenml.zen_server.deploy.docker.docker_zen_server" class="doc doc-heading">
            <code>docker_zen_server</code>


</h8>

    <div class="doc doc-contents ">

        <p>Service implementation for the ZenML docker server deployment.</p>










  <div class="doc doc-children">







<h9 id="zenml.zen_server.deploy.docker.docker_zen_server-classes">Classes</h9>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig" class="doc doc-heading">
            <code>DockerServerDeploymentConfig</code>


</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LocalServerDeploymentConfig (zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig)" href="#zenml.zen_server.deploy.deployment.LocalServerDeploymentConfig">LocalServerDeploymentConfig</a></code></p>


        <p>Docker server deployment configuration.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig.port">port</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The TCP port number where the server is accepting connections.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig.image">image</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Docker image to use for the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">





<h11 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig-attributes">Attributes</h11>

<div class="doc doc-object doc-attribute">



<h12 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig.url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Get the configured server URL.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configured server URL.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">DockerZenServer</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>

</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContainerService(**attrs: Any) (zenml.services.ContainerService)" href="core-services.html#zenml.services.ContainerService">ContainerService</a></code></p>


        <p>Service that can be used to start a docker ZenServer.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DockerZenServerConfig(**data: Any) (zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServerConfig)" href="#zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServerConfig">DockerZenServerConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>service configuration</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer.endpoint">endpoint</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ContainerServiceEndpoint(*args: Any, **kwargs: Any) (zenml.services.ContainerServiceEndpoint)" href="core-services.html#zenml.services.ContainerServiceEndpoint">ContainerServiceEndpoint</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>service endpoint</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/services/service.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">**</span><span class="n">attrs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the service instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        **attrs: keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h11 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer-functions">Functions</h11>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer.config_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">config_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Path to the directory where the docker ZenML server files are located.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the docker ZenML server runtime directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/docker/docker_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">config_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Path to the directory where the docker ZenML server files are located.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Path to the docker ZenML server runtime directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">get_global_config_directory</span><span class="p">(),</span>
        <span class="s2">&quot;zen_server&quot;</span><span class="p">,</span>
        <span class="s2">&quot;docker&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer.get_service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DockerZenServer</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h12>


    <div class="doc doc-contents ">

        <p>Load and return the docker ZenML server service, if present.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="DockerZenServer(**attrs: Any) (zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer)" href="#zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer">DockerZenServer</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The docker ZenML server service or None, if the docker server</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="DockerZenServer(**attrs: Any) (zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer)" href="#zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer">DockerZenServer</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>deployment is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/docker/docker_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;DockerZenServer&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load and return the docker ZenML server service, if present.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The docker ZenML server service or None, if the docker server</span>
<span class="sd">        deployment is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">config_path</span><span class="p">(),</span> <span class="s2">&quot;service.json&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
                <span class="s2">&quot;DockerZenServer&quot;</span><span class="p">,</span> <span class="n">DockerZenServer</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer.provision" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">provision</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h12>


    <div class="doc doc-contents ">

        <p>Provision the service.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/docker/docker_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">provision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provision the service.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">provision</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h12 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServer.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h12>


    <div class="doc doc-contents ">

        <p>Run the ZenML Server.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if started with a global configuration that connects to
another ZenML server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/deploy/docker/docker_zen_server.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the ZenML Server.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if started with a global configuration that connects to</span>
<span class="sd">            another ZenML server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>

    <span class="n">gc</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">gc</span><span class="o">.</span><span class="n">store_configuration</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The ZenML server cannot be started with REST store type.&quot;</span>
        <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Starting ZenML Server as blocking &quot;</span>
        <span class="s2">&quot;process... press CTRL+C once to stop it.&quot;</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">prepare_for_start</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">ZEN_SERVER_ENTRYPOINT</span><span class="p">,</span>
            <span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>  <span class="c1"># nosec</span>
            <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="mi">8000</span><span class="p">,</span>
            <span class="n">log_level</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
            <span class="n">server_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ZenML Server stopped. Resuming normal execution.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h10 id="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServerConfig" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">DockerZenServerConfig</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>

</h10>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContainerServiceConfig(**data: Any) (zenml.services.ContainerServiceConfig)" href="core-services.html#zenml.services.ContainerServiceConfig">ContainerServiceConfig</a></code></p>


        <p>Docker Zen server configuration.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.deploy.docker.docker_zen_server.DockerZenServerConfig.server">server</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DockerServerDeploymentConfig (zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig)" href="#zenml.zen_server.deploy.docker.docker_zen_server.DockerServerDeploymentConfig">DockerServerDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The deployment configuration.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/services/service.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the service configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        **data: keyword arguments.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if neither &#39;name&#39; nor &#39;model_name&#39; is set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;service_name&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ZENM_ENDPOINT_PREFIX</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either &#39;name&#39; or &#39;model_name&#39; must be set.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>
<h9 id="zenml.zen_server.deploy.docker.docker_zen_server-functions">Functions</h9>



  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.deploy.exceptions" class="doc doc-heading">
            <code>exceptions</code>


</h6>

    <div class="doc doc-contents ">

        <p>ZenML server deployment exceptions.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.deploy.exceptions-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.exceptions.ServerDeploymentConfigurationError" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ServerDeploymentConfigurationError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServerDeploymentError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentError">ServerDeploymentError</a></code></p>


        <p>Raised when there is a ZenML server deployment configuration error .</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/exceptions.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The BaseException used to format messages displayed to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message with details of exception. This message</span>
<span class="sd">                 will be appended with another message directing user to</span>
<span class="sd">                 `url` for more information. If `None`, then default</span>
<span class="sd">                 Exception behavior is used.</span>
<span class="sd">        url: URL to point to in exception message. If `None`, then no url</span>
<span class="sd">             is appended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; For more information, visit </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.exceptions.ServerDeploymentError" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ServerDeploymentError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ZenMLBaseException(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.ZenMLBaseException)" href="core-exceptions.html#zenml.exceptions.ZenMLBaseException">ZenMLBaseException</a></code></p>


        <p>Base exception class for all ZenML server deployment related errors.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/exceptions.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The BaseException used to format messages displayed to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message with details of exception. This message</span>
<span class="sd">                 will be appended with another message directing user to</span>
<span class="sd">                 `url` for more information. If `None`, then default</span>
<span class="sd">                 Exception behavior is used.</span>
<span class="sd">        url: URL to point to in exception message. If `None`, then no url</span>
<span class="sd">             is appended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; For more information, visit </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.exceptions.ServerDeploymentExistsError" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ServerDeploymentExistsError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServerDeploymentError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentError">ServerDeploymentError</a></code></p>


        <p>Raised when trying to deploy a new ZenML server with the same name.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/exceptions.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The BaseException used to format messages displayed to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message with details of exception. This message</span>
<span class="sd">                 will be appended with another message directing user to</span>
<span class="sd">                 `url` for more information. If `None`, then default</span>
<span class="sd">                 Exception behavior is used.</span>
<span class="sd">        url: URL to point to in exception message. If `None`, then no url</span>
<span class="sd">             is appended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; For more information, visit </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.exceptions.ServerDeploymentNotFoundError" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ServerDeploymentNotFoundError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServerDeploymentError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentError">ServerDeploymentError</a></code></p>


        <p>Raised when trying to fetch a ZenML server deployment that doesn't exist.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/exceptions.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The BaseException used to format messages displayed to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message with details of exception. This message</span>
<span class="sd">                 will be appended with another message directing user to</span>
<span class="sd">                 `url` for more information. If `None`, then default</span>
<span class="sd">                 Exception behavior is used.</span>
<span class="sd">        url: URL to point to in exception message. If `None`, then no url</span>
<span class="sd">             is appended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; For more information, visit </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.deploy.exceptions.ServerProviderNotFoundError" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ServerProviderNotFoundError</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ServerDeploymentError(message: Optional[str] = None, url: Optional[str] = None) (zenml.zen_server.deploy.exceptions.ServerDeploymentError)" href="#zenml.zen_server.deploy.exceptions.ServerDeploymentError">ServerDeploymentError</a></code></p>


        <p>Raised when using a ZenML server provider that doesn't exist.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/exceptions.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The BaseException used to format messages displayed to the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message with details of exception. This message</span>
<span class="sd">                 will be appended with another message directing user to</span>
<span class="sd">                 `url` for more information. If `None`, then default</span>
<span class="sd">                 Exception behavior is used.</span>
<span class="sd">        url: URL to point to in exception message. If `None`, then no url</span>
<span class="sd">             is appended.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; For more information, visit </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.download_utils" class="doc doc-heading">
            <code>download_utils</code>


</h4>

    <div class="doc doc-contents ">

        <p>Utility functions for downloading artifacts.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.download_utils-classes">Classes</h5>
<h5 id="zenml.zen_server.download_utils-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.download_utils.create_artifact_archive" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_artifact_archive</span><span class="p">(</span><span class="n">artifact</span><span class="p">:</span> <span class="n">ArtifactVersionResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Create an archive of the given artifact.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact to archive.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the created archive.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/download_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_artifact_archive</span><span class="p">(</span>
    <span class="n">artifact</span><span class="p">:</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an archive of the given artifact.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact: The artifact to archive.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The path to the created archive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">artifact_store</span> <span class="o">=</span> <span class="n">verify_artifact_is_downloadable</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_prepare_tarinfo</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">TarInfo</span><span class="p">:</span>
        <span class="n">archive_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
        <span class="n">tarinfo</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">TarInfo</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">archive_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">:=</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">tarinfo</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="k">return</span> <span class="n">tarinfo</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">as</span> <span class="n">temp_file</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fileobj</span><span class="o">=</span><span class="n">temp_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w:gz&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">):</span>
                <span class="k">for</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">):</span>
                    <span class="nb">dir</span> <span class="o">=</span> <span class="nb">dir</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="nb">dir</span>
                    <span class="n">dir_info</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">TarInfo</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">dir_info</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">DIRTYPE</span>
                    <span class="n">dir_info</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="mo">0o755</span>
                    <span class="n">tar</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">dir_info</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                        <span class="n">file</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">file</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="n">file</span>
                        <span class="p">)</span>
                        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
                        <span class="n">tarinfo</span> <span class="o">=</span> <span class="n">_prepare_tarinfo</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                        <span class="k">with</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                            <span class="n">tar</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">tarinfo</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tarinfo</span> <span class="o">=</span> <span class="n">_prepare_tarinfo</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">tar</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">tarinfo</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">temp_file</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.download_utils.verify_artifact_is_downloadable" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_artifact_is_downloadable</span><span class="p">(</span><span class="n">artifact</span><span class="p">:</span> <span class="n">ArtifactVersionResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseArtifactStore</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Verify that the given artifact is downloadable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact to verify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the artifact is too large to be archived.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the artifact store is not found or the artifact URI does
not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseArtifactStore(*args: Any, **kwargs: Any) (zenml.artifact_stores.base_artifact_store.BaseArtifactStore)" href="core-artifact_stores.html#zenml.artifact_stores.base_artifact_store.BaseArtifactStore">BaseArtifactStore</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact store.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/download_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_artifact_is_downloadable</span><span class="p">(</span>
    <span class="n">artifact</span><span class="p">:</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseArtifactStore&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify that the given artifact is downloadable.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact: The artifact to verify.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the artifact is too large to be archived.</span>
<span class="sd">        KeyError: If the artifact store is not found or the artifact URI does</span>
<span class="sd">            not exist.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifact store.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">artifact</span><span class="o">.</span><span class="n">artifact_store_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Artifact &#39;</span><span class="si">{</span><span class="n">artifact</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; cannot be downloaded because the &quot;</span>
            <span class="s2">&quot;underlying artifact store was deleted.&quot;</span>
        <span class="p">)</span>

    <span class="n">artifact_store</span> <span class="o">=</span> <span class="n">_load_artifact_store</span><span class="p">(</span>
        <span class="n">artifact_store_id</span><span class="o">=</span><span class="n">artifact</span><span class="o">.</span><span class="n">artifact_store_id</span><span class="p">,</span> <span class="n">zen_store</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The artifact URI &#39;</span><span class="si">{</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">&#39; does not exist.&quot;</span><span class="p">)</span>

    <span class="n">size</span> <span class="o">=</span> <span class="n">artifact_store</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
    <span class="n">max_download_size</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">file_download_size_limit</span>

    <span class="k">if</span> <span class="n">size</span> <span class="ow">and</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">max_download_size</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The artifact &#39;</span><span class="si">{</span><span class="n">artifact</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; is too large to be downloaded. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;The maximum download size allowed by your ZenML server is &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">max_download_size</span><span class="si">}</span><span class="s2"> bytes.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">artifact_store</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.exceptions" class="doc doc-heading">
            <code>exceptions</code>


</h4>

    <div class="doc doc-contents ">

        <p>REST API exception handling.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.exceptions-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.exceptions.ErrorModel" class="doc doc-heading">
            <code>ErrorModel</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base class for error responses.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>
<h5 id="zenml.zen_server.exceptions-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.exceptions.error_detail" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">error_detail</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">exception_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Convert an Exception to API representation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>error</code>
            </td>
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception to convert.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exception_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Type">Type</span>[<span title="Exception">Exception</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception type to use in the error response instead of
the type of the supplied exception. This is useful when the raised
exception is a subclass of an exception type that is properly
handled by the REST API.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of strings representing the error.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error_detail</span><span class="p">(</span>
    <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">exception_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert an Exception to API representation.</span>

<span class="sd">    Args:</span>
<span class="sd">        error: Exception to convert.</span>
<span class="sd">        exception_type: Exception type to use in the error response instead of</span>
<span class="sd">            the type of the supplied exception. This is useful when the raised</span>
<span class="sd">            exception is a subclass of an exception type that is properly</span>
<span class="sd">            handled by the REST API.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of strings representing the error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">class_name</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">exception_type</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">exception_type</span> <span class="k">else</span> <span class="nb">type</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">class_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.exceptions.exception_from_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">exception_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Convert an error HTTP response to an exception.</p>
<p>Uses the REST_API_EXCEPTIONS list to determine the appropriate exception
class to use based on the response status code and the exception class name
embedded in the response body.</p>
<p>The last entry in the list of exceptions associated with a status code is
used as a fallback if the exception class name in the response body is not
found in the list.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>response</code>
            </td>
            <td>
                  <code><span title="requests.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTP error response to convert.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="Exception">Exception</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception with the appropriate type and arguments, or None if the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="Exception">Exception</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>response does not contain an error or the response cannot be unpacked</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="Exception">Exception</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>into an exception.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exception_from_response</span><span class="p">(</span>
    <span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert an error HTTP response to an exception.</span>

<span class="sd">    Uses the REST_API_EXCEPTIONS list to determine the appropriate exception</span>
<span class="sd">    class to use based on the response status code and the exception class name</span>
<span class="sd">    embedded in the response body.</span>

<span class="sd">    The last entry in the list of exceptions associated with a status code is</span>
<span class="sd">    used as a fallback if the exception class name in the response body is not</span>
<span class="sd">    found in the list.</span>

<span class="sd">    Args:</span>
<span class="sd">        response: HTTP error response to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Exception with the appropriate type and arguments, or None if the</span>
<span class="sd">        response does not contain an error or the response cannot be unpacked</span>
<span class="sd">        into an exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unpack_exc</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unpack the response body into an exception name and message.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple of exception name and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response_json</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">detail</span> <span class="o">=</span> <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">detail</span> <span class="o">=</span> <span class="n">response_json</span>

        <span class="c1"># The detail can also be a single string</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">detail</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">detail</span>

        <span class="c1"># The detail should be a list of strings encoding the exception</span>
        <span class="c1"># class name and the exception message</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">detail</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>

        <span class="c1"># First detail item is the exception class name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">detail</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">detail</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>

        <span class="c1"># Remaining detail items are the exception arguments</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;: &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">detail</span><span class="p">[</span><span class="mi">1</span><span class="p">:]])</span>
        <span class="k">return</span> <span class="n">detail</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">message</span>

    <span class="n">exc_name</span><span class="p">,</span> <span class="n">exc_msg</span> <span class="o">=</span> <span class="n">unpack_exc</span><span class="p">()</span>
    <span class="n">default_exc</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">exception</span><span class="p">,</span> <span class="n">status_code</span> <span class="ow">in</span> <span class="n">REST_API_EXCEPTIONS</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="n">status_code</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">default_exc</span> <span class="o">=</span> <span class="n">exception</span>
        <span class="k">if</span> <span class="n">exc_name</span> <span class="o">==</span> <span class="n">exception</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span>
            <span class="c1"># An entry was found that is an exact match for both the status</span>
            <span class="c1"># code and the exception class name.</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># The exception class name extracted from the response body was not</span>
        <span class="c1"># found in the list of exceptions associated with the status code, so</span>
        <span class="c1"># use the last entry as a fallback.</span>
        <span class="k">if</span> <span class="n">default_exc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">exception</span> <span class="o">=</span> <span class="n">default_exc</span>

    <span class="c1"># There is one special case where we want to return a specific exception:</span>
    <span class="c1"># 401 Unauthorized exceptions thrown directly by FastAPI in the course of</span>
    <span class="c1"># authentication are interpreted as AuthorizationException, but we want to</span>
    <span class="c1"># return CredentialsNotValid instead.</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exception</span><span class="p">(),</span> <span class="n">CredentialsNotValid</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;WWW-Authenticate&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="n">exc_msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">exception</span><span class="p">(</span><span class="n">exc_msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.exceptions.http_exception_from_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">http_exception_from_error</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTTPException</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Convert an Exception to a HTTP error response.</p>
<p>Uses the REST_API_EXCEPTIONS list to determine the appropriate status code
associated with the exception type. The exception class name and arguments
are embedded in the HTTP error response body.</p>
<p>The lookup uses the first occurrence of the exception type in the list. If
the exception type is not found in the list, the lookup uses <code>isinstance</code>
to determine the most specific exception type corresponding to the supplied
exception. This allows users to call this method with exception types that
are not directly listed in the REST_API_EXCEPTIONS list.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>error</code>
            </td>
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception to convert.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTPException with the appropriate status code and error detail.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">http_exception_from_error</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;HTTPException&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert an Exception to a HTTP error response.</span>

<span class="sd">    Uses the REST_API_EXCEPTIONS list to determine the appropriate status code</span>
<span class="sd">    associated with the exception type. The exception class name and arguments</span>
<span class="sd">    are embedded in the HTTP error response body.</span>

<span class="sd">    The lookup uses the first occurrence of the exception type in the list. If</span>
<span class="sd">    the exception type is not found in the list, the lookup uses `isinstance`</span>
<span class="sd">    to determine the most specific exception type corresponding to the supplied</span>
<span class="sd">    exception. This allows users to call this method with exception types that</span>
<span class="sd">    are not directly listed in the REST_API_EXCEPTIONS list.</span>

<span class="sd">    Args:</span>
<span class="sd">        error: Exception to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        HTTPException with the appropriate status code and error detail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>

    <span class="n">status_code</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">matching_exception_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">exception_type</span><span class="p">,</span> <span class="n">exc_status_code</span> <span class="ow">in</span> <span class="n">REST_API_EXCEPTIONS</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="vm">__class__</span> <span class="ow">is</span> <span class="n">exception_type</span><span class="p">:</span>
            <span class="c1"># Found an exact match</span>
            <span class="n">matching_exception_type</span> <span class="o">=</span> <span class="n">exception_type</span>
            <span class="n">status_code</span> <span class="o">=</span> <span class="n">exc_status_code</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">exception_type</span><span class="p">):</span>
            <span class="c1"># Found a matching exception</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">matching_exception_type</span><span class="p">:</span>
                <span class="c1"># This is the first matching exception, so keep it</span>
                <span class="n">matching_exception_type</span> <span class="o">=</span> <span class="n">exception_type</span>
                <span class="n">status_code</span> <span class="o">=</span> <span class="n">exc_status_code</span>
                <span class="k">continue</span>

            <span class="c1"># This is not the first matching exception, so check if it is more</span>
            <span class="c1"># specific than the previous matching exception</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span>
                <span class="n">exception_type</span><span class="p">,</span>
                <span class="n">matching_exception_type</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="n">matching_exception_type</span> <span class="o">=</span> <span class="n">exception_type</span>
                <span class="n">status_code</span> <span class="o">=</span> <span class="n">exc_status_code</span>

    <span class="c1"># When the matching exception is not found in the list, a 500 Internal</span>
    <span class="c1"># Server Error is returned</span>
    <span class="n">status_code</span> <span class="o">=</span> <span class="n">status_code</span> <span class="ow">or</span> <span class="mi">500</span>
    <span class="n">matching_exception_type</span> <span class="o">=</span> <span class="n">matching_exception_type</span> <span class="ow">or</span> <span class="ne">RuntimeError</span>

    <span class="k">return</span> <span class="n">HTTPException</span><span class="p">(</span>
        <span class="n">status_code</span><span class="o">=</span><span class="n">status_code</span><span class="p">,</span>
        <span class="n">detail</span><span class="o">=</span><span class="n">error_detail</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">matching_exception_type</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.feature_gate" class="doc doc-heading">
            <code>feature_gate</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<h5 id="zenml.zen_server.feature_gate-modules">Modules</h5>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.feature_gate.endpoint_utils" class="doc doc-heading">
            <code>endpoint_utils</code>


</h6>

    <div class="doc doc-contents ">

        <p>All endpoint utils for the feature gate implementations.</p>










  <div class="doc doc-children">








<h7 id="zenml.zen_server.feature_gate.endpoint_utils-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.feature_gate.endpoint_utils.check_entitlement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Queries the feature gate to see if the operation falls within the Pro workspaces entitlements.</p>
<p>Raises an exception if the user is not entitled to create an instance of the
resource. Otherwise, simply returns.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature to check for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Queries the feature gate to see if the operation falls within the Pro workspaces entitlements.</span>

<span class="sd">    Raises an exception if the user is not entitled to create an instance of the</span>
<span class="sd">    resource. Otherwise, simply returns.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature to check for.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">feature_gate_enabled</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">return</span> <span class="n">feature_gate</span><span class="p">()</span><span class="o">.</span><span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">feature</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.feature_gate.endpoint_utils.report_decrement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">report_decrement</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Reports the deletion/deactivation of a feature/resource.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature to report a decrement in count for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource that was deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">report_decrement</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reports the deletion/deactivation of a feature/resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature to report a decrement in count for.</span>
<span class="sd">        resource_id: ID of the resource that was deleted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">feature_gate_enabled</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">feature_gate</span><span class="p">()</span><span class="o">.</span><span class="n">report_event</span><span class="p">(</span>
        <span class="n">feature</span><span class="o">=</span><span class="n">feature</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">is_decrement</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.feature_gate.endpoint_utils.report_usage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">report_usage</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Reports the creation/usage of a feature/resource.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature to report a usage for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource that was created.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">report_usage</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reports the creation/usage of a feature/resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature to report a usage for.</span>
<span class="sd">        resource_id: ID of the resource that was created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">feature_gate_enabled</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">feature_gate</span><span class="p">()</span><span class="o">.</span><span class="n">report_event</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">feature</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.feature_gate.feature_gate_interface" class="doc doc-heading">
            <code>feature_gate_interface</code>


</h6>

    <div class="doc doc-contents ">

        <p>Definition of the feature gate interface.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.feature_gate.feature_gate_interface-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface" class="doc doc-heading">
            <code>FeatureGateInterface</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Feature gate interface definition.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface.check_entitlement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Checks if a user is entitled to create a resource.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature the user wants to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/feature_gate_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_entitlement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a user is entitled to create a resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature the user wants to use.</span>

<span class="sd">    Raises:</span>
<span class="sd">        UpgradeRequiredError in case a subscription limit is reached</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface.report_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">report_event</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">is_decrement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Reports the usage of a feature to the aggregator backend.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature the user used.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource that was created/deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_decrement</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>In case this event reports an actual decrement of usage</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/feature_gate_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">report_event</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">is_decrement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reports the usage of a feature to the aggregator backend.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature the user used.</span>
<span class="sd">        resource_id: ID of the resource that was created/deleted.</span>
<span class="sd">        is_decrement: In case this event reports an actual decrement of usage</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate" class="doc doc-heading">
            <code>zenml_cloud_feature_gate</code>


</h6>

    <div class="doc doc-contents ">

        <p>ZenML Pro implementation of the feature gate.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate.RawUsageEvent" class="doc doc-heading">
            <code>RawUsageEvent</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Model for reporting raw usage of a feature.</p>
<p>In case of consumables the UsageReport allows the Pricing Backend to
increment the usage per time-frame by 1.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate.ZenMLCloudFeatureGateInterface" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ZenMLCloudFeatureGateInterface</span><span class="p">()</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="FeatureGateInterface (zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface)" href="#zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface">FeatureGateInterface</a></code></p>


        <p>ZenML Cloud Feature Gate implementation.</p>

        <p>Initialize the object.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/feature_gate/zenml_cloud_feature_gate.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the object.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="n">cloud_connection</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h9 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate.ZenMLCloudFeatureGateInterface-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate.ZenMLCloudFeatureGateInterface.check_entitlement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Checks if a user is entitled to create a resource.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature the user wants to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SubscriptionUpgradeRequiredError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.SubscriptionUpgradeRequiredError)" href="core-exceptions.html#zenml.exceptions.SubscriptionUpgradeRequiredError">SubscriptionUpgradeRequiredError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>in case a subscription limit is reached</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/zenml_cloud_feature_gate.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_entitlement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a user is entitled to create a resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature the user wants to use.</span>

<span class="sd">    Raises:</span>
<span class="sd">        SubscriptionUpgradeRequiredError: in case a subscription limit is reached</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="n">ENTITLEMENT_ENDPOINT</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">feature</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">SubscriptionUpgradeRequiredError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SubscriptionUpgradeRequiredError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Your subscription reached its `</span><span class="si">{</span><span class="n">feature</span><span class="si">}</span><span class="s2">` limit. Please &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;upgrade your subscription or reach out to us.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Unexpected response status code from entitlement &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;endpoint: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">. Message: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate.ZenMLCloudFeatureGateInterface.report_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">report_event</span><span class="p">(</span><span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">is_decrement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Reports the usage of a feature to the aggregator backend.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feature the user used.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource that was created/deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>is_decrement</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>In case this event reports an actual decrement of usage</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/feature_gate/zenml_cloud_feature_gate.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">report_event</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">is_decrement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reports the usage of a feature to the aggregator backend.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature: The feature the user used.</span>
<span class="sd">        resource_id: ID of the resource that was created/deleted.</span>
<span class="sd">        is_decrement: In case this event reports an actual decrement of usage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">RawUsageEvent</span><span class="p">(</span>
        <span class="n">organization_id</span><span class="o">=</span><span class="n">ORGANIZATION_ID</span><span class="p">,</span>
        <span class="n">feature</span><span class="o">=</span><span class="n">feature</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_decrement</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">server_config</span><span class="o">.</span><span class="n">get_external_server_id</span><span class="p">()),</span>
            <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource_id</span><span class="p">),</span>
        <span class="p">},</span>
    <span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="n">USAGE_EVENT_ENDPOINT</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Usage report not accepted by upstream backend. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Status Code: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">, Message: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.feature_gate.zenml_cloud_feature_gate-functions">Functions</h7>



  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.jwt" class="doc doc-heading">
            <code>jwt</code>


</h4>

    <div class="doc doc-contents ">

        <p>JWT utilities module for ZenML server.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.jwt-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.jwt.JWTToken" class="doc doc-heading">
            <code>JWTToken</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Pydantic object representing a JWT token.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.user_id">user_id</span></code></td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the authenticated User.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.device_id">device_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the authenticated device.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.api_key_id">api_key_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the authenticated API key for which this token
was issued.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.schedule_id">schedule_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the schedule for which the token was issued.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.pipeline_run_id">pipeline_run_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the pipeline run for which the token was
issued.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.deployment_id">deployment_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the deployment for which the token was
issued.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.step_run_id">step_run_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the step run for which the token was
issued.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.session_id">session_id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The id of the authenticated session (used for CSRF).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="zenml.zen_server.jwt.JWTToken.claims">claims</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original token claims.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">








<h7 id="zenml.zen_server.jwt.JWTToken-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.jwt.JWTToken.decode_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decode_token</span><span class="p">(</span><span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JWTToken</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Decodes a JWT access token.</p>
<p>Decodes a JWT access token and returns a <code>JWTToken</code> object with the
information retrieved from its subject claim.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The encoded JWT token.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verify</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to verify the signature of the token.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="JWTToken (zenml.zen_server.jwt.JWTToken)" href="#zenml.zen_server.jwt.JWTToken">JWTToken</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The decoded JWT access token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CredentialsNotValid(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.CredentialsNotValid)" href="core-exceptions.html#zenml.exceptions.CredentialsNotValid">CredentialsNotValid</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the token is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/jwt.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">decode_token</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;JWTToken&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decodes a JWT access token.</span>

<span class="sd">    Decodes a JWT access token and returns a `JWTToken` object with the</span>
<span class="sd">    information retrieved from its subject claim.</span>

<span class="sd">    Args:</span>
<span class="sd">        token: The encoded JWT token.</span>
<span class="sd">        verify: Whether to verify the signature of the token.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The decoded JWT access token.</span>

<span class="sd">    Raises:</span>
<span class="sd">        CredentialsNotValid: If the token is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">claims_data</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
            <span class="n">token</span><span class="p">,</span>
            <span class="n">config</span><span class="o">.</span><span class="n">jwt_secret_key</span><span class="p">,</span>
            <span class="n">algorithms</span><span class="o">=</span><span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_algorithm</span><span class="p">],</span>
            <span class="n">audience</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get_jwt_token_audience</span><span class="p">(),</span>
            <span class="n">issuer</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get_jwt_token_issuer</span><span class="p">(),</span>
            <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
            <span class="n">leeway</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_leeway_seconds</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">claims</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">claims_data</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">jwt</span><span class="o">.</span><span class="n">PyJWTError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid JWT token: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;sub&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">subject</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
            <span class="s2">&quot;Invalid JWT token: the subject claim is missing&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
            <span class="s2">&quot;Invalid JWT token: the subject claim is not a valid UUID&quot;</span>
        <span class="p">)</span>

    <span class="n">device_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;device_id&quot;</span> <span class="ow">in</span> <span class="n">claims</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">device_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;device_id&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
                <span class="s2">&quot;Invalid JWT token: the device_id claim is not a valid &quot;</span>
                <span class="s2">&quot;UUID&quot;</span>
            <span class="p">)</span>

    <span class="n">api_key_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;api_key_id&quot;</span> <span class="ow">in</span> <span class="n">claims</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">api_key_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;api_key_id&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
                <span class="s2">&quot;Invalid JWT token: the api_key_id claim is not a valid &quot;</span>
                <span class="s2">&quot;UUID&quot;</span>
            <span class="p">)</span>

    <span class="n">schedule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;schedule_id&quot;</span> <span class="ow">in</span> <span class="n">claims</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">schedule_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;schedule_id&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
                <span class="s2">&quot;Invalid JWT token: the schedule_id claim is not a valid &quot;</span>
                <span class="s2">&quot;UUID&quot;</span>
            <span class="p">)</span>

    <span class="n">pipeline_run_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;pipeline_run_id&quot;</span> <span class="ow">in</span> <span class="n">claims</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pipeline_run_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pipeline_run_id&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
                <span class="s2">&quot;Invalid JWT token: the pipeline_run_id claim is not a valid &quot;</span>
                <span class="s2">&quot;UUID&quot;</span>
            <span class="p">)</span>

    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;deployment_id&quot;</span> <span class="ow">in</span> <span class="n">claims</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">deployment_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;deployment_id&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
                <span class="s2">&quot;Invalid JWT token: the deployment_id claim is not a valid &quot;</span>
                <span class="s2">&quot;UUID&quot;</span>
            <span class="p">)</span>

    <span class="n">session_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;session_id&quot;</span> <span class="ow">in</span> <span class="n">claims</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">session_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CredentialsNotValid</span><span class="p">(</span>
                <span class="s2">&quot;Invalid JWT token: the session_id claim is not a valid &quot;</span>
                <span class="s2">&quot;UUID&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">JWTToken</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span>
        <span class="n">api_key_id</span><span class="o">=</span><span class="n">api_key_id</span><span class="p">,</span>
        <span class="n">schedule_id</span><span class="o">=</span><span class="n">schedule_id</span><span class="p">,</span>
        <span class="n">pipeline_run_id</span><span class="o">=</span><span class="n">pipeline_run_id</span><span class="p">,</span>
        <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="n">session_id</span><span class="o">=</span><span class="n">session_id</span><span class="p">,</span>
        <span class="n">claims</span><span class="o">=</span><span class="n">claims</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.jwt.JWTToken.encode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">encode</span><span class="p">(</span><span class="n">expires</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a JWT access token.</p>
<p>Encodes, signs and returns a JWT access token.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>expires</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="datetime.datetime">datetime</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Datetime after which the token will expire. If not
provided, the JWT token will not be set to expire.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generated access token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/jwt.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expires</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a JWT access token.</span>

<span class="sd">    Encodes, signs and returns a JWT access token.</span>

<span class="sd">    Args:</span>
<span class="sd">        expires: Datetime after which the token will expire. If not</span>
<span class="sd">            provided, the JWT token will not be set to expire.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The generated access token.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="n">claims</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">claims</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;sub&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;iss&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_jwt_token_issuer</span><span class="p">()</span>
    <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;aud&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_jwt_token_audience</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">expires</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;exp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">expires</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">claims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;exp&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_id</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;device_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key_id</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;api_key_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedule_id</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;schedule_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schedule_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;pipeline_run_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deployment_id</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;deployment_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deployment_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">session_id</span><span class="p">:</span>
        <span class="n">claims</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">session_id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">claims</span><span class="p">,</span>
        <span class="n">config</span><span class="o">.</span><span class="n">jwt_secret_key</span><span class="p">,</span>
        <span class="n">algorithm</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">jwt_token_algorithm</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.jwt-functions">Functions</h5>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.middleware" class="doc doc-heading">
            <code>middleware</code>


</h4>

    <div class="doc doc-contents ">

        <p>Server middlewares.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.middleware-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.middleware.RequestBodyLimit" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RequestBodyLimit</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">ASGIApp</span><span class="p">,</span> <span class="n">max_bytes</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="starlette.middleware.base.BaseHTTPMiddleware">BaseHTTPMiddleware</span></code></p>


        <p>Limits the size of the request body.</p>

        <p>Limits the size of the request body.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>app</code>
            </td>
            <td>
                  <code><span title="starlette.types.ASGIApp">ASGIApp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI app.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_bytes</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum size of the request body.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">ASGIApp</span><span class="p">,</span> <span class="n">max_bytes</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Limits the size of the request body.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI app.</span>
<span class="sd">        max_bytes: The maximum size of the request body.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_bytes</span> <span class="o">=</span> <span class="n">max_bytes</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h7 id="zenml.zen_server.middleware.RequestBodyLimit-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.middleware.RequestBodyLimit.dispatch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">RequestResponseEndpoint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Limits the size of the request body.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="starlette.middleware.base.RequestResponseEndpoint">RequestResponseEndpoint</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The next function to be called.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="starlette.responses.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dispatch</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">RequestResponseEndpoint</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Limits the size of the request body.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request.</span>
<span class="sd">        call_next: The next function to be called.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">content_length</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content-length&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">content_length</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_bytes</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">413</span><span class="p">)</span>  <span class="c1"># Request Entity Too Large</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An error occurred while processing the request&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.middleware.RestrictFileUploadsMiddleware" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RestrictFileUploadsMiddleware</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">ASGIApp</span><span class="p">,</span> <span class="n">allowed_paths</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span></code>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="starlette.middleware.base.BaseHTTPMiddleware">BaseHTTPMiddleware</span></code></p>


        <p>Restrict file uploads to certain paths.</p>

        <p>Restrict file uploads to certain paths.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>app</code>
            </td>
            <td>
                  <code><span title="starlette.types.ASGIApp">ASGIApp</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI app.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>allowed_paths</code>
            </td>
            <td>
                  <code><span title="typing.Set">Set</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The allowed paths.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">ASGIApp</span><span class="p">,</span> <span class="n">allowed_paths</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Restrict file uploads to certain paths.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI app.</span>
<span class="sd">        allowed_paths: The allowed paths.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allowed_paths</span> <span class="o">=</span> <span class="n">allowed_paths</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h7 id="zenml.zen_server.middleware.RestrictFileUploadsMiddleware-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.middleware.RestrictFileUploadsMiddleware.dispatch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">RequestResponseEndpoint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Restrict file uploads to certain paths.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="starlette.middleware.base.RequestResponseEndpoint">RequestResponseEndpoint</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The next function to be called.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="starlette.responses.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dispatch</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">RequestResponseEndpoint</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Restrict file uploads to certain paths.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request.</span>
<span class="sd">        call_next: The next function to be called.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content-type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="s2">&quot;multipart/form-data&quot;</span> <span class="ow">in</span> <span class="n">content_type</span>
            <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowed_paths</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="mi">403</span><span class="p">,</span>
                <span class="n">content</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;File uploads are not allowed on this endpoint.&quot;</span>
                <span class="p">},</span>
            <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An error occurred while processing the request&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.middleware-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.add_middlewares" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_middlewares</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Add middlewares to the FastAPI app.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>app</code>
            </td>
            <td>
                  <code><span title="fastapi.FastAPI">FastAPI</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI app.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_middlewares</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add middlewares to the FastAPI app.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI app.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">track_last_user_activity</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">infer_source_context</span><span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
        <span class="n">CORSMiddleware</span><span class="p">,</span>
        <span class="n">allow_origins</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">cors_allow_origins</span> <span class="ow">or</span> <span class="p">[],</span>
        <span class="n">allow_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">allow_methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="n">allow_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
        <span class="n">RequestBodyLimit</span><span class="p">,</span>
        <span class="n">max_bytes</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">max_request_body_size_in_bytes</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
        <span class="n">RestrictFileUploadsMiddleware</span><span class="p">,</span> <span class="n">allowed_paths</span><span class="o">=</span><span class="n">ALLOWED_FOR_FILE_UPLOAD</span>
    <span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">set_secure_headers</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">log_requests</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">record_requests</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">skip_health_middleware</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.infer_source_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">infer_source_context</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>A middleware to track the source of an event.</p>
<p>It extracts the source context from the header of incoming requests
and applies it to the ZenML source context on the API side. This way, the
outgoing analytics request can append it as an additional field.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the incoming request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a function that will receive the request as a parameter and
pass it to the corresponding path operation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">infer_source_context</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A middleware to track the source of an event.</span>

<span class="sd">    It extracts the source context from the header of incoming requests</span>
<span class="sd">    and applies it to the ZenML source context on the API side. This way, the</span>
<span class="sd">    outgoing analytics request can append it as an additional field.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: the incoming request object.</span>
<span class="sd">        call_next: a function that will receive the request as a parameter and</span>
<span class="sd">            pass it to the corresponding path operation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">source_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">SourceContextTypes</span><span class="o">.</span><span class="n">API</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">source_context</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">SourceContextTypes</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;An unexpected error occurred while getting the source &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;context: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">source_context</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">SourceContextTypes</span><span class="o">.</span><span class="n">API</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An error occurred while processing the request&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.log_requests" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_requests</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Log requests to the ZenML server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that will receive the request as a parameter and
pass it to the corresponding path operation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">log_requests</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log requests to the ZenML server.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request object.</span>
<span class="sd">        call_next: A function that will receive the request as a parameter and</span>
<span class="sd">            pass it to the corresponding path operation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">active_requests_count</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">active_requests_lock</span><span class="p">:</span>
        <span class="n">active_requests_count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">request_context</span> <span class="o">=</span> <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">current_request</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] API STATS - &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;RECEIVED </span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] API STATS - &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;took </span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_duration</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">active_requests_lock</span><span class="p">:</span>
            <span class="n">active_requests_count</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.record_requests" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">record_requests</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Record requests to the ZenML server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that will receive the request as a parameter and
pass it to the corresponding path operation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">record_requests</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Record requests to the ZenML server.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request object.</span>
<span class="sd">        call_next: A function that will receive the request as a parameter and</span>
<span class="sd">            pass it to the corresponding path operation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Keep track of the request context in a context variable</span>
    <span class="n">request_context</span> <span class="o">=</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">current_request</span> <span class="o">=</span> <span class="n">request_context</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An error occurred while processing the request&quot;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.set_secure_headers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_secure_headers</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Middleware to set secure headers.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The next function to be called.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response with secure headers set.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_secure_headers</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Middleware to set secure headers.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request.</span>
<span class="sd">        call_next: The next function to be called.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response with secure headers set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An error occurred while processing the request&quot;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span>
        <span class="p">)</span>

    <span class="c1"># If the request is for the openAPI docs, don&#39;t set secure headers</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/docs&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
        <span class="s2">&quot;/redoc&quot;</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">await</span> <span class="n">secure_headers</span><span class="p">()</span><span class="o">.</span><span class="n">set_headers_async</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.skip_health_middleware" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">skip_health_middleware</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Skip health and ready endpoints.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The next function to be called.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">skip_health_middleware</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Skip health and ready endpoints.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request.</span>
<span class="sd">        call_next: The next function to be called.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="p">[</span><span class="n">HEALTH</span><span class="p">,</span> <span class="n">READY</span><span class="p">]:</span>
        <span class="c1"># Skip expensive processing</span>
        <span class="k">return</span> <span class="n">PlainTextResponse</span><span class="p">(</span><span class="s2">&quot;ok&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.middleware.track_last_user_activity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">track_last_user_activity</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>A middleware to track last user activity.</p>
<p>This middleware checks if the incoming request is a user request and
updates the last activity timestamp if it is.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>call_next</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that will receive the request as a parameter and
pass it to the corresponding path operation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response to the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/middleware.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">track_last_user_activity</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A middleware to track last user activity.</span>

<span class="sd">    This middleware checks if the incoming request is a user request and</span>
<span class="sd">    updates the last activity timestamp if it is.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming request object.</span>
<span class="sd">        call_next: A function that will receive the request as a parameter and</span>
<span class="sd">            pass it to the corresponding path operation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The response to the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">last_user_activity</span>
    <span class="k">global</span> <span class="n">last_user_activity_reported</span>
    <span class="k">global</span> <span class="n">last_user_activity_lock</span>

    <span class="n">now</span> <span class="o">=</span> <span class="n">utc_now</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_user_request</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
            <span class="n">report_user_activity</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">last_user_activity_lock</span><span class="p">:</span>
                <span class="n">last_user_activity</span> <span class="o">=</span> <span class="n">now</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">last_user_activity_reported</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
                    <span class="o">&gt;</span> <span class="n">DEFAULT_ZENML_SERVER_REPORT_USER_ACTIVITY_TO_DB_SECONDS</span>
                <span class="p">):</span>
                    <span class="n">last_user_activity_reported</span> <span class="o">=</span> <span class="n">now</span>
                    <span class="n">report_user_activity</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">report_user_activity</span><span class="p">:</span>
                <span class="c1"># We don&#39;t want to make a DB call here because we&#39;re in the</span>
                <span class="c1"># context of the asyncio event loop and it would block the</span>
                <span class="c1"># entire application for who knows how long.</span>
                <span class="c1"># We use the threadpool for it.</span>

                <span class="n">request_context</span> <span class="o">=</span> <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">current_request</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">update_last_user_activity_timestamp</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] API STATS - &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;UPDATING LAST USER ACTIVITY &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">_update_last_user_activity_timestamp</span><span class="p">(</span>
                            <span class="n">last_user_activity</span><span class="o">=</span><span class="n">last_user_activity</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">finally</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] API STATS - &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;UPDATED LAST USER ACTIVITY &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                <span class="k">await</span> <span class="n">to_thread</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span>
                    <span class="n">update_last_user_activity_timestamp</span><span class="p">,</span>
                    <span class="n">limiter</span><span class="o">=</span><span class="n">last_user_activity_thread_limiter</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;An unexpected error occurred while checking user activity: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An error occurred while processing the request&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.pipeline_execution" class="doc doc-heading">
            <code>pipeline_execution</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<h5 id="zenml.zen_server.pipeline_execution-modules">Modules</h5>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration" class="doc doc-heading">
            <code>runner_entrypoint_configuration</code>


</h6>

    <div class="doc doc-contents ">

        <p>Runner entrypoint configuration.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration.RunnerEntrypointConfiguration" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RunnerEntrypointConfiguration</span><span class="p">(</span><span class="n">arguments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseEntrypointConfiguration(arguments: List[str]) (zenml.entrypoints.base_entrypoint_configuration.BaseEntrypointConfiguration)" href="core-entrypoints.html#zenml.entrypoints.base_entrypoint_configuration.BaseEntrypointConfiguration">BaseEntrypointConfiguration</a></code></p>


        <p>Runner entrypoint configuration.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/entrypoints/base_entrypoint_configuration.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the entrypoint configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        arguments: Command line arguments to configure this object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_arguments</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h9 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration.RunnerEntrypointConfiguration-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration.RunnerEntrypointConfiguration.get_entrypoint_arguments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_entrypoint_arguments</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Gets all arguments that the entrypoint command should be called with.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kwargs, must include the placeholder run id.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The superclass arguments as well as arguments for the placeholder</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>run id.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/runner_entrypoint_configuration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_entrypoint_arguments</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all arguments that the entrypoint command should be called with.</span>

<span class="sd">    Args:</span>
<span class="sd">        **kwargs: Kwargs, must include the placeholder run id.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The superclass arguments as well as arguments for the placeholder</span>
<span class="sd">        run id.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span>
        <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">PLACEHOLDER_RUN_ID_OPTION</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="n">PLACEHOLDER_RUN_ID_OPTION</span><span class="p">]),</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration.RunnerEntrypointConfiguration.get_entrypoint_options" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_entrypoint_options</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Gets all options required for running with this configuration.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Set">Set</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The superclass options as well as an option for the name of the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Set">Set</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>step to run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/runner_entrypoint_configuration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_entrypoint_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all options required for running with this configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The superclass options as well as an option for the name of the</span>
<span class="sd">        step to run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entrypoint_options</span><span class="p">()</span> <span class="o">|</span> <span class="p">{</span><span class="n">PLACEHOLDER_RUN_ID_OPTION</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration.RunnerEntrypointConfiguration.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Run the entrypoint configuration.</p>
<p>This method runs the pipeline defined by the snapshot given as input
to the entrypoint configuration.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/runner_entrypoint_configuration.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the entrypoint configuration.</span>

<span class="sd">    This method runs the pipeline defined by the snapshot given as input</span>
<span class="sd">    to the entrypoint configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">snapshot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_snapshot</span><span class="p">()</span>
    <span class="n">placeholder_run_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_args</span><span class="p">[</span><span class="n">PLACEHOLDER_RUN_ID_OPTION</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">placeholder_run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline_run</span><span class="p">(</span><span class="n">placeholder_run_id</span><span class="p">)</span>

    <span class="n">stack</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span>
    <span class="k">assert</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">stack</span> <span class="ow">and</span> <span class="n">stack</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">id</span>

    <span class="n">submit_pipeline</span><span class="p">(</span>
        <span class="n">snapshot</span><span class="o">=</span><span class="n">snapshot</span><span class="p">,</span>
        <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">,</span>
        <span class="n">placeholder_run</span><span class="o">=</span><span class="n">placeholder_run</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.pipeline_execution.runner_entrypoint_configuration-functions">Functions</h7>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.pipeline_execution.utils" class="doc doc-heading">
            <code>utils</code>


</h6>

    <div class="doc doc-contents ">

        <p>Utility functions to run a pipeline from the server.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.pipeline_execution.utils-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.pipeline_execution.utils.BoundedThreadPoolExecutor" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">BoundedThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">


        <p>Thread pool executor which only allows a maximum number of concurrent tasks.</p>

        <p>Initialize the executor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>max_workers</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of workers.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arguments to pass to the thread pool executor.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the executor.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_workers: The maximum number of workers.</span>
<span class="sd">        **kwargs: Arguments to pass to the thread pool executor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">max_workers</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_semaphore</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">BoundedSemaphore</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">max_workers</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h9 id="zenml.zen_server.pipeline_execution.utils.BoundedThreadPoolExecutor-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.utils.BoundedThreadPoolExecutor.shutdown" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">shutdown</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Shutdown the executor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to the shutdown method of the
executor.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shutdown the executor.</span>

<span class="sd">    Args:</span>
<span class="sd">        **kwargs: Keyword arguments to pass to the shutdown method of the</span>
<span class="sd">            executor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.utils.BoundedThreadPoolExecutor.submit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">submit</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Submit a task to the executor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fn</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the task submission fails.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="MaxConcurrentTasksError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.MaxConcurrentTasksError)" href="core-exceptions.html#zenml.exceptions.MaxConcurrentTasksError">MaxConcurrentTasksError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the maximum number of concurrent tasks
is reached.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="concurrent.futures.Future">Future</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The future of the task.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">submit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Submit a task to the executor.</span>

<span class="sd">    Args:</span>
<span class="sd">        fn: The function to execute.</span>
<span class="sd">        *args: The arguments to pass to the function.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the function.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the task submission fails.</span>
<span class="sd">        MaxConcurrentTasksError: If the maximum number of concurrent tasks</span>
<span class="sd">            is reached.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The future of the task.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semaphore</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">blocking</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MaxConcurrentTasksError</span><span class="p">(</span>
            <span class="s2">&quot;Maximum number of concurrent tasks reached.&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_semaphore</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">raise</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">future</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semaphore</span><span class="o">.</span><span class="n">release</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">future</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.pipeline_execution.utils-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.pipeline_execution.utils.ensure_async_orchestrator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_async_orchestrator</span><span class="p">(</span><span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotRequest</span><span class="p">,</span> <span class="n">stack</span><span class="p">:</span> <span class="n">StackResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Ensures the orchestrator is configured to run async.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotRequest (zenml.models.PipelineSnapshotRequest)" href="core-models.html#zenml.models.PipelineSnapshotRequest">PipelineSnapshotRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Snapshot request in which the orchestrator
configuration should be updated to ensure the orchestrator is
running async.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stack</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackResponse (zenml.models.StackResponse)" href="core-models.html#zenml.models.StackResponse">StackResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stack on which the snapshot will run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_async_orchestrator</span><span class="p">(</span>
    <span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotRequest</span><span class="p">,</span> <span class="n">stack</span><span class="p">:</span> <span class="n">StackResponse</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensures the orchestrator is configured to run async.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot: Snapshot request in which the orchestrator</span>
<span class="sd">            configuration should be updated to ensure the orchestrator is</span>
<span class="sd">            running async.</span>
<span class="sd">        stack: The stack on which the snapshot will run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">orchestrator</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">StackComponentType</span><span class="o">.</span><span class="n">ORCHESTRATOR</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">flavors</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_flavors</span><span class="p">(</span>
        <span class="n">FlavorFilter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">orchestrator</span><span class="o">.</span><span class="n">flavor_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">orchestrator</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">flavor</span> <span class="o">=</span> <span class="n">Flavor</span><span class="o">.</span><span class="n">from_model</span><span class="p">(</span><span class="n">flavors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="s2">&quot;synchronous&quot;</span> <span class="ow">in</span> <span class="n">flavor</span><span class="o">.</span><span class="n">config_class</span><span class="o">.</span><span class="n">model_fields</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">settings_utils</span><span class="o">.</span><span class="n">get_flavor_setting_key</span><span class="p">(</span><span class="n">flavor</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">settings</span> <span class="o">:=</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="n">settings_dict</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">settings_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">settings_dict</span><span class="p">[</span><span class="s2">&quot;synchronous&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">snapshot</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">BaseSettings</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">settings_dict</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.pipeline_execution.utils.generate_dockerfile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_dockerfile</span><span class="p">(</span><span class="n">pypi_requirements</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">apt_packages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">zenml_version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">python_version</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Generate a Dockerfile that installs the requirements.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pypi_requirements</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PyPI requirements to install.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>apt_packages</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The APT packages to install.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>zenml_version</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML version to use as parent image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>python_version</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Python version to use as parent image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Dockerfile.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_dockerfile</span><span class="p">(</span>
    <span class="n">pypi_requirements</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">apt_packages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">zenml_version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">python_version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a Dockerfile that installs the requirements.</span>

<span class="sd">    Args:</span>
<span class="sd">        pypi_requirements: The PyPI requirements to install.</span>
<span class="sd">        apt_packages: The APT packages to install.</span>
<span class="sd">        zenml_version: The ZenML version to use as parent image.</span>
<span class="sd">        python_version: The Python version to use as parent image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Dockerfile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parent_image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="n">ENV_ZENML_RUNNER_PARENT_IMAGE</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;zenmldocker/zenml:</span><span class="si">{</span><span class="n">zenml_version</span><span class="si">}</span><span class="s2">-py</span><span class="si">{</span><span class="n">python_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;FROM </span><span class="si">{</span><span class="n">parent_image</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">apt_packages</span><span class="p">:</span>
        <span class="n">apt_packages_string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">apt_packages</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="s2">&quot;RUN apt-get update &amp;&amp; apt-get install -y &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;--no-install-recommends </span><span class="si">{</span><span class="n">apt_packages_string</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">pypi_requirements</span><span class="p">:</span>
        <span class="n">pypi_requirements_string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">pypi_requirements</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">handle_bool_env_var</span><span class="p">(</span>
            <span class="n">ENV_ZENML_RUNNER_IMAGE_DISABLE_UV</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">):</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;RUN pip install --default-timeout=60 --no-cache-dir &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pypi_requirements_string</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;RUN pip install uv&quot;</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;RUN uv pip install --no-cache-dir </span><span class="si">{</span><span class="n">pypi_requirements_string</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.pipeline_execution.utils.generate_image_hash" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_image_hash</span><span class="p">(</span><span class="n">dockerfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Generate a hash of the Dockerfile.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dockerfile</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Dockerfile for which to generate the hash.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hash of the Dockerfile.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_image_hash</span><span class="p">(</span><span class="n">dockerfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a hash of the Dockerfile.</span>

<span class="sd">    Args:</span>
<span class="sd">        dockerfile: The Dockerfile for which to generate the hash.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The hash of the Dockerfile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hash_</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>  <span class="c1"># nosec</span>
    <span class="c1"># Uncomment this line when developing to guarantee a new docker image gets</span>
    <span class="c1"># built after restarting the server</span>
    <span class="c1"># hash_.update(f&quot;{os.getpid()}&quot;.encode())</span>
    <span class="n">hash_</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dockerfile</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">hash_</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.pipeline_execution.utils.get_pipeline_run_analytics_metadata" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pipeline_run_analytics_metadata</span><span class="p">(</span><span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotResponse</span><span class="p">,</span> <span class="n">stack</span><span class="p">:</span> <span class="n">StackResponse</span><span class="p">,</span> <span class="n">source_snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get metadata for the pipeline run analytics event.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotResponse (zenml.models.PipelineSnapshotResponse)" href="core-models.html#zenml.models.PipelineSnapshotResponse">PipelineSnapshotResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The snapshot of the run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stack</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackResponse (zenml.models.StackResponse)" href="core-models.html#zenml.models.StackResponse">StackResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stack on which the run will happen.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_snapshot_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the source snapshot from which the run
was started.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The analytics metadata.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pipeline_run_analytics_metadata</span><span class="p">(</span>
    <span class="n">snapshot</span><span class="p">:</span> <span class="s2">&quot;PipelineSnapshotResponse&quot;</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="n">StackResponse</span><span class="p">,</span>
    <span class="n">source_snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get metadata for the pipeline run analytics event.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot: The snapshot of the run.</span>
<span class="sd">        stack: The stack on which the run will happen.</span>
<span class="sd">        source_snapshot_id: ID of the source snapshot from which the run</span>
<span class="sd">            was started.</span>
<span class="sd">        run_id: ID of the run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The analytics metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_materializer</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">is_internal</span><span class="p">:</span>
                    <span class="n">custom_materializer</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">assert</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">user_id</span>
    <span class="n">stack_creator</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">user_id</span>
    <span class="n">own_stack</span> <span class="o">=</span> <span class="n">stack_creator</span> <span class="ow">and</span> <span class="n">stack_creator</span> <span class="o">==</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">user_id</span>

    <span class="n">stack_metadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">component_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">component_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flavor_name</span>
        <span class="k">for</span> <span class="n">component_type</span><span class="p">,</span> <span class="n">component_list</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="s2">&quot;store_type&quot;</span><span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>  <span class="c1"># This method is called from within a REST endpoint</span>
        <span class="o">**</span><span class="n">stack_metadata</span><span class="p">,</span>
        <span class="s2">&quot;total_steps&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">snapshot</span><span class="o">.</span><span class="n">step_configurations</span><span class="p">),</span>
        <span class="s2">&quot;schedule&quot;</span><span class="p">:</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">schedule</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;custom_materializer&quot;</span><span class="p">:</span> <span class="n">custom_materializer</span><span class="p">,</span>
        <span class="s2">&quot;own_stack&quot;</span><span class="p">:</span> <span class="n">own_stack</span><span class="p">,</span>
        <span class="s2">&quot;pipeline_run_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">run_id</span><span class="p">),</span>
        <span class="s2">&quot;source_snapshot_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_snapshot_id</span><span class="p">),</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.pipeline_execution.utils.run_snapshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_snapshot</span><span class="p">(</span><span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotResponse</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">PipelineSnapshotRunRequest</span><span class="p">,</span> <span class="n">sync</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">template_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Run a pipeline from a snapshot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotResponse (zenml.models.PipelineSnapshotResponse)" href="core-models.html#zenml.models.PipelineSnapshotResponse">PipelineSnapshotResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The snapshot to run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotRunRequest (zenml.models.PipelineSnapshotRunRequest)" href="core-models.html#zenml.models.PipelineSnapshotRunRequest">PipelineSnapshotRunRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The run request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sync</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to run the snapshot synchronously.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>template_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the template from which to create the snapshot
request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the snapshot can not be run.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the server URL is not set in the server configuration.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="MaxConcurrentTasksError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.MaxConcurrentTasksError)" href="core-exceptions.html#zenml.exceptions.MaxConcurrentTasksError">MaxConcurrentTasksError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the maximum number of concurrent run
snapshot tasks is reached.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the new pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_snapshot</span><span class="p">(</span>
    <span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotResponse</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">PipelineSnapshotRunRequest</span><span class="p">,</span>
    <span class="n">sync</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">template_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a pipeline from a snapshot.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot: The snapshot to run.</span>
<span class="sd">        auth_context: Authentication context.</span>
<span class="sd">        request: The run request.</span>
<span class="sd">        sync: Whether to run the snapshot synchronously.</span>
<span class="sd">        template_id: The ID of the template from which to create the snapshot</span>
<span class="sd">            request.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the snapshot can not be run.</span>
<span class="sd">        RuntimeError: If the server URL is not set in the server configuration.</span>
<span class="sd">        MaxConcurrentTasksError: If the maximum number of concurrent run</span>
<span class="sd">            snapshot tasks is reached.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ID of the new pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">runnable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">stack</span> <span class="o">:=</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span>
            <span class="n">validate_stack_is_runnable_from_server</span><span class="p">(</span>
                <span class="n">zen_store</span><span class="o">=</span><span class="n">zen_store</span><span class="p">(),</span> <span class="n">stack</span><span class="o">=</span><span class="n">stack</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">build</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;This snapshot can not be run via the server because it does &quot;</span>
                <span class="s2">&quot;not have an associated build. This is probably because the &quot;</span>
                <span class="s2">&quot;build has been deleted.&quot;</span>
            <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This snapshot can not be run via the server.&quot;</span><span class="p">)</span>

    <span class="c1"># Guaranteed by the `runnable` check above</span>
    <span class="n">build</span> <span class="o">=</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">build</span>
    <span class="k">assert</span> <span class="n">build</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">stack</span>
    <span class="k">assert</span> <span class="n">stack</span>

    <span class="k">if</span> <span class="n">build</span><span class="o">.</span><span class="n">stack_checksum</span> <span class="ow">and</span> <span class="n">build</span><span class="o">.</span><span class="n">stack_checksum</span> <span class="o">!=</span> <span class="n">compute_stack_checksum</span><span class="p">(</span>
        <span class="n">stack</span><span class="o">=</span><span class="n">stack</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The stack </span><span class="si">{</span><span class="n">stack</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> has been updated since it was used for &quot;</span>
            <span class="s2">&quot;the snapshot. This means the Docker &quot;</span>
            <span class="s2">&quot;images associated with this template most likely do not contain &quot;</span>
            <span class="s2">&quot;the necessary requirements. Please create a new snapshot with &quot;</span>
            <span class="s2">&quot;the updated stack.&quot;</span>
        <span class="p">)</span>

    <span class="n">validate_stack_is_runnable_from_server</span><span class="p">(</span><span class="n">zen_store</span><span class="o">=</span><span class="n">zen_store</span><span class="p">(),</span> <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">run_configuration</span><span class="p">:</span>
        <span class="n">validate_run_config_is_runnable_from_server</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">run_configuration</span><span class="p">)</span>

    <span class="n">snapshot_request</span> <span class="o">=</span> <span class="n">snapshot_request_from_source_snapshot</span><span class="p">(</span>
        <span class="n">source_snapshot</span><span class="o">=</span><span class="n">snapshot</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">run_configuration</span> <span class="ow">or</span> <span class="n">PipelineRunConfiguration</span><span class="p">(),</span>
        <span class="n">template_id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">ensure_async_orchestrator</span><span class="p">(</span><span class="n">snapshot</span><span class="o">=</span><span class="n">snapshot_request</span><span class="p">,</span> <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">)</span>

    <span class="n">new_snapshot</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_snapshot</span><span class="p">(</span><span class="n">snapshot_request</span><span class="p">)</span>

    <span class="n">server_url</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">server_url</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_url</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The server URL is not set in the server configuration.&quot;</span>
        <span class="p">)</span>
    <span class="k">assert</span> <span class="n">build</span><span class="o">.</span><span class="n">zenml_version</span>
    <span class="n">zenml_version</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">zenml_version</span>

    <span class="n">trigger_info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">step_run</span><span class="p">:</span>
        <span class="n">trigger_info</span> <span class="o">=</span> <span class="n">PipelineRunTriggerInfo</span><span class="p">(</span>
            <span class="n">step_run_id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">step_run</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">placeholder_run</span> <span class="o">=</span> <span class="n">create_placeholder_run</span><span class="p">(</span>
        <span class="n">snapshot</span><span class="o">=</span><span class="n">new_snapshot</span><span class="p">,</span> <span class="n">trigger_info</span><span class="o">=</span><span class="n">trigger_info</span>
    <span class="p">)</span>

    <span class="n">report_usage</span><span class="p">(</span>
        <span class="n">feature</span><span class="o">=</span><span class="n">RUN_TEMPLATE_TRIGGERS_FEATURE_NAME</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># We create an API token scoped to the pipeline run that never expires</span>
    <span class="n">api_token</span> <span class="o">=</span> <span class="n">generate_access_token</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">pipeline_run_id</span><span class="o">=</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="c1"># Keep the original API key or device scopes, if any</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">device</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
        <span class="c1"># Never expire the token</span>
        <span class="n">expires_in</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">access_token</span>

    <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">ENV_ZENML_ACTIVE_PROJECT_ID</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_snapshot</span><span class="o">.</span><span class="n">project_id</span><span class="p">),</span>
        <span class="n">ENV_ZENML_ACTIVE_STACK_ID</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">stack</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
        <span class="s2">&quot;ZENML_VERSION&quot;</span><span class="p">:</span> <span class="n">zenml_version</span><span class="p">,</span>
        <span class="s2">&quot;ZENML_STORE_URL&quot;</span><span class="p">:</span> <span class="n">server_url</span><span class="p">,</span>
        <span class="s2">&quot;ZENML_STORE_TYPE&quot;</span><span class="p">:</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="s2">&quot;ZENML_STORE_API_TOKEN&quot;</span><span class="p">:</span> <span class="n">api_token</span><span class="p">,</span>
        <span class="s2">&quot;ZENML_STORE_VERIFY_SSL&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">command</span> <span class="o">=</span> <span class="n">RunnerEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_command</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">RunnerEntrypointConfiguration</span><span class="o">.</span><span class="n">get_entrypoint_arguments</span><span class="p">(</span>
        <span class="n">snapshot_id</span><span class="o">=</span><span class="n">new_snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">placeholder_run_id</span><span class="o">=</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">build</span><span class="o">.</span><span class="n">python_version</span><span class="p">:</span>
        <span class="n">version_info</span> <span class="o">=</span> <span class="n">version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">build</span><span class="o">.</span><span class="n">python_version</span><span class="p">)</span>
        <span class="n">python_version</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">version_info</span><span class="o">.</span><span class="n">minor</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">python_version</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">minor</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="p">(</span>
        <span class="n">pypi_requirements</span><span class="p">,</span>
        <span class="n">apt_packages</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="n">requirements_utils</span><span class="o">.</span><span class="n">get_requirements_for_stack</span><span class="p">(</span>
        <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">,</span> <span class="n">python_version</span><span class="o">=</span><span class="n">python_version</span>
    <span class="p">)</span>

    <span class="n">dockerfile</span> <span class="o">=</span> <span class="n">generate_dockerfile</span><span class="p">(</span>
        <span class="n">pypi_requirements</span><span class="o">=</span><span class="n">pypi_requirements</span><span class="p">,</span>
        <span class="n">apt_packages</span><span class="o">=</span><span class="n">apt_packages</span><span class="p">,</span>
        <span class="n">zenml_version</span><span class="o">=</span><span class="n">zenml_version</span><span class="p">,</span>
        <span class="n">python_version</span><span class="o">=</span><span class="n">python_version</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Building a docker image with requirements and apt packages from the</span>
    <span class="c1"># stack only (no code). Ideally, only orchestrator requirements should</span>
    <span class="c1"># be added to the docker image, but we have to instantiate the entire</span>
    <span class="c1"># stack to get the orchestrator to run pipelines.</span>
    <span class="n">image_hash</span> <span class="o">=</span> <span class="n">generate_image_hash</span><span class="p">(</span><span class="n">dockerfile</span><span class="o">=</span><span class="n">dockerfile</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Building runner image </span><span class="si">%s</span><span class="s2"> for dockerfile:</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">image_hash</span><span class="p">,</span> <span class="n">dockerfile</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_task</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">runner_image</span> <span class="o">=</span> <span class="n">workload_manager</span><span class="p">()</span><span class="o">.</span><span class="n">build_and_push_image</span><span class="p">(</span>
            <span class="n">workload_id</span><span class="o">=</span><span class="n">new_snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">dockerfile</span><span class="o">=</span><span class="n">dockerfile</span><span class="p">,</span>
            <span class="n">image_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">RUNNER_IMAGE_REPOSITORY</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">image_hash</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">sync</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">workload_manager</span><span class="p">()</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="n">workload_id</span><span class="o">=</span><span class="n">new_snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Starting pipeline run.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">runner_timeout</span> <span class="o">=</span> <span class="n">handle_int_env_var</span><span class="p">(</span>
            <span class="n">ENV_ZENML_RUNNER_POD_TIMEOUT</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">180</span>
        <span class="p">)</span>

        <span class="c1"># could do this same thing with a step operator, but we need some</span>
        <span class="c1"># minor changes to the abstract interface to support that.</span>
        <span class="n">workload_manager</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">workload_id</span><span class="o">=</span><span class="n">new_snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">image</span><span class="o">=</span><span class="n">runner_image</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
            <span class="n">arguments</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
            <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
            <span class="n">timeout_in_seconds</span><span class="o">=</span><span class="n">runner_timeout</span><span class="p">,</span>
            <span class="n">sync</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">workload_manager</span><span class="p">()</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="n">workload_id</span><span class="o">=</span><span class="n">new_snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Pipeline run started successfully.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_task_with_analytics_and_error_handling</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">track_handler</span><span class="p">(</span>
            <span class="n">event</span><span class="o">=</span><span class="n">AnalyticsEvent</span><span class="o">.</span><span class="n">RUN_PIPELINE</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">analytics_handler</span><span class="p">:</span>
            <span class="n">analytics_handler</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">get_pipeline_run_analytics_metadata</span><span class="p">(</span>
                <span class="n">snapshot</span><span class="o">=</span><span class="n">new_snapshot</span><span class="p">,</span>
                <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">,</span>
                <span class="n">source_snapshot_id</span><span class="o">=</span><span class="n">snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">run_id</span><span class="o">=</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">_task</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to run snapshot </span><span class="si">%s</span><span class="s2">, run ID: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">snapshot</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="n">run_status</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">run_status</span> <span class="o">==</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">INITIALIZING</span><span class="p">:</span>
                    <span class="c1"># The run isn&#39;t in the provisioning status yet, which means</span>
                    <span class="c1"># the orchestrator wasn&#39;t able to submit the run. In this</span>
                    <span class="c1"># case, we can update the run to failed.</span>
                    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_run</span><span class="p">(</span>
                        <span class="n">run_id</span><span class="o">=</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                        <span class="n">run_update</span><span class="o">=</span><span class="n">PipelineRunUpdate</span><span class="p">(</span>
                            <span class="n">status</span><span class="o">=</span><span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span>
                            <span class="n">status_reason</span><span class="o">=</span><span class="s2">&quot;Failed to start run.&quot;</span><span class="p">,</span>
                            <span class="n">end_time</span><span class="o">=</span><span class="n">utc_now</span><span class="p">(),</span>
                        <span class="p">),</span>
                    <span class="p">)</span>
                    <span class="k">raise</span>

    <span class="k">if</span> <span class="n">sync</span><span class="p">:</span>
        <span class="n">_task_with_analytics_and_error_handling</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">snapshot_executor</span><span class="p">()</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">_task_with_analytics_and_error_handling</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">MaxConcurrentTasksError</span><span class="p">:</span>
            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="n">placeholder_run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">MaxConcurrentTasksError</span><span class="p">(</span>
                <span class="s2">&quot;Maximum number of concurrent snapshot tasks reached.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>

    <span class="k">return</span> <span class="n">placeholder_run</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.pipeline_execution.utils.snapshot_request_from_source_snapshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">snapshot_request_from_source_snapshot</span><span class="p">(</span><span class="n">source_snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotResponse</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">PipelineRunConfiguration</span><span class="p">,</span> <span class="n">template_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineSnapshotRequest</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Generate a snapshot request from a source snapshot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_snapshot</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotResponse (zenml.models.PipelineSnapshotResponse)" href="core-models.html#zenml.models.PipelineSnapshotResponse">PipelineSnapshotResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source snapshot from which to create the
snapshot request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunConfiguration (zenml.config.pipeline_run_configuration.PipelineRunConfiguration)" href="core-config.html#zenml.config.pipeline_run_configuration.PipelineRunConfiguration">PipelineRunConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The run configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>template_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the template from which to create the snapshot
request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there are missing/extra step parameters in the run
configuration.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotRequest (zenml.models.PipelineSnapshotRequest)" href="core-models.html#zenml.models.PipelineSnapshotRequest">PipelineSnapshotRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generated snapshot request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">snapshot_request_from_source_snapshot</span><span class="p">(</span>
    <span class="n">source_snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotResponse</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">PipelineRunConfiguration</span><span class="p">,</span>
    <span class="n">template_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineSnapshotRequest&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a snapshot request from a source snapshot.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_snapshot: The source snapshot from which to create the</span>
<span class="sd">            snapshot request.</span>
<span class="sd">        config: The run configuration.</span>
<span class="sd">        template_id: The ID of the template from which to create the snapshot</span>
<span class="sd">            request.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If there are missing/extra step parameters in the run</span>
<span class="sd">            configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The generated snapshot request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pipeline_update</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
        <span class="n">include</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="n">PipelineConfiguration</span><span class="o">.</span><span class="n">model_fields</span><span class="p">),</span>
        <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;parameters&quot;</span><span class="p">},</span>
        <span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">pipeline_secrets</span> <span class="o">:=</span> <span class="n">pipeline_update</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;secrets&quot;</span><span class="p">,</span> <span class="p">[]):</span>
        <span class="n">pipeline_update</span><span class="p">[</span><span class="s2">&quot;secrets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">id</span>
            <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">pipeline_secrets</span>
        <span class="p">]</span>
    <span class="n">pipeline_configuration</span> <span class="o">=</span> <span class="n">pydantic_utils</span><span class="o">.</span><span class="n">update_model</span><span class="p">(</span>
        <span class="n">source_snapshot</span><span class="o">.</span><span class="n">pipeline_configuration</span><span class="p">,</span> <span class="n">pipeline_update</span>
    <span class="p">)</span>

    <span class="n">steps</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">step_config_updates</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">steps</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">invocation_id</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">step_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">step_update</span> <span class="o">=</span> <span class="n">step_config_updates</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">invocation_id</span><span class="p">,</span> <span class="n">StepConfigurationUpdate</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
            <span class="c1"># Get rid of deprecated name to prevent overriding the step name</span>
            <span class="c1"># with `None`.</span>
            <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">},</span>
            <span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">step_secrets</span> <span class="o">:=</span> <span class="n">step_update</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;secrets&quot;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">step_update</span><span class="p">[</span><span class="s2">&quot;secrets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">id</span>
                <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">step_secrets</span>
            <span class="p">]</span>
        <span class="n">step_config</span> <span class="o">=</span> <span class="n">pydantic_utils</span><span class="o">.</span><span class="n">update_model</span><span class="p">(</span>
            <span class="n">step</span><span class="o">.</span><span class="n">step_config_overrides</span><span class="p">,</span> <span class="n">step_update</span>
        <span class="p">)</span>
        <span class="n">merged_step_config</span> <span class="o">=</span> <span class="n">step_config</span><span class="o">.</span><span class="n">apply_pipeline_configuration</span><span class="p">(</span>
            <span class="n">pipeline_configuration</span>
        <span class="p">)</span>

        <span class="n">required_parameters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">configured_parameters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">step_config</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

        <span class="n">unknown_parameters</span> <span class="o">=</span> <span class="n">configured_parameters</span> <span class="o">-</span> <span class="n">required_parameters</span>
        <span class="k">if</span> <span class="n">unknown_parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Run configuration contains the following unknown &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;parameters for step </span><span class="si">{</span><span class="n">invocation_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">unknown_parameters</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">missing_parameters</span> <span class="o">=</span> <span class="n">required_parameters</span> <span class="o">-</span> <span class="n">configured_parameters</span>
        <span class="k">if</span> <span class="n">missing_parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Run configuration is missing the following required &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;parameters for step </span><span class="si">{</span><span class="n">invocation_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">missing_parameters</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">steps</span><span class="p">[</span><span class="n">invocation_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">Step</span><span class="p">(</span>
            <span class="n">spec</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">spec</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">merged_step_config</span><span class="p">,</span>
            <span class="n">step_config_overrides</span><span class="o">=</span><span class="n">step_config</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">code_reference_request</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">code_reference</span><span class="p">:</span>
        <span class="n">code_reference_request</span> <span class="o">=</span> <span class="n">CodeReferenceRequest</span><span class="p">(</span>
            <span class="n">commit</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">code_reference</span><span class="o">.</span><span class="n">commit</span><span class="p">,</span>
            <span class="n">subdirectory</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">code_reference</span><span class="o">.</span><span class="n">subdirectory</span><span class="p">,</span>
            <span class="n">code_repository</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">code_reference</span><span class="o">.</span><span class="n">code_repository</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">zenml_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_store_info</span><span class="p">()</span><span class="o">.</span><span class="n">version</span>
    <span class="k">assert</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">stack</span>
    <span class="k">assert</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">build</span>

    <span class="c1"># Compute the source snapshot ID:</span>
    <span class="c1"># - If the source snapshot has a name, we use it as the source snapshot.</span>
    <span class="c1">#   That way, all runs will be associated with this snapshot.</span>
    <span class="c1"># - If the source snapshot is based on another snapshot (which therefore</span>
    <span class="c1">#   has a name), we use that one instead.</span>
    <span class="c1"># - If the source snapshot does not have a name and is not based on another</span>
    <span class="c1">#   snapshot, we don&#39;t set a source snapshot.</span>
    <span class="c1">#</span>
    <span class="c1"># With this, we ensure that all runs are associated with the closest named</span>
    <span class="c1"># source snapshot.</span>
    <span class="n">source_snapshot_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">source_snapshot_id</span> <span class="o">=</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">id</span>
    <span class="k">elif</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">source_snapshot_id</span><span class="p">:</span>
        <span class="n">source_snapshot_id</span> <span class="o">=</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">source_snapshot_id</span>

    <span class="k">return</span> <span class="n">PipelineSnapshotRequest</span><span class="p">(</span>
        <span class="n">project</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="n">run_name_template</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">run_name</span> <span class="ow">or</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">run_name_template</span><span class="p">,</span>
        <span class="n">pipeline_configuration</span><span class="o">=</span><span class="n">pipeline_configuration</span><span class="p">,</span>
        <span class="n">step_configurations</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
        <span class="n">client_environment</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">client_version</span><span class="o">=</span><span class="n">zenml_version</span><span class="p">,</span>
        <span class="n">server_version</span><span class="o">=</span><span class="n">zenml_version</span><span class="p">,</span>
        <span class="n">stack</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="n">source_snapshot</span><span class="o">.</span><span class="n">pipeline</span>
        <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">build</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">schedule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">code_reference</span><span class="o">=</span><span class="n">code_reference_request</span><span class="p">,</span>
        <span class="n">code_path</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">code_path</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
        <span class="n">source_snapshot</span><span class="o">=</span><span class="n">source_snapshot_id</span><span class="p">,</span>
        <span class="n">pipeline_version_hash</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">pipeline_version_hash</span><span class="p">,</span>
        <span class="n">pipeline_spec</span><span class="o">=</span><span class="n">source_snapshot</span><span class="o">.</span><span class="n">pipeline_spec</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>
<h7 id="zenml.zen_server.pipeline_execution.utils-modules">Modules</h7>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.pipeline_execution.workload_manager_interface" class="doc doc-heading">
            <code>workload_manager_interface</code>


</h6>

    <div class="doc doc-contents ">

        <p>Workload manager interface definition.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.pipeline_execution.workload_manager_interface-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface" class="doc doc-heading">
            <code>WorkloadManagerInterface</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Workload manager interface.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface.build_and_push_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">build_and_push_image</span><span class="p">(</span><span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">dockerfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sync</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Build and push a Docker image.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workload_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workload ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dockerfile</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dockerfile content to build the image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The image repository and tag.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sync</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, will wait until the build finished before returning.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout_in_seconds</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timeout in seconds to wait before cancelling
the container. If set to 0 the container will run until it
fails or finishes.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The full image name including container registry.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/workload_manager_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">build_and_push_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">dockerfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">sync</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build and push a Docker image.</span>

<span class="sd">    Args:</span>
<span class="sd">        workload_id: Workload ID.</span>
<span class="sd">        dockerfile: The dockerfile content to build the image.</span>
<span class="sd">        image_name: The image repository and tag.</span>
<span class="sd">        sync: If True, will wait until the build finished before returning.</span>
<span class="sd">        timeout_in_seconds: Timeout in seconds to wait before cancelling</span>
<span class="sd">            the container. If set to 0 the container will run until it</span>
<span class="sd">            fails or finishes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The full image name including container registry.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface.delete_workload" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_workload</span><span class="p">(</span><span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Delete a workload.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workload_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workload ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/workload_manager_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_workload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a workload.</span>

<span class="sd">    Args:</span>
<span class="sd">        workload_id: Workload ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface.get_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_logs</span><span class="p">(</span><span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Get logs for a workload.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workload_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workload ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stored logs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/workload_manager_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get logs for a workload.</span>

<span class="sd">    Args:</span>
<span class="sd">        workload_id: Workload ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The stored logs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface.log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log</span><span class="p">(</span><span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Log a message.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workload_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workload ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message to log.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/workload_manager_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log a message.</span>

<span class="sd">    Args:</span>
<span class="sd">        workload_id: Workload ID.</span>
<span class="sd">        message: The message to log.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">arguments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">environment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sync</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Run a Docker container.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workload_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workload ID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Docker image to run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>command</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The command to run in the container.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>arguments</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments for the command.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>environment</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The environment to set in the container.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sync</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, will wait until the container finished running before
returning.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout_in_seconds</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timeout in seconds to wait before cancelling
the container. If set to 0 the container will run until it
fails or finishes.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/pipeline_execution/workload_manager_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">workload_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">command</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">arguments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sync</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout_in_seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a Docker container.</span>

<span class="sd">    Args:</span>
<span class="sd">        workload_id: Workload ID.</span>
<span class="sd">        image: The Docker image to run.</span>
<span class="sd">        command: The command to run in the container.</span>
<span class="sd">        arguments: The arguments for the command.</span>
<span class="sd">        environment: The environment to set in the container.</span>
<span class="sd">        sync: If True, will wait until the container finished running before</span>
<span class="sd">            returning.</span>
<span class="sd">        timeout_in_seconds: Timeout in seconds to wait before cancelling</span>
<span class="sd">            the container. If set to 0 the container will run until it</span>
<span class="sd">            fails or finishes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.rate_limit" class="doc doc-heading">
            <code>rate_limit</code>


</h4>

    <div class="doc doc-contents ">

        <p>Rate limiting for the ZenML Server.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.rate_limit-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.rate_limit.RequestLimiter" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RequestLimiter</span><span class="p">(</span><span class="n">day_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">minute_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>Simple in-memory rate limiter.</p>

        <p>Initializes the limiter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>day_limit</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of requests allowed per day.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>minute_limit</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of requests allowed per minute.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If both day_limit and minute_limit are None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/rate_limit.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">day_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">minute_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the limiter.</span>

<span class="sd">    Args:</span>
<span class="sd">        day_limit: The number of requests allowed per day.</span>
<span class="sd">        minute_limit: The number of requests allowed per minute.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If both day_limit and minute_limit are None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limiting_enabled</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rate_limit_enabled</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiting_enabled</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">day_limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">minute_limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pass either day or minuter limits, or both.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">day_limit</span> <span class="o">=</span> <span class="n">day_limit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">minute_limit</span> <span class="o">=</span> <span class="n">minute_limit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h7 id="zenml.zen_server.rate_limit.RequestLimiter-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rate_limit.RequestLimiter.hit_limiter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hit_limiter</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Increase the number of hits in the limiter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request limit is exceeded.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rate_limit.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hit_limiter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Increase the number of hits in the limiter.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: Request object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: If the request limit is exceeded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiting_enabled</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>

    <span class="n">requester</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ipaddr</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">minute_ago</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="mi">60</span>
    <span class="n">day_ago</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">bisect</span><span class="w"> </span><span class="kn">import</span> <span class="n">bisect_left</span>

    <span class="c1"># remove failures older than a day</span>
    <span class="n">older_index</span> <span class="o">=</span> <span class="n">bisect_left</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">],</span> <span class="n">day_ago</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">][</span><span class="n">older_index</span><span class="p">:]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">day_limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">])</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">day_limit</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">429</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Daily request limit exceeded.&quot;</span>
        <span class="p">)</span>
    <span class="n">minute_requests</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">limiter_hit</span>
            <span class="k">for</span> <span class="n">limiter_hit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">limiter_hit</span> <span class="o">&gt;=</span> <span class="n">minute_ago</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minute_limit</span> <span class="ow">and</span> <span class="n">minute_requests</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minute_limit</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">429</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Minute request limit exceeded.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rate_limit.RequestLimiter.limit_failed_requests" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">limit_failed_requests</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Limits the number of failed requests.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rate_limit.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span><span class="w"> </span><span class="nf">limit_failed_requests</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Limits the number of failed requests.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: Request object.</span>

<span class="sd">    Yields:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hit_limiter</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="k">yield</span>

    <span class="c1"># if request was successful - reset limiter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reset_limiter</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rate_limit.RequestLimiter.reset_limiter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_limiter</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Resets the limiter on successful request.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rate_limit.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_limiter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resets the limiter on successful request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: Request object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiting_enabled</span><span class="p">:</span>
        <span class="n">requester</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ipaddr</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">requester</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">limiter</span><span class="p">[</span><span class="n">requester</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.rate_limit-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.rate_limit.rate_limit_requests" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rate_limit_requests</span><span class="p">(</span><span class="n">day_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">minute_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Decorator to handle exceptions in the API.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>day_limit</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of requests allowed per day.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>minute_limit</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of requests allowed per minute.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decorated function.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rate_limit.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rate_limit_requests</span><span class="p">(</span>
    <span class="n">day_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">minute_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to handle exceptions in the API.</span>

<span class="sd">    Args:</span>
<span class="sd">        day_limit: Number of requests allowed per day.</span>
<span class="sd">        minute_limit: Number of requests allowed per minute.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Decorated function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">limiter</span> <span class="o">=</span> <span class="n">RequestLimiter</span><span class="p">(</span><span class="n">day_limit</span><span class="o">=</span><span class="n">day_limit</span><span class="p">,</span> <span class="n">minute_limit</span><span class="o">=</span><span class="n">minute_limit</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">F</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">F</span><span class="p">:</span>
        <span class="n">request_arg</span><span class="p">,</span> <span class="n">request_kwarg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>
        <span class="k">for</span> <span class="n">arg_num</span><span class="p">,</span> <span class="n">arg_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">parameters</span><span class="p">[</span><span class="n">arg_name</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span> <span class="o">==</span> <span class="n">Request</span><span class="p">:</span>
                <span class="n">request_arg</span> <span class="o">=</span> <span class="n">arg_num</span>
                <span class="n">request_kwarg</span> <span class="o">=</span> <span class="n">arg_name</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">request_arg</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">request_kwarg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Rate limiting APIs must have argument of `Request` type.&quot;</span>
            <span class="p">)</span>

        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">decorated</span><span class="p">(</span>
            <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">request_kwarg</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">request_kwarg</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">request_arg</span><span class="p">]</span>
            <span class="k">with</span> <span class="n">limiter</span><span class="o">.</span><span class="n">limit_failed_requests</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">decorated</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.rbac" class="doc doc-heading">
            <code>rbac</code>


</h4>

    <div class="doc doc-contents ">

        <p>RBAC definitions.</p>










  <div class="doc doc-children">









<h5 id="zenml.zen_server.rbac-modules">Modules</h5>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.rbac.endpoint_utils" class="doc doc-heading">
            <code>endpoint_utils</code>


</h6>

    <div class="doc doc-contents ">

        <p>High-level helper functions to write endpoints with RBAC.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.rbac.endpoint_utils-classes">Classes</h7>
<h7 id="zenml.zen_server.rbac.endpoint_utils-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_batch_create_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_batch_create_entity</span><span class="p">(</span><span class="n">batch</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyRequest</span><span class="p">],</span> <span class="n">create_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyRequest</span><span class="p">]],</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and create a batch of entities if authorized.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>batch</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyRequest">AnyRequest</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The batch to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>create_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyRequest">AnyRequest</span>]], <span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to create the entities.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the resource type is usage-tracked.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created entities.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_batch_create_entity</span><span class="p">(</span>
    <span class="n">batch</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyRequest</span><span class="p">],</span>
    <span class="n">create_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyRequest</span><span class="p">]],</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and create a batch of entities if authorized.</span>

<span class="sd">    Args:</span>
<span class="sd">        batch: The batch to create.</span>
<span class="sd">        create_method: The method to create the entities.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the resource type is usage-tracked.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created entities.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">auth_context</span>

    <span class="n">resource_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">request_model</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">:</span>
        <span class="n">resource_type</span> <span class="o">=</span> <span class="n">get_resource_type_for_model</span><span class="p">(</span><span class="n">request_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resource_type</span><span class="p">:</span>
            <span class="n">resource_types</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">resource_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_model</span><span class="p">,</span> <span class="n">UserScopedRequest</span><span class="p">):</span>
            <span class="c1"># Ignore the user field set in the request model, if any, and set it</span>
            <span class="c1"># to the current user&#39;s ID instead. This is just a precaution, given</span>
            <span class="c1"># that the SQLZenStore also does this same validation on all request</span>
            <span class="c1"># models.</span>
            <span class="n">request_model</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>

    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="n">batch</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resource_types</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">reportable_resources</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Batch requests are currently not possible with usage-tracked &quot;</span>
            <span class="s2">&quot;features.&quot;</span>
        <span class="p">)</span>

    <span class="n">created</span> <span class="o">=</span> <span class="n">create_method</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model_batch</span><span class="p">(</span><span class="n">created</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_create_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_create_entity</span><span class="p">(</span><span class="n">request_model</span><span class="p">:</span> <span class="n">AnyRequest</span><span class="p">,</span> <span class="n">create_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">AnyRequest</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span> <span class="n">surrogate_models</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyOtherResponse</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">skip_entitlements</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and create the entity if authorized.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request_model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyRequest">AnyRequest</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity request model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>create_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.AnyRequest">AnyRequest</span>], <span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to create the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>surrogate_models</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyOtherResponse">AnyOtherResponse</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of surrogate models to verify
UPDATE permissions for instead of verifying CREATE permissions for
the request model.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skip_entitlements</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to skip the entitlement check and usage
increment.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A model of the created entity.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_create_entity</span><span class="p">(</span>
    <span class="n">request_model</span><span class="p">:</span> <span class="n">AnyRequest</span><span class="p">,</span>
    <span class="n">create_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">AnyRequest</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span>
    <span class="n">surrogate_models</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyOtherResponse</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">skip_entitlements</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and create the entity if authorized.</span>

<span class="sd">    Args:</span>
<span class="sd">        request_model: The entity request model.</span>
<span class="sd">        create_method: The method to create the entity.</span>
<span class="sd">        surrogate_models: Optional list of surrogate models to verify</span>
<span class="sd">            UPDATE permissions for instead of verifying CREATE permissions for</span>
<span class="sd">            the request model.</span>
<span class="sd">        skip_entitlements: Whether to skip the entitlement check and usage</span>
<span class="sd">            increment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A model of the created entity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_model</span><span class="p">,</span> <span class="n">UserScopedRequest</span><span class="p">):</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">auth_context</span>

        <span class="c1"># Ignore the user field set in the request model, if any, and set it to</span>
        <span class="c1"># the current user&#39;s ID instead. This is just a precaution, given that</span>
        <span class="c1"># the SQLZenStore also does this same validation on all request models.</span>
        <span class="n">request_model</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>

    <span class="k">if</span> <span class="n">surrogate_models</span><span class="p">:</span>
        <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span>
            <span class="n">models</span><span class="o">=</span><span class="n">surrogate_models</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">request_model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>

    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">get_resource_type_for_model</span><span class="p">(</span><span class="n">request_model</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resource_type</span><span class="p">:</span>
        <span class="n">needs_usage_increment</span> <span class="o">=</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="n">skip_entitlements</span>
            <span class="ow">and</span> <span class="n">resource_type</span> <span class="ow">in</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">reportable_resources</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">needs_usage_increment</span><span class="p">:</span>
            <span class="n">check_entitlement</span><span class="p">(</span><span class="n">resource_type</span><span class="p">)</span>

    <span class="n">created</span> <span class="o">=</span> <span class="n">create_method</span><span class="p">(</span><span class="n">request_model</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resource_type</span> <span class="ow">and</span> <span class="n">needs_usage_increment</span><span class="p">:</span>
        <span class="n">report_usage</span><span class="p">(</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">created</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">created</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_delete_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="n">UUIDOrStr</span><span class="p">,</span> <span class="n">get_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span> <span class="n">delete_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span> <span class="o">**</span><span class="n">delete_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and delete an entity.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the entity to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span>, <span title="bool">bool</span>], <span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to fetch the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delete_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span>], None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to delete the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delete_method_kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to the delete method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The deleted entity.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_delete_entity</span><span class="p">(</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">UUIDOrStr</span><span class="p">,</span>
    <span class="n">get_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span>
    <span class="n">delete_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span>
    <span class="o">**</span><span class="n">delete_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and delete an entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        id: The ID of the entity to delete.</span>
<span class="sd">        get_method: The method to fetch the entity.</span>
<span class="sd">        delete_method: The method to delete the entity.</span>
<span class="sd">        delete_method_kwargs: Keyword arguments to pass to the delete method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The deleted entity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">get_method</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">DELETE</span><span class="p">)</span>
    <span class="n">delete_method</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="o">**</span><span class="n">delete_method_kwargs</span><span class="p">)</span>
    <span class="n">delete_model_resource</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">model</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_get_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_get_entity</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="n">UUIDOrStr</span><span class="p">,</span> <span class="n">get_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span> <span class="o">**</span><span class="n">get_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and fetch an entity.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the entity to fetch.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span>], <span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to fetch the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_method_kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to the get method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A model of the fetched entity.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_get_entity</span><span class="p">(</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">UUIDOrStr</span><span class="p">,</span>
    <span class="n">get_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span>
    <span class="o">**</span><span class="n">get_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and fetch an entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        id: The ID of the entity to fetch.</span>
<span class="sd">        get_method: The method to fetch the entity.</span>
<span class="sd">        get_method_kwargs: Keyword arguments to pass to the get method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A model of the fetched entity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">get_method</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="o">**</span><span class="n">get_method_kwargs</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_get_or_create_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_get_or_create_entity</span><span class="p">(</span><span class="n">request_model</span><span class="p">:</span> <span class="n">AnyRequest</span><span class="p">,</span> <span class="n">get_or_create_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">AnyRequest</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and create the entity if authorized.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request_model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyRequest">AnyRequest</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity request model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_or_create_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.AnyRequest">AnyRequest</span>, <span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[[], None]]], <span title="typing.Tuple">Tuple</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>, <span title="bool">bool</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to get or create the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity and a boolean indicating whether the entity was created.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_get_or_create_entity</span><span class="p">(</span>
    <span class="n">request_model</span><span class="p">:</span> <span class="n">AnyRequest</span><span class="p">,</span>
    <span class="n">get_or_create_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
        <span class="p">[</span><span class="n">AnyRequest</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>
    <span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and create the entity if authorized.</span>

<span class="sd">    Args:</span>
<span class="sd">        request_model: The entity request model.</span>
<span class="sd">        get_or_create_method: The method to get or create the entity.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The entity and a boolean indicating whether the entity was created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_model</span><span class="p">,</span> <span class="n">UserScopedRequest</span><span class="p">):</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">auth_context</span>

        <span class="c1"># Ignore the user field set in the request model, if any, and set it to</span>
        <span class="c1"># the current user&#39;s ID instead. This is just a precaution, given that</span>
        <span class="c1"># the SQLZenStore also does this same validation on all request models.</span>
        <span class="n">request_model</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>

    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">get_resource_type_for_model</span><span class="p">(</span><span class="n">request_model</span><span class="p">)</span>
    <span class="n">needs_usage_increment</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">resource_type</span> <span class="ow">and</span> <span class="n">resource_type</span> <span class="ow">in</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">reportable_resources</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_pre_creation_hook</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">request_model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resource_type</span> <span class="ow">and</span> <span class="n">needs_usage_increment</span><span class="p">:</span>
            <span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">resource_type</span><span class="p">)</span>

    <span class="n">model</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">get_or_create_method</span><span class="p">(</span><span class="n">request_model</span><span class="p">,</span> <span class="n">_pre_creation_hook</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">resource_type</span> <span class="ow">and</span> <span class="n">needs_usage_increment</span><span class="p">:</span>
        <span class="n">report_usage</span><span class="p">(</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">model</span><span class="p">),</span> <span class="n">created</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_list_entities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_list_entities</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">AnyFilter</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="n">ResourceType</span><span class="p">,</span> <span class="n">list_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">AnyFilter</span><span class="p">],</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]],</span> <span class="o">**</span><span class="n">list_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and list entities.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyFilter">AnyFilter</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity filter model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ResourceType (zenml.zen_server.rbac.models.ResourceType)" href="#zenml.zen_server.rbac.models.ResourceType">ResourceType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource type of the entities to list.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>list_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.AnyFilter">AnyFilter</span>], <a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to list the entities.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>list_method_kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to the list method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A page of entity models.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the filter's project scope is not set or is not a UUID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_list_entities</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">AnyFilter</span><span class="p">,</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">ResourceType</span><span class="p">,</span>
    <span class="n">list_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">AnyFilter</span><span class="p">],</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]],</span>
    <span class="o">**</span><span class="n">list_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and list entities.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: The entity filter model.</span>
<span class="sd">        resource_type: The resource type of the entities to list.</span>
<span class="sd">        list_method: The method to list the entities.</span>
<span class="sd">        list_method_kwargs: Keyword arguments to pass to the list method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A page of entity models.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the filter&#39;s project scope is not set or is not a UUID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">auth_context</span>

    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filter_model</span><span class="p">,</span> <span class="n">ProjectScopedFilter</span><span class="p">):</span>
        <span class="c1"># A project scoped filter must always be scoped to a specific</span>
        <span class="c1"># project. This is required for the RBAC check to work.</span>
        <span class="n">set_filter_project_scope</span><span class="p">(</span><span class="n">filter_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filter_model</span><span class="o">.</span><span class="n">project</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="n">UUID</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Project scope must be a UUID, got &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="n">filter_model</span><span class="o">.</span><span class="n">project</span>

    <span class="n">allowed_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span>
    <span class="p">)</span>
    <span class="n">filter_model</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">allowed_ids</span>
    <span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">list_method</span><span class="p">(</span><span class="n">filter_model</span><span class="p">,</span> <span class="o">**</span><span class="n">list_method_kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_page</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_prune_entities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_prune_entities</span><span class="p">(</span><span class="n">resource_type</span><span class="p">:</span> <span class="n">ResourceType</span><span class="p">,</span> <span class="n">prune_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and prune entities of certain type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ResourceType (zenml.zen_server.rbac.models.ResourceType)" href="#zenml.zen_server.rbac.models.ResourceType">ResourceType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource type of the entities to prune.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prune_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to prune the entities.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The project ID to prune the entities for.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to the prune method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_prune_entities</span><span class="p">(</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">ResourceType</span><span class="p">,</span>
    <span class="n">prune_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and prune entities of certain type.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_type: The resource type of the entities to prune.</span>
<span class="sd">        prune_method: The method to prune the entities.</span>
<span class="sd">        project_id: The project ID to prune the entities for.</span>
<span class="sd">        kwargs: Keyword arguments to pass to the prune method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permission</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">PRUNE</span><span class="p">,</span>
        <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">prune_method</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.endpoint_utils.verify_permissions_and_update_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permissions_and_update_entity</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="n">UUIDOrStr</span><span class="p">,</span> <span class="n">update_model</span><span class="p">:</span> <span class="n">AnyUpdate</span><span class="p">,</span> <span class="n">get_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span> <span class="n">update_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">,</span> <span class="n">AnyUpdate</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span> <span class="o">**</span><span class="n">update_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verify permissions and update an entity.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the entity to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update_model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyUpdate">AnyUpdate</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity update model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>get_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span>, <span title="bool">bool</span>], <span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to fetch the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update_method</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="zenml.zen_server.rbac.endpoint_utils.UUIDOrStr">UUIDOrStr</span>, <span title="zenml.zen_server.rbac.endpoint_utils.AnyUpdate">AnyUpdate</span>], <span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The method to update the entity.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update_method_kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to the update method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zenml.zen_server.rbac.endpoint_utils.AnyResponse">AnyResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A model of the updated entity.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/endpoint_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permissions_and_update_entity</span><span class="p">(</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">UUIDOrStr</span><span class="p">,</span>
    <span class="n">update_model</span><span class="p">:</span> <span class="n">AnyUpdate</span><span class="p">,</span>
    <span class="n">get_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span>
    <span class="n">update_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">UUIDOrStr</span><span class="p">,</span> <span class="n">AnyUpdate</span><span class="p">],</span> <span class="n">AnyResponse</span><span class="p">],</span>
    <span class="o">**</span><span class="n">update_method_kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify permissions and update an entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        id: The ID of the entity to update.</span>
<span class="sd">        update_model: The entity update model.</span>
<span class="sd">        get_method: The method to fetch the entity.</span>
<span class="sd">        update_method: The method to update the entity.</span>
<span class="sd">        update_method_kwargs: Keyword arguments to pass to the update method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A model of the updated entity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># We don&#39;t need the hydrated version here</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">get_method</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="n">updated_model</span> <span class="o">=</span> <span class="n">update_method</span><span class="p">(</span>
        <span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">update_model</span><span class="p">,</span> <span class="o">**</span><span class="n">update_method_kwargs</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.rbac.models" class="doc doc-heading">
            <code>models</code>


</h6>

    <div class="doc doc-contents ">

        <p>RBAC model classes.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.rbac.models-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.rbac.models.Action" class="doc doc-heading">
            <code>Action</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="StrEnum (zenml.utils.enum_utils.StrEnum)" href="core-utils.html#zenml.utils.enum_utils.StrEnum">StrEnum</a></code></p>


        <p>RBAC actions.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.rbac.models.Resource" class="doc doc-heading">
            <code>Resource</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>RBAC resource model.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.rbac.models.Resource-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.models.Resource.parse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="n">resource</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Resource</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Parse an RBAC resource string into a Resource object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource to convert.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The converted resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Resource&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an RBAC resource string into a Resource object.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource: The resource to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The converted resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">resource</span><span class="p">:</span>
        <span class="p">(</span>
            <span class="n">project_id</span><span class="p">,</span>
            <span class="n">resource_type_and_id</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">resource_type_and_id</span> <span class="o">=</span> <span class="n">resource</span>

    <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">resource_type_and_id</span><span class="p">:</span>
        <span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span> <span class="o">=</span> <span class="n">resource_type_and_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">resource_type</span> <span class="o">=</span> <span class="n">resource_type_and_id</span>

    <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.models.Resource.validate_project_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_project_id</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Resource</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Validate that project_id is set in combination with project-scoped resource types.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If project_id is not set for a project-scoped
resource or set for an unscoped resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The validated resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_project_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Resource&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate that project_id is set in combination with project-scoped resource types.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If project_id is not set for a project-scoped</span>
<span class="sd">            resource or set for an unscoped resource.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The validated resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">ResourceType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resource_type</span><span class="o">.</span><span class="n">is_project_scoped</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;project_id must be set for project-scoped resource type &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">resource_type</span><span class="o">.</span><span class="n">is_project_scoped</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;project_id must not be set for global resource type &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.rbac.models.ResourceType" class="doc doc-heading">
            <code>ResourceType</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="StrEnum (zenml.utils.enum_utils.StrEnum)" href="core-utils.html#zenml.utils.enum_utils.StrEnum">StrEnum</a></code></p>


        <p>Resource types of the server API.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.rbac.models.ResourceType-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.models.ResourceType.is_project_scoped" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_project_scoped</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Check if a resource type is project scoped.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the resource type is project scoped.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_project_scoped</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if a resource type is project scoped.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the resource type is project scoped.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FLAVOR</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">STACK</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">TAG</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SERVICE_ACCOUNT</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PROJECT</span><span class="p">,</span>
        <span class="c1"># Deactivated for now</span>
        <span class="c1"># self.USER,</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.rbac.rbac_interface" class="doc doc-heading">
            <code>rbac_interface</code>


</h6>

    <div class="doc doc-contents ">

        <p>RBAC interface definition.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.rbac.rbac_interface-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.rbac.rbac_interface.RBACInterface" class="doc doc-heading">
            <code>RBACInterface</code>


</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>RBAC interface definition.</p>











  <div class="doc doc-children">








<h9 id="zenml.zen_server.rbac.rbac_interface.RBACInterface-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.rbac_interface.RBACInterface.check_permissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_permissions</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resources</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Resource</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Checks if a user has permissions to perform an action on resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User which wants to access a resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resources</code>
            </td>
            <td>
                  <code><span title="typing.Set">Set</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resources the user wants to access.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action that the user wants to perform on the resources.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary mapping resources to a boolean which indicates whether</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the user has permissions to perform the action on that resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/rbac_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_permissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span> <span class="n">resources</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Resource</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a user has permissions to perform an action on resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        user: User which wants to access a resource.</span>
<span class="sd">        resources: The resources the user wants to access.</span>
<span class="sd">        action: The action that the user wants to perform on the resources.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary mapping resources to a boolean which indicates whether</span>
<span class="sd">        the user has permissions to perform the action on that resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.rbac_interface.RBACInterface.delete_resources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_resources</span><span class="p">(</span><span class="n">resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Delete resource membership information for a list of resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resources for which to delete the resource membership
information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/rbac_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete resource membership information for a list of resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        resources: The resources for which to delete the resource membership</span>
<span class="sd">            information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.rbac_interface.RBACInterface.list_allowed_resource_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_allowed_resource_ids</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Lists all resource IDs of a resource type that a user can access.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User which wants to access a resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource the user wants to access.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action that the user wants to perform on the resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple (full_resource_access, resource_ids).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>full_resource_access</code> will be <code>True</code> if the user can perform the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>given action on any instance of the given resource type, <code>False</code></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>otherwise. If <code>full_resource_access</code> is <code>False</code>, <code>resource_ids</code></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>will contain the list of instance IDs that the user can perform</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the action on.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/rbac_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_allowed_resource_ids</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists all resource IDs of a resource type that a user can access.</span>

<span class="sd">    Args:</span>
<span class="sd">        user: User which wants to access a resource.</span>
<span class="sd">        resource: The resource the user wants to access.</span>
<span class="sd">        action: The action that the user wants to perform on the resource.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple (full_resource_access, resource_ids).</span>
<span class="sd">        `full_resource_access` will be `True` if the user can perform the</span>
<span class="sd">        given action on any instance of the given resource type, `False`</span>
<span class="sd">        otherwise. If `full_resource_access` is `False`, `resource_ids`</span>
<span class="sd">        will contain the list of instance IDs that the user can perform</span>
<span class="sd">        the action on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.rbac_interface.RBACInterface.update_resource_membership" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_resource_membership</span><span class="p">(</span><span class="n">sharing_user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">],</span> <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h10>


    <div class="doc doc-contents ">

        <p>Update the resource membership of a user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sharing_user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User that is sharing the resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>actions</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actions that the user should be able to perform on the
resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the user for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>team_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the team for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/rbac_interface.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_resource_membership</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sharing_user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span>
    <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span>
    <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">],</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the resource membership of a user.</span>

<span class="sd">    Args:</span>
<span class="sd">        sharing_user: User that is sharing the resource.</span>
<span class="sd">        resource: The resource.</span>
<span class="sd">        actions: The actions that the user should be able to perform on the</span>
<span class="sd">            resource.</span>
<span class="sd">        user_id: ID of the user for which to update the membership.</span>
<span class="sd">        team_id: ID of the team for which to update the membership.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.rbac.rbac_sql_zen_store" class="doc doc-heading">
            <code>rbac_sql_zen_store</code>


</h6>

    <div class="doc doc-contents ">

        <p>RBAC SQL Zen Store implementation.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.rbac.rbac_sql_zen_store-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.rbac.rbac_sql_zen_store.RBACSqlZenStore" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RBACSqlZenStore</span><span class="p">(</span><span class="n">skip_default_registrations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="SqlZenStore(skip_default_registrations: bool = False, **kwargs: Any) (zenml.zen_stores.sql_zen_store.SqlZenStore)" href="core-zen_stores.html#zenml.zen_stores.sql_zen_store.SqlZenStore">SqlZenStore</a></code></p>


        <p>Wrapper around the SQLZenStore that implements RBAC functionality.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_stores/base_zen_store.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">skip_default_registrations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and initialize a store.</span>

<span class="sd">    Args:</span>
<span class="sd">        skip_default_registrations: If `True`, the creation of the default</span>
<span class="sd">            stack and user in the store will be skipped.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the Pydantic</span>
<span class="sd">            constructor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_initialize</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_default_registrations</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing database&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_database</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Skipping database initialization&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>
<h7 id="zenml.zen_server.rbac.rbac_sql_zen_store-functions">Functions</h7>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.rbac.utils" class="doc doc-heading">
            <code>utils</code>


</h6>

    <div class="doc doc-contents ">

        <p>RBAC utility functions.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.rbac.utils-classes">Classes</h7>
<h7 id="zenml.zen_server.rbac.utils-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.batch_verify_permissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_verify_permissions</span><span class="p">(</span><span class="n">resources</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Batch permission verification.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resources</code>
            </td>
            <td>
                  <code><span title="typing.Set">Set</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resources the user wants to perform the action on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action the user wants to perform.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the user is not allowed to perform the action.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the permission verification failed unexpectedly.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">batch_verify_permissions</span><span class="p">(</span>
    <span class="n">resources</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">],</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Batch permission verification.</span>

<span class="sd">    Args:</span>
<span class="sd">        resources: The resources the user wants to perform the action on.</span>
<span class="sd">        action: The action the user wants to perform.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the user is not allowed to perform the action.</span>
<span class="sd">        RuntimeError: If the permission verification failed unexpectedly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">auth_context</span>

    <span class="n">permissions</span> <span class="o">=</span> <span class="n">rbac</span><span class="p">()</span><span class="o">.</span><span class="n">check_permissions</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">permissions</span><span class="p">:</span>
            <span class="c1"># This should never happen if the RBAC implementation is working</span>
            <span class="c1"># correctly</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to verify permissions to </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> resource &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">resource</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">permissions</span><span class="p">[</span><span class="n">resource</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Insufficient permissions to </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;resource &#39;</span><span class="si">{</span><span class="n">resource</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.batch_verify_permissions_for_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">AnyModel</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Batch permission verification for models.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>models</code>
            </td>
            <td>
                  <code><span title="typing.Sequence">Sequence</span>[<span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The models the user wants to perform the action on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action the user wants to perform.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">batch_verify_permissions_for_models</span><span class="p">(</span>
    <span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">AnyModel</span><span class="p">],</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Batch permission verification for models.</span>

<span class="sd">    Args:</span>
<span class="sd">        models: The models the user wants to perform the action on.</span>
<span class="sd">        action: The action the user wants to perform.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">resources</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_owned_by_authenticated_user</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
            <span class="c1"># The model owner always has permissions</span>
            <span class="k">continue</span>

        <span class="n">permission_model</span> <span class="o">=</span> <span class="n">get_surrogate_permission_model_for_model</span><span class="p">(</span>
            <span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource</span> <span class="o">:=</span> <span class="n">get_resource_for_model</span><span class="p">(</span><span class="n">permission_model</span><span class="p">):</span>
            <span class="n">resources</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>

    <span class="n">batch_verify_permissions</span><span class="p">(</span><span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.dehydrate_page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dehydrate_page</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Dehydrate all items of a page.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>page</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<span title="zenml.zen_server.rbac.utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The page to dehydrate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<span title="zenml.zen_server.rbac.utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The page with (potentially) dehydrated items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">dehydrate_page</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dehydrate all items of a page.</span>

<span class="sd">    Args:</span>
<span class="sd">        page: The page to dehydrate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The page with (potentially) dehydrated items.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_items</span> <span class="o">=</span> <span class="n">dehydrate_response_model_batch</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span><span class="n">update</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="n">new_items</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.dehydrate_response_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span> <span class="n">permissions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">Resource</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyModel</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Dehydrate a model if necessary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model to dehydrate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>permissions</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>, <span title="bool">bool</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prefetched permissions that will be used to check whether
sub-models will be included in the model or not. If a sub-model
refers to a resource which is not included in this dictionary, the
permissions will be checked with the RBAC component.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The (potentially) dehydrated model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">dehydrate_response_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span> <span class="n">permissions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">Resource</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dehydrate a model if necessary.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model to dehydrate.</span>
<span class="sd">        permissions: Prefetched permissions that will be used to check whether</span>
<span class="sd">            sub-models will be included in the model or not. If a sub-model</span>
<span class="sd">            refers to a resource which is not included in this dictionary, the</span>
<span class="sd">            permissions will be checked with the RBAC component.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The (potentially) dehydrated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">permissions</span><span class="p">:</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">auth_context</span>

        <span class="n">resources</span> <span class="o">=</span> <span class="n">get_subresources_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="n">rbac</span><span class="p">()</span><span class="o">.</span><span class="n">check_permissions</span><span class="p">(</span>
            <span class="n">user</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span>
        <span class="p">)</span>

    <span class="n">dehydrated_values</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">skip_dehydration</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;__zenml_skip_dehydration__&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="c1"># See `get_subresources_for_model(...)` for a detailed explanation why we</span>
    <span class="c1"># need to use `model.__iter__()` here</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">skip_dehydration</span><span class="p">:</span>
            <span class="n">dehydrated_values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dehydrated_values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">_dehydrate_value</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="n">permissions</span><span class="o">=</span><span class="n">permissions</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">dehydrated_values</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.dehydrate_response_model_batch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dehydrate_response_model_batch</span><span class="p">(</span><span class="n">batch</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Dehydrate all items of a batch.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>batch</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The batch to dehydrate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.utils.AnyResponse">AnyResponse</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The batch with (potentially) dehydrated items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">dehydrate_response_model_batch</span><span class="p">(</span>
    <span class="n">batch</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dehydrate all items of a batch.</span>

<span class="sd">    Args:</span>
<span class="sd">        batch: The batch to dehydrate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The batch with (potentially) dehydrated items.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">batch</span>

    <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">auth_context</span>

    <span class="n">resource_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_subresources_for_model</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">]</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">resource_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">resource_list</span> <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">permissions</span> <span class="o">=</span> <span class="n">rbac</span><span class="p">()</span><span class="o">.</span><span class="n">check_permissions</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span>
    <span class="p">)</span>

    <span class="n">new_batch</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">permissions</span><span class="o">=</span><span class="n">permissions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">new_batch</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.delete_model_resource" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_model_resource</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete resource membership information for a model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model for which to delete the resource membership information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_model_resource</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete resource membership information for a model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model for which to delete the resource membership information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">delete_model_resources</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="n">model</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.delete_model_resources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_model_resources</span><span class="p">(</span><span class="n">models</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete resource membership information for a list of models.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>models</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The models for which to delete the resource membership information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_model_resources</span><span class="p">(</span><span class="n">models</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete resource membership information for a list of models.</span>

<span class="sd">    Args:</span>
<span class="sd">        models: The models for which to delete the resource membership information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">resources</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="o">:=</span> <span class="n">get_resource_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
            <span class="n">resources</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>

    <span class="n">delete_resources</span><span class="p">(</span><span class="n">resources</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">resources</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.delete_resources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_resources</span><span class="p">(</span><span class="n">resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete resource membership information for a list of resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resources for which to delete the resource membership
information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_resources</span><span class="p">(</span><span class="n">resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete resource membership information for a list of resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        resources: The resources for which to delete the resource membership</span>
<span class="sd">            information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">rbac</span><span class="p">()</span><span class="o">.</span><span class="n">delete_resources</span><span class="p">(</span><span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_allowed_resource_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_allowed_resource_ids</span><span class="p">(</span><span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span> <span class="o">=</span> <span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span> <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="n">UUID</span><span class="p">]]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get all resource IDs of a resource type that a user can access.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action the user wants to perform on the resource.</p>
              </div>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.models.Action.READ">READ</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional project ID to filter the resources by.
Required for project scoped resources.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Set">Set</span>[<span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of resource IDs or <code>None</code> if the user has full access to the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Set">Set</span>[<span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>all instances of the resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_allowed_resource_ids</span><span class="p">(</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">Action</span> <span class="o">=</span> <span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="n">UUID</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all resource IDs of a resource type that a user can access.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_type: The resource type.</span>
<span class="sd">        action: The action the user wants to perform on the resource.</span>
<span class="sd">        project_id: Optional project ID to filter the resources by.</span>
<span class="sd">            Required for project scoped resources.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of resource IDs or `None` if the user has full access to the</span>
<span class="sd">        all instances of the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">auth_context</span>

    <span class="p">(</span>
        <span class="n">has_full_resource_access</span><span class="p">,</span>
        <span class="n">allowed_ids</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="n">rbac</span><span class="p">()</span><span class="o">.</span><span class="n">list_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">user</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
        <span class="n">resource</span><span class="o">=</span><span class="n">Resource</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">),</span>
        <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">has_full_resource_access</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">UUID</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">allowed_ids</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_permission_denied_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_permission_denied_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a model to return in case of missing read permissions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyResponse">AnyResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyResponse">AnyResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The permission denied model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_permission_denied_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a model to return in case of missing read permissions.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The original model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The permission denied model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span>
        <span class="n">update</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;resources&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;permission_denied&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_resource_for_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_resource_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Resource</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the resource associated with a model object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model for which to get the resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource associated with the model, or <code>None</code> if the model</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>is not associated with any resource type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_resource_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Resource</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the resource associated with a model object.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model for which to get the resource.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The resource associated with the model, or `None` if the model</span>
<span class="sd">        is not associated with any resource type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">get_resource_type_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">resource_type</span><span class="p">:</span>
        <span class="c1"># This model is not tied to any RBAC resource type</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ProjectScopedResponse</span><span class="p">):</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">project_id</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ProjectScopedRequest</span><span class="p">):</span>
        <span class="c1"># A project scoped request is always scoped to a specific project</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">project</span>

    <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">BaseIdentifiedResponse</span><span class="p">):</span>
        <span class="n">resource_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_resource_type_for_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_resource_type_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ResourceType</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the resource type associated with a model object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model for which to get the resource type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ResourceType (zenml.zen_server.rbac.models.ResourceType)" href="#zenml.zen_server.rbac.models.ResourceType">ResourceType</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource type associated with the model, or <code>None</code> if the model</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ResourceType (zenml.zen_server.rbac.models.ResourceType)" href="#zenml.zen_server.rbac.models.ResourceType">ResourceType</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>is not associated with any resource type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_resource_type_for_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ResourceType</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the resource type associated with a model object.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model for which to get the resource type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The resource type associated with the model, or `None` if the model</span>
<span class="sd">        is not associated with any resource type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.models</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">ActionRequest</span><span class="p">,</span>
        <span class="n">ActionResponse</span><span class="p">,</span>
        <span class="n">ArtifactRequest</span><span class="p">,</span>
        <span class="n">ArtifactResponse</span><span class="p">,</span>
        <span class="n">ArtifactVersionRequest</span><span class="p">,</span>
        <span class="n">ArtifactVersionResponse</span><span class="p">,</span>
        <span class="n">CodeRepositoryRequest</span><span class="p">,</span>
        <span class="n">CodeRepositoryResponse</span><span class="p">,</span>
        <span class="n">ComponentRequest</span><span class="p">,</span>
        <span class="n">ComponentResponse</span><span class="p">,</span>
        <span class="n">DeploymentRequest</span><span class="p">,</span>
        <span class="n">DeploymentResponse</span><span class="p">,</span>
        <span class="n">EventSourceRequest</span><span class="p">,</span>
        <span class="n">EventSourceResponse</span><span class="p">,</span>
        <span class="n">FlavorRequest</span><span class="p">,</span>
        <span class="n">FlavorResponse</span><span class="p">,</span>
        <span class="n">ModelRequest</span><span class="p">,</span>
        <span class="n">ModelResponse</span><span class="p">,</span>
        <span class="n">ModelVersionRequest</span><span class="p">,</span>
        <span class="n">ModelVersionResponse</span><span class="p">,</span>
        <span class="n">PipelineBuildRequest</span><span class="p">,</span>
        <span class="n">PipelineBuildResponse</span><span class="p">,</span>
        <span class="n">PipelineRequest</span><span class="p">,</span>
        <span class="n">PipelineResponse</span><span class="p">,</span>
        <span class="n">PipelineRunRequest</span><span class="p">,</span>
        <span class="n">PipelineRunResponse</span><span class="p">,</span>
        <span class="n">PipelineSnapshotRequest</span><span class="p">,</span>
        <span class="n">PipelineSnapshotResponse</span><span class="p">,</span>
        <span class="n">ProjectRequest</span><span class="p">,</span>
        <span class="n">ProjectResponse</span><span class="p">,</span>
        <span class="n">RunMetadataRequest</span><span class="p">,</span>
        <span class="n">RunTemplateRequest</span><span class="p">,</span>
        <span class="n">RunTemplateResponse</span><span class="p">,</span>
        <span class="n">ScheduleRequest</span><span class="p">,</span>
        <span class="n">ScheduleResponse</span><span class="p">,</span>
        <span class="n">SecretRequest</span><span class="p">,</span>
        <span class="n">SecretResponse</span><span class="p">,</span>
        <span class="n">ServiceAccountRequest</span><span class="p">,</span>
        <span class="n">ServiceAccountResponse</span><span class="p">,</span>
        <span class="n">ServiceConnectorRequest</span><span class="p">,</span>
        <span class="n">ServiceConnectorResponse</span><span class="p">,</span>
        <span class="n">ServiceRequest</span><span class="p">,</span>
        <span class="n">ServiceResponse</span><span class="p">,</span>
        <span class="n">StackRequest</span><span class="p">,</span>
        <span class="n">StackResponse</span><span class="p">,</span>
        <span class="n">TagRequest</span><span class="p">,</span>
        <span class="n">TagResponse</span><span class="p">,</span>
        <span class="n">TriggerExecutionRequest</span><span class="p">,</span>
        <span class="n">TriggerExecutionResponse</span><span class="p">,</span>
        <span class="n">TriggerRequest</span><span class="p">,</span>
        <span class="n">TriggerResponse</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">mapping</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
        <span class="n">Any</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">ActionRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">ActionResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">ArtifactRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT</span><span class="p">,</span>
        <span class="n">ArtifactResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT</span><span class="p">,</span>
        <span class="n">ArtifactVersionRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">,</span>
        <span class="n">ArtifactVersionResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">,</span>
        <span class="n">CodeRepositoryRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">CODE_REPOSITORY</span><span class="p">,</span>
        <span class="n">CodeRepositoryResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">CODE_REPOSITORY</span><span class="p">,</span>
        <span class="n">ComponentRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">,</span>
        <span class="n">ComponentResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">,</span>
        <span class="n">EventSourceRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">EventSourceResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">FlavorRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">FLAVOR</span><span class="p">,</span>
        <span class="n">FlavorResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">FLAVOR</span><span class="p">,</span>
        <span class="n">ModelRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span><span class="p">,</span>
        <span class="n">ModelResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span><span class="p">,</span>
        <span class="n">ModelVersionRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL_VERSION</span><span class="p">,</span>
        <span class="n">ModelVersionResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL_VERSION</span><span class="p">,</span>
        <span class="n">PipelineBuildRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_BUILD</span><span class="p">,</span>
        <span class="n">PipelineBuildResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_BUILD</span><span class="p">,</span>
        <span class="n">DeploymentRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">DEPLOYMENT</span><span class="p">,</span>
        <span class="n">DeploymentResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">DEPLOYMENT</span><span class="p">,</span>
        <span class="n">PipelineSnapshotRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">,</span>
        <span class="n">PipelineSnapshotResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">,</span>
        <span class="n">PipelineRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">,</span>
        <span class="n">PipelineResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">,</span>
        <span class="n">PipelineRunRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
        <span class="n">PipelineRunResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
        <span class="n">RunMetadataRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">RUN_METADATA</span><span class="p">,</span>
        <span class="n">RunTemplateRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">RUN_TEMPLATE</span><span class="p">,</span>
        <span class="n">RunTemplateResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">RUN_TEMPLATE</span><span class="p">,</span>
        <span class="n">ScheduleRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SCHEDULE</span><span class="p">,</span>
        <span class="n">ScheduleResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SCHEDULE</span><span class="p">,</span>
        <span class="n">SecretRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span>
        <span class="n">SecretResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span>
        <span class="n">ServiceAccountRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_ACCOUNT</span><span class="p">,</span>
        <span class="n">ServiceAccountResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_ACCOUNT</span><span class="p">,</span>
        <span class="n">ServiceConnectorRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span>
        <span class="n">ServiceConnectorResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span>
        <span class="n">ServiceRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE</span><span class="p">,</span>
        <span class="n">ServiceResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE</span><span class="p">,</span>
        <span class="n">StackRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK</span><span class="p">,</span>
        <span class="n">StackResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK</span><span class="p">,</span>
        <span class="n">TagRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">TAG</span><span class="p">,</span>
        <span class="n">TagResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">TAG</span><span class="p">,</span>
        <span class="n">TriggerRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER</span><span class="p">,</span>
        <span class="n">TriggerResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER</span><span class="p">,</span>
        <span class="n">TriggerExecutionRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER_EXECUTION</span><span class="p">,</span>
        <span class="n">TriggerExecutionResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER_EXECUTION</span><span class="p">,</span>
        <span class="n">ProjectResponse</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PROJECT</span><span class="p">,</span>
        <span class="n">ProjectRequest</span><span class="p">:</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PROJECT</span><span class="p">,</span>
        <span class="c1"># UserResponse: ResourceType.USER,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_schema_for_resource_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_schema_for_resource_type</span><span class="p">(</span><span class="n">resource_type</span><span class="p">:</span> <span class="n">ResourceType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the database schema for a resource type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ResourceType (zenml.zen_server.rbac.models.ResourceType)" href="#zenml.zen_server.rbac.models.ResourceType">ResourceType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource type for which to get the database schema.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="BaseSchema (zenml.zen_stores.schemas.BaseSchema)" href="core-zen_stores.html#zenml.zen_stores.schemas.BaseSchema">BaseSchema</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database schema.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_schema_for_resource_type</span><span class="p">(</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">ResourceType</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseSchema&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the database schema for a resource type.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_type: The resource type for which to get the database schema.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The database schema.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_stores.schemas</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">ActionSchema</span><span class="p">,</span>
        <span class="n">ArtifactSchema</span><span class="p">,</span>
        <span class="n">ArtifactVersionSchema</span><span class="p">,</span>
        <span class="n">CodeRepositorySchema</span><span class="p">,</span>
        <span class="n">DeploymentSchema</span><span class="p">,</span>
        <span class="n">EventSourceSchema</span><span class="p">,</span>
        <span class="n">FlavorSchema</span><span class="p">,</span>
        <span class="n">ModelSchema</span><span class="p">,</span>
        <span class="n">ModelVersionSchema</span><span class="p">,</span>
        <span class="n">PipelineBuildSchema</span><span class="p">,</span>
        <span class="n">PipelineRunSchema</span><span class="p">,</span>
        <span class="n">PipelineSchema</span><span class="p">,</span>
        <span class="n">PipelineSnapshotSchema</span><span class="p">,</span>
        <span class="n">RunMetadataSchema</span><span class="p">,</span>
        <span class="n">RunTemplateSchema</span><span class="p">,</span>
        <span class="n">ScheduleSchema</span><span class="p">,</span>
        <span class="n">SecretSchema</span><span class="p">,</span>
        <span class="n">ServiceConnectorSchema</span><span class="p">,</span>
        <span class="n">ServiceSchema</span><span class="p">,</span>
        <span class="n">StackComponentSchema</span><span class="p">,</span>
        <span class="n">StackSchema</span><span class="p">,</span>
        <span class="n">TagSchema</span><span class="p">,</span>
        <span class="n">TriggerExecutionSchema</span><span class="p">,</span>
        <span class="n">TriggerSchema</span><span class="p">,</span>
        <span class="n">UserSchema</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">mapping</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">ResourceType</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseSchema&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK</span><span class="p">:</span> <span class="n">StackSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">FLAVOR</span><span class="p">:</span> <span class="n">FlavorSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">:</span> <span class="n">StackComponentSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">:</span> <span class="n">PipelineSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">CODE_REPOSITORY</span><span class="p">:</span> <span class="n">CodeRepositorySchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span><span class="p">:</span> <span class="n">ModelSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL_VERSION</span><span class="p">:</span> <span class="n">ModelVersionSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">:</span> <span class="n">ServiceConnectorSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT</span><span class="p">:</span> <span class="n">ArtifactSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">:</span> <span class="n">ArtifactVersionSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">:</span> <span class="n">SecretSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE</span><span class="p">:</span> <span class="n">ServiceSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">TAG</span><span class="p">:</span> <span class="n">TagSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_ACCOUNT</span><span class="p">:</span> <span class="n">UserSchema</span><span class="p">,</span>
        <span class="c1"># ResourceType.PROJECT: ProjectSchema,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">:</span> <span class="n">PipelineRunSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">DEPLOYMENT</span><span class="p">:</span> <span class="n">DeploymentSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">:</span> <span class="n">PipelineSnapshotSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_BUILD</span><span class="p">:</span> <span class="n">PipelineBuildSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">RUN_TEMPLATE</span><span class="p">:</span> <span class="n">RunTemplateSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">RUN_METADATA</span><span class="p">:</span> <span class="n">RunMetadataSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">SCHEDULE</span><span class="p">:</span> <span class="n">ScheduleSchema</span><span class="p">,</span>
        <span class="c1"># ResourceType.USER: UserSchema,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">:</span> <span class="n">ActionSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">:</span> <span class="n">EventSourceSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER</span><span class="p">:</span> <span class="n">TriggerSchema</span><span class="p">,</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER_EXECUTION</span><span class="p">:</span> <span class="n">TriggerExecutionSchema</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="n">resource_type</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_subresources_for_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_subresources_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get all sub-resources of a model which need permission verification.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model for which to get all the resources.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Set">Set</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All resources of a model which need permission verification.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_subresources_for_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all sub-resources of a model which need permission verification.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model for which to get all the resources.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All resources of a model which need permission verification.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># We don&#39;t want to use `model.model_dump()` here as that recursively</span>
    <span class="c1"># converts models to dicts, but we want to preserve those classes for</span>
    <span class="c1"># the recursive `_get_subresources_for_value` calls.</span>
    <span class="c1"># We previously used `dict(model)` here, but that lead to issues with</span>
    <span class="c1"># models overwriting `__getattr__`, this `model.__iter__()` has the same</span>
    <span class="c1"># results though.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Page</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">model</span><span class="p">:</span>
            <span class="n">resources</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_get_subresources_for_value</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">skip_dehydration</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;__zenml_skip_dehydration__&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">skip_dehydration</span><span class="p">:</span>
                <span class="n">resources</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_get_subresources_for_value</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">resources</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.get_surrogate_permission_model_for_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_surrogate_permission_model_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseModel</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a surrogate permission model for a model.</p>
<p>In some cases a different model instead of the original model is used to
verify permissions. For example, a parent container model might be used
to verify permissions for all its children.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action that the user wants to perform on the model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pydantic.BaseModel">BaseModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A surrogate model or the original.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_surrogate_permission_model_for_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a surrogate permission model for a model.</span>

<span class="sd">    In some cases a different model instead of the original model is used to</span>
<span class="sd">    verify permissions. For example, a parent container model might be used</span>
<span class="sd">    to verify permissions for all its children.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The original model.</span>
<span class="sd">        action: The action that the user wants to perform on the model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A surrogate model or the original.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArtifactVersionResponse</span><span class="p">,</span> <span class="n">ModelVersionResponse</span>

    <span class="c1"># Permissions to read entities that represent versions of another entity</span>
    <span class="c1"># are checked on the parent entity</span>
    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ModelVersionResponse</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">model</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ArtifactVersionResponse</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">artifact</span>

    <span class="k">return</span> <span class="n">model</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.has_permissions_for_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">has_permissions_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>If the active user has permissions to perform the action on the model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model the user wants to perform the action on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action the user wants to perform.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the active user has permissions to perform the action on the model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">has_permissions_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If the active user has permissions to perform the action on the model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model the user wants to perform the action on.</span>
<span class="sd">        action: The action the user wants to perform.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If the active user has permissions to perform the action on the model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_owned_by_authenticated_user</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">IllegalOperationError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.is_owned_by_authenticated_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_owned_by_authenticated_user</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns whether the currently authenticated user owns the model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model for which to check the ownership.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the currently authenticated user owns the model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_owned_by_authenticated_user</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns whether the currently authenticated user owns the model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model for which to check the ownership.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the currently authenticated user owns the model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">auth_context</span> <span class="o">=</span> <span class="n">get_auth_context</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">auth_context</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">UserScopedResponse</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">user_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">user_id</span> <span class="o">==</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The model is server-owned and for RBAC purposes we consider</span>
            <span class="c1"># every user to be the owner of it</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.update_resource_membership" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_resource_membership</span><span class="p">(</span><span class="n">sharing_user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">],</span> <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update the resource membership of a user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sharing_user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User that is sharing the resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>actions</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actions that the user should be able to perform on the
resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the user for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>team_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the team for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_resource_membership</span><span class="p">(</span>
    <span class="n">sharing_user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span>
    <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span>
    <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">],</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the resource membership of a user.</span>

<span class="sd">    Args:</span>
<span class="sd">        sharing_user: User that is sharing the resource.</span>
<span class="sd">        resource: The resource.</span>
<span class="sd">        actions: The actions that the user should be able to perform on the</span>
<span class="sd">            resource.</span>
<span class="sd">        user_id: ID of the user for which to update the membership.</span>
<span class="sd">        team_id: ID of the team for which to update the membership.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">rbac</span><span class="p">()</span><span class="o">.</span><span class="n">update_resource_membership</span><span class="p">(</span>
        <span class="n">sharing_user</span><span class="o">=</span><span class="n">sharing_user</span><span class="p">,</span>
        <span class="n">resource</span><span class="o">=</span><span class="n">resource</span><span class="p">,</span>
        <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">team_id</span><span class="o">=</span><span class="n">team_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.verify_permission" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permission</span><span class="p">(</span><span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verifies if a user has permission to perform an action on a resource.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of resource that the user wants to perform the
action on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action the user wants to perform.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource the user wants to perform the action on.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the project the user wants to perform the action
on. Only used for project scoped resources.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permission</span><span class="p">(</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if a user has permission to perform an action on a resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_type: The type of resource that the user wants to perform the</span>
<span class="sd">            action on.</span>
<span class="sd">        action: The action the user wants to perform.</span>
<span class="sd">        resource_id: ID of the resource the user wants to perform the action on.</span>
<span class="sd">        project_id: ID of the project the user wants to perform the action</span>
<span class="sd">            on. Only used for project scoped resources.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span>
    <span class="p">)</span>
    <span class="n">batch_verify_permissions</span><span class="p">(</span><span class="n">resources</span><span class="o">=</span><span class="p">{</span><span class="n">resource</span><span class="p">},</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.rbac.utils.verify_permission_for_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verifies if a user has permission to perform an action on a model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="zenml.zen_server.rbac.utils.AnyModel">AnyModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model the user wants to perform the action on.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action the user wants to perform.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">AnyModel</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if a user has permission to perform an action on a model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model the user wants to perform the action on.</span>
<span class="sd">        action: The action the user wants to perform.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="n">model</span><span class="p">],</span> <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.rbac.zenml_cloud_rbac" class="doc doc-heading">
            <code>zenml_cloud_rbac</code>


</h6>

    <div class="doc doc-contents ">

        <p>Cloud RBAC implementation.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.rbac.zenml_cloud_rbac-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.rbac.zenml_cloud_rbac.ZenMLCloudRBAC" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ZenMLCloudRBAC</span><span class="p">()</span></code>

</h8>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="RBACInterface (zenml.zen_server.rbac.rbac_interface.RBACInterface)" href="#zenml.zen_server.rbac.rbac_interface.RBACInterface">RBACInterface</a></code></p>


        <p>RBAC implementation that uses the ZenML Pro Management Plane as a backend.</p>

        <p>Initialize the object.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/rbac/zenml_cloud_rbac.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the object.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="n">cloud_connection</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h9 id="zenml.zen_server.rbac.zenml_cloud_rbac.ZenMLCloudRBAC-functions">Functions</h9>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.zenml_cloud_rbac.ZenMLCloudRBAC.check_permissions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_permissions</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resources</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Resource</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Checks if a user has permissions to perform an action on resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User which wants to access a resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resources</code>
            </td>
            <td>
                  <code><span title="typing.Set">Set</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resources the user wants to access.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action that the user wants to perform on the resources.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary mapping resources to a boolean which indicates whether</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the user has permissions to perform the action on that resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/zenml_cloud_rbac.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_permissions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span> <span class="n">resources</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Resource</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Resource</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a user has permissions to perform an action on resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        user: User which wants to access a resource.</span>
<span class="sd">        resources: The resources the user wants to access.</span>
<span class="sd">        action: The action that the user wants to perform on the resources.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary mapping resources to a boolean which indicates whether</span>
<span class="sd">        the user has permissions to perform the action on that resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">resources</span><span class="p">:</span>
        <span class="c1"># No need to send a request if there are no resources</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_service_account</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Internal service accounts have full permissions for now</span>
        <span class="c1"># TODO: remove this once we have a proper way to migrate the</span>
        <span class="c1"># service accounts</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">resource</span><span class="p">:</span> <span class="kc">True</span> <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">}</span>

    <span class="c1"># At this point it&#39;s a regular user, which in a ZenML Pro with RBAC</span>
    <span class="c1"># enabled is always authenticated using external authentication</span>
    <span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span><span class="p">),</span>
        <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">action</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="n">PERMISSIONS_ENDPOINT</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span> <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">Resource</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.zenml_cloud_rbac.ZenMLCloudRBAC.delete_resources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_resources</span><span class="p">(</span><span class="n">resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Delete resource membership information for a list of resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resources for which to delete the resource membership
information.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/zenml_cloud_rbac.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete resource membership information for a list of resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        resources: The resources for which to delete the resource membership</span>
<span class="sd">            information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span> <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">],</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">RESOURCES_ENDPOINT</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.zenml_cloud_rbac.ZenMLCloudRBAC.list_allowed_resource_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_allowed_resource_ids</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Lists all resource IDs of a resource type that a user can access.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User which wants to access a resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource the user wants to access.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action that the user wants to perform on the resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple (full_resource_access, resource_ids).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>full_resource_access</code> will be <code>True</code> if the user can perform the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>given action on any instance of the given resource type, <code>False</code></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>otherwise. If <code>full_resource_access</code> is <code>False</code>, <code>resource_ids</code></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>will contain the list of instance IDs that the user can perform</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="bool">bool</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the action on.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/zenml_cloud_rbac.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_allowed_resource_ids</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists all resource IDs of a resource type that a user can access.</span>

<span class="sd">    Args:</span>
<span class="sd">        user: User which wants to access a resource.</span>
<span class="sd">        resource: The resource the user wants to access.</span>
<span class="sd">        action: The action that the user wants to perform on the resource.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple (full_resource_access, resource_ids).</span>
<span class="sd">        `full_resource_access` will be `True` if the user can perform the</span>
<span class="sd">        given action on any instance of the given resource type, `False`</span>
<span class="sd">        otherwise. If `full_resource_access` is `False`, `resource_ids`</span>
<span class="sd">        will contain the list of instance IDs that the user can perform</span>
<span class="sd">        the action on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">resource</span><span class="o">.</span><span class="n">id</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_service_account</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Internal service accounts have full permissions for now</span>
        <span class="c1"># TODO: remove this once we have a proper way to migrate the</span>
        <span class="c1"># service accounts</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="p">[]</span>

    <span class="c1"># At this point it&#39;s a regular user, which in the ZenML Pro with RBAC</span>
    <span class="c1"># enabled is always authenticated using external authentication</span>
    <span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span><span class="p">),</span>
        <span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource</span><span class="p">),</span>
        <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">action</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="n">ALLOWED_RESOURCE_IDS_ENDPOINT</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span>
    <span class="p">)</span>
    <span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="n">full_resource_access</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s2">&quot;full_access&quot;</span><span class="p">]</span>
    <span class="n">allowed_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s2">&quot;ids&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">full_resource_access</span><span class="p">,</span> <span class="n">allowed_ids</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h10 id="zenml.zen_server.rbac.zenml_cloud_rbac.ZenMLCloudRBAC.update_resource_membership" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_resource_membership</span><span class="p">(</span><span class="n">sharing_user</span><span class="p">:</span> <span class="n">UserResponse</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">],</span> <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h10>


    <div class="doc doc-contents ">

        <p>Update the resource membership of a user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sharing_user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User that is sharing the resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Resource (zenml.zen_server.rbac.models.Resource)" href="#zenml.zen_server.rbac.models.Resource">Resource</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>actions</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Action (zenml.zen_server.rbac.models.Action)" href="#zenml.zen_server.rbac.models.Action">Action</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actions that the user should be able to perform on the
resource.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the user for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>team_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the team for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/rbac/zenml_cloud_rbac.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_resource_membership</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sharing_user</span><span class="p">:</span> <span class="s2">&quot;UserResponse&quot;</span><span class="p">,</span>
    <span class="n">resource</span><span class="p">:</span> <span class="n">Resource</span><span class="p">,</span>
    <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">],</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the resource membership of a user.</span>

<span class="sd">    Args:</span>
<span class="sd">        sharing_user: User that is sharing the resource.</span>
<span class="sd">        resource: The resource.</span>
<span class="sd">        actions: The actions that the user should be able to perform on the</span>
<span class="sd">            resource.</span>
<span class="sd">        user_id: ID of the user for which to update the membership.</span>
<span class="sd">        team_id: ID of the team for which to update the membership.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">sharing_user</span><span class="o">.</span><span class="n">external_user_id</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
        <span class="s2">&quot;team_id&quot;</span><span class="p">:</span> <span class="n">team_id</span><span class="p">,</span>
        <span class="s2">&quot;sharing_user_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">sharing_user</span><span class="o">.</span><span class="n">external_user_id</span><span class="p">),</span>
        <span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource</span><span class="p">),</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">],</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">RESOURCE_MEMBERSHIP_ENDPOINT</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.rbac.zenml_cloud_rbac-functions">Functions</h7>



  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.request_management" class="doc doc-heading">
            <code>request_management</code>


</h4>

    <div class="doc doc-contents ">

        <p>Request management utilities.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.request_management-classes">Classes</h5>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.request_management.RequestContext" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>Context for a request.</p>

        <p>Initialize the request context.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the idempotency key is not a valid UUID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the request context.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the idempotency key is not a valid UUID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Request-ID&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())[:</span><span class="mi">8</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transaction_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">transaction_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Idempotency-Key&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">transaction_id</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transaction_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid UUID idempotency key: </span><span class="si">{</span><span class="n">transaction_id</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Please use a valid UUID.&quot;</span>
            <span class="p">)</span>

    <span class="c1"># Use a random trace ID to identify the request internally in the logs.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">trace_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())[:</span><span class="mi">4</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">received_at</span> <span class="o">=</span> <span class="n">utc_now</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">auth_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AuthContext&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">





<h7 id="zenml.zen_server.request_management.RequestContext-attributes">Attributes</h7>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.request_management.RequestContext.is_cacheable" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_cacheable</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Check if the request is cacheable.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the request is cacheable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.request_management.RequestContext.log_duration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_duration</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the duration of the request.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The duration of the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.request_management.RequestContext.log_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_request</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the request details for logging.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request details for logging.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.request_management.RequestContext.log_request_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_request_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the full request ID for logging.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.request_management.RequestContext.process_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_time</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the process time in seconds of the request.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>


<h7 id="zenml.zen_server.request_management.RequestContext-functions">Functions</h7>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.request_management.RequestManager" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RequestManager</span><span class="p">(</span><span class="n">transaction_ttl</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">request_timeout</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">deduplicate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>A manager for requests.</p>
<p>This class is used to manage requests by caching the results of requests
that have already been executed.</p>

        <p>Initialize the request manager.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>transaction_ttl</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to live for cached transactions. Comes
into effect after a request is completed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout for requests. If a request takes longer
than this, a 429 error will be returned to the client to slow
down the request rate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deduplicate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to deduplicate requests.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">transaction_ttl</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">request_timeout</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">deduplicate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the request manager.</span>

<span class="sd">    Args:</span>
<span class="sd">        transaction_ttl: The time to live for cached transactions. Comes</span>
<span class="sd">            into effect after a request is completed.</span>
<span class="sd">        request_timeout: The timeout for requests. If a request takes longer</span>
<span class="sd">            than this, a 429 error will be returned to the client to slow</span>
<span class="sd">            down the request rate.</span>
<span class="sd">        deduplicate: Whether to deduplicate requests.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">deduplicate</span> <span class="o">=</span> <span class="n">deduplicate</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">UUID</span><span class="p">,</span> <span class="n">RequestRecord</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transaction_ttl</span> <span class="o">=</span> <span class="n">transaction_ttl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span> <span class="o">=</span> <span class="n">request_timeout</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">request_contexts</span><span class="p">:</span> <span class="n">ContextVar</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">RequestContext</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ContextVar</span><span class="p">(</span><span class="s2">&quot;request_contexts&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">





<h7 id="zenml.zen_server.request_management.RequestManager-attributes">Attributes</h7>

<div class="doc doc-object doc-attribute">



<h8 id="zenml.zen_server.request_management.RequestManager.current_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_request</span><span class="p">:</span> <span class="n">RequestContext</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get the current request context.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RequestContext(request: Request) (zenml.zen_server.request_management.RequestContext)" href="#zenml.zen_server.request_management.RequestContext">RequestContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current request context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no request context is set.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>


<h7 id="zenml.zen_server.request_management.RequestManager-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.request_management.RequestManager.async_run_and_cache_result" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">async_run_and_cache_result</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">deduplicate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">request_record</span><span class="p">:</span> <span class="n">RequestRecord</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Run a request and cache the result.</p>
<p>This method is called in the background to run a request and cache the
result.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deduplicate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to enable or disable request deduplication for
this request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_record</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="RequestRecord(future: asyncio.Future[Any], request_context: RequestContext) (zenml.zen_server.request_management.RequestRecord)" href="#zenml.zen_server.request_management.RequestRecord">RequestRecord</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request record to cache the result in.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_run_and_cache_result</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">deduplicate</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">request_record</span><span class="p">:</span> <span class="n">RequestRecord</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a request and cache the result.</span>

<span class="sd">    This method is called in the background to run a request and cache the</span>
<span class="sd">    result.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to execute.</span>
<span class="sd">        deduplicate: Whether to enable or disable request deduplication for</span>
<span class="sd">            this request.</span>
<span class="sd">        request_record: The request record to cache the result in.</span>
<span class="sd">        *args: The arguments to pass to the function.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">starlette.concurrency</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_in_threadpool</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_system_metrics_log_str</span>

    <span class="n">request_context</span> <span class="o">=</span> <span class="n">request_record</span><span class="o">.</span><span class="n">request_context</span>
    <span class="n">transaction_id</span> <span class="o">=</span> <span class="n">request_context</span><span class="o">.</span><span class="n">transaction_id</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;async </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> STARTED &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sync_run_and_cache_result</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">zen_store</span>

        <span class="c1"># Copy the deduplicate flag to a local variable to avoid modifying</span>
        <span class="c1"># the argument in the outer scope.</span>
        <span class="n">deduplicate_request</span> <span class="o">=</span> <span class="n">deduplicate</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;sync </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> STARTED &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Create or get the API transaction from the database</span>
            <span class="k">if</span> <span class="n">deduplicate_request</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">transaction_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">api_transaction</span><span class="p">,</span> <span class="n">transaction_created</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_or_create_api_transaction</span><span class="p">(</span>
                            <span class="n">api_transaction</span><span class="o">=</span><span class="n">ApiTransactionRequest</span><span class="p">(</span>
                                <span class="n">transaction_id</span><span class="o">=</span><span class="n">transaction_id</span><span class="p">,</span>
                                <span class="n">method</span><span class="o">=</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                                <span class="n">url</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">EntityExistsError</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;Transaction </span><span class="si">{</span><span class="n">transaction_id</span><span class="si">}</span><span class="s2"> already exists &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;with method </span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2"> and &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;URL </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">. Skipping &quot;</span>
                        <span class="s2">&quot;caching.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">deduplicate_request</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="n">deduplicate_request</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">api_transaction</span><span class="o">.</span><span class="n">completed</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] &quot;</span>
                            <span class="s2">&quot;ENDPOINT STATS - &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;sync </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> CACHE HIT &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                        <span class="c1"># The transaction already completed, we can return the</span>
                        <span class="c1"># result right away.</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">api_transaction</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
                                <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">result</span><span class="p">),</span>
                                <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">return</span>

                    <span class="k">elif</span> <span class="ow">not</span> <span class="n">transaction_created</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] &quot;</span>
                            <span class="s2">&quot;ENDPOINT STATS - &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;sync </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> DELAYED &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                        <span class="c1"># The transaction is being processed by another server</span>
                        <span class="c1"># instance. We need to wait for it to complete. Instead</span>
                        <span class="c1"># of blocking this worker thread, we return a 429 error</span>
                        <span class="c1"># to the client to force it to retry later.</span>
                        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Server too busy. Please try again later.&quot;</span>
                            <span class="p">},</span>
                            <span class="n">status_code</span><span class="o">=</span><span class="mi">429</span><span class="p">,</span>
                        <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">deduplicate_request</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="n">transaction_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="c1"># We don&#39;t cache exceptions. If the client retries, the</span>
                    <span class="c1"># request will be executed again and the exception, if</span>
                    <span class="c1"># persistent, will be raised again.</span>
                    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_api_transaction</span><span class="p">(</span>
                        <span class="n">api_transaction_id</span><span class="o">=</span><span class="n">transaction_id</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">raise</span>

            <span class="k">if</span> <span class="n">deduplicate_request</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">transaction_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="n">cache_result</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">result_to_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">result_to_cache</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span>
                            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                                <span class="n">result</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">pydantic_encoder</span>
                            <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="c1"># If the result is not serializable, we don&#39;t cache it.</span>
                        <span class="n">cache_result</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Failed to serialize result of </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;for transaction </span><span class="si">{</span><span class="n">transaction_id</span><span class="si">}</span><span class="s2">. Skipping &quot;</span>
                            <span class="s2">&quot;caching.&quot;</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_to_cache</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MEDIUMTEXT_MAX_LENGTH</span><span class="p">:</span>
                            <span class="c1"># If the result is too large, we also don&#39;t cache it.</span>
                            <span class="n">cache_result</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">result_to_cache</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Result of </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;for transaction </span><span class="si">{</span><span class="n">transaction_id</span><span class="si">}</span><span class="s2"> is too &quot;</span>
                                <span class="s2">&quot;large. Skipping caching.&quot;</span>
                            <span class="p">)</span>

                <span class="k">if</span> <span class="n">cache_result</span><span class="p">:</span>
                    <span class="n">api_transaction_update</span> <span class="o">=</span> <span class="n">ApiTransactionUpdate</span><span class="p">(</span>
                        <span class="n">cache_time</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transaction_ttl</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">result_to_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">api_transaction_update</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span>
                            <span class="n">result_to_cache</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">finalize_api_transaction</span><span class="p">(</span>
                        <span class="n">api_transaction_id</span><span class="o">=</span><span class="n">transaction_id</span><span class="p">,</span>
                        <span class="n">api_transaction_update</span><span class="o">=</span><span class="n">api_transaction_update</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># If the result is not cacheable, there is no point in</span>
                    <span class="c1"># keeping the transaction around.</span>
                    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_api_transaction</span><span class="p">(</span>
                        <span class="n">api_transaction_id</span><span class="o">=</span><span class="n">transaction_id</span><span class="p">,</span>
                    <span class="p">)</span>

            <span class="k">return</span> <span class="n">result</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;sync </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> COMPLETED &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">run_in_threadpool</span><span class="p">(</span>
            <span class="n">sync_run_and_cache_result</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">e</span>

    <span class="k">if</span> <span class="n">deduplicate</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">transaction_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span><span class="p">[</span><span class="n">transaction_id</span><span class="p">]</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;async </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> COMPLETED &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>
        <span class="n">request_record</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">request_record</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.request_management.RequestManager.execute" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">deduplicate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Execute a request with in-memory de-duplication.</p>
<p>Call this method to execute a request with in-memory de-duplication.
If the request (identified by the request_id) has previously been
executed and the result is still cached, the result will be returned
immediately. If the request is in-flight, the method will wait for it
to complete. If the request is not in-flight, the method will start
execution in the background and cache the result.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deduplicate</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to enable or disable request deduplication for
this request. If not specified, by default, the deduplication
is enabled for POST requests and disabled for other requests.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments to pass to the function.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The keyword arguments to pass to the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the request.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">deduplicate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute a request with in-memory de-duplication.</span>

<span class="sd">    Call this method to execute a request with in-memory de-duplication.</span>
<span class="sd">    If the request (identified by the request_id) has previously been</span>
<span class="sd">    executed and the result is still cached, the result will be returned</span>
<span class="sd">    immediately. If the request is in-flight, the method will wait for it</span>
<span class="sd">    to complete. If the request is not in-flight, the method will start</span>
<span class="sd">    execution in the background and cache the result.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to execute.</span>
<span class="sd">        deduplicate: Whether to enable or disable request deduplication for</span>
<span class="sd">            this request. If not specified, by default, the deduplication</span>
<span class="sd">            is enabled for POST requests and disabled for other requests.</span>
<span class="sd">        *args: The arguments to pass to the function.</span>
<span class="sd">        **kwargs: The keyword arguments to pass to the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_system_metrics_log_str</span>

    <span class="n">request_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_request</span>
    <span class="k">assert</span> <span class="n">request_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> STARTED &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="n">transaction_id</span> <span class="o">=</span> <span class="n">request_context</span><span class="o">.</span><span class="n">transaction_id</span>

    <span class="k">if</span> <span class="n">deduplicate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># If not specified, by default, the deduplication is enabled for</span>
        <span class="c1"># POST requests and disabled for other requests.</span>
        <span class="n">deduplicate</span> <span class="o">=</span> <span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span>

    <span class="n">deduplicate</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">deduplicate</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">deduplicate</span> <span class="ow">and</span> <span class="n">request_context</span><span class="o">.</span><span class="n">is_cacheable</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">deduplicate</span> <span class="ow">and</span> <span class="n">transaction_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span><span class="p">:</span>
            <span class="c1"># The transaction is still being processed on the same</span>
            <span class="c1"># server instance. We just wait for it to complete.</span>
            <span class="n">fut</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span><span class="p">[</span><span class="n">transaction_id</span><span class="p">]</span><span class="o">.</span><span class="n">future</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> RESUMED &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Start execution in background, use the future to wait for it</span>
            <span class="c1"># to complete.</span>
            <span class="n">fut</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
            <span class="n">request_record</span> <span class="o">=</span> <span class="n">RequestRecord</span><span class="p">(</span>
                <span class="n">future</span><span class="o">=</span><span class="n">fut</span><span class="p">,</span> <span class="n">request_context</span><span class="o">=</span><span class="n">request_context</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">deduplicate</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">transaction_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="c1"># Also record the transaction for deduplication.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transactions</span><span class="p">[</span><span class="n">transaction_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">request_record</span>
            <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">async_run_and_cache_result</span><span class="p">(</span>
                    <span class="n">func</span><span class="p">,</span>
                    <span class="n">deduplicate</span><span class="p">,</span>
                    <span class="n">request_record</span><span class="p">,</span>
                    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="c1"># Wait for the request to complete; timeout if deduplication is enabled</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># We take into account the time that has already elapsed since the</span>
        <span class="c1"># request was received to avoid keeping the request for too long.</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span> <span class="o">-</span> <span class="n">request_context</span><span class="o">.</span><span class="n">process_time</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
            <span class="c1"># We use asyncio.shield to prevent the request from being</span>
            <span class="c1"># cancelled when the timeout is reached.</span>
            <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="n">fut</span><span class="p">),</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span> <span class="k">if</span> <span class="n">deduplicate</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> COMPLETED &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request_id</span><span class="si">}</span><span class="s2">] ENDPOINT STATS - &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request_context</span><span class="o">.</span><span class="n">log_request</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> TIMEOUT &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request_context</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Server too busy. Please try again later.&quot;</span><span class="p">},</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">429</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.request_management.RequestManager.shutdown" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">shutdown</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Shutdown the request manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shutdown the request manager.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.request_management.RequestManager.startup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">startup</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Start the request manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the request manager.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h6 id="zenml.zen_server.request_management.RequestRecord" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RequestRecord</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Future</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">request_context</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">)</span></code>

</h6>


    <div class="doc doc-contents ">


        <p>A record of an in-flight or cached request.</p>

        <p>Initialize the request record.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>future</code>
            </td>
            <td>
                  <code><span title="asyncio.Future">Future</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The future of the request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="RequestContext(request: Request) (zenml.zen_server.request_management.RequestContext)" href="#zenml.zen_server.request_management.RequestContext">RequestContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">future</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Future</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">request_context</span><span class="p">:</span> <span class="n">RequestContext</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the request record.</span>

<span class="sd">    Args:</span>
<span class="sd">        future: The future of the request.</span>
<span class="sd">        request_context: The request context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">future</span> <span class="o">=</span> <span class="n">future</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_context</span> <span class="o">=</span> <span class="n">request_context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">completed</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h7 id="zenml.zen_server.request_management.RequestRecord-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.request_management.RequestRecord.set_exception" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_exception</span><span class="p">(</span><span class="n">exception</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Set the exception of the request.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>exception</code>
            </td>
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exception of the request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the exception of the request.</span>

<span class="sd">    Args:</span>
<span class="sd">        exception: The exception of the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">future</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">completed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.request_management.RequestRecord.set_result" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_result</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Set the result of the request.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/request_management.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the result of the request.</span>

<span class="sd">    Args:</span>
<span class="sd">        result: The result of the request.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">completed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h5 id="zenml.zen_server.request_management-functions">Functions</h5>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.routers" class="doc doc-heading">
            <code>routers</code>


</h4>

    <div class="doc doc-contents ">

        <p>Endpoint definitions.</p>










  <div class="doc doc-children">









<h5 id="zenml.zen_server.routers-modules">Modules</h5>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.actions_endpoints" class="doc doc-heading">
            <code>actions_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for actions.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.actions_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.actions_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.actions_endpoints.create_action" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_action</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">ActionRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ActionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates an action.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ActionRequest (zenml.ActionRequest)" href="core-client.html#zenml.client.ActionRequest">ActionRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Action to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the action handler for flavor/type is not valid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ActionResponse (zenml.models.ActionResponse)" href="core-models.html#zenml.models.ActionResponse">ActionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created action.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/actions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_action</span><span class="p">(</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">ActionRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ActionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an action.</span>

<span class="sd">    Args:</span>
<span class="sd">        action: Action to create.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the action handler for flavor/type is not valid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created action.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span>
        <span class="n">service_account_name_or_id</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">service_account_id</span>
    <span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="n">action_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an action</span>
    <span class="c1"># handler implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action_handler</span><span class="p">,</span> <span class="n">BaseActionHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Action handler plugin </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid action &quot;</span>
            <span class="s2">&quot;handler plugin.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">action_handler</span><span class="o">.</span><span class="n">create_action</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.actions_endpoints.delete_action" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_action</span><span class="p">(</span><span class="n">action_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete an action.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>action_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the action.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>force</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to force delete the action.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the action handler for flavor/type is not valid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/actions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{action_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_action</span><span class="p">(</span>
    <span class="n">action_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete an action.</span>

<span class="sd">    Args:</span>
<span class="sd">        action_id: ID of the action.</span>
<span class="sd">        force: Flag deciding whether to force delete the action.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the action handler for flavor/type is not valid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">action_id</span><span class="o">=</span><span class="n">action_id</span><span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">DELETE</span><span class="p">)</span>

    <span class="n">action_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an action</span>
    <span class="c1"># handler implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action_handler</span><span class="p">,</span> <span class="n">BaseActionHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Action handler plugin </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid action &quot;</span>
            <span class="s2">&quot;handler plugin.&quot;</span>
        <span class="p">)</span>

    <span class="n">action_handler</span><span class="o">.</span><span class="n">delete_action</span><span class="p">(</span>
        <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
        <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">delete_model_resource</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.actions_endpoints.get_action" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_action</span><span class="p">(</span><span class="n">action_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ActionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested action.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>action_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the action.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the action handler for flavor/type is not valid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ActionResponse (zenml.models.ActionResponse)" href="core-models.html#zenml.models.ActionResponse">ActionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested action.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/actions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{action_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_action</span><span class="p">(</span>
    <span class="n">action_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ActionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested action.</span>

<span class="sd">    Args:</span>
<span class="sd">        action_id: ID of the action.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the action handler for flavor/type is not valid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested action.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">action_id</span><span class="o">=</span><span class="n">action_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="n">action_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an action</span>
    <span class="c1"># handler implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action_handler</span><span class="p">,</span> <span class="n">BaseActionHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Action handler plugin </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid action &quot;</span>
            <span class="s2">&quot;handler plugin.&quot;</span>
        <span class="p">)</span>

    <span class="n">action</span> <span class="o">=</span> <span class="n">action_handler</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.actions_endpoints.list_actions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_actions</span><span class="p">(</span><span class="n">action_filter_model</span><span class="p">:</span> <span class="n">ActionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ActionFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ActionResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>List actions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>action_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ActionFilter (zenml.models.ActionFilter)" href="core-models.html#zenml.models.ActionFilter">ActionFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ActionFilter (zenml.models.ActionFilter)" href="core-models.html#zenml.models.ActionFilter">ActionFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ActionResponse (zenml.models.ActionResponse)" href="core-models.html#zenml.models.ActionResponse">ActionResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page of actions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/actions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_actions</span><span class="p">(</span>
    <span class="n">action_filter_model</span><span class="p">:</span> <span class="n">ActionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ActionFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ActionResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List actions.</span>

<span class="sd">    Args:</span>
<span class="sd">        action_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page of actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_actions_fn</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="p">:</span> <span class="n">ActionFilter</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ActionResponse</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List actions through their associated plugins.</span>

<span class="sd">        Args:</span>
<span class="sd">            filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">                filtering.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the action handler for flavor/type is not valid.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_actions</span><span class="p">(</span>
            <span class="n">action_filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
        <span class="p">)</span>

        <span class="c1"># Process the actions through their associated plugins</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">action</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">actions</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="n">action_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
                <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
                <span class="n">subtype</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Validate that the flavor and plugin_type correspond to an action</span>
            <span class="c1"># handler implementation</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action_handler</span><span class="p">,</span> <span class="n">BaseActionHandler</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Action handler plugin </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid action &quot;</span>
                    <span class="s2">&quot;handler plugin.&quot;</span>
                <span class="p">)</span>

            <span class="n">actions</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">action_handler</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span>
                <span class="n">action</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">actions</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">action_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">list_actions_fn</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.actions_endpoints.update_action" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_action</span><span class="p">(</span><span class="n">action_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">action_update</span><span class="p">:</span> <span class="n">ActionUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ActionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update an action.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>action_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the action to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ActionUpdate (zenml.models.ActionUpdate)" href="core-models.html#zenml.models.ActionUpdate">ActionUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the action handler for flavor/type is not valid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ActionResponse (zenml.models.ActionResponse)" href="core-models.html#zenml.models.ActionResponse">ActionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated action.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/actions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{action_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_action</span><span class="p">(</span>
    <span class="n">action_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">action_update</span><span class="p">:</span> <span class="n">ActionUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ActionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update an action.</span>

<span class="sd">    Args:</span>
<span class="sd">        action_id: ID of the action to update.</span>
<span class="sd">        action_update: The action update.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the action handler for flavor/type is not valid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated action.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">action_id</span><span class="o">=</span><span class="n">action_id</span><span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action_update</span><span class="o">.</span><span class="n">service_account_id</span><span class="p">:</span>
        <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span>
            <span class="n">service_account_name_or_id</span><span class="o">=</span><span class="n">action_update</span><span class="o">.</span><span class="n">service_account_id</span>
        <span class="p">)</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="n">action_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">ACTION</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an action</span>
    <span class="c1"># handler implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action_handler</span><span class="p">,</span> <span class="n">BaseActionHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Action handler plugin </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid action &quot;</span>
            <span class="s2">&quot;handler plugin.&quot;</span>
        <span class="p">)</span>

    <span class="n">updated_action</span> <span class="o">=</span> <span class="n">action_handler</span><span class="o">.</span><span class="n">update_action</span><span class="p">(</span>
        <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
        <span class="n">action_update</span><span class="o">=</span><span class="n">action_update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.artifact_endpoint" class="doc doc-heading">
            <code>artifact_endpoint</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for artifacts.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.artifact_endpoint-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.artifact_endpoint-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_endpoint.create_artifact" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_artifact</span><span class="p">(</span><span class="n">artifact</span><span class="p">:</span> <span class="n">ArtifactRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ArtifactResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a new artifact.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactRequest (zenml.models.ArtifactRequest)" href="core-models.html#zenml.models.ArtifactRequest">ArtifactRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactResponse (zenml.models.ArtifactResponse)" href="core-models.html#zenml.models.ArtifactResponse">ArtifactResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created artifact.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_endpoint.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_artifact</span><span class="p">(</span>
    <span class="n">artifact</span><span class="p">:</span> <span class="n">ArtifactRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArtifactResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new artifact.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact: The artifact to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">artifact</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_artifact</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_endpoint.delete_artifact" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_artifact</span><span class="p">(</span><span class="n">artifact_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete an artifact by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the artifact to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_endpoint.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_artifact</span><span class="p">(</span>
    <span class="n">artifact_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete an artifact by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_id: The ID of the artifact to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_artifact</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_endpoint.get_artifact" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_artifact</span><span class="p">(</span><span class="n">artifact_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ArtifactResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get an artifact by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the artifact to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactResponse (zenml.models.ArtifactResponse)" href="core-models.html#zenml.models.ArtifactResponse">ArtifactResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact with the given ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_endpoint.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_artifact</span><span class="p">(</span>
    <span class="n">artifact_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArtifactResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an artifact by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_id: The ID of the artifact to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifact with the given ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_endpoint.list_artifacts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_artifacts</span><span class="p">(</span><span class="n">artifact_filter_model</span><span class="p">:</span> <span class="n">ArtifactFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ArtifactFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ArtifactResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get artifacts according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactFilter (zenml.models.ArtifactFilter)" href="core-models.html#zenml.models.ArtifactFilter">ArtifactFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ArtifactFilter (zenml.models.ArtifactFilter)" href="core-models.html#zenml.models.ArtifactFilter">ArtifactFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ArtifactResponse (zenml.models.ArtifactResponse)" href="core-models.html#zenml.models.ArtifactResponse">ArtifactResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifacts according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_endpoint.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_artifacts</span><span class="p">(</span>
    <span class="n">artifact_filter_model</span><span class="p">:</span> <span class="n">ArtifactFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ArtifactFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ArtifactResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get artifacts according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifacts according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">artifact_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_artifacts</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_endpoint.update_artifact" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_artifact</span><span class="p">(</span><span class="n">artifact_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">artifact_update</span><span class="p">:</span> <span class="n">ArtifactUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ArtifactResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update an artifact by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the artifact to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>artifact_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactUpdate (zenml.models.ArtifactUpdate)" href="core-models.html#zenml.models.ArtifactUpdate">ArtifactUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The update to apply to the artifact.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactResponse (zenml.models.ArtifactResponse)" href="core-models.html#zenml.models.ArtifactResponse">ArtifactResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated artifact.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_endpoint.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_artifact</span><span class="p">(</span>
    <span class="n">artifact_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">artifact_update</span><span class="p">:</span> <span class="n">ArtifactUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArtifactResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update an artifact by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_id: The ID of the artifact to update.</span>
<span class="sd">        artifact_update: The update to apply to the artifact.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">artifact_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_artifact</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.artifact_version_endpoints" class="doc doc-heading">
            <code>artifact_version_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for artifact versions.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.artifact_version_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.artifact_version_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.batch_create_artifact_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_create_artifact_version</span><span class="p">(</span><span class="n">artifact_versions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ArtifactVersionRequest</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ArtifactVersionResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a batch of artifact versions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_versions</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="ArtifactVersionRequest (zenml.models.ArtifactVersionRequest)" href="core-models.html#zenml.models.ArtifactVersionRequest">ArtifactVersionRequest</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact versions to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created artifact versions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">BATCH</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">batch_create_artifact_version</span><span class="p">(</span>
    <span class="n">artifact_versions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ArtifactVersionRequest</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ArtifactVersionResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a batch of artifact versions.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_versions: The artifact versions to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created artifact versions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_batch_create_entity</span><span class="p">(</span>
        <span class="n">batch</span><span class="o">=</span><span class="n">artifact_versions</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">batch_create_artifact_versions</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.create_artifact_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_artifact_version</span><span class="p">(</span><span class="n">artifact_version</span><span class="p">:</span> <span class="n">ArtifactVersionRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ArtifactVersionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a new artifact version.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionRequest (zenml.models.ArtifactVersionRequest)" href="core-models.html#zenml.models.ArtifactVersionRequest">ArtifactVersionRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact version to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created artifact version.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_artifact_version</span><span class="p">(</span>
    <span class="n">artifact_version</span><span class="p">:</span> <span class="n">ArtifactVersionRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArtifactVersionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new artifact version.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version: The artifact version to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created artifact version.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">artifact_version</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_artifact_version</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.delete_artifact_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_artifact_version</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete an artifact version by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the artifact version to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_version_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_artifact_version</span><span class="p">(</span>
    <span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete an artifact version by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_id: The ID of the artifact version to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact_version</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_artifact_version</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.download_artifact_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">download_artifact_data</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FileResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Download the artifact data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the artifact version for which to get the data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The token to authenticate the artifact download.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.responses.FileResponse">FileResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_version_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">DATA</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">download_artifact_data</span><span class="p">(</span>
    <span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FileResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download the artifact data.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_id: ID of the artifact version for which to get the data.</span>
<span class="sd">        token: The token to authenticate the artifact download.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifact data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_download_token</span><span class="p">(</span>
        <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
        <span class="n">download_type</span><span class="o">=</span><span class="n">DownloadType</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">artifact</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact_version</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">)</span>
    <span class="n">archive_path</span> <span class="o">=</span> <span class="n">create_artifact_archive</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">FileResponse</span><span class="p">(</span>
        <span class="n">archive_path</span><span class="p">,</span>
        <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;application/gzip&quot;</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">artifact</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">artifact</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">.tar.gz&quot;</span><span class="p">,</span>
        <span class="n">background</span><span class="o">=</span><span class="n">BackgroundTask</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.get_artifact_download_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_artifact_download_token</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a download token for the artifact data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the artifact version for which to get the data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The download token for the artifact data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_version_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">DOWNLOAD_TOKEN</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_artifact_download_token</span><span class="p">(</span>
    <span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a download token for the artifact data.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_id: ID of the artifact version for which to get the data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The download token for the artifact data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">artifact</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact_version</span>
    <span class="p">)</span>
    <span class="n">verify_artifact_is_downloadable</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>

    <span class="c1"># The artifact download is handled in a separate tab by the browser. In this</span>
    <span class="c1"># tab, we do not have the ability to set any headers and therefore cannot</span>
    <span class="c1"># include the CSRF token in the request. To handle this, we instead generate</span>
    <span class="c1"># a JWT token in this endpoint (which includes CSRF and RBAC checks) and</span>
    <span class="c1"># then use that token to download the artifact data in a separate endpoint</span>
    <span class="c1"># which only verifies this short-lived token.</span>
    <span class="k">return</span> <span class="n">generate_download_token</span><span class="p">(</span>
        <span class="n">download_type</span><span class="o">=</span><span class="n">DownloadType</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.get_artifact_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_artifact_version</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ArtifactVersionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get an artifact version by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the artifact version to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact version with the given ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_version_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_artifact_version</span><span class="p">(</span>
    <span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArtifactVersionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an artifact version by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_id: The ID of the artifact version to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifact version with the given ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact_version</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.get_artifact_visualization" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_artifact_visualization</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">LoadedVisualization</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the visualization of an artifact.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the artifact version for which to get the visualization.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the visualization to get (if there are multiple).</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LoadedVisualization (zenml.models.LoadedVisualization)" href="core-models.html#zenml.models.LoadedVisualization">LoadedVisualization</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The visualization of the artifact version.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_version_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">VISUALIZE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_artifact_visualization</span><span class="p">(</span>
    <span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoadedVisualization</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the visualization of an artifact.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_id: ID of the artifact version for which to get the visualization.</span>
<span class="sd">        index: Index of the visualization to get (if there are multiple).</span>

<span class="sd">    Returns:</span>
<span class="sd">        The visualization of the artifact version.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">artifact</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifact_version</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">load_artifact_visualization</span><span class="p">(</span>
        <span class="n">artifact</span><span class="o">=</span><span class="n">artifact</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">zen_store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span> <span class="n">encode_image</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.list_artifact_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_artifact_versions</span><span class="p">(</span><span class="n">artifact_version_filter_model</span><span class="p">:</span> <span class="n">ArtifactVersionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ArtifactVersionFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ArtifactVersionResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get artifact versions according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionFilter (zenml.models.ArtifactVersionFilter)" href="core-models.html#zenml.models.ArtifactVersionFilter">ArtifactVersionFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination,
sorting, filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ArtifactVersionFilter (zenml.models.ArtifactVersionFilter)" href="core-models.html#zenml.models.ArtifactVersionFilter">ArtifactVersionFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The artifact versions according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_artifact_versions</span><span class="p">(</span>
    <span class="n">artifact_version_filter_model</span><span class="p">:</span> <span class="n">ArtifactVersionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ArtifactVersionFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ArtifactVersionResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get artifact versions according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_filter_model: Filter model used for pagination,</span>
<span class="sd">            sorting, filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifact versions according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># A project scoped request must always be scoped to a specific</span>
    <span class="c1"># project. This is required for the RBAC check to work.</span>
    <span class="n">set_filter_project_scope</span><span class="p">(</span><span class="n">artifact_version_filter_model</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artifact_version_filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="n">UUID</span><span class="p">)</span>

    <span class="n">allowed_artifact_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT</span><span class="p">,</span>
        <span class="n">project_id</span><span class="o">=</span><span class="n">artifact_version_filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">artifact_version_filter_model</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">artifact_id</span><span class="o">=</span><span class="n">allowed_artifact_ids</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">artifact_versions</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_artifact_versions</span><span class="p">(</span>
        <span class="n">artifact_version_filter_model</span><span class="o">=</span><span class="n">artifact_version_filter_model</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_page</span><span class="p">(</span><span class="n">artifact_versions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.prune_artifact_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prune_artifact_versions</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">only_versions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Prunes unused artifact versions and their artifacts.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The project name or ID to prune artifact
versions for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>only_versions</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Only delete artifact versions, keeping artifacts</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">prune_artifact_versions</span><span class="p">(</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">only_versions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prunes unused artifact versions and their artifacts.</span>

<span class="sd">    Args:</span>
<span class="sd">        project_name_or_id: The project name or ID to prune artifact</span>
<span class="sd">            versions for.</span>
<span class="sd">        only_versions: Only delete artifact versions, keeping artifacts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">project_id</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span><span class="o">.</span><span class="n">id</span>

    <span class="n">verify_permissions_and_prune_entities</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">,</span>
        <span class="n">prune_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">prune_artifact_versions</span><span class="p">,</span>
        <span class="n">only_versions</span><span class="o">=</span><span class="n">only_versions</span><span class="p">,</span>
        <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.artifact_version_endpoints.update_artifact_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_artifact_version</span><span class="p">(</span><span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">artifact_version_update</span><span class="p">:</span> <span class="n">ArtifactVersionUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ArtifactVersionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update an artifact by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the artifact version to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>artifact_version_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionUpdate (zenml.models.ArtifactVersionUpdate)" href="core-models.html#zenml.models.ArtifactVersionUpdate">ArtifactVersionUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The update to apply to the artifact version.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ArtifactVersionResponse (zenml.models.ArtifactVersionResponse)" href="core-models.html#zenml.models.ArtifactVersionResponse">ArtifactVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated artifact.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/artifact_version_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@artifact_version_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{artifact_version_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_artifact_version</span><span class="p">(</span>
    <span class="n">artifact_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">artifact_version_update</span><span class="p">:</span> <span class="n">ArtifactVersionUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArtifactVersionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update an artifact by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_version_id: The ID of the artifact version to update.</span>
<span class="sd">        artifact_version_update: The update to apply to the artifact version.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">artifact_version_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">artifact_version_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact_version</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_artifact_version</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.auth_endpoints" class="doc doc-heading">
            <code>auth_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for authentication (login).</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.auth_endpoints-classes">Classes</h7>

<div class="doc doc-object doc-class">



<h8 id="zenml.zen_server.routers.auth_endpoints.OAuthLoginRequestForm" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">OAuthLoginRequestForm</span><span class="p">(</span><span class="n">grant_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">device_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span></code>

</h8>


    <div class="doc doc-contents ">


        <p>OAuth2 grant type request form.</p>
<p>This form allows multiple grant types to be used with the same endpoint:
* standard OAuth2 password grant type
* standard  OAuth2 device authorization grant type
* ZenML service account + API key grant type (proprietary)
* ZenML External Authenticator grant type (proprietary)</p>

        <p>Initializes the form.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>grant_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The grant type.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.param_functions.Form">Form</span>(None)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>username</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The username. Only used for the password grant type.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.param_functions.Form">Form</span>(None)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>password</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The password. Only used for the password grant type.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.param_functions.Form">Form</span>(None)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>client_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The client ID.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.param_functions.Form">Form</span>(None)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>device_code</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device code. Only used for the device authorization
grant type.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.param_functions.Form">Form</span>(None)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>src/zenml/zen_server/routers/auth_endpoints.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">grant_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">device_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the form.</span>

<span class="sd">    Args:</span>
<span class="sd">        grant_type: The grant type.</span>
<span class="sd">        username: The username. Only used for the password grant type.</span>
<span class="sd">        password: The password. Only used for the password grant type.</span>
<span class="sd">        client_id: The client ID.</span>
<span class="sd">        device_code: The device code. Only used for the device authorization</span>
<span class="sd">            grant type.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: If the request is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">grant_type</span><span class="p">:</span>
        <span class="c1"># Detect the grant type from the form data</span>
        <span class="k">if</span> <span class="n">username</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">=</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_PASSWORD</span>
        <span class="k">elif</span> <span class="n">password</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">=</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">ZENML_API_KEY</span>
        <span class="k">elif</span> <span class="n">device_code</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">=</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_DEVICE_CODE</span>
        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="o">==</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">=</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">ZENML_EXTERNAL</span>
        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">AuthScheme</span><span class="o">.</span><span class="n">OAUTH2_PASSWORD_BEARER</span><span class="p">,</span>
            <span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">,</span>
            <span class="n">AuthScheme</span><span class="o">.</span><span class="n">HTTP_BASIC</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="c1"># For no auth and basic HTTP auth schemes, we also allow the</span>
            <span class="c1"># password grant type to be used for backwards compatibility</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">=</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_PASSWORD</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Invalid request: grant type is required.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">grant_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Request with unsupported grant type: </span><span class="si">{</span><span class="n">grant_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Unsupported grant type: </span><span class="si">{</span><span class="n">grant_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">=</span> <span class="n">OAuthGrantTypes</span><span class="p">(</span><span class="n">grant_type</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_PASSWORD</span><span class="p">:</span>
        <span class="c1"># For the no auth and basic HTTP auth schemes, we also allow the</span>
        <span class="c1"># password grant type to be used for compatibility with other</span>
        <span class="c1"># auth schemes</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">AuthScheme</span><span class="o">.</span><span class="n">OAUTH2_PASSWORD_BEARER</span><span class="p">,</span>
            <span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">,</span>
            <span class="n">AuthScheme</span><span class="o">.</span><span class="n">HTTP_BASIC</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Request with unsupported grant type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Unsupported grant type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Request with missing username&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Invalid request: username is required.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_DEVICE_CODE</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="ow">in</span> <span class="p">[</span><span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">,</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_403_FORBIDDEN</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Device authorization is not supported.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">device_code</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">client_id</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Request with missing device code or client ID&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Invalid request: device code and client ID are &quot;</span>
                <span class="s2">&quot;required.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="n">client_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Request with invalid client ID: </span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Invalid request: invalid client ID.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span> <span class="o">=</span> <span class="n">device_code</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">ZENML_API_KEY</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;API key is required.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">password</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">ZENML_EXTERNAL</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="o">!=</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Request with unsupported grant type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Unsupported grant type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grant_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">








<h9 id="zenml.zen_server.routers.auth_endpoints.OAuthLoginRequestForm-functions">Functions</h9>



  </div>

    </div>

</div>
<h7 id="zenml.zen_server.routers.auth_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.auth_endpoints.api_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">api_token</span><span class="p">(</span><span class="n">token_type</span><span class="p">:</span> <span class="n">APITokenType</span> <span class="o">=</span> <span class="n">APITokenType</span><span class="o">.</span><span class="n">GENERIC</span><span class="p">,</span> <span class="n">expires_in</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">schedule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pipeline_run_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">deployment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Generate an API token for the current user.</p>
<p>Use this endpoint to generate an API token for the current user. Two types
of API tokens are supported:</p>
<ul>
<li>Generic API token: This token is short-lived and can be used for
generic automation tasks. The expiration can be set by the user, but the
server will impose a maximum expiration time.</li>
<li>Workload API token: This token is scoped to a specific pipeline run,
schedule or deployment and is used by pipeline workloads to
authenticate with the server. A pipeline run ID, schedule ID or deployment
ID must be provided and the generated token will only be valid for the
indicated pipeline run, schedule or deployment.
No time limit is imposed on the validity of the token. A workload API token
can be used to authenticate and generate another workload API token, but
only for the same schedule, pipeline run ID or deployment ID, in that order.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="APITokenType (zenml.enums.APITokenType)" href="core-enums.html#zenml.enums.APITokenType">APITokenType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of API token to generate.</p>
              </div>
            </td>
            <td>
                  <code><span title="zenml.enums.APITokenType.GENERIC">GENERIC</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expires_in</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expiration time of the generic API token in seconds.
If not set, the server will use the default expiration time for
generic API tokens. The server also imposes a maximum expiration
time.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schedule_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the schedule to scope the workload API token to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_run_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the pipeline run to scope the workload API
token to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the deployment to scope the workload
API token to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthorizationException(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.AuthorizationException)" href="core-exceptions.html#zenml.exceptions.AuthorizationException">AuthorizationException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If not authorized to generate the API token.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/auth_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">API_TOKEN</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">api_token</span><span class="p">(</span>
    <span class="n">token_type</span><span class="p">:</span> <span class="n">APITokenType</span> <span class="o">=</span> <span class="n">APITokenType</span><span class="o">.</span><span class="n">GENERIC</span><span class="p">,</span>
    <span class="n">expires_in</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">schedule_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pipeline_run_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an API token for the current user.</span>

<span class="sd">    Use this endpoint to generate an API token for the current user. Two types</span>
<span class="sd">    of API tokens are supported:</span>

<span class="sd">    * Generic API token: This token is short-lived and can be used for</span>
<span class="sd">    generic automation tasks. The expiration can be set by the user, but the</span>
<span class="sd">    server will impose a maximum expiration time.</span>
<span class="sd">    * Workload API token: This token is scoped to a specific pipeline run,</span>
<span class="sd">    schedule or deployment and is used by pipeline workloads to</span>
<span class="sd">    authenticate with the server. A pipeline run ID, schedule ID or deployment</span>
<span class="sd">    ID must be provided and the generated token will only be valid for the</span>
<span class="sd">    indicated pipeline run, schedule or deployment.</span>
<span class="sd">    No time limit is imposed on the validity of the token. A workload API token</span>
<span class="sd">    can be used to authenticate and generate another workload API token, but</span>
<span class="sd">    only for the same schedule, pipeline run ID or deployment ID, in that order.</span>

<span class="sd">    Args:</span>
<span class="sd">        token_type: The type of API token to generate.</span>
<span class="sd">        expires_in: The expiration time of the generic API token in seconds.</span>
<span class="sd">            If not set, the server will use the default expiration time for</span>
<span class="sd">            generic API tokens. The server also imposes a maximum expiration</span>
<span class="sd">            time.</span>
<span class="sd">        schedule_id: The ID of the schedule to scope the workload API token to.</span>
<span class="sd">        pipeline_run_id: The ID of the pipeline run to scope the workload API</span>
<span class="sd">            token to.</span>
<span class="sd">        deployment_id: The ID of the deployment to scope the workload</span>
<span class="sd">            API token to.</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The API token.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AuthorizationException: If not authorized to generate the API token.</span>
<span class="sd">        ValueError: If the request is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">access_token</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">encoded_access_token</span><span class="p">:</span>
        <span class="c1"># Should not happen</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span><span class="s2">&quot;Not authenticated.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">token_type</span> <span class="o">==</span> <span class="n">APITokenType</span><span class="o">.</span><span class="n">GENERIC</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">schedule_id</span> <span class="ow">or</span> <span class="n">pipeline_run_id</span> <span class="ow">or</span> <span class="n">deployment_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Generic API tokens cannot be scoped to a schedule, pipeline &quot;</span>
                <span class="s2">&quot;run or deployment.&quot;</span>
            <span class="p">)</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">expires_in</span><span class="p">:</span>
            <span class="n">expires_in</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">generic_api_token_lifetime</span>

        <span class="k">if</span> <span class="n">expires_in</span> <span class="o">&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">generic_api_token_max_lifetime</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The maximum expiration time for generic API tokens allowed &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;by this server is </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">generic_api_token_max_lifetime</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;seconds.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">generate_access_token</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="n">token</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
            <span class="n">expires_in</span><span class="o">=</span><span class="n">expires_in</span><span class="p">,</span>
            <span class="c1"># Don&#39;t include the access token as a cookie in the response</span>
            <span class="n">response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">access_token</span>

    <span class="n">schedule_id</span> <span class="o">=</span> <span class="n">schedule_id</span> <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">schedule_id</span>
    <span class="n">pipeline_run_id</span> <span class="o">=</span> <span class="n">pipeline_run_id</span> <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">pipeline_run_id</span>
    <span class="n">deployment_id</span> <span class="o">=</span> <span class="n">deployment_id</span> <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">deployment_id</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_run_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">schedule_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">deployment_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Workload API tokens must be scoped to a schedule, pipeline run or &quot;</span>
            <span class="s2">&quot;deployment.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">schedule_id</span> <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">schedule_id</span> <span class="ow">and</span> <span class="n">schedule_id</span> <span class="o">!=</span> <span class="n">token</span><span class="o">.</span><span class="n">schedule_id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to scope API token to schedule </span><span class="si">{</span><span class="n">schedule_id</span><span class="si">}</span><span class="s2">. The &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;token used to authorize this request is already scoped to &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;schedule </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">schedule_id</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">pipeline_run_id</span>
        <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">pipeline_run_id</span>
        <span class="ow">and</span> <span class="n">pipeline_run_id</span> <span class="o">!=</span> <span class="n">token</span><span class="o">.</span><span class="n">pipeline_run_id</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to scope API token to pipeline run </span><span class="si">{</span><span class="n">pipeline_run_id</span><span class="si">}</span><span class="s2">. The &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;token used to authorize this request is already scoped to &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;pipeline run </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">deployment_id</span>
        <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">deployment_id</span>
        <span class="ow">and</span> <span class="n">deployment_id</span> <span class="o">!=</span> <span class="n">token</span><span class="o">.</span><span class="n">deployment_id</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to scope API token to deployment </span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">. The &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;token used to authorize this request is already scoped to &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;deployment </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="n">project_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">schedule_id</span><span class="p">:</span>
        <span class="c1"># The schedule must exist</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">schedule</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_schedule</span><span class="p">(</span><span class="n">schedule_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Schedule </span><span class="si">{</span><span class="n">schedule_id</span><span class="si">}</span><span class="s2"> does not exist and API tokens cannot &quot;</span>
                <span class="s2">&quot;be generated for non-existent schedules for security reasons.&quot;</span>
            <span class="p">)</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="n">schedule</span><span class="o">.</span><span class="n">project_id</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">schedule</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Schedule </span><span class="si">{</span><span class="n">schedule_id</span><span class="si">}</span><span class="s2"> is not active and API tokens cannot &quot;</span>
                <span class="s2">&quot;be generated for inactive schedules for security reasons.&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">pipeline_run_id</span><span class="p">:</span>
        <span class="c1"># The pipeline run must exist and the run must not be concluded</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># TODO: this is expensive, we should only fetch the minimum data here</span>
            <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">pipeline_run_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Pipeline run </span><span class="si">{</span><span class="n">pipeline_run_id</span><span class="si">}</span><span class="s2"> does not exist and API tokens &quot;</span>
                <span class="s2">&quot;cannot be generated for non-existent pipeline runs for &quot;</span>
                <span class="s2">&quot;security reasons.&quot;</span>
            <span class="p">)</span>

        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">pipeline_run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

        <span class="n">project_id</span> <span class="o">=</span> <span class="n">pipeline_run</span><span class="o">.</span><span class="n">project_id</span>

        <span class="k">if</span> <span class="n">pipeline_run</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">is_finished</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The execution of pipeline run </span><span class="si">{</span><span class="n">pipeline_run_id</span><span class="si">}</span><span class="s2"> has already &quot;</span>
                <span class="s2">&quot;concluded and API tokens can no longer be generated for it &quot;</span>
                <span class="s2">&quot;for security reasons.&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">deployment_id</span><span class="p">:</span>
        <span class="c1"># The deployment must exist</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">deployment</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_deployment</span><span class="p">(</span>
                <span class="n">deployment_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Deployment </span><span class="si">{</span><span class="n">deployment_id</span><span class="si">}</span><span class="s2"> does not exist and API tokens cannot &quot;</span>
                <span class="s2">&quot;be generated for non-existent deployments for security reasons.&quot;</span>
            <span class="p">)</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="n">deployment</span><span class="o">.</span><span class="n">project_id</span>

    <span class="k">assert</span> <span class="n">project_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">verify_permission</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
        <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">generate_access_token</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">token</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
        <span class="c1"># Keep the original API key and device token scopes</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">device</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
        <span class="n">schedule_id</span><span class="o">=</span><span class="n">schedule_id</span><span class="p">,</span>
        <span class="n">pipeline_run_id</span><span class="o">=</span><span class="n">pipeline_run_id</span><span class="p">,</span>
        <span class="n">deployment_id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="c1"># Don&#39;t include the access token as a cookie in the response</span>
        <span class="n">response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Never expire the token</span>
        <span class="n">expires_in</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">access_token</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.auth_endpoints.device_authorization" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">device_authorization</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">client_id</span><span class="p">:</span> <span class="n">UUID</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="o">...</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceAuthorizationResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>OAuth2 device authorization endpoint.</p>
<p>This endpoint implements the OAuth2 device authorization grant flow as
defined in https://tools.ietf.org/html/rfc8628. It is called to initiate
the device authorization flow by requesting a device and user code for a
given client ID.</p>
<p>For a new client ID, a new OAuth device is created, stored in the DB and
returned to the client along with a pair of newly generated device and user
codes. If a device for the given client ID already exists, the existing
DB entry is reused and new device and user codes are generated.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>client_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The client ID.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.param_functions.Form">Form</span>(...)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceAuthorizationResponse (zenml.models.OAuthDeviceAuthorizationResponse)" href="core-models.html#zenml.models.OAuthDeviceAuthorizationResponse">OAuthDeviceAuthorizationResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The device authorization response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device authorization is not supported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/auth_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">DEVICE_AUTHORIZATION</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">OAuthDeviceAuthorizationResponse</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">device_authorization</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">client_id</span><span class="p">:</span> <span class="n">UUID</span> <span class="o">=</span> <span class="n">Form</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceAuthorizationResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;OAuth2 device authorization endpoint.</span>

<span class="sd">    This endpoint implements the OAuth2 device authorization grant flow as</span>
<span class="sd">    defined in https://tools.ietf.org/html/rfc8628. It is called to initiate</span>
<span class="sd">    the device authorization flow by requesting a device and user code for a</span>
<span class="sd">    given client ID.</span>

<span class="sd">    For a new client ID, a new OAuth device is created, stored in the DB and</span>
<span class="sd">    returned to the client along with a pair of newly generated device and user</span>
<span class="sd">    codes. If a device for the given client ID already exists, the existing</span>
<span class="sd">    DB entry is reused and new device and user codes are generated.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        client_id: The client ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The device authorization response.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: If the device authorization is not supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="ow">in</span> <span class="p">[</span><span class="n">AuthScheme</span><span class="o">.</span><span class="n">NO_AUTH</span><span class="p">,</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_403_FORBIDDEN</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Device authorization is not supported.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Use this opportunity to delete expired devices</span>
        <span class="n">store</span><span class="o">.</span><span class="n">delete_expired_authorized_devices</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to delete expired devices&quot;</span><span class="p">)</span>

    <span class="c1"># Fetch additional details about the client from the user-agent header</span>
    <span class="n">user_agent_header</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user_agent_header</span><span class="p">:</span>
        <span class="n">device_details</span> <span class="o">=</span> <span class="n">OAuthDeviceUserAgentHeader</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">user_agent_header</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">device_details</span> <span class="o">=</span> <span class="n">OAuthDeviceUserAgentHeader</span><span class="p">()</span>

    <span class="c1"># Fetch the IP address of the client</span>
    <span class="n">ip_address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">city</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
    <span class="n">forwarded</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-Forwarded-For&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">forwarded</span><span class="p">:</span>
        <span class="n">ip_address</span> <span class="o">=</span> <span class="n">forwarded</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span><span class="p">:</span>
        <span class="n">ip_address</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span>

    <span class="k">if</span> <span class="n">ip_address</span><span class="p">:</span>
        <span class="n">city</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">country</span> <span class="o">=</span> <span class="n">get_ip_location</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>

    <span class="c1"># Check if a device is already registered for the same client ID.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">device_model</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_internal_authorized_device</span><span class="p">(</span>
            <span class="n">client_id</span><span class="o">=</span><span class="n">client_id</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">device_model</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">create_authorized_device</span><span class="p">(</span>
            <span class="n">OAuthDeviceInternalRequest</span><span class="p">(</span>
                <span class="n">client_id</span><span class="o">=</span><span class="n">client_id</span><span class="p">,</span>
                <span class="n">expires_in</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">device_auth_timeout</span><span class="p">,</span>
                <span class="n">ip_address</span><span class="o">=</span><span class="n">ip_address</span><span class="p">,</span>
                <span class="n">city</span><span class="o">=</span><span class="n">city</span><span class="p">,</span>
                <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
                <span class="n">country</span><span class="o">=</span><span class="n">country</span><span class="p">,</span>
                <span class="o">**</span><span class="n">device_details</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Put the device into pending state and generate new codes. This</span>
        <span class="c1"># effectively invalidates the old codes and the device cannot be used</span>
        <span class="c1"># for authentication anymore.</span>
        <span class="n">device_model</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">update_internal_authorized_device</span><span class="p">(</span>
            <span class="n">device_id</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">update</span><span class="o">=</span><span class="n">OAuthDeviceInternalUpdate</span><span class="p">(</span>
                <span class="n">trusted_device</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">expires_in</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">device_auth_timeout</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">PENDING</span><span class="p">,</span>
                <span class="n">failed_auth_attempts</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">generate_new_codes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">ip_address</span><span class="o">=</span><span class="n">ip_address</span><span class="p">,</span>
                <span class="n">city</span><span class="o">=</span><span class="n">city</span><span class="p">,</span>
                <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
                <span class="n">country</span><span class="o">=</span><span class="n">country</span><span class="p">,</span>
                <span class="o">**</span><span class="n">device_details</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="p">),</span>
        <span class="p">)</span>

    <span class="n">dashboard_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">dashboard_url</span> <span class="ow">or</span> <span class="n">config</span><span class="o">.</span><span class="n">server_url</span>

    <span class="k">if</span> <span class="n">dashboard_url</span><span class="p">:</span>
        <span class="n">verification_uri</span> <span class="o">=</span> <span class="n">dashboard_url</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">DEVICES</span> <span class="o">+</span> <span class="n">DEVICE_VERIFY</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">verification_uri</span> <span class="o">=</span> <span class="n">DEVICES</span> <span class="o">+</span> <span class="n">DEVICE_VERIFY</span>

    <span class="n">verification_uri_complete</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">verification_uri</span>
        <span class="o">+</span> <span class="s2">&quot;?&quot;</span>
        <span class="o">+</span> <span class="n">urlencode</span><span class="p">(</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">device_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
                <span class="n">user_code</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">device_model</span><span class="o">.</span><span class="n">user_code</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">OAuthDeviceAuthorizationResponse</span><span class="p">(</span>
        <span class="n">device_code</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">device_code</span><span class="p">,</span>
        <span class="n">user_code</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">user_code</span><span class="p">,</span>
        <span class="n">expires_in</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">device_auth_timeout</span><span class="p">,</span>
        <span class="n">interval</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">device_auth_polling_interval</span><span class="p">,</span>
        <span class="n">verification_uri</span><span class="o">=</span><span class="n">verification_uri</span><span class="p">,</span>
        <span class="n">verification_uri_complete</span><span class="o">=</span><span class="n">verification_uri_complete</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.auth_endpoints.logout" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">logout</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Logs out the user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>response</code>
            </td>
            <td>
                  <code><span title="fastapi.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/auth_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">LOGOUT</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">logout</span><span class="p">(</span>
    <span class="n">response</span><span class="p">:</span> <span class="n">Response</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs out the user.</span>

<span class="sd">    Args:</span>
<span class="sd">        response: The response object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="c1"># Remove the HTTP only cookie even if it does not exist</span>
    <span class="n">response</span><span class="o">.</span><span class="n">delete_cookie</span><span class="p">(</span>
        <span class="n">key</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get_auth_cookie_name</span><span class="p">(),</span>
        <span class="n">httponly</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">samesite</span><span class="o">=</span><span class="s2">&quot;lax&quot;</span><span class="p">,</span>
        <span class="n">domain</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">auth_cookie_domain</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.auth_endpoints.token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">token</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Response</span><span class="p">,</span> <span class="n">auth_form_data</span><span class="p">:</span> <span class="n">OAuthLoginRequestForm</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">OAuthTokenResponse</span><span class="p">,</span> <span class="n">OAuthRedirectResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>OAuth2 token endpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>response</code>
            </td>
            <td>
                  <code><span title="fastapi.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_form_data</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthLoginRequestForm(grant_type: Optional[str] = Form(None), username: Optional[str] = Form(None), password: Optional[str] = Form(None), client_id: Optional[str] = Form(None), device_code: Optional[str] = Form(None)) (zenml.zen_server.routers.auth_endpoints.OAuthLoginRequestForm)" href="#zenml.zen_server.routers.auth_endpoints.OAuthLoginRequestForm">OAuthLoginRequestForm</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OAuth 2.0 authentication form data.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="OAuthTokenResponse (zenml.models.OAuthTokenResponse)" href="core-models.html#zenml.models.OAuthTokenResponse">OAuthTokenResponse</a>, <a class="autorefs autorefs-internal" title="OAuthRedirectResponse (zenml.models.OAuthRedirectResponse)" href="core-models.html#zenml.models.OAuthRedirectResponse">OAuthRedirectResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An access token or a redirect response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the grant type is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/auth_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">LOGIN</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">Union</span><span class="p">[</span><span class="n">OAuthTokenResponse</span><span class="p">,</span> <span class="n">OAuthRedirectResponse</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="nd">@rate_limit_requests</span><span class="p">(</span>
    <span class="n">day_limit</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">login_rate_limit_day</span><span class="p">,</span>
    <span class="n">minute_limit</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">login_rate_limit_minute</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">token</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">response</span><span class="p">:</span> <span class="n">Response</span><span class="p">,</span>
    <span class="n">auth_form_data</span><span class="p">:</span> <span class="n">OAuthLoginRequestForm</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">OAuthTokenResponse</span><span class="p">,</span> <span class="n">OAuthRedirectResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;OAuth2 token endpoint.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        response: The response object.</span>
<span class="sd">        auth_form_data: The OAuth 2.0 authentication form data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An access token or a redirect response.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the grant type is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="n">cookie_response</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Response</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span>

    <span class="k">if</span> <span class="n">auth_form_data</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_PASSWORD</span><span class="p">:</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">authenticate_credentials</span><span class="p">(</span>
            <span class="n">user_name_or_id</span><span class="o">=</span><span class="n">auth_form_data</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">auth_form_data</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="n">auth_form_data</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">OAUTH_DEVICE_CODE</span><span class="p">:</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">authenticate_device</span><span class="p">(</span>
            <span class="n">client_id</span><span class="o">=</span><span class="n">auth_form_data</span><span class="o">.</span><span class="n">client_id</span><span class="p">,</span>
            <span class="n">device_code</span><span class="o">=</span><span class="n">auth_form_data</span><span class="o">.</span><span class="n">device_code</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># API tokens for authorized device are only meant for non-web clients</span>
        <span class="c1"># and should not be stored as cookies</span>
        <span class="n">cookie_response</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">elif</span> <span class="n">auth_form_data</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">ZENML_API_KEY</span><span class="p">:</span>
        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">authenticate_api_key</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">auth_form_data</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># API tokens for API keys are only meant for non-web clients</span>
        <span class="c1"># and should not be stored as cookies</span>
        <span class="n">cookie_response</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">elif</span> <span class="n">auth_form_data</span><span class="o">.</span><span class="n">grant_type</span> <span class="o">==</span> <span class="n">OAuthGrantTypes</span><span class="o">.</span><span class="n">ZENML_EXTERNAL</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">external_login_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="n">authorization_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">external_login_url</span>

        <span class="c1"># Try to get the external session token or authorization token from the</span>
        <span class="c1"># authorization header</span>
        <span class="n">authorization_header</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Authorization&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">authorization_header</span><span class="p">:</span>
            <span class="n">scheme</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="n">authorization_header</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">token</span> <span class="ow">and</span> <span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;bearer&quot;</span><span class="p">:</span>
                <span class="n">external_access_token</span> <span class="o">=</span> <span class="n">token</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">authorization_header</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;External session or authorization token not found. Redirecting to &quot;</span>
                <span class="s2">&quot;external authenticator.&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Redirect the user to the external authentication login endpoint</span>
            <span class="k">return</span> <span class="n">OAuthRedirectResponse</span><span class="p">(</span><span class="n">authorization_url</span><span class="o">=</span><span class="n">authorization_url</span><span class="p">)</span>

        <span class="n">auth_context</span> <span class="o">=</span> <span class="n">authenticate_external_user</span><span class="p">(</span>
            <span class="n">external_access_token</span><span class="o">=</span><span class="n">external_access_token</span><span class="p">,</span>
            <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># TODO: no easy way to detect which type of client issued this request</span>
        <span class="c1"># (web or non-web) in order to decide whether to store the access token</span>
        <span class="c1"># as a cookie in the response or not. For now, we always assume a web</span>
        <span class="c1"># client.</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Shouldn&#39;t happen, because we verify all grants in the form data</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid grant type.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">generate_access_token</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">response</span><span class="o">=</span><span class="n">cookie_response</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">device</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.code_repositories_endpoints" class="doc doc-heading">
            <code>code_repositories_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for code repositories.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.code_repositories_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.code_repositories_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.code_repositories_endpoints.create_code_repository" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_code_repository</span><span class="p">(</span><span class="n">code_repository</span><span class="p">:</span> <span class="n">CodeRepositoryRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">CodeRepositoryResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a code repository.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>code_repository</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CodeRepositoryRequest (zenml.models.CodeRepositoryRequest)" href="core-models.html#zenml.models.CodeRepositoryRequest">CodeRepositoryRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Code repository to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CodeRepositoryResponse (zenml.models.CodeRepositoryResponse)" href="core-models.html#zenml.models.CodeRepositoryResponse">CodeRepositoryResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created code repository.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/code_repositories_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">CODE_REPOSITORIES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code_repositories&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_code_repository</span><span class="p">(</span>
    <span class="n">code_repository</span><span class="p">:</span> <span class="n">CodeRepositoryRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CodeRepositoryResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a code repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_repository: Code repository to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created code repository.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">code_repository</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">code_repository</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_code_repository</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.code_repositories_endpoints.delete_code_repository" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_code_repository</span><span class="p">(</span><span class="n">code_repository_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific code repository.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>code_repository_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the code repository to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/code_repositories_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{code_repository_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_code_repository</span><span class="p">(</span>
    <span class="n">code_repository_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific code repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_repository_id: The ID of the code repository to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">code_repository_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_code_repository</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_code_repository</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.code_repositories_endpoints.get_code_repository" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_code_repository</span><span class="p">(</span><span class="n">code_repository_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">CodeRepositoryResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific code repository using its unique ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>code_repository_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the code repository to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CodeRepositoryResponse (zenml.models.CodeRepositoryResponse)" href="core-models.html#zenml.models.CodeRepositoryResponse">CodeRepositoryResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific code repository object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/code_repositories_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{code_repository_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_code_repository</span><span class="p">(</span>
    <span class="n">code_repository_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CodeRepositoryResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific code repository using its unique ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_repository_id: The ID of the code repository to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific code repository object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">code_repository_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_code_repository</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.code_repositories_endpoints.list_code_repositories" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_code_repositories</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">CodeRepositoryFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">CodeRepositoryFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">CodeRepositoryResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a page of code repositories.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CodeRepositoryFilter (zenml.models.CodeRepositoryFilter)" href="core-models.html#zenml.models.CodeRepositoryFilter">CodeRepositoryFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="CodeRepositoryFilter (zenml.models.CodeRepositoryFilter)" href="core-models.html#zenml.models.CodeRepositoryFilter">CodeRepositoryFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="CodeRepositoryResponse (zenml.models.CodeRepositoryResponse)" href="core-models.html#zenml.models.CodeRepositoryResponse">CodeRepositoryResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page of code repository objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/code_repositories_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">CODE_REPOSITORIES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code_repositories&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_code_repositories</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">CodeRepositoryFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">CodeRepositoryFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">CodeRepositoryResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a page of code repositories.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page of code repository objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">CODE_REPOSITORY</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_code_repositories</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.code_repositories_endpoints.update_code_repository" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_code_repository</span><span class="p">(</span><span class="n">code_repository_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">update</span><span class="p">:</span> <span class="n">CodeRepositoryUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">CodeRepositoryResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a code repository.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>code_repository_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the code repository to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CodeRepositoryUpdate (zenml.models.CodeRepositoryUpdate)" href="core-models.html#zenml.models.CodeRepositoryUpdate">CodeRepositoryUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model containing the attributes to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CodeRepositoryResponse (zenml.models.CodeRepositoryResponse)" href="core-models.html#zenml.models.CodeRepositoryResponse">CodeRepositoryResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated code repository object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/code_repositories_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{code_repository_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_code_repository</span><span class="p">(</span>
    <span class="n">code_repository_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">update</span><span class="p">:</span> <span class="n">CodeRepositoryUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CodeRepositoryResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a code repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_repository_id: The ID of the code repository to update.</span>
<span class="sd">        update: The model containing the attributes to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated code repository object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">code_repository_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_code_repository</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_code_repository</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.curated_visualization_endpoints" class="doc doc-heading">
            <code>curated_visualization_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>REST API endpoints for curated visualizations.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.curated_visualization_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.curated_visualization_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.curated_visualization_endpoints.create_curated_visualization" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_curated_visualization</span><span class="p">(</span><span class="n">visualization</span><span class="p">:</span> <span class="n">CuratedVisualizationRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">CuratedVisualizationResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a curated visualization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>visualization</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CuratedVisualizationRequest (zenml.models.CuratedVisualizationRequest)" href="core-models.html#zenml.models.CuratedVisualizationRequest">CuratedVisualizationRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The curated visualization to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CuratedVisualizationResponse (zenml.models.CuratedVisualizationResponse)" href="core-models.html#zenml.models.CuratedVisualizationResponse">CuratedVisualizationResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created curated visualization.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/curated_visualization_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_curated_visualization</span><span class="p">(</span>
    <span class="n">visualization</span><span class="p">:</span> <span class="n">CuratedVisualizationRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CuratedVisualizationResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a curated visualization.</span>

<span class="sd">    Args:</span>
<span class="sd">        visualization: The curated visualization to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created curated visualization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">resource_model</span> <span class="o">=</span> <span class="n">_get_resource_model</span><span class="p">(</span>
        <span class="n">visualization</span><span class="o">.</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">visualization</span><span class="o">.</span><span class="n">resource_id</span>
    <span class="p">)</span>
    <span class="n">artifact_visualization</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifact_visualization</span><span class="p">(</span>
        <span class="n">visualization</span><span class="o">.</span><span class="n">artifact_visualization_id</span>
    <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">resource_model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">artifact_visualization</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">store</span><span class="o">.</span><span class="n">create_curated_visualization</span><span class="p">(</span><span class="n">visualization</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.curated_visualization_endpoints.delete_curated_visualization" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_curated_visualization</span><span class="p">(</span><span class="n">visualization_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete a curated visualization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>visualization_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the curated visualization to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/curated_visualization_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{visualization_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_curated_visualization</span><span class="p">(</span>
    <span class="n">visualization_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a curated visualization.</span>

<span class="sd">    Args:</span>
<span class="sd">        visualization_id: The ID of the curated visualization to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">existing_visualization</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_curated_visualization</span><span class="p">(</span>
        <span class="n">visualization_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">existing_visualization</span><span class="o">.</span><span class="n">resource_type</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">existing_visualization</span><span class="o">.</span><span class="n">resource_id</span>

    <span class="n">resource_model</span> <span class="o">=</span> <span class="n">_get_resource_model</span><span class="p">(</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">resource_model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">store</span><span class="o">.</span><span class="n">delete_curated_visualization</span><span class="p">(</span><span class="n">visualization_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.curated_visualization_endpoints.get_curated_visualization" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_curated_visualization</span><span class="p">(</span><span class="n">visualization_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">CuratedVisualizationResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Retrieve a curated visualization by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>visualization_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the curated visualization to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to return the hydrated model.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CuratedVisualizationResponse (zenml.models.CuratedVisualizationResponse)" href="core-models.html#zenml.models.CuratedVisualizationResponse">CuratedVisualizationResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The curated visualization with the given ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/curated_visualization_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{visualization_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_curated_visualization</span><span class="p">(</span>
    <span class="n">visualization_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CuratedVisualizationResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a curated visualization by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        visualization_id: The ID of the curated visualization to retrieve.</span>
<span class="sd">        hydrate: Flag deciding whether to return the hydrated model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The curated visualization with the given ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">hydrated_visualization</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_curated_visualization</span><span class="p">(</span>
        <span class="n">visualization_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">hydrated_visualization</span><span class="o">.</span><span class="n">resource_type</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">hydrated_visualization</span><span class="o">.</span><span class="n">resource_id</span>

    <span class="n">resource_model</span> <span class="o">=</span> <span class="n">_get_resource_model</span><span class="p">(</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">resource_model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hydrated_visualization</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.curated_visualization_endpoints.update_curated_visualization" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_curated_visualization</span><span class="p">(</span><span class="n">visualization_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">visualization_update</span><span class="p">:</span> <span class="n">CuratedVisualizationUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">CuratedVisualizationResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update a curated visualization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>visualization_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the curated visualization to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visualization_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CuratedVisualizationUpdate (zenml.models.CuratedVisualizationUpdate)" href="core-models.html#zenml.models.CuratedVisualizationUpdate">CuratedVisualizationUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The update to apply to the curated visualization.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="CuratedVisualizationResponse (zenml.models.CuratedVisualizationResponse)" href="core-models.html#zenml.models.CuratedVisualizationResponse">CuratedVisualizationResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated curated visualization.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/curated_visualization_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{visualization_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_curated_visualization</span><span class="p">(</span>
    <span class="n">visualization_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">visualization_update</span><span class="p">:</span> <span class="n">CuratedVisualizationUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CuratedVisualizationResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update a curated visualization.</span>

<span class="sd">    Args:</span>
<span class="sd">        visualization_id: The ID of the curated visualization to update.</span>
<span class="sd">        visualization_update: The update to apply to the curated visualization.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated curated visualization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">existing_visualization</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_curated_visualization</span><span class="p">(</span>
        <span class="n">visualization_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">existing_visualization</span><span class="o">.</span><span class="n">resource_type</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">existing_visualization</span><span class="o">.</span><span class="n">resource_id</span>

    <span class="n">resource_model</span> <span class="o">=</span> <span class="n">_get_resource_model</span><span class="p">(</span><span class="n">resource_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">resource_model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">store</span><span class="o">.</span><span class="n">update_curated_visualization</span><span class="p">(</span>
        <span class="n">visualization_id</span><span class="p">,</span> <span class="n">visualization_update</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.deployment_endpoints" class="doc doc-heading">
            <code>deployment_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for deployments.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.deployment_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.deployment_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.deployment_endpoints.create_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_deployment</span><span class="p">(</span><span class="n">deployment</span><span class="p">:</span> <span class="n">DeploymentRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">DeploymentResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deployment</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DeploymentRequest (zenml.models.DeploymentRequest)" href="core-models.html#zenml.models.DeploymentRequest">DeploymentRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Deployment to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DeploymentResponse (zenml.models.DeploymentResponse)" href="core-models.html#zenml.models.DeploymentResponse">DeploymentResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_deployment</span><span class="p">(</span>
    <span class="n">deployment</span><span class="p">:</span> <span class="n">DeploymentRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DeploymentResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment: Deployment to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_deployment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.deployment_endpoints.delete_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_deployment</span><span class="p">(</span><span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the deployment to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{deployment_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_deployment</span><span class="p">(</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment_id: ID of the deployment to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_deployment</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_deployment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.deployment_endpoints.get_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_deployment</span><span class="p">(</span><span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">DeploymentResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific deployment using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the deployment to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DeploymentResponse (zenml.models.DeploymentResponse)" href="core-models.html#zenml.models.DeploymentResponse">DeploymentResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific deployment object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{deployment_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_deployment</span><span class="p">(</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DeploymentResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific deployment using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment_id: ID of the deployment to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific deployment object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_deployment</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.deployment_endpoints.list_deployments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_deployments</span><span class="p">(</span><span class="n">deployment_filter_model</span><span class="p">:</span> <span class="n">DeploymentFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">DeploymentFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">DeploymentResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of deployments.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deployment_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DeploymentFilter (zenml.models.DeploymentFilter)" href="core-models.html#zenml.models.DeploymentFilter">DeploymentFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="DeploymentFilter (zenml.models.DeploymentFilter)" href="core-models.html#zenml.models.DeploymentFilter">DeploymentFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.v2.base.page.Page)" href="core-models.html#zenml.models.v2.base.page.Page">Page</a>[<a class="autorefs autorefs-internal" title="DeploymentResponse (zenml.models.DeploymentResponse)" href="core-models.html#zenml.models.DeploymentResponse">DeploymentResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of deployment objects matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_deployments</span><span class="p">(</span>
    <span class="n">deployment_filter_model</span><span class="p">:</span> <span class="n">DeploymentFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">DeploymentFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">DeploymentResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of deployments.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of deployment objects matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">deployment_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">DEPLOYMENT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_deployments</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.deployment_endpoints.update_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_deployment</span><span class="p">(</span><span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">deployment_update</span><span class="p">:</span> <span class="n">DeploymentUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">DeploymentResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a specific deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the deployment to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DeploymentUpdate (zenml.models.DeploymentUpdate)" href="core-models.html#zenml.models.DeploymentUpdate">DeploymentUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Update model for the deployment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DeploymentResponse (zenml.models.DeploymentResponse)" href="core-models.html#zenml.models.DeploymentResponse">DeploymentResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{deployment_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_deployment</span><span class="p">(</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">deployment_update</span><span class="p">:</span> <span class="n">DeploymentUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DeploymentResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a specific deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment_id: ID of the deployment to update.</span>
<span class="sd">        deployment_update: Update model for the deployment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">deployment_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_deployment</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_deployment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.devices_endpoints" class="doc doc-heading">
            <code>devices_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for code repositories.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.devices_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.devices_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.devices_endpoints.delete_authorized_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_authorized_device</span><span class="p">(</span><span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific OAuth2 authorized device using its unique ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the OAuth2 authorized device to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current auth context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device with the given ID does not exist or does not
belong to the current user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/devices_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{device_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_authorized_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific OAuth2 authorized device using its unique ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        device_id: The ID of the OAuth2 authorized device to delete.</span>
<span class="sd">        auth_context: The current auth context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If the device with the given ID does not exist or does not</span>
<span class="sd">            belong to the current user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_authorized_device</span><span class="p">(</span><span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">user_id</span> <span class="ow">or</span> <span class="n">device</span><span class="o">.</span><span class="n">user_id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to get device with ID </span><span class="si">{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">: No device with &quot;</span>
            <span class="s2">&quot;this ID found.&quot;</span>
        <span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_authorized_device</span><span class="p">(</span><span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.devices_endpoints.get_authorization_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_authorization_device</span><span class="p">(</span><span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">user_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific OAuth2 authorized device using its unique ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the OAuth2 authorized device to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_code</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The user code of the OAuth2 authorized device to get. Needs
to be specified with devices that have not been verified yet.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current auth context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceResponse (zenml.models.OAuthDeviceResponse)" href="core-models.html#zenml.models.OAuthDeviceResponse">OAuthDeviceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific OAuth2 authorized device object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device with the given ID does not exist, does not
belong to the current user or could not be verified using the
given user code.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/devices_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{device_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_authorization_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">user_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific OAuth2 authorized device using its unique ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        device_id: The ID of the OAuth2 authorized device to get.</span>
<span class="sd">        user_code: The user code of the OAuth2 authorized device to get. Needs</span>
<span class="sd">            to be specified with devices that have not been verified yet.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: The current auth context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific OAuth2 authorized device object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If the device with the given ID does not exist, does not</span>
<span class="sd">            belong to the current user or could not be verified using the</span>
<span class="sd">            given user code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_authorized_device</span><span class="p">(</span>
        <span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">user_id</span><span class="p">:</span>
        <span class="c1"># A device that hasn&#39;t been verified and associated with a user yet</span>
        <span class="c1"># can only be retrieved if the user code is specified and valid.</span>
        <span class="k">if</span> <span class="n">user_code</span><span class="p">:</span>
            <span class="n">internal_device</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_internal_authorized_device</span><span class="p">(</span>
                <span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">internal_device</span><span class="o">.</span><span class="n">verify_user_code</span><span class="p">(</span><span class="n">user_code</span><span class="o">=</span><span class="n">user_code</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">device</span>
    <span class="k">elif</span> <span class="n">device</span><span class="o">.</span><span class="n">user_id</span> <span class="o">==</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">device</span>

    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unable to get device with ID </span><span class="si">{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">: No device with &quot;</span>
        <span class="s2">&quot;this ID found.&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.devices_endpoints.list_authorized_devices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_authorized_devices</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">OAuthDeviceFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">OAuthDeviceFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">OAuthDeviceResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a page of OAuth2 authorized devices belonging to the current user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceFilter (zenml.models.OAuthDeviceFilter)" href="core-models.html#zenml.models.OAuthDeviceFilter">OAuthDeviceFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="OAuthDeviceFilter (zenml.models.OAuthDeviceFilter)" href="core-models.html#zenml.models.OAuthDeviceFilter">OAuthDeviceFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current auth context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="OAuthDeviceResponse (zenml.models.OAuthDeviceResponse)" href="core-models.html#zenml.models.OAuthDeviceResponse">OAuthDeviceResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page of OAuth2 authorized device objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/devices_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_authorized_devices</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">OAuthDeviceFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">OAuthDeviceFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">OAuthDeviceResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a page of OAuth2 authorized devices belonging to the current user.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: The current auth context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page of OAuth2 authorized device objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filter_model</span><span class="o">.</span><span class="n">set_scope_user</span><span class="p">(</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_authorized_devices</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.devices_endpoints.update_authorized_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_authorized_device</span><span class="p">(</span><span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">update</span><span class="p">:</span> <span class="n">OAuthDeviceUpdate</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a specific OAuth2 authorized device using its unique ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the OAuth2 authorized device to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceUpdate (zenml.models.OAuthDeviceUpdate)" href="core-models.html#zenml.models.OAuthDeviceUpdate">OAuthDeviceUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model containing the attributes to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current auth context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceResponse (zenml.models.OAuthDeviceResponse)" href="core-models.html#zenml.models.OAuthDeviceResponse">OAuthDeviceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated OAuth2 authorized device object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device with the given ID does not exist or does not
belong to the current user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/devices_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{device_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_authorized_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">update</span><span class="p">:</span> <span class="n">OAuthDeviceUpdate</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a specific OAuth2 authorized device using its unique ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        device_id: The ID of the OAuth2 authorized device to update.</span>
<span class="sd">        update: The model containing the attributes to update.</span>
<span class="sd">        auth_context: The current auth context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated OAuth2 authorized device object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If the device with the given ID does not exist or does not</span>
<span class="sd">            belong to the current user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_authorized_device</span><span class="p">(</span><span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">device</span><span class="o">.</span><span class="n">user_id</span> <span class="ow">or</span> <span class="n">device</span><span class="o">.</span><span class="n">user_id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to get device with ID </span><span class="si">{</span><span class="n">device_id</span><span class="si">}</span><span class="s2">: No device with &quot;</span>
            <span class="s2">&quot;this ID found.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_authorized_device</span><span class="p">(</span>
        <span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="n">update</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.devices_endpoints.verify_authorized_device" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_authorized_device</span><span class="p">(</span><span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">OAuthDeviceVerificationRequest</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verifies a specific OAuth2 authorized device using its unique ID.</p>
<p>This endpoint implements the OAuth2 device authorization grant flow as
defined in https://tools.ietf.org/html/rfc8628. It is called to verify
the user code for a given device ID.</p>
<p>If the user code is valid, the device is marked as verified and associated
with the user that authorized the device. This association is required to
be able to issue access tokens or revoke the device later on.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>device_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the OAuth2 authorized device to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceVerificationRequest (zenml.models.OAuthDeviceVerificationRequest)" href="core-models.html#zenml.models.OAuthDeviceVerificationRequest">OAuthDeviceVerificationRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model containing the verification request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current auth context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="OAuthDeviceResponse (zenml.models.OAuthDeviceResponse)" href="core-models.html#zenml.models.OAuthDeviceResponse">OAuthDeviceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated OAuth2 authorized device object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the device verification request fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/devices_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{device_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">DEVICE_VERIFY</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_authorized_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">OAuthDeviceVerificationRequest</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OAuthDeviceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies a specific OAuth2 authorized device using its unique ID.</span>

<span class="sd">    This endpoint implements the OAuth2 device authorization grant flow as</span>
<span class="sd">    defined in https://tools.ietf.org/html/rfc8628. It is called to verify</span>
<span class="sd">    the user code for a given device ID.</span>

<span class="sd">    If the user code is valid, the device is marked as verified and associated</span>
<span class="sd">    with the user that authorized the device. This association is required to</span>
<span class="sd">    be able to issue access tokens or revoke the device later on.</span>

<span class="sd">    Args:</span>
<span class="sd">        device_id: The ID of the OAuth2 authorized device to update.</span>
<span class="sd">        request: The model containing the verification request.</span>
<span class="sd">        auth_context: The current auth context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated OAuth2 authorized device object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the device verification request fails.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="c1"># Check if a device is registered for the ID</span>
    <span class="n">device_model</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_internal_authorized_device</span><span class="p">(</span>
        <span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">with</span> <span class="n">track_handler</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">AnalyticsEvent</span><span class="o">.</span><span class="n">DEVICE_VERIFIED</span><span class="p">):</span>
        <span class="c1"># Check if the device is in a state that allows verification.</span>
        <span class="k">if</span> <span class="n">device_model</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">PENDING</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid request: device not pending verification.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Check if the device verification has expired.</span>
        <span class="k">if</span> <span class="n">device_model</span><span class="o">.</span><span class="n">expires</span> <span class="ow">and</span> <span class="n">device_model</span><span class="o">.</span><span class="n">expires</span> <span class="o">&lt;</span> <span class="n">utc_now</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid request: device verification expired.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Check if the device already has a user associated with it. If so, the</span>
        <span class="c1"># current user and the user associated with the device must be the same.</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">device_model</span><span class="o">.</span><span class="n">user_id</span>
            <span class="ow">and</span> <span class="n">device_model</span><span class="o">.</span><span class="n">user_id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid request: this device is associated with another user.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Check if the device code is valid.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">device_model</span><span class="o">.</span><span class="n">verify_user_code</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user_code</span><span class="p">):</span>
            <span class="c1"># If the device code is invalid, increment the failed auth attempts</span>
            <span class="c1"># counter and lock the device if the maximum number of failed auth</span>
            <span class="c1"># attempts has been reached.</span>
            <span class="n">failed_auth_attempts</span> <span class="o">=</span> <span class="n">device_model</span><span class="o">.</span><span class="n">failed_auth_attempts</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">update</span> <span class="o">=</span> <span class="n">OAuthDeviceInternalUpdate</span><span class="p">(</span>
                <span class="n">failed_auth_attempts</span><span class="o">=</span><span class="n">failed_auth_attempts</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">failed_auth_attempts</span> <span class="o">&gt;=</span> <span class="n">config</span><span class="o">.</span><span class="n">max_failed_device_auth_attempts</span><span class="p">:</span>
                <span class="n">update</span><span class="o">.</span><span class="n">locked</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">store</span><span class="o">.</span><span class="n">update_internal_authorized_device</span><span class="p">(</span>
                <span class="n">device_id</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">update</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">failed_auth_attempts</span> <span class="o">&gt;=</span> <span class="n">config</span><span class="o">.</span><span class="n">max_failed_device_auth_attempts</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid request: device locked due to too many failed &quot;</span>
                    <span class="s2">&quot;authentication attempts.&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid request: invalid user code.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># If the device code is valid, associate the device with the current user.</span>
        <span class="c1"># We don&#39;t reset the expiration date yet, because we want to make sure</span>
        <span class="c1"># that the client has received the access token before we do so, to avoid</span>
        <span class="c1"># brute force attacks on the device code.</span>
        <span class="n">update</span> <span class="o">=</span> <span class="n">OAuthDeviceInternalUpdate</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">OAuthDeviceStatus</span><span class="o">.</span><span class="n">VERIFIED</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">failed_auth_attempts</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">trusted_device</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">trusted_device</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">device_model</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">update_internal_authorized_device</span><span class="p">(</span>
            <span class="n">device_id</span><span class="o">=</span><span class="n">device_model</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">update</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">store</span><span class="o">.</span><span class="n">update_onboarding_state</span><span class="p">(</span>
        <span class="n">completed_steps</span><span class="o">=</span><span class="p">{</span><span class="n">OnboardingStep</span><span class="o">.</span><span class="n">DEVICE_VERIFIED</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">device_model</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.event_source_endpoints" class="doc doc-heading">
            <code>event_source_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for event sources.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.event_source_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.event_source_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.event_source_endpoints.create_event_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_event_source</span><span class="p">(</span><span class="n">event_source</span><span class="p">:</span> <span class="n">EventSourceRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">EventSourceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates an event source.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_source</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventSourceRequest (zenml.EventSourceRequest)" href="core-client.html#zenml.client.EventSourceRequest">EventSourceRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EventSource to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventSourceResponse (zenml.EventSourceResponse)" href="core-client.html#zenml.client.EventSourceResponse">EventSourceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created event source.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the plugin for an event source is not a valid event
source plugin.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/event_source_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@event_source_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_event_source</span><span class="p">(</span>
    <span class="n">event_source</span><span class="p">:</span> <span class="n">EventSourceRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EventSourceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an event source.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_source: EventSource to register.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created event source.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the plugin for an event source is not a valid event</span>
<span class="sd">            source plugin.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an event source</span>
    <span class="c1"># implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event source &quot;</span>
            <span class="s2">&quot;handler implementation.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">event_source</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">event_source_handler</span><span class="o">.</span><span class="n">create_event_source</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.event_source_endpoints.delete_event_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_event_source</span><span class="p">(</span><span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a event_source.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_source_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the event_source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>force</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to force delete the event source.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the plugin for an event source is not a valid event
source plugin.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/event_source_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@event_source_router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{event_source_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_event_source</span><span class="p">(</span>
    <span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a event_source.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_source_id: Name of the event_source.</span>
<span class="sd">        force: Flag deciding whether to force delete the event source.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the plugin for an event source is not a valid event</span>
<span class="sd">            source plugin.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_source</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
        <span class="n">event_source_id</span><span class="o">=</span><span class="n">event_source_id</span>
    <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">event_source</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">DELETE</span><span class="p">)</span>

    <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an event source</span>
    <span class="c1"># implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event source &quot;</span>
            <span class="s2">&quot;handler implementation.&quot;</span>
        <span class="p">)</span>

    <span class="n">event_source_handler</span><span class="o">.</span><span class="n">delete_event_source</span><span class="p">(</span>
        <span class="n">event_source</span><span class="o">=</span><span class="n">event_source</span><span class="p">,</span>
        <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.event_source_endpoints.get_event_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_event_source</span><span class="p">(</span><span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">EventSourceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested event_source.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_source_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the event_source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventSourceResponse (zenml.EventSourceResponse)" href="core-client.html#zenml.client.EventSourceResponse">EventSourceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested event_source.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the plugin for an event source is not a valid event
source plugin.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/event_source_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@event_source_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{event_source_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_event_source</span><span class="p">(</span>
    <span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EventSourceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested event_source.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_source_id: ID of the event_source.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested event_source.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the plugin for an event source is not a valid event</span>
<span class="sd">            source plugin.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_source</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
        <span class="n">event_source_id</span><span class="o">=</span><span class="n">event_source_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">event_source</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an event source</span>
    <span class="c1"># implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event source &quot;</span>
            <span class="s2">&quot;handler implementation.&quot;</span>
        <span class="p">)</span>

    <span class="n">event_source</span> <span class="o">=</span> <span class="n">event_source_handler</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
        <span class="n">event_source</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">event_source</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.event_source_endpoints.list_event_sources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_event_sources</span><span class="p">(</span><span class="n">event_source_filter_model</span><span class="p">:</span> <span class="n">EventSourceFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">EventSourceFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">EventSourceResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns all event_sources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_source_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventSourceFilter (zenml.EventSourceFilter)" href="core-client.html#zenml.client.EventSourceFilter">EventSourceFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="EventSourceFilter (zenml.EventSourceFilter)" href="core-client.html#zenml.client.EventSourceFilter">EventSourceFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.Page)" href="core-client.html#zenml.client.Page">Page</a>[<a class="autorefs autorefs-internal" title="EventSourceResponse (zenml.EventSourceResponse)" href="core-client.html#zenml.client.EventSourceResponse">EventSourceResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All event_sources.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/event_source_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@event_source_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_event_sources</span><span class="p">(</span>
    <span class="n">event_source_filter_model</span><span class="p">:</span> <span class="n">EventSourceFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">EventSourceFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">EventSourceResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all event_sources.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_source_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All event_sources.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_event_sources_fn</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="p">:</span> <span class="n">EventSourceFilter</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">EventSourceResponse</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List event sources through their associated plugins.</span>

<span class="sd">        Args:</span>
<span class="sd">            filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">                filtering.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All event sources.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the plugin for an event source is not a valid event</span>
<span class="sd">                source plugin.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event_sources</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_event_sources</span><span class="p">(</span>
            <span class="n">event_source_filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
        <span class="p">)</span>

        <span class="c1"># Process the event sources through their associated plugins</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">event_source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">event_sources</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
                <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
                <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Validate that the flavor and plugin_type correspond to an event</span>
            <span class="c1"># source implementation</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event &quot;</span>
                    <span class="s2">&quot;source handler implementation.&quot;</span>
                <span class="p">)</span>

            <span class="n">event_sources</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">event_source_handler</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
                <span class="n">event_source</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">event_sources</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">event_source_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">list_event_sources_fn</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.event_source_endpoints.update_event_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_event_source</span><span class="p">(</span><span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">event_source_update</span><span class="p">:</span> <span class="n">EventSourceUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">EventSourceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates an event_source.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_source_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the event_source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>event_source_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventSourceUpdate (zenml.EventSourceUpdate)" href="core-client.html#zenml.client.EventSourceUpdate">EventSourceUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EventSource to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventSourceResponse (zenml.EventSourceResponse)" href="core-client.html#zenml.client.EventSourceResponse">EventSourceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated event_source.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the plugin for an event source is not a valid event
source plugin.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/event_source_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@event_source_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{event_source_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_event_source</span><span class="p">(</span>
    <span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">event_source_update</span><span class="p">:</span> <span class="n">EventSourceUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EventSourceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates an event_source.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_source_id: Name of the event_source.</span>
<span class="sd">        event_source_update: EventSource to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated event_source.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the plugin for an event source is not a valid event</span>
<span class="sd">            source plugin.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_source</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
        <span class="n">event_source_id</span><span class="o">=</span><span class="n">event_source_id</span>
    <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">event_source</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Validate that the flavor and plugin_type correspond to an event source</span>
    <span class="c1"># implementation</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event source &quot;</span>
            <span class="s2">&quot;handler implementation.&quot;</span>
        <span class="p">)</span>

    <span class="n">updated_event_source</span> <span class="o">=</span> <span class="n">event_source_handler</span><span class="o">.</span><span class="n">update_event_source</span><span class="p">(</span>
        <span class="n">event_source</span><span class="o">=</span><span class="n">event_source</span><span class="p">,</span>
        <span class="n">event_source_update</span><span class="o">=</span><span class="n">event_source_update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_event_source</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.flavors_endpoints" class="doc doc-heading">
            <code>flavors_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for flavors.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.flavors_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.flavors_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.flavors_endpoints.create_flavor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_flavor</span><span class="p">(</span><span class="n">flavor</span><span class="p">:</span> <span class="n">FlavorRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">FlavorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a stack component flavor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>flavor</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="FlavorRequest (zenml.models.FlavorRequest)" href="core-models.html#zenml.models.FlavorRequest">FlavorRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack component flavor to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FlavorResponse (zenml.models.FlavorResponse)" href="core-models.html#zenml.models.FlavorResponse">FlavorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created stack component flavor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/flavors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_flavor</span><span class="p">(</span>
    <span class="n">flavor</span><span class="p">:</span> <span class="n">FlavorRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FlavorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a stack component flavor.</span>

<span class="sd">    Args:</span>
<span class="sd">        flavor: Stack component flavor to register.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created stack component flavor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_flavor</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.flavors_endpoints.delete_flavor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_flavor</span><span class="p">(</span><span class="n">flavor_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a flavor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>flavor_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the flavor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/flavors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{flavor_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_flavor</span><span class="p">(</span>
    <span class="n">flavor_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a flavor.</span>

<span class="sd">    Args:</span>
<span class="sd">        flavor_id: ID of the flavor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">flavor_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_flavor</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_flavor</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.flavors_endpoints.get_flavor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_flavor</span><span class="p">(</span><span class="n">flavor_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">FlavorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested flavor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>flavor_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the flavor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FlavorResponse (zenml.models.FlavorResponse)" href="core-models.html#zenml.models.FlavorResponse">FlavorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested stack.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/flavors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{flavor_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_flavor</span><span class="p">(</span>
    <span class="n">flavor_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FlavorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested flavor.</span>

<span class="sd">    Args:</span>
<span class="sd">        flavor_id: ID of the flavor.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested stack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">flavor_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_flavor</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.flavors_endpoints.list_flavors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_flavors</span><span class="p">(</span><span class="n">flavor_filter_model</span><span class="p">:</span> <span class="n">FlavorFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">FlavorFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">FlavorResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns all flavors.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>flavor_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="FlavorFilter (zenml.models.FlavorFilter)" href="core-models.html#zenml.models.FlavorFilter">FlavorFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
                 filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="FlavorFilter (zenml.models.FlavorFilter)" href="core-models.html#zenml.models.FlavorFilter">FlavorFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="FlavorResponse (zenml.models.FlavorResponse)" href="core-models.html#zenml.models.FlavorResponse">FlavorResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All flavors.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/flavors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_flavors</span><span class="p">(</span>
    <span class="n">flavor_filter_model</span><span class="p">:</span> <span class="n">FlavorFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">FlavorFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">FlavorResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all flavors.</span>

<span class="sd">    Args:</span>
<span class="sd">        flavor_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">                             filtering</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All flavors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">flavor_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">FLAVOR</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_flavors</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.flavors_endpoints.sync_flavors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sync_flavors</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Purge all in-built and integration flavors from the DB and sync.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None if successful. Raises an exception otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/flavors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
    <span class="s2">&quot;/sync&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sync_flavors</span><span class="p">(</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Purge all in-built and integration flavors from the DB and sync.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None if successful. Raises an exception otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permission</span><span class="p">(</span><span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">FLAVOR</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">_sync_flavors</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.flavors_endpoints.update_flavor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_flavor</span><span class="p">(</span><span class="n">flavor_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">flavor_update</span><span class="p">:</span> <span class="n">FlavorUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">FlavorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a flavor.</p>
<h6 id="zenml.zen_server.routers.flavors_endpoints.update_flavor--noqa-dar401">noqa: DAR401</h6>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>flavor_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the flavor to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>flavor_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="FlavorUpdate (zenml.models.FlavorUpdate)" href="core-models.html#zenml.models.FlavorUpdate">FlavorUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flavor update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FlavorResponse (zenml.models.FlavorResponse)" href="core-models.html#zenml.models.FlavorResponse">FlavorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated flavor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/flavors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{flavor_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_flavor</span><span class="p">(</span>
    <span class="n">flavor_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">flavor_update</span><span class="p">:</span> <span class="n">FlavorUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FlavorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a flavor.</span>

<span class="sd">    # noqa: DAR401</span>

<span class="sd">    Args:</span>
<span class="sd">        flavor_id: ID of the flavor to update.</span>
<span class="sd">        flavor_update: Flavor update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated flavor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">flavor_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">flavor_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_flavor</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_flavor</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.logs_endpoints" class="doc doc-heading">
            <code>logs_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for logs.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.logs_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.logs_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.logs_endpoints.get_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_logs</span><span class="p">(</span><span class="n">logs_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">LogsResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested logs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>logs_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the logs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="LogsResponse (zenml.models.v2.core.logs.LogsResponse)" href="core-models.html#zenml.models.v2.core.logs.LogsResponse">LogsResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested logs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/logs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{logs_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_logs</span><span class="p">(</span>
    <span class="n">logs_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LogsResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested logs.</span>

<span class="sd">    Args:</span>
<span class="sd">        logs_id: ID of the logs.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested logs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">logs_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_logs</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.model_versions_endpoints" class="doc doc-heading">
            <code>model_versions_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for models.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.model_versions_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.model_versions_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.create_model_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_model_version</span><span class="p">(</span><span class="n">model_version</span><span class="p">:</span> <span class="n">ModelVersionRequest</span><span class="p">,</span> <span class="n">model_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelVersionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a model version.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionRequest (zenml.models.ModelVersionRequest)" href="core-models.html#zenml.models.ModelVersionRequest">ModelVersionRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Model version to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional ID of the model.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionResponse (zenml.models.ModelVersionResponse)" href="core-models.html#zenml.models.ModelVersionResponse">ModelVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created model version.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">MODELS</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{model_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">MODEL_VERSIONS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model_versions&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_model_version</span><span class="p">(</span>
    <span class="n">model_version</span><span class="p">:</span> <span class="n">ModelVersionRequest</span><span class="p">,</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelVersionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a model version.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version: Model version to create.</span>
<span class="sd">        model_id: Optional ID of the model.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created model version.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">model_version</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">if</span> <span class="n">model_id</span><span class="p">:</span>
        <span class="n">model_version</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">model_version</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_model_version</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.create_model_version_artifact_link" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_model_version_artifact_link</span><span class="p">(</span><span class="n">model_version_artifact_link</span><span class="p">:</span> <span class="n">ModelVersionArtifactRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelVersionArtifactResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a new model version to artifact link.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_artifact_link</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionArtifactRequest (zenml.models.ModelVersionArtifactRequest)" href="core-models.html#zenml.models.ModelVersionArtifactRequest">ModelVersionArtifactRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model version to artifact link to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionArtifactResponse (zenml.models.ModelVersionArtifactResponse)" href="core-models.html#zenml.models.ModelVersionArtifactResponse">ModelVersionArtifactResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created model version to artifact link.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_version_artifacts_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_model_version_artifact_link</span><span class="p">(</span>
    <span class="n">model_version_artifact_link</span><span class="p">:</span> <span class="n">ModelVersionArtifactRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelVersionArtifactResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new model version to artifact link.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_artifact_link: The model version to artifact link to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created model version to artifact link.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span>
        <span class="n">model_version_artifact_link</span><span class="o">.</span><span class="n">model_version</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">model_version_artifact_link</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_model_version_artifact_link</span><span class="p">,</span>
        <span class="c1"># Check for UPDATE permissions on the model version instead of the</span>
        <span class="c1"># model version artifact link</span>
        <span class="n">surrogate_models</span><span class="o">=</span><span class="p">[</span><span class="n">model_version</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.create_model_version_pipeline_run_link" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_model_version_pipeline_run_link</span><span class="p">(</span><span class="n">model_version_pipeline_run_link</span><span class="p">:</span> <span class="n">ModelVersionPipelineRunRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelVersionPipelineRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a new model version to pipeline run link.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_pipeline_run_link</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionPipelineRunRequest (zenml.models.ModelVersionPipelineRunRequest)" href="core-models.html#zenml.models.ModelVersionPipelineRunRequest">ModelVersionPipelineRunRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model version to pipeline run link to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionPipelineRunResponse (zenml.models.ModelVersionPipelineRunResponse)" href="core-models.html#zenml.models.ModelVersionPipelineRunResponse">ModelVersionPipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>If Model Version to Pipeline Run Link already exists - returns the existing link.</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionPipelineRunResponse (zenml.models.ModelVersionPipelineRunResponse)" href="core-models.html#zenml.models.ModelVersionPipelineRunResponse">ModelVersionPipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>Otherwise, returns the newly created model version to pipeline run link.</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_version_pipeline_runs_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_model_version_pipeline_run_link</span><span class="p">(</span>
    <span class="n">model_version_pipeline_run_link</span><span class="p">:</span> <span class="n">ModelVersionPipelineRunRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelVersionPipelineRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new model version to pipeline run link.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_pipeline_run_link: The model version to pipeline run link to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        - If Model Version to Pipeline Run Link already exists - returns the existing link.</span>
<span class="sd">        - Otherwise, returns the newly created model version to pipeline run link.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span>
        <span class="n">model_version_pipeline_run_link</span><span class="o">.</span><span class="n">model_version</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">model_version_pipeline_run_link</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_model_version_pipeline_run_link</span><span class="p">,</span>
        <span class="c1"># Check for UPDATE permissions on the model version instead of the</span>
        <span class="c1"># model version pipeline run link</span>
        <span class="n">surrogate_models</span><span class="o">=</span><span class="p">[</span><span class="n">model_version</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.delete_all_model_version_artifact_links" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_all_model_version_artifact_links</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">only_links</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes all model version to artifact links.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the model version containing links.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>only_links</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to only delete the link to the artifact.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_version_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">ARTIFACTS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_all_model_version_artifact_links</span><span class="p">(</span>
    <span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">only_links</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes all model version to artifact links.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: ID of the model version containing links.</span>
<span class="sd">        only_links: Whether to only delete the link to the artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model_version</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_all_model_version_artifact_links</span><span class="p">(</span>
        <span class="n">model_version_id</span><span class="p">,</span> <span class="n">only_links</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.delete_model_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete a model by name or ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name or ID of the model version to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_version_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_model_version</span><span class="p">(</span>
    <span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a model by name or ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: The name or ID of the model version to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">model_version_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_model_version</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.delete_model_version_artifact_link" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_model_version_artifact_link</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">model_version_artifact_link_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a model version to artifact link.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the model version containing the link.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_version_artifact_link_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name or ID of the model
version to artifact link to be deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_version_id}</span><span class="s2">&quot;</span>
    <span class="o">+</span> <span class="n">ARTIFACTS</span>
    <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{model_version_artifact_link_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_model_version_artifact_link</span><span class="p">(</span>
    <span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">model_version_artifact_link_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a model version to artifact link.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: ID of the model version containing the link.</span>
<span class="sd">        model_version_artifact_link_name_or_id: name or ID of the model</span>
<span class="sd">            version to artifact link to be deleted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model_version</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_model_version_artifact_link</span><span class="p">(</span>
        <span class="n">model_version_id</span><span class="p">,</span>
        <span class="n">model_version_artifact_link_name_or_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.delete_model_version_pipeline_run_link" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_model_version_pipeline_run_link</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">model_version_pipeline_run_link_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a model version link.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name or ID of the model version containing the link.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_version_pipeline_run_link_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name or ID of the model
version link to be deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_version_id}</span><span class="s2">&quot;</span>
    <span class="o">+</span> <span class="n">RUNS</span>
    <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{model_version_pipeline_run_link_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_model_version_pipeline_run_link</span><span class="p">(</span>
    <span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">model_version_pipeline_run_link_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a model version link.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: name or ID of the model version containing the link.</span>
<span class="sd">        model_version_pipeline_run_link_name_or_id: name or ID of the model</span>
<span class="sd">            version link to be deleted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model_version</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_model_version_pipeline_run_link</span><span class="p">(</span>
        <span class="n">model_version_id</span><span class="o">=</span><span class="n">model_version_id</span><span class="p">,</span>
        <span class="n">model_version_pipeline_run_link_name_or_id</span><span class="o">=</span><span class="n">model_version_pipeline_run_link_name_or_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.get_model_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelVersionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a model version by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the model version to be retrieved.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionResponse (zenml.models.ModelVersionResponse)" href="core-models.html#zenml.models.ModelVersionResponse">ModelVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model version with the given name or ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_version_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_model_version</span><span class="p">(</span>
    <span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelVersionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a model version by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: id of the model version to be retrieved.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model version with the given name or ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span>
        <span class="n">model_version_id</span><span class="o">=</span><span class="n">model_version_id</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model_version</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">model_version</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.list_model_version_artifact_links" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_model_version_artifact_links</span><span class="p">(</span><span class="n">model_version_artifact_link_filter_model</span><span class="p">:</span> <span class="n">ModelVersionArtifactFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelVersionArtifactFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelVersionArtifactResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get model version to artifact links according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_artifact_link_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionArtifactFilter (zenml.models.ModelVersionArtifactFilter)" href="core-models.html#zenml.models.ModelVersionArtifactFilter">ModelVersionArtifactFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for
pagination, sorting, filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ModelVersionArtifactFilter (zenml.models.ModelVersionArtifactFilter)" href="core-models.html#zenml.models.ModelVersionArtifactFilter">ModelVersionArtifactFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.v2.base.page.Page)" href="core-models.html#zenml.models.v2.base.page.Page">Page</a>[<a class="autorefs autorefs-internal" title="ModelVersionArtifactResponse (zenml.models.ModelVersionArtifactResponse)" href="core-models.html#zenml.models.ModelVersionArtifactResponse">ModelVersionArtifactResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model version to artifact links according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_version_artifacts_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_model_version_artifact_links</span><span class="p">(</span>
    <span class="n">model_version_artifact_link_filter_model</span><span class="p">:</span> <span class="n">ModelVersionArtifactFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelVersionArtifactFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelVersionArtifactResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get model version to artifact links according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_artifact_link_filter_model: Filter model used for</span>
<span class="sd">            pagination, sorting, filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model version to artifact links according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_model_version_artifact_links</span><span class="p">(</span>
        <span class="n">model_version_artifact_link_filter_model</span><span class="o">=</span><span class="n">model_version_artifact_link_filter_model</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.list_model_version_pipeline_run_links" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_model_version_pipeline_run_links</span><span class="p">(</span><span class="n">model_version_pipeline_run_link_filter_model</span><span class="p">:</span> <span class="n">ModelVersionPipelineRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelVersionPipelineRunFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelVersionPipelineRunResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get model version to pipeline run links according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_pipeline_run_link_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionPipelineRunFilter (zenml.models.ModelVersionPipelineRunFilter)" href="core-models.html#zenml.models.ModelVersionPipelineRunFilter">ModelVersionPipelineRunFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for
pagination, sorting, and filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ModelVersionPipelineRunFilter (zenml.models.ModelVersionPipelineRunFilter)" href="core-models.html#zenml.models.ModelVersionPipelineRunFilter">ModelVersionPipelineRunFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.v2.base.page.Page)" href="core-models.html#zenml.models.v2.base.page.Page">Page</a>[<a class="autorefs autorefs-internal" title="ModelVersionPipelineRunResponse (zenml.models.ModelVersionPipelineRunResponse)" href="core-models.html#zenml.models.ModelVersionPipelineRunResponse">ModelVersionPipelineRunResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model version to pipeline run links according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_version_pipeline_runs_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_model_version_pipeline_run_links</span><span class="p">(</span>
    <span class="n">model_version_pipeline_run_link_filter_model</span><span class="p">:</span> <span class="n">ModelVersionPipelineRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelVersionPipelineRunFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelVersionPipelineRunResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get model version to pipeline run links according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_pipeline_run_link_filter_model: Filter model used for</span>
<span class="sd">            pagination, sorting, and filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model version to pipeline run links according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_model_version_pipeline_run_links</span><span class="p">(</span>
        <span class="n">model_version_pipeline_run_link_filter_model</span><span class="o">=</span><span class="n">model_version_pipeline_run_link_filter_model</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.list_model_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_model_versions</span><span class="p">(</span><span class="n">model_version_filter_model</span><span class="p">:</span> <span class="n">ModelVersionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelVersionFilter</span><span class="p">)),</span> <span class="n">model_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelVersionResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get model versions according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionFilter (zenml.models.ModelVersionFilter)" href="core-models.html#zenml.models.ModelVersionFilter">ModelVersionFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ModelVersionFilter (zenml.models.ModelVersionFilter)" href="core-models.html#zenml.models.ModelVersionFilter">ModelVersionFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the model.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.v2.base.page.Page)" href="core-models.html#zenml.models.v2.base.page.Page">Page</a>[<a class="autorefs autorefs-internal" title="ModelVersionResponse (zenml.models.ModelVersionResponse)" href="core-models.html#zenml.models.ModelVersionResponse">ModelVersionResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model versions according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">MODEL_VERSIONS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_model_versions</span><span class="p">(</span>
    <span class="n">model_version_filter_model</span><span class="p">:</span> <span class="n">ModelVersionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelVersionFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">model_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelVersionResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get model versions according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        model_name_or_id: Optional name or ID of the model.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model versions according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># A project scoped request must always be scoped to a specific</span>
    <span class="c1"># project. This is required for the RBAC check to work.</span>
    <span class="n">set_filter_project_scope</span><span class="p">(</span><span class="n">model_version_filter_model</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_version_filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="n">UUID</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">model_name_or_id</span><span class="p">:</span>
        <span class="n">model_version_filter_model</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model_name_or_id</span>

    <span class="n">allowed_model_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span><span class="p">,</span>
        <span class="n">project_id</span><span class="o">=</span><span class="n">model_version_filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">model_version_filter_model</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">model_id</span><span class="o">=</span><span class="n">allowed_model_ids</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">model_versions</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_model_versions</span><span class="p">(</span>
        <span class="n">model_version_filter_model</span><span class="o">=</span><span class="n">model_version_filter_model</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_page</span><span class="p">(</span><span class="n">model_versions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.model_versions_endpoints.update_model_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">model_version_update_model</span><span class="p">:</span> <span class="n">ModelVersionUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelVersionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get all model versions by filter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_version_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of model version to be updated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_version_update_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionUpdate (zenml.models.ModelVersionUpdate)" href="core-models.html#zenml.models.ModelVersionUpdate">ModelVersionUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model version to be updated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelVersionResponse (zenml.models.ModelVersionResponse)" href="core-models.html#zenml.models.ModelVersionResponse">ModelVersionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An updated model version.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/model_versions_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_version_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_model_version</span><span class="p">(</span>
    <span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">model_version_update_model</span><span class="p">:</span> <span class="n">ModelVersionUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelVersionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all model versions by filter.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: The ID of model version to be updated.</span>
<span class="sd">        model_version_update_model: The model version to be updated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An updated model version.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">model_version_update_model</span><span class="o">.</span><span class="n">stage</span><span class="p">:</span>
        <span class="c1"># Make sure the user has permissions to promote the model</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model_version</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">PROMOTE</span><span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model_version</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="n">updated_model_version</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_model_version</span><span class="p">(</span>
        <span class="n">model_version_id</span><span class="o">=</span><span class="n">model_version_id</span><span class="p">,</span>
        <span class="n">model_version_update_model</span><span class="o">=</span><span class="n">model_version_update_model</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_model_version</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.models_endpoints" class="doc doc-heading">
            <code>models_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for models.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.models_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.models_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.models_endpoints.create_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_model</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">ModelRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelRequest (zenml.models.ModelRequest)" href="core-models.html#zenml.models.ModelRequest">ModelRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Model to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelResponse (zenml.models.ModelResponse)" href="core-models.html#zenml.models.ModelResponse">ModelResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/models_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">MODELS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;models&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">ModelRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: Model to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_model</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.models_endpoints.delete_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_model</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete a model by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the model to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/models_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_model</span><span class="p">(</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a model by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_id: The ID of the model to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">model_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_model</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">feature_gate_enabled</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span> <span class="ow">in</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">reportable_resources</span><span class="p">:</span>
            <span class="n">report_decrement</span><span class="p">(</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.models_endpoints.get_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_model</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a model by name or ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the model to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelResponse (zenml.models.ModelResponse)" href="core-models.html#zenml.models.ModelResponse">ModelResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model with the given name or ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/models_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_model</span><span class="p">(</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a model by name or ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_id: The ID of the model to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model with the given name or ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">model_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.models_endpoints.list_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_models</span><span class="p">(</span><span class="n">model_filter_model</span><span class="p">:</span> <span class="n">ModelFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get models according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelFilter (zenml.models.ModelFilter)" href="core-models.html#zenml.models.ModelFilter">ModelFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ModelFilter (zenml.models.ModelFilter)" href="core-models.html#zenml.models.ModelFilter">ModelFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ModelResponse (zenml.models.ModelResponse)" href="core-models.html#zenml.models.ModelResponse">ModelResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The models according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/models_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_models</span><span class="p">(</span>
    <span class="n">model_filter_model</span><span class="p">:</span> <span class="n">ModelFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ModelFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ModelResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get models according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The models according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">model_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">MODEL</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_models</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.models_endpoints.update_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_model</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">model_update</span><span class="p">:</span> <span class="n">ModelUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ModelResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the stack.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelUpdate (zenml.models.ModelUpdate)" href="core-models.html#zenml.models.ModelUpdate">ModelUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ModelResponse (zenml.models.ModelResponse)" href="core-models.html#zenml.models.ModelResponse">ModelResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/models_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{model_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_model</span><span class="p">(</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">model_update</span><span class="p">:</span> <span class="n">ModelUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a model.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_id: Name of the stack.</span>
<span class="sd">        model_update: Stack to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">model_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">model_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_model</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.pipeline_builds_endpoints" class="doc doc-heading">
            <code>pipeline_builds_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for builds.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.pipeline_builds_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.pipeline_builds_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_builds_endpoints.create_build" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_build</span><span class="p">(</span><span class="n">build</span><span class="p">:</span> <span class="n">PipelineBuildRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineBuildResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a build, optionally in a specific project.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>build</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineBuildRequest (zenml.models.PipelineBuildRequest)" href="core-models.html#zenml.models.PipelineBuildRequest">PipelineBuildRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Build to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineBuildResponse (zenml.models.PipelineBuildResponse)" href="core-models.html#zenml.models.PipelineBuildResponse">PipelineBuildResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created build.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_builds_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINE_BUILDS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;builds&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_build</span><span class="p">(</span>
    <span class="n">build</span><span class="p">:</span> <span class="n">PipelineBuildRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineBuildResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a build, optionally in a specific project.</span>

<span class="sd">    Args:</span>
<span class="sd">        build: Build to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created build.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">build</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">build</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_build</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_builds_endpoints.delete_build" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_build</span><span class="p">(</span><span class="n">build_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific build.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>build_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the build to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_builds_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{build_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_build</span><span class="p">(</span>
    <span class="n">build_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific build.</span>

<span class="sd">    Args:</span>
<span class="sd">        build_id: ID of the build to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">build_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_build</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_build</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_builds_endpoints.get_build" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_build</span><span class="p">(</span><span class="n">build_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineBuildResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific build using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>build_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the build to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineBuildResponse (zenml.models.PipelineBuildResponse)" href="core-models.html#zenml.models.PipelineBuildResponse">PipelineBuildResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific build object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_builds_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{build_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_build</span><span class="p">(</span>
    <span class="n">build_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineBuildResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific build using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        build_id: ID of the build to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific build object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">build_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_build</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_builds_endpoints.list_builds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_builds</span><span class="p">(</span><span class="n">build_filter_model</span><span class="p">:</span> <span class="n">PipelineBuildFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineBuildFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineBuildResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of builds.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>build_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineBuildFilter (zenml.models.PipelineBuildFilter)" href="core-models.html#zenml.models.PipelineBuildFilter">PipelineBuildFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="PipelineBuildFilter (zenml.models.PipelineBuildFilter)" href="core-models.html#zenml.models.PipelineBuildFilter">PipelineBuildFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="PipelineBuildResponse (zenml.models.PipelineBuildResponse)" href="core-models.html#zenml.models.PipelineBuildResponse">PipelineBuildResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of build objects matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_builds_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINE_BUILDS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;builds&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_builds</span><span class="p">(</span>
    <span class="n">build_filter_model</span><span class="p">:</span> <span class="n">PipelineBuildFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineBuildFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineBuildResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of builds.</span>

<span class="sd">    Args:</span>
<span class="sd">        build_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of build objects matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">build_filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">build_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_BUILD</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_builds</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.pipeline_deployments_endpoints" class="doc doc-heading">
            <code>pipeline_deployments_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for deployments.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.pipeline_deployments_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.pipeline_deployments_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_deployments_endpoints.create_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_deployment</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">deployment</span><span class="p">:</span> <span class="n">PipelineSnapshotRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotRequest (zenml.models.PipelineSnapshotRequest)" href="core-models.html#zenml.models.PipelineSnapshotRequest">PipelineSnapshotRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Deployment to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_deployments_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINE_DEPLOYMENTS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;deployments&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_deployment</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">deployment</span><span class="p">:</span> <span class="n">PipelineSnapshotRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        deployment: Deployment to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">deployment</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="n">deployment_response</span> <span class="o">=</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">deployment</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_snapshot</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">_should_remove_step_config_overrides</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;step_configurations&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;__all__&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;step_config_overrides&quot;</span><span class="p">}}</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">deployment_response</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_deployments_endpoints.delete_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_deployment</span><span class="p">(</span><span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific deployment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the deployment to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_deployments_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{deployment_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_deployment</span><span class="p">(</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific deployment.</span>

<span class="sd">    Args:</span>
<span class="sd">        deployment_id: ID of the deployment to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_snapshot</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_snapshot</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_deployments_endpoints.get_deployment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_deployment</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">step_configuration_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific deployment using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the deployment to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>step_configuration_filter</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of step configurations to include in
the response. If not given, all step configurations will be
included.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Query">Query</span>(None)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific deployment object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_deployments_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{deployment_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_deployment</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">deployment_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">step_configuration_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific deployment using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        deployment_id: ID of the deployment to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        step_configuration_filter: List of step configurations to include in</span>
<span class="sd">            the response. If not given, all step configurations will be</span>
<span class="sd">            included.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific deployment object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deployment</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">deployment_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_snapshot</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
        <span class="n">step_configuration_filter</span><span class="o">=</span><span class="n">step_configuration_filter</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">_should_remove_step_config_overrides</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;step_configurations&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;__all__&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;step_config_overrides&quot;</span><span class="p">}}</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">deployment</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_deployments_endpoints.list_deployments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_deployments</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">deployment_filter_model</span><span class="p">:</span> <span class="n">PipelineSnapshotFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineSnapshotFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of deployments.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotFilter (zenml.models.PipelineSnapshotFilter)" href="core-models.html#zenml.models.PipelineSnapshotFilter">PipelineSnapshotFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="PipelineSnapshotFilter (zenml.models.PipelineSnapshotFilter)" href="core-models.html#zenml.models.PipelineSnapshotFilter">PipelineSnapshotFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of deployment objects matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_deployments_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINE_DEPLOYMENTS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;deployments&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_deployments</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">deployment_filter_model</span><span class="p">:</span> <span class="n">PipelineSnapshotFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineSnapshotFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of deployments.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        deployment_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of deployment objects matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">deployment_filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="n">page</span> <span class="o">=</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">deployment_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_snapshots</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">_should_remove_step_config_overrides</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;__all__&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;step_configurations&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;__all__&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;step_config_overrides&quot;</span><span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.pipeline_snapshot_endpoints" class="doc doc-heading">
            <code>pipeline_snapshot_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for pipeline snapshots.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.pipeline_snapshot_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.pipeline_snapshot_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_snapshot_endpoints.create_pipeline_snapshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_pipeline_snapshot</span><span class="p">(</span><span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineSnapshotResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a snapshot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotRequest (zenml.models.PipelineSnapshotRequest)" href="core-models.html#zenml.models.PipelineSnapshotRequest">PipelineSnapshotRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Snapshot to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotResponse (zenml.models.PipelineSnapshotResponse)" href="core-models.html#zenml.models.PipelineSnapshotResponse">PipelineSnapshotResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created snapshot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_snapshot_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_pipeline_snapshot</span><span class="p">(</span>
    <span class="n">snapshot</span><span class="p">:</span> <span class="n">PipelineSnapshotRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineSnapshotResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a snapshot.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot: Snapshot to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created snapshot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">snapshot</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">snapshot</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_snapshot</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_snapshot_endpoints.create_snapshot_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_snapshot_run</span><span class="p">(</span><span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">run_request</span><span class="p">:</span> <span class="n">PipelineSnapshotRunRequest</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Run a pipeline from a snapshot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the snapshot.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>run_request</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotRunRequest (zenml.models.PipelineSnapshotRunRequest)" href="core-models.html#zenml.models.PipelineSnapshotRunRequest">PipelineSnapshotRunRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Run request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_snapshot_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{snapshot_id}</span><span class="s2">/runs&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">429</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_snapshot_run</span><span class="p">(</span>
    <span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">run_request</span><span class="p">:</span> <span class="n">PipelineSnapshotRunRequest</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a pipeline from a snapshot.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot_id: The ID of the snapshot.</span>
<span class="sd">        run_request: Run request.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.pipeline_execution.utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">run_snapshot</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">with</span> <span class="n">track_handler</span><span class="p">(</span>
        <span class="n">event</span><span class="o">=</span><span class="n">AnalyticsEvent</span><span class="o">.</span><span class="n">EXECUTED_SNAPSHOT</span><span class="p">,</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">analytics_handler</span><span class="p">:</span>
        <span class="n">snapshot</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">snapshot_id</span><span class="p">,</span>
            <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_snapshot</span><span class="p">,</span>
            <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">analytics_handler</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
            <span class="n">project_id</span><span class="o">=</span><span class="n">snapshot</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
            <span class="n">project_id</span><span class="o">=</span><span class="n">snapshot</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">RUN_TEMPLATE_TRIGGERS_FEATURE_NAME</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">run_snapshot</span><span class="p">(</span>
            <span class="n">snapshot</span><span class="o">=</span><span class="n">snapshot</span><span class="p">,</span>
            <span class="n">auth_context</span><span class="o">=</span><span class="n">auth_context</span><span class="p">,</span>
            <span class="n">request</span><span class="o">=</span><span class="n">run_request</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_snapshot_endpoints.delete_pipeline_snapshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_pipeline_snapshot</span><span class="p">(</span><span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific snapshot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the snapshot to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_snapshot_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{snapshot_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_pipeline_snapshot</span><span class="p">(</span>
    <span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific snapshot.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot_id: ID of the snapshot to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">snapshot_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_snapshot</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_snapshot</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_snapshot_endpoints.get_pipeline_snapshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pipeline_snapshot</span><span class="p">(</span><span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">step_configuration_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">include_config_schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineSnapshotResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific snapshot using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the snapshot to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>step_configuration_filter</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of step configurations to include in
the response. If not given, all step configurations will be
included.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Query">Query</span>(None)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_config_schema</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the config schema will be filled.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotResponse (zenml.models.PipelineSnapshotResponse)" href="core-models.html#zenml.models.PipelineSnapshotResponse">PipelineSnapshotResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific snapshot object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_snapshot_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{snapshot_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_pipeline_snapshot</span><span class="p">(</span>
    <span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">step_configuration_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">include_config_schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineSnapshotResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific snapshot using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot_id: ID of the snapshot to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        step_configuration_filter: List of step configurations to include in</span>
<span class="sd">            the response. If not given, all step configurations will be</span>
<span class="sd">            included.</span>
<span class="sd">        include_config_schema: Whether the config schema will be filled.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific snapshot object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">snapshot_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_snapshot</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
        <span class="n">step_configuration_filter</span><span class="o">=</span><span class="n">step_configuration_filter</span><span class="p">,</span>
        <span class="n">include_config_schema</span><span class="o">=</span><span class="n">include_config_schema</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_snapshot_endpoints.list_pipeline_snapshots" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_pipeline_snapshots</span><span class="p">(</span><span class="n">snapshot_filter_model</span><span class="p">:</span> <span class="n">PipelineSnapshotFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineSnapshotFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineSnapshotResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of snapshots.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotFilter (zenml.models.PipelineSnapshotFilter)" href="core-models.html#zenml.models.PipelineSnapshotFilter">PipelineSnapshotFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="PipelineSnapshotFilter (zenml.models.PipelineSnapshotFilter)" href="core-models.html#zenml.models.PipelineSnapshotFilter">PipelineSnapshotFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="PipelineSnapshotResponse (zenml.models.PipelineSnapshotResponse)" href="core-models.html#zenml.models.PipelineSnapshotResponse">PipelineSnapshotResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of snapshot objects matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_snapshot_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_pipeline_snapshots</span><span class="p">(</span>
    <span class="n">snapshot_filter_model</span><span class="p">:</span> <span class="n">PipelineSnapshotFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineSnapshotFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineSnapshotResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of snapshots.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of snapshot objects matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">snapshot_filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">snapshot_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_snapshots</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipeline_snapshot_endpoints.update_pipeline_snapshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_pipeline_snapshot</span><span class="p">(</span><span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">snapshot_update</span><span class="p">:</span> <span class="n">PipelineSnapshotUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update a snapshot.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>snapshot_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the snapshot to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>snapshot_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineSnapshotUpdate (zenml.models.PipelineSnapshotUpdate)" href="core-models.html#zenml.models.PipelineSnapshotUpdate">PipelineSnapshotUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The update to apply.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated snapshot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipeline_snapshot_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{snapshot_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_pipeline_snapshot</span><span class="p">(</span>
    <span class="n">snapshot_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">snapshot_update</span><span class="p">:</span> <span class="n">PipelineSnapshotUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update a snapshot.</span>

<span class="sd">    Args:</span>
<span class="sd">        snapshot_id: ID of the snapshot to update.</span>
<span class="sd">        snapshot_update: The update to apply.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated snapshot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">snapshot_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">snapshot_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_snapshot</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_snapshot</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.pipelines_endpoints" class="doc doc-heading">
            <code>pipelines_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for pipelines.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.pipelines_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.pipelines_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipelines_endpoints.create_pipeline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_pipeline</span><span class="p">(</span><span class="n">pipeline</span><span class="p">:</span> <span class="n">PipelineRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a pipeline.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRequest (zenml.models.PipelineRequest)" href="core-models.html#zenml.models.PipelineRequest">PipelineRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pipeline to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineResponse (zenml.models.PipelineResponse)" href="core-models.html#zenml.models.PipelineResponse">PipelineResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created pipeline.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipelines_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pipelines&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_pipeline</span><span class="p">(</span>
    <span class="n">pipeline</span><span class="p">:</span> <span class="n">PipelineRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a pipeline.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline: Pipeline to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created pipeline.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="c1"># We limit pipeline namespaces, not pipeline versions</span>
    <span class="n">skip_entitlements</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_pipelines</span><span class="p">(</span>
            <span class="n">PipelineFilter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">project</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_pipeline</span><span class="p">,</span>
        <span class="n">skip_entitlements</span><span class="o">=</span><span class="n">skip_entitlements</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipelines_endpoints.delete_pipeline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_pipeline</span><span class="p">(</span><span class="n">pipeline_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific pipeline.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipelines_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{pipeline_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_pipeline</span><span class="p">(</span>
    <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific pipeline.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_id: ID of the pipeline to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_pipeline</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">should_decrement</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span> <span class="ow">in</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">reportable_resources</span>
        <span class="ow">and</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_pipelines</span><span class="p">(</span>
            <span class="n">PipelineFilter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">==</span> <span class="mi">0</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">should_decrement</span><span class="p">:</span>
        <span class="n">report_decrement</span><span class="p">(</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipelines_endpoints.get_pipeline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pipeline</span><span class="p">(</span><span class="n">pipeline_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific pipeline using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineResponse (zenml.models.PipelineResponse)" href="core-models.html#zenml.models.PipelineResponse">PipelineResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific pipeline object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipelines_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{pipeline_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_pipeline</span><span class="p">(</span>
    <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific pipeline using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_id: ID of the pipeline to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific pipeline object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipelines_endpoints.list_pipeline_runs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_pipeline_runs</span><span class="p">(</span><span class="n">pipeline_run_filter_model</span><span class="p">:</span> <span class="n">PipelineRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineRunFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineRunResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get pipeline runs according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_run_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunFilter (zenml.models.PipelineRunFilter)" href="core-models.html#zenml.models.PipelineRunFilter">PipelineRunFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="PipelineRunFilter (zenml.models.PipelineRunFilter)" href="core-models.html#zenml.models.PipelineRunFilter">PipelineRunFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pipeline runs according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipelines_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{pipeline_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">RUNS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_pipeline_runs</span><span class="p">(</span>
    <span class="n">pipeline_run_filter_model</span><span class="p">:</span> <span class="n">PipelineRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineRunFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineRunResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get pipeline runs according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_run_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The pipeline runs according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span><span class="n">pipeline_run_filter_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipelines_endpoints.list_pipelines" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_pipelines</span><span class="p">(</span><span class="n">pipeline_filter_model</span><span class="p">:</span> <span class="n">PipelineFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of pipelines.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineFilter (zenml.models.PipelineFilter)" href="core-models.html#zenml.models.PipelineFilter">PipelineFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="PipelineFilter (zenml.models.PipelineFilter)" href="core-models.html#zenml.models.PipelineFilter">PipelineFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="PipelineResponse (zenml.models.PipelineResponse)" href="core-models.html#zenml.models.PipelineResponse">PipelineResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of pipeline objects matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipelines_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pipelines&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_pipelines</span><span class="p">(</span>
    <span class="n">pipeline_filter_model</span><span class="p">:</span> <span class="n">PipelineFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of pipelines.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of pipeline objects matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">pipeline_filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">pipeline_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_pipelines</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.pipelines_endpoints.update_pipeline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_pipeline</span><span class="p">(</span><span class="n">pipeline_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">pipeline_update</span><span class="p">:</span> <span class="n">PipelineUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates the attribute on a specific pipeline using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineUpdate (zenml.models.PipelineUpdate)" href="core-models.html#zenml.models.PipelineUpdate">PipelineUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the model containing the attributes to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineResponse (zenml.models.PipelineResponse)" href="core-models.html#zenml.models.PipelineResponse">PipelineResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated pipeline object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/pipelines_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{pipeline_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_pipeline</span><span class="p">(</span>
    <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">pipeline_update</span><span class="p">:</span> <span class="n">PipelineUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the attribute on a specific pipeline using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_id: ID of the pipeline to get.</span>
<span class="sd">        pipeline_update: the model containing the attributes to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated pipeline object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">pipeline_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_pipeline</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.plugin_endpoints" class="doc doc-heading">
            <code>plugin_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for plugin flavors.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.plugin_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.plugin_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.plugin_endpoints.get_flavor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_flavor</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="n">PluginType</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;type&#39;</span><span class="p">),</span> <span class="n">subtype</span><span class="p">:</span> <span class="n">PluginSubType</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;subtype&#39;</span><span class="p">),</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">BasePluginFlavorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested flavor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the flavor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PluginType (zenml.enums.PluginType)" href="core-enums.html#zenml.enums.PluginType">PluginType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of Plugin</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Query">Query</span>(..., alias=&#39;type&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>subtype</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PluginSubType (zenml.enums.PluginSubType)" href="core-enums.html#zenml.enums.PluginSubType">PluginSubType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Subtype of Plugin</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Query">Query</span>(..., alias=&#39;subtype&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="BasePluginFlavorResponse (zenml.models.v2.base.base_plugin_flavor.BasePluginFlavorResponse)" href="core-models.html#zenml.models.v2.base.base_plugin_flavor.BasePluginFlavorResponse">BasePluginFlavorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested flavor response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/plugin_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@plugin_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_flavor</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">PluginType</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;type&quot;</span><span class="p">),</span>
    <span class="n">subtype</span><span class="p">:</span> <span class="n">PluginSubType</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;subtype&quot;</span><span class="p">),</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BasePluginFlavorResponse</span><span class="p">:</span>  <span class="c1"># type: ignore[type-arg]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested flavor.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: Name of the flavor.</span>
<span class="sd">        type: Type of Plugin</span>
<span class="sd">        subtype: Subtype of Plugin</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested flavor response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plugin_flavor</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_flavor_class</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">_type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="n">subtype</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">plugin_flavor</span><span class="o">.</span><span class="n">get_flavor_response_model</span><span class="p">(</span><span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.plugin_endpoints.list_flavors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_flavors</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">PluginType</span><span class="p">,</span> <span class="n">subtype</span><span class="p">:</span> <span class="n">PluginSubType</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">PAGINATION_STARTING_PAGE</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">PAGE_SIZE_DEFAULT</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">BasePluginFlavorResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns all event flavors.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PluginType (zenml.enums.PluginType)" href="core-enums.html#zenml.enums.PluginType">PluginType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of Plugin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>subtype</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PluginSubType (zenml.enums.PluginSubType)" href="core-enums.html#zenml.enums.PluginSubType">PluginSubType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The subtype of the plugin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>page</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page for pagination (offset +1)</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PAGINATION_STARTING_PAGE: int = 1

  
      module-attribute
   (zenml.constants.PAGINATION_STARTING_PAGE)" href="core-constants.html#zenml.constants.PAGINATION_STARTING_PAGE">PAGINATION_STARTING_PAGE</a></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page size for pagination</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PAGE_SIZE_DEFAULT: int = handle_int_env_var(ENV_ZENML_PAGINATION_DEFAULT_LIMIT, default=20)

  
      module-attribute
   (zenml.constants.PAGE_SIZE_DEFAULT)" href="core-constants.html#zenml.constants.PAGE_SIZE_DEFAULT">PAGE_SIZE_DEFAULT</a></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to hydrate the response bodies</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.v2.base.page.Page)" href="core-models.html#zenml.models.v2.base.page.Page">Page</a>[<a class="autorefs autorefs-internal" title="BasePluginFlavorResponse (zenml.models.v2.base.base_plugin_flavor.BasePluginFlavorResponse)" href="core-models.html#zenml.models.v2.base.base_plugin_flavor.BasePluginFlavorResponse">BasePluginFlavorResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A page of flavors.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/plugin_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@plugin_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">Page</span><span class="p">[</span><span class="n">BasePluginFlavorResponse</span><span class="p">],</span>  <span class="c1"># type: ignore[type-arg]</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_flavors</span><span class="p">(</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">PluginType</span><span class="p">,</span>
    <span class="n">subtype</span><span class="p">:</span> <span class="n">PluginSubType</span><span class="p">,</span>
    <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">PAGINATION_STARTING_PAGE</span><span class="p">,</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">PAGE_SIZE_DEFAULT</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">BasePluginFlavorResponse</span><span class="p">]:</span>  <span class="c1"># type: ignore[type-arg]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all event flavors.</span>

<span class="sd">    Args:</span>
<span class="sd">        type: The type of Plugin</span>
<span class="sd">        subtype: The subtype of the plugin</span>
<span class="sd">        page: Page for pagination (offset +1)</span>
<span class="sd">        size: Page size for pagination</span>
<span class="sd">        hydrate: Whether to hydrate the response bodies</span>

<span class="sd">    Returns:</span>
<span class="sd">        A page of flavors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">flavors</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">list_available_flavor_responses_for_type_and_subtype</span><span class="p">(</span>
        <span class="n">_type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="n">subtype</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">flavors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.projects_endpoints" class="doc doc-heading">
            <code>projects_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for projects.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.projects_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.projects_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.projects_endpoints.create_project" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_project</span><span class="p">(</span><span class="n">project_request</span><span class="p">:</span> <span class="n">ProjectRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ProjectResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a project based on the requestBody.</p>
<h6 id="zenml.zen_server.routers.projects_endpoints.create_project--noqa-dar401">noqa: DAR401</h6>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_request</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectRequest (zenml.models.ProjectRequest)" href="core-models.html#zenml.models.ProjectRequest">ProjectRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Project to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectResponse (zenml.models.ProjectResponse)" href="core-models.html#zenml.models.ProjectResponse">ProjectResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created project.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/projects_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_project</span><span class="p">(</span>
    <span class="n">project_request</span><span class="p">:</span> <span class="n">ProjectRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProjectResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a project based on the requestBody.</span>

<span class="sd">    # noqa: DAR401</span>

<span class="sd">    Args:</span>
<span class="sd">        project_request: Project to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">project_request</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_project</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.projects_endpoints.delete_project" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a project.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the project.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/projects_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@workspace_router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_project</span><span class="p">(</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a project.</span>

<span class="sd">    Args:</span>
<span class="sd">        project_name_or_id: Name or ID of the project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">project_name_or_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_project</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">feature_gate_enabled</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ResourceType</span><span class="o">.</span><span class="n">PROJECT</span> <span class="ow">in</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">reportable_resources</span><span class="p">:</span>
            <span class="n">report_decrement</span><span class="p">(</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PROJECT</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.projects_endpoints.get_project" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ProjectResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a project for given name.</p>
<h6 id="zenml.zen_server.routers.projects_endpoints.get_project--noqa-dar401">noqa: DAR401</h6>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the project.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectResponse (zenml.models.ProjectResponse)" href="core-models.html#zenml.models.ProjectResponse">ProjectResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested project.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/projects_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_project</span><span class="p">(</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProjectResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a project for given name.</span>

<span class="sd">    # noqa: DAR401</span>

<span class="sd">    Args:</span>
<span class="sd">        project_name_or_id: Name or ID of the project.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">project_name_or_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.projects_endpoints.get_project_statistics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_project_statistics</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ProjectStatistics</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets statistics of a project.</p>
<h6 id="zenml.zen_server.routers.projects_endpoints.get_project_statistics--noqa-dar401">noqa: DAR401</h6>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the project to get statistics for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectStatistics (zenml.models.ProjectStatistics)" href="core-models.html#zenml.models.ProjectStatistics">ProjectStatistics</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Project statistics.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/projects_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STATISTICS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STATISTICS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_project_statistics</span><span class="p">(</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProjectStatistics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets statistics of a project.</span>

<span class="sd">    # noqa: DAR401</span>

<span class="sd">    Args:</span>
<span class="sd">        project_name_or_id: Name or ID of the project to get statistics for.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Project statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">project_name_or_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">user_id</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>

    <span class="n">run_filter</span> <span class="o">=</span> <span class="n">PipelineRunFilter</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">run_filter</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">get_allowed_resource_ids</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">id</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">pipeline_filter</span> <span class="o">=</span> <span class="n">PipelineFilter</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">pipeline_filter</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">get_allowed_resource_ids</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">id</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">ProjectStatistics</span><span class="p">(</span>
        <span class="n">pipelines</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_pipelines</span><span class="p">(</span><span class="n">filter_model</span><span class="o">=</span><span class="n">pipeline_filter</span><span class="p">),</span>
        <span class="n">runs</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_runs</span><span class="p">(</span><span class="n">filter_model</span><span class="o">=</span><span class="n">run_filter</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.projects_endpoints.list_projects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_projects</span><span class="p">(</span><span class="n">project_filter_model</span><span class="p">:</span> <span class="n">ProjectFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ProjectFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ProjectResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Lists all projects in the organization.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectFilter (zenml.models.ProjectFilter)" href="core-models.html#zenml.models.ProjectFilter">ProjectFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering,</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ProjectFilter (zenml.models.ProjectFilter)" href="core-models.html#zenml.models.ProjectFilter">ProjectFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ProjectResponse (zenml.models.ProjectResponse)" href="core-models.html#zenml.models.ProjectResponse">ProjectResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of projects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/projects_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_projects</span><span class="p">(</span>
    <span class="n">project_filter_model</span><span class="p">:</span> <span class="n">ProjectFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ProjectFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ProjectResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists all projects in the organization.</span>

<span class="sd">    Args:</span>
<span class="sd">        project_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering,</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of projects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">project_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PROJECT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_projects</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.projects_endpoints.update_project" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">project_update</span><span class="p">:</span> <span class="n">ProjectUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ProjectResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a project for given name.</p>
<h6 id="zenml.zen_server.routers.projects_endpoints.update_project--noqa-dar401">noqa: DAR401</h6>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the project to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectUpdate (zenml.models.ProjectUpdate)" href="core-models.html#zenml.models.ProjectUpdate">ProjectUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the project to use to update</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectResponse (zenml.models.ProjectResponse)" href="core-models.html#zenml.models.ProjectResponse">ProjectResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated project.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/projects_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@workspace_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_project</span><span class="p">(</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">project_update</span><span class="p">:</span> <span class="n">ProjectUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProjectResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a project for given name.</span>

<span class="sd">    # noqa: DAR401</span>

<span class="sd">    Args:</span>
<span class="sd">        project_name_or_id: Name or ID of the project to update.</span>
<span class="sd">        project_update: the project to use to update</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">project_name_or_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">project_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_project</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.run_metadata_endpoints" class="doc doc-heading">
            <code>run_metadata_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for run metadata.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.run_metadata_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.run_metadata_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_metadata_endpoints.create_run_metadata" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_run_metadata</span><span class="p">(</span><span class="n">run_metadata</span><span class="p">:</span> <span class="n">RunMetadataRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates run metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_metadata</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunMetadataRequest (zenml.models.RunMetadataRequest)" href="core-models.html#zenml.models.RunMetadataRequest">RunMetadataRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The run metadata to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the resource type is not supported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_metadata_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">RUN_METADATA</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;run_metadata&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_run_metadata</span><span class="p">(</span>
    <span class="n">run_metadata</span><span class="p">:</span> <span class="n">RunMetadataRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates run metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_metadata: The run metadata to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the resource type is not supported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">run_metadata</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="n">run_metadata</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>

    <span class="n">verify_models</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">run_metadata</span><span class="o">.</span><span class="n">resources</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">resource</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetadataResourceTypes</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">:</span>
            <span class="n">verify_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">resource</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetadataResourceTypes</span><span class="o">.</span><span class="n">STEP_RUN</span><span class="p">:</span>
            <span class="n">verify_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">resource</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetadataResourceTypes</span><span class="o">.</span><span class="n">ARTIFACT_VERSION</span><span class="p">:</span>
            <span class="n">verify_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_artifact_version</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">resource</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetadataResourceTypes</span><span class="o">.</span><span class="n">MODEL_VERSION</span><span class="p">:</span>
            <span class="n">verify_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_model_version</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">resource</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MetadataResourceTypes</span><span class="o">.</span><span class="n">SCHEDULE</span><span class="p">:</span>
            <span class="n">verify_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_schedule</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown resource type: </span><span class="si">{</span><span class="n">resource</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span>
        <span class="n">models</span><span class="o">=</span><span class="n">verify_models</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">run_metadata</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_run_metadata</span><span class="p">(</span><span class="n">run_metadata</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.run_templates_endpoints" class="doc doc-heading">
            <code>run_templates_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for run templates.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.run_templates_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.run_templates_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_templates_endpoints.create_run_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_run_template</span><span class="p">(</span><span class="n">run_template</span><span class="p">:</span> <span class="n">RunTemplateRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">RunTemplateResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a run template.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_template</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunTemplateRequest (zenml.models.RunTemplateRequest)" href="core-models.html#zenml.models.RunTemplateRequest">RunTemplateRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Run template to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunTemplateResponse (zenml.models.RunTemplateResponse)" href="core-models.html#zenml.models.RunTemplateResponse">RunTemplateResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created run template.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_templates_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">RUN_TEMPLATES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;run_templates&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_run_template</span><span class="p">(</span>
    <span class="n">run_template</span><span class="p">:</span> <span class="n">RunTemplateRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunTemplateResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a run template.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_template: Run template to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created run template.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">run_template</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">run_template</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_run_template</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_templates_endpoints.create_template_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_template_run</span><span class="p">(</span><span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PipelineRunConfiguration</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Run a pipeline from a template.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>template_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the template.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="PipelineRunConfiguration (zenml.config.pipeline_run_configuration.PipelineRunConfiguration)" href="core-config.html#zenml.config.pipeline_run_configuration.PipelineRunConfiguration">PipelineRunConfiguration</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for the pipeline run.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the template can not be run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_templates_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{template_id}</span><span class="s2">/runs&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">429</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_template_run</span><span class="p">(</span>
    <span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PipelineRunConfiguration</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a pipeline from a template.</span>

<span class="sd">    Args:</span>
<span class="sd">        template_id: The ID of the template.</span>
<span class="sd">        config: Configuration for the pipeline run.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the template can not be run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.pipeline_execution.utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">run_snapshot</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">rbac_read_checks</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="n">track_handler</span><span class="p">(</span>
        <span class="n">event</span><span class="o">=</span><span class="n">AnalyticsEvent</span><span class="o">.</span><span class="n">EXECUTED_RUN_TEMPLATE</span><span class="p">,</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">analytics_handler</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
            <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_template</span><span class="p">,</span>
            <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">analytics_handler</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="n">template</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_SNAPSHOT</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
            <span class="n">project_id</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
            <span class="n">project_id</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">check_entitlement</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">RUN_TEMPLATE_TRIGGERS_FEATURE_NAME</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">secrets</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">secrets</span> <span class="ow">or</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">steps</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">secrets</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">secrets</span> <span class="ow">or</span> <span class="p">[])</span>

            <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret_name_or_id</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">secret_name_or_id</span> <span class="ow">in</span> <span class="n">secrets</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">rbac_read_checks</span><span class="p">:</span>
            <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span>
                <span class="n">rbac_read_checks</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">template</span><span class="o">.</span><span class="n">source_snapshot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;This template can not be run because it has no source &quot;</span>
                <span class="s2">&quot;snapshot.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">run_snapshot</span><span class="p">(</span>
            <span class="n">snapshot</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">source_snapshot</span><span class="p">,</span>
            <span class="n">auth_context</span><span class="o">=</span><span class="n">auth_context</span><span class="p">,</span>
            <span class="n">request</span><span class="o">=</span><span class="n">PipelineSnapshotRunRequest</span><span class="p">(</span>
                <span class="n">run_configuration</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">template_id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_templates_endpoints.delete_run_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_run_template</span><span class="p">(</span><span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete a run template.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>template_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the run template to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_templates_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{template_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_run_template</span><span class="p">(</span>
    <span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a run template.</span>

<span class="sd">    Args:</span>
<span class="sd">        template_id: ID of the run template to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_template</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_run_template</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_templates_endpoints.get_run_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run_template</span><span class="p">(</span><span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">RunTemplateResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a run template.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>template_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the run template to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunTemplateResponse (zenml.models.RunTemplateResponse)" href="core-models.html#zenml.models.RunTemplateResponse">RunTemplateResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The run template.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_templates_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{template_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_run_template</span><span class="p">(</span>
    <span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunTemplateResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a run template.</span>

<span class="sd">    Args:</span>
<span class="sd">        template_id: ID of the run template to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run template.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_template</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_templates_endpoints.list_run_templates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_run_templates</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">RunTemplateFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">RunTemplateFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">RunTemplateResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a page of run templates.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunTemplateFilter (zenml.models.RunTemplateFilter)" href="core-models.html#zenml.models.RunTemplateFilter">RunTemplateFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="RunTemplateFilter (zenml.models.RunTemplateFilter)" href="core-models.html#zenml.models.RunTemplateFilter">RunTemplateFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="RunTemplateResponse (zenml.models.RunTemplateResponse)" href="core-models.html#zenml.models.RunTemplateResponse">RunTemplateResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page of run templates.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_templates_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">RUN_TEMPLATES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;run_templates&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_run_templates</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">RunTemplateFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">RunTemplateFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">RunTemplateResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a page of run templates.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page of run templates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">RUN_TEMPLATE</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_run_templates</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.run_templates_endpoints.update_run_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_run_template</span><span class="p">(</span><span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">update</span><span class="p">:</span> <span class="n">RunTemplateUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">RunTemplateResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Update a run template.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>template_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the run template to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunTemplateUpdate (zenml.models.RunTemplateUpdate)" href="core-models.html#zenml.models.RunTemplateUpdate">RunTemplateUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updates to apply.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RunTemplateResponse (zenml.models.RunTemplateResponse)" href="core-models.html#zenml.models.RunTemplateResponse">RunTemplateResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated run template.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/run_templates_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{template_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_run_template</span><span class="p">(</span>
    <span class="n">template_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">update</span><span class="p">:</span> <span class="n">RunTemplateUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunTemplateResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update a run template.</span>

<span class="sd">    Args:</span>
<span class="sd">        template_id: ID of the run template to get.</span>
<span class="sd">        update: The updates to apply.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated run template.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_template</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_run_template</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.runs_endpoints" class="doc doc-heading">
            <code>runs_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for pipeline runs.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.runs_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.runs_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.delete_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_run</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_run</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.get_or_create_pipeline_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_or_create_pipeline_run</span><span class="p">(</span><span class="n">pipeline_run</span><span class="p">:</span> <span class="n">PipelineRunRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PipelineRunResponse</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get or create a pipeline run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pipeline_run</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunRequest (zenml.models.PipelineRunRequest)" href="core-models.html#zenml.models.PipelineRunRequest">PipelineRunRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pipeline run to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pipeline run and a boolean indicating whether the run was created</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or not.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">RUNS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;runs&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_or_create_pipeline_run</span><span class="p">(</span>
    <span class="n">pipeline_run</span><span class="p">:</span> <span class="n">PipelineRunRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PipelineRunResponse</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get or create a pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_run: Pipeline run to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The pipeline run and a boolean indicating whether the run was created</span>
<span class="sd">        or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">pipeline_run</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_get_or_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">pipeline_run</span><span class="p">,</span>
        <span class="n">get_or_create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_or_create_run</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.get_pipeline_configuration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pipeline_configuration</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the pipeline configuration of a specific pipeline run using its ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pipeline configuration of the pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">PIPELINE_CONFIGURATION</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_pipeline_configuration</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the pipeline configuration of a specific pipeline run using its ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run to get.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The pipeline configuration of the pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">run</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.get_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">refresh_status</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_python_packages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_full_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a specific pipeline run using its ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>refresh_status</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether we should try to refresh
the status of the pipeline run using its orchestrator.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_python_packages</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to include the
Python packages in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_full_metadata</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to include the
full metadata in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_run</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">refresh_status</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_python_packages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_full_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a specific pipeline run using its ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        refresh_status: Flag deciding whether we should try to refresh</span>
<span class="sd">            the status of the pipeline run using its orchestrator.</span>
<span class="sd">        include_python_packages: Flag deciding whether to include the</span>
<span class="sd">            Python packages in the response.</span>
<span class="sd">        include_full_metadata: Flag deciding whether to include the</span>
<span class="sd">            full metadata in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">store</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
        <span class="n">include_python_packages</span><span class="o">=</span><span class="n">include_python_packages</span><span class="p">,</span>
        <span class="n">include_full_metadata</span><span class="o">=</span><span class="n">include_full_metadata</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">refresh_status</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;DEPRECATED: The ability to refresh the status a run through &quot;</span>
                <span class="s2">&quot;the GET `/runs/</span><span class="si">{run_id}</span><span class="s2">` endpoint is deprecated and will be &quot;</span>
                <span class="s2">&quot;removed in a future version. Please use the POST &quot;</span>
                <span class="s2">&quot;`/runs/</span><span class="si">{run_id}</span><span class="s2">/refresh` endpoint instead.&quot;</span>
            <span class="p">)</span>
            <span class="n">run</span> <span class="o">=</span> <span class="n">run_utils</span><span class="o">.</span><span class="n">refresh_run_status</span><span class="p">(</span><span class="n">run</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">zen_store</span><span class="o">=</span><span class="n">store</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;An error occurred while refreshing the status of the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;pipeline run: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">run</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.get_run_dag" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run_dag</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineRunDAG</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the DAG of a specific pipeline run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run for which to get the DAG.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunDAG (zenml.models.PipelineRunDAG)" href="core-models.html#zenml.models.PipelineRunDAG">PipelineRunDAG</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DAG of the pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">/dag&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_run_dag</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunDAG</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the DAG of a specific pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run for which to get the DAG.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The DAG of the pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Maybe avoid calling get_run twice?</span>
    <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline_run_dag</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.get_run_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ExecutionStatus</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the status of a specific pipeline run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run for which to get the status.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ExecutionStatus (zenml.enums.ExecutionStatus)" href="core-enums.html#zenml.enums.ExecutionStatus">ExecutionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STATUS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_run_status</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExecutionStatus</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the status of a specific pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run for which to get the status.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The status of the pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">run</span><span class="o">.</span><span class="n">status</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.get_run_steps" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_run_steps</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">step_run_filter_model</span><span class="p">:</span> <span class="n">StepRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">StepRunFilter</span><span class="p">)),</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">StepRunResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get all steps for a given pipeline run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>step_run_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunFilter (zenml.models.StepRunFilter)" href="core-models.html#zenml.models.StepRunFilter">StepRunFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="StepRunFilter (zenml.models.StepRunFilter)" href="core-models.html#zenml.models.StepRunFilter">StepRunFilter</a>))</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="StepRunResponse (zenml.models.StepRunResponse)" href="core-models.html#zenml.models.StepRunResponse">StepRunResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The steps for a given pipeline run.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STEPS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_run_steps</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">step_run_filter_model</span><span class="p">:</span> <span class="n">StepRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">StepRunFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">StepRunResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all steps for a given pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run.</span>
<span class="sd">        step_run_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering</span>

<span class="sd">    Returns:</span>
<span class="sd">        The steps for a given pipeline run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="n">step_run_filter_model</span><span class="o">.</span><span class="n">pipeline_run_id</span> <span class="o">=</span> <span class="n">run_id</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_run_steps</span><span class="p">(</span><span class="n">step_run_filter_model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.list_runs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_runs</span><span class="p">(</span><span class="n">runs_filter_model</span><span class="p">:</span> <span class="n">PipelineRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineRunFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_full_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineRunResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get pipeline runs according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>runs_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunFilter (zenml.models.PipelineRunFilter)" href="core-models.html#zenml.models.PipelineRunFilter">PipelineRunFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting, filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="PipelineRunFilter (zenml.models.PipelineRunFilter)" href="core-models.html#zenml.models.PipelineRunFilter">PipelineRunFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_full_metadata</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to include the
full metadata in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pipeline runs according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">RUNS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;runs&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_runs</span><span class="p">(</span>
    <span class="n">runs_filter_model</span><span class="p">:</span> <span class="n">PipelineRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">PipelineRunFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_full_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">PipelineRunResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get pipeline runs according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        runs_filter_model: Filter model used for pagination, sorting, filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        include_full_metadata: Flag deciding whether to include the</span>
<span class="sd">            full metadata in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The pipeline runs according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">runs_filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">runs_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_runs</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
        <span class="n">include_full_metadata</span><span class="o">=</span><span class="n">include_full_metadata</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.refresh_run_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">refresh_run_status</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">include_steps</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Refreshes the status of a specific pipeline run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run to refresh.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_steps</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether we should also refresh
the status of individual steps.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">REFRESH</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">refresh_run_status</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">include_steps</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Refreshes the status of a specific pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run to refresh.</span>
<span class="sd">        include_steps: Flag deciding whether we should also refresh</span>
<span class="sd">            the status of individual steps.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">store</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">run_utils</span><span class="o">.</span><span class="n">refresh_run_status</span><span class="p">(</span>
        <span class="n">run</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">include_step_updates</span><span class="o">=</span><span class="n">include_steps</span><span class="p">,</span> <span class="n">zen_store</span><span class="o">=</span><span class="n">store</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.run_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_logs</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get log entries for efficient pagination.</p>
<p>This endpoint returns the log entries.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Required source to get logs for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="LogEntry (zenml.logging.step_logging.LogEntry)" href="core-logging.html#zenml.logging.step_logging.LogEntry">LogEntry</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of log entries.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no logs are found for the specified source.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">LOGS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">400</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">run_logs</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get log entries for efficient pagination.</span>

<span class="sd">    This endpoint returns the log entries.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run.</span>
<span class="sd">        source: Required source to get logs for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of log entries.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If no logs are found for the specified source.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="n">run</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">store</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Handle runner logs from workload manager</span>
    <span class="k">if</span> <span class="n">run</span><span class="o">.</span><span class="n">snapshot</span> <span class="ow">and</span> <span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;runner&quot;</span><span class="p">:</span>
        <span class="n">snapshot</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">snapshot</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">snapshot</span><span class="o">.</span><span class="n">template_id</span> <span class="ow">or</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">source_snapshot_id</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">workload_manager_enabled</span><span class="p">:</span>
            <span class="n">workload_logs</span> <span class="o">=</span> <span class="n">workload_manager</span><span class="p">()</span><span class="o">.</span><span class="n">get_logs</span><span class="p">(</span>
                <span class="n">workload_id</span><span class="o">=</span><span class="n">snapshot</span><span class="o">.</span><span class="n">id</span>
            <span class="p">)</span>

            <span class="n">log_entries</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">workload_logs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">log_record</span> <span class="o">:=</span> <span class="n">parse_log_entry</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
                    <span class="n">log_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">log_record</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">log_entries</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">MAX_ENTRIES_PER_REQUEST</span><span class="p">:</span>
                    <span class="k">break</span>

            <span class="k">return</span> <span class="n">log_entries</span>

    <span class="c1"># Handle logs from log collection</span>
    <span class="k">if</span> <span class="n">run</span><span class="o">.</span><span class="n">log_collection</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">log_entry</span> <span class="ow">in</span> <span class="n">run</span><span class="o">.</span><span class="n">log_collection</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">log_entry</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="n">source</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">fetch_log_records</span><span class="p">(</span>
                    <span class="n">zen_store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span>
                    <span class="n">artifact_store_id</span><span class="o">=</span><span class="n">log_entry</span><span class="o">.</span><span class="n">artifact_store_id</span><span class="p">,</span>
                    <span class="n">logs_uri</span><span class="o">=</span><span class="n">log_entry</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="c1"># If no logs found for the specified source, raise an error</span>
    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No logs found for source &#39;</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">&#39; in run </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.stop_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">graceful</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Stops a specific pipeline run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the pipeline run to stop.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>graceful</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, allows for graceful shutdown where possible.
If False, forces immediate termination. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STOP</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop_run</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">graceful</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stops a specific pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the pipeline run to stop.</span>
<span class="sd">        graceful: If True, allows for graceful shutdown where possible.</span>
<span class="sd">            If False, forces immediate termination. Default is False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">run</span><span class="p">)</span>
    <span class="n">run_utils</span><span class="o">.</span><span class="n">stop_run</span><span class="p">(</span><span class="n">run</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">graceful</span><span class="o">=</span><span class="n">graceful</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.runs_endpoints.update_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">run_model</span><span class="p">:</span> <span class="n">PipelineRunUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a run.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>run_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>run_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunUpdate (zenml.models.PipelineRunUpdate)" href="core-models.html#zenml.models.PipelineRunUpdate">PipelineRunUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Run model to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PipelineRunResponse (zenml.models.PipelineRunResponse)" href="core-models.html#zenml.models.PipelineRunResponse">PipelineRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated run model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/runs_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{run_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_run</span><span class="p">(</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">run_model</span><span class="p">:</span> <span class="n">PipelineRunUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run_id: ID of the run.</span>
<span class="sd">        run_model: Run model to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated run model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">run_model</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_run</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>
<h7 id="zenml.zen_server.routers.runs_endpoints-modules">Modules</h7>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.schedule_endpoints" class="doc doc-heading">
            <code>schedule_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for pipeline run schedules.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.schedule_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.schedule_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.schedule_endpoints.create_schedule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_schedule</span><span class="p">(</span><span class="n">schedule</span><span class="p">:</span> <span class="n">ScheduleRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ScheduleResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a schedule.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schedule</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScheduleRequest (zenml.models.ScheduleRequest)" href="core-models.html#zenml.models.ScheduleRequest">ScheduleRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schedule to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScheduleResponse (zenml.models.ScheduleResponse)" href="core-models.html#zenml.models.ScheduleResponse">ScheduleResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created schedule.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/schedule_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SCHEDULES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;schedules&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_schedule</span><span class="p">(</span>
    <span class="n">schedule</span><span class="p">:</span> <span class="n">ScheduleRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScheduleResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a schedule.</span>

<span class="sd">    Args:</span>
<span class="sd">        schedule: Schedule to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created schedule.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">schedule</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">schedule</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_schedule</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.schedule_endpoints.delete_schedule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_schedule</span><span class="p">(</span><span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific schedule using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schedule_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the schedule to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/schedule_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{schedule_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_schedule</span><span class="p">(</span>
    <span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific schedule using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        schedule_id: ID of the schedule to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">schedule_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_schedule</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_schedule</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.schedule_endpoints.get_schedule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_schedule</span><span class="p">(</span><span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ScheduleResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific schedule using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schedule_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the schedule to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScheduleResponse (zenml.models.ScheduleResponse)" href="core-models.html#zenml.models.ScheduleResponse">ScheduleResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific schedule object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/schedule_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{schedule_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_schedule</span><span class="p">(</span>
    <span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScheduleResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific schedule using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        schedule_id: ID of the schedule to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific schedule object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">schedule_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_schedule</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.schedule_endpoints.list_schedules" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_schedules</span><span class="p">(</span><span class="n">schedule_filter_model</span><span class="p">:</span> <span class="n">ScheduleFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ScheduleFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ScheduleResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of schedules.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schedule_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScheduleFilter (zenml.models.ScheduleFilter)" href="core-models.html#zenml.models.ScheduleFilter">ScheduleFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ScheduleFilter (zenml.models.ScheduleFilter)" href="core-models.html#zenml.models.ScheduleFilter">ScheduleFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ScheduleResponse (zenml.models.ScheduleResponse)" href="core-models.html#zenml.models.ScheduleResponse">ScheduleResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of schedule objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/schedule_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SCHEDULES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;schedules&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_schedules</span><span class="p">(</span>
    <span class="n">schedule_filter_model</span><span class="p">:</span> <span class="n">ScheduleFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ScheduleFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ScheduleResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of schedules.</span>

<span class="sd">    Args:</span>
<span class="sd">        schedule_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of schedule objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">schedule_filter_model</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project_name_or_id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">schedule_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SCHEDULE</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_schedules</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.schedule_endpoints.update_schedule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_schedule</span><span class="p">(</span><span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">schedule_update</span><span class="p">:</span> <span class="n">ScheduleUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ScheduleResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates the attribute on a specific schedule using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schedule_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the schedule to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schedule_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScheduleUpdate (zenml.models.ScheduleUpdate)" href="core-models.html#zenml.models.ScheduleUpdate">ScheduleUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the model containing the attributes to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScheduleResponse (zenml.models.ScheduleResponse)" href="core-models.html#zenml.models.ScheduleResponse">ScheduleResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated schedule object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/schedule_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{schedule_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_schedule</span><span class="p">(</span>
    <span class="n">schedule_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">schedule_update</span><span class="p">:</span> <span class="n">ScheduleUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScheduleResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the attribute on a specific schedule using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        schedule_id: ID of the schedule to get.</span>
<span class="sd">        schedule_update: the model containing the attributes to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated schedule object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">schedule_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">schedule_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_schedule</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_schedule</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.secrets_endpoints" class="doc doc-heading">
            <code>secrets_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for pipeline run secrets.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.secrets_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.secrets_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.backup_secrets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">backup_secrets</span><span class="p">(</span><span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">delete_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Backs up all secrets in the secrets store to the backup secrets store.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ignore_errors</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to ignore individual errors when backing up
secrets and continue with the backup operation until all secrets
have been backed up.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delete_secrets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to delete the secrets that have been
successfully backed up from the primary secrets store. Setting
this flag effectively moves all secrets from the primary secrets
store to the backup secrets store.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@op_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="n">SECRETS_BACKUP</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">backup_secrets</span><span class="p">(</span>
    <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">delete_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Backs up all secrets in the secrets store to the backup secrets store.</span>

<span class="sd">    Args:</span>
<span class="sd">        ignore_errors: Whether to ignore individual errors when backing up</span>
<span class="sd">            secrets and continue with the backup operation until all secrets</span>
<span class="sd">            have been backed up.</span>
<span class="sd">        delete_secrets: Whether to delete the secrets that have been</span>
<span class="sd">            successfully backed up from the primary secrets store. Setting</span>
<span class="sd">            this flag effectively moves all secrets from the primary secrets</span>
<span class="sd">            store to the backup secrets store.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permission</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">BACKUP_RESTORE</span>
    <span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">backup_secrets</span><span class="p">(</span>
        <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span><span class="p">,</span> <span class="n">delete_secrets</span><span class="o">=</span><span class="n">delete_secrets</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.create_secret" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_secret</span><span class="p">(</span><span class="n">secret</span><span class="p">:</span> <span class="n">SecretRequest</span><span class="p">,</span> <span class="n">workspace_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">SecretResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a secret.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>secret</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SecretRequest (zenml.models.SecretRequest)" href="core-models.html#zenml.models.SecretRequest">SecretRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Secret to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>workspace_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the workspace.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SecretResponse (zenml.models.SecretResponse)" href="core-models.html#zenml.models.SecretResponse">SecretResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created secret.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{workspace_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SECRETS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;secrets&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_secret</span><span class="p">(</span>
    <span class="n">secret</span><span class="p">:</span> <span class="n">SecretRequest</span><span class="p">,</span>
    <span class="n">workspace_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SecretResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a secret.</span>

<span class="sd">    Args:</span>
<span class="sd">        secret: Secret to create.</span>
<span class="sd">        workspace_name_or_id: Optional name or ID of the workspace.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">secret</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_secret</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.delete_secret" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_secret</span><span class="p">(</span><span class="n">secret_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific secret using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>secret_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the secret to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{secret_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_secret</span><span class="p">(</span>
    <span class="n">secret_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific secret using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        secret_id: ID of the secret to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">secret_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_secret</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.get_secret" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_secret</span><span class="p">(</span><span class="n">secret_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">SecretResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific secret using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>secret_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the secret to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SecretResponse (zenml.models.SecretResponse)" href="core-models.html#zenml.models.SecretResponse">SecretResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific secret object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{secret_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_secret</span><span class="p">(</span>
    <span class="n">secret_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SecretResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific secret using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        secret_id: ID of the secret to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific secret object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">secret</span> <span class="o">=</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">secret_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_permissions_for_model</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ_SECRET_VALUE</span><span class="p">):</span>
        <span class="n">secret</span><span class="o">.</span><span class="n">remove_secrets</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">secret</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.list_secrets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_secrets</span><span class="p">(</span><span class="n">secret_filter_model</span><span class="p">:</span> <span class="n">SecretFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">SecretFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">SecretResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a list of secrets.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>secret_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SecretFilter (zenml.models.SecretFilter)" href="core-models.html#zenml.models.SecretFilter">SecretFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="SecretFilter (zenml.models.SecretFilter)" href="core-models.html#zenml.models.SecretFilter">SecretFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="SecretResponse (zenml.models.SecretResponse)" href="core-models.html#zenml.models.SecretResponse">SecretResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of secret objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_secrets</span><span class="p">(</span>
    <span class="n">secret_filter_model</span><span class="p">:</span> <span class="n">SecretFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">SecretFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">SecretResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a list of secrets.</span>

<span class="sd">    Args:</span>
<span class="sd">        secret_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of secret objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">secrets</span> <span class="o">=</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">secret_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_secrets</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># This will be `None` if the user is allowed to read secret values</span>
    <span class="c1"># for all secrets</span>
    <span class="n">allowed_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ_SECRET_VALUE</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">allowed_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">secrets</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">secret</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">allowed_ids</span> <span class="ow">or</span> <span class="n">is_owned_by_authenticated_user</span><span class="p">(</span>
                <span class="n">secret</span>
            <span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">secret</span><span class="o">.</span><span class="n">remove_secrets</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">secrets</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.restore_secrets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restore_secrets</span><span class="p">(</span><span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">delete_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Restores all secrets from the backup secrets store into the main secrets store.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ignore_errors</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to ignore individual errors when restoring
secrets and continue with the restore operation until all secrets
have been restored.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delete_secrets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to delete the secrets that have been
successfully restored from the backup secrets store. Setting
this flag effectively moves all secrets from the backup secrets
store to the primary secrets store.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@op_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="n">SECRETS_RESTORE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">restore_secrets</span><span class="p">(</span>
    <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">delete_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Restores all secrets from the backup secrets store into the main secrets store.</span>

<span class="sd">    Args:</span>
<span class="sd">        ignore_errors: Whether to ignore individual errors when restoring</span>
<span class="sd">            secrets and continue with the restore operation until all secrets</span>
<span class="sd">            have been restored.</span>
<span class="sd">        delete_secrets: Whether to delete the secrets that have been</span>
<span class="sd">            successfully restored from the backup secrets store. Setting</span>
<span class="sd">            this flag effectively moves all secrets from the backup secrets</span>
<span class="sd">            store to the primary secrets store.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permission</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SECRET</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">BACKUP_RESTORE</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">restore_secrets</span><span class="p">(</span>
        <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span><span class="p">,</span> <span class="n">delete_secrets</span><span class="o">=</span><span class="n">delete_secrets</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.secrets_endpoints.update_secret" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_secret</span><span class="p">(</span><span class="n">secret_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">secret_update</span><span class="p">:</span> <span class="n">SecretUpdate</span><span class="p">,</span> <span class="n">patch_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">SecretResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates the attribute on a specific secret using its unique id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>secret_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the secret to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>secret_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SecretUpdate (zenml.models.SecretUpdate)" href="core-models.html#zenml.models.SecretUpdate">SecretUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the model containing the attributes to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>patch_values</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to patch the secret values or replace them.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SecretResponse (zenml.models.SecretResponse)" href="core-models.html#zenml.models.SecretResponse">SecretResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated secret object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/secrets_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{secret_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_secret</span><span class="p">(</span>
    <span class="n">secret_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">secret_update</span><span class="p">:</span> <span class="n">SecretUpdate</span><span class="p">,</span>
    <span class="n">patch_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SecretResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the attribute on a specific secret using its unique id.</span>

<span class="sd">    Args:</span>
<span class="sd">        secret_id: ID of the secret to get.</span>
<span class="sd">        secret_update: the model containing the attributes to update.</span>
<span class="sd">        patch_values: Whether to patch the secret values or replace them.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated secret object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">patch_values</span><span class="p">:</span>
        <span class="c1"># If patch_values is False, interpret the update values as a complete</span>
        <span class="c1"># replacement of the existing secret values. The only adjustment we</span>
        <span class="c1"># need to make is to set the value of any keys that are not present in</span>
        <span class="c1"># the update to None, so that they are deleted.</span>
        <span class="n">secret</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="n">secret_id</span><span class="o">=</span><span class="n">secret_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">secret</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">secret_update</span><span class="o">.</span><span class="n">values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">secret_update</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
                    <span class="n">secret_update</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">secret_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">secret_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_secret</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.server_endpoints" class="doc doc-heading">
            <code>server_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for authentication (login).</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.server_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.server_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.activate_server" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">activate_server</span><span class="p">(</span><span class="n">activate_request</span><span class="p">:</span> <span class="n">ServerActivationRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UserResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a stack.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>activate_request</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerActivationRequest (zenml.models.ServerActivationRequest)" href="core-models.html#zenml.models.ServerActivationRequest">ServerActivationRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request to activate the server.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default admin user that was created during activation, if any.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="n">ACTIVATE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">activate_server</span><span class="p">(</span>
    <span class="n">activate_request</span><span class="p">:</span> <span class="n">ServerActivationRequest</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UserResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a stack.</span>

<span class="sd">    Args:</span>
<span class="sd">        activate_request: The request to activate the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The default admin user that was created during activation, if any.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">activate_server</span><span class="p">(</span><span class="n">activate_request</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.get_onboarding_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_onboarding_state</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the onboarding state of the server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The onboarding state of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">ONBOARDING_STATE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_onboarding_state</span><span class="p">(</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the onboarding state of the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The onboarding state of the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_onboarding_state</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.get_server_statistics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_server_statistics</span><span class="p">(</span><span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServerStatistics</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets server statistics.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerStatistics (zenml.models.ServerStatistics)" href="core-models.html#zenml.models.ServerStatistics">ServerStatistics</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Statistics of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">STATISTICS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_server_statistics</span><span class="p">(</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServerStatistics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets server statistics.</span>

<span class="sd">    Args:</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Statistics of the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
    <span class="n">component_filter</span> <span class="o">=</span> <span class="n">ComponentFilter</span><span class="p">()</span>
    <span class="n">component_filter</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">get_allowed_resource_ids</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">project_filter</span> <span class="o">=</span> <span class="n">ProjectFilter</span><span class="p">()</span>
    <span class="n">project_filter</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">get_allowed_resource_ids</span><span class="p">(</span><span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PROJECT</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">stack_filter</span> <span class="o">=</span> <span class="n">StackFilter</span><span class="p">()</span>
    <span class="n">stack_filter</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">get_allowed_resource_ids</span><span class="p">(</span><span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">ServerStatistics</span><span class="p">(</span>
        <span class="n">stacks</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_stacks</span><span class="p">(</span><span class="n">filter_model</span><span class="o">=</span><span class="n">stack_filter</span><span class="p">),</span>
        <span class="n">components</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_stack_components</span><span class="p">(</span>
            <span class="n">filter_model</span><span class="o">=</span><span class="n">component_filter</span>
        <span class="p">),</span>
        <span class="n">projects</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">count_projects</span><span class="p">(</span><span class="n">filter_model</span><span class="o">=</span><span class="n">project_filter</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.get_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_settings</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServerSettingsResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get settings of the server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to hydrate the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerSettingsResponse (zenml.models.ServerSettingsResponse)" href="core-models.html#zenml.models.ServerSettingsResponse">ServerSettingsResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Settings of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">SERVER_SETTINGS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_settings</span><span class="p">(</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServerSettingsResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get settings of the server.</span>

<span class="sd">    Args:</span>
<span class="sd">        hydrate: Whether to hydrate the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Settings of the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_server_settings</span><span class="p">(</span><span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.server_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">server_info</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ServerModel</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get information about the server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerModel (zenml.models.ServerModel)" href="core-models.html#zenml.models.ServerModel">ServerModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Information about the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">INFO</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">server_info</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ServerModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get information about the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Information about the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_store_info</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.server_load_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">server_load_info</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServerLoadInfo</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get information about the server load.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerLoadInfo (zenml.models.ServerLoadInfo)" href="core-models.html#zenml.models.ServerLoadInfo">ServerLoadInfo</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Information about the server load.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">LOAD_INFO</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">ServerLoadInfo</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">server_load_info</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServerLoadInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get information about the server load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Information about the server load.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>

    <span class="c1"># Get the current number of threads</span>
    <span class="n">num_threads</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">enumerate</span><span class="p">())</span>

    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">store</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">driver</span> <span class="o">==</span> <span class="s2">&quot;sqlite&quot;</span><span class="p">:</span>
        <span class="c1"># SQLite doesn&#39;t have a connection pool</span>
        <span class="k">return</span> <span class="n">ServerLoadInfo</span><span class="p">(</span>
            <span class="n">threads</span><span class="o">=</span><span class="n">num_threads</span><span class="p">,</span>
            <span class="n">db_connections_total</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">db_connections_active</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">db_connections_overflow</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.pool</span><span class="w"> </span><span class="kn">import</span> <span class="n">QueuePool</span>

    <span class="c1"># Get the number of connections</span>
    <span class="n">pool</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">pool</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pool</span><span class="p">,</span> <span class="n">QueuePool</span><span class="p">)</span>
    <span class="n">idle_conn</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">checkedin</span><span class="p">()</span>
    <span class="n">active_conn</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">checkedout</span><span class="p">()</span>
    <span class="n">overflow_conn</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">.</span><span class="n">overflow</span><span class="p">())</span>
    <span class="n">total_conn</span> <span class="o">=</span> <span class="n">idle_conn</span> <span class="o">+</span> <span class="n">active_conn</span>

    <span class="k">return</span> <span class="n">ServerLoadInfo</span><span class="p">(</span>
        <span class="n">threads</span><span class="o">=</span><span class="n">num_threads</span><span class="p">,</span>
        <span class="n">db_connections_total</span><span class="o">=</span><span class="n">total_conn</span><span class="p">,</span>
        <span class="n">db_connections_active</span><span class="o">=</span><span class="n">active_conn</span><span class="p">,</span>
        <span class="n">db_connections_overflow</span><span class="o">=</span><span class="n">overflow_conn</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.update_server_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_server_settings</span><span class="p">(</span><span class="n">settings_update</span><span class="p">:</span> <span class="n">ServerSettingsUpdate</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServerSettingsResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates the settings of the server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>settings_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerSettingsUpdate (zenml.models.ServerSettingsUpdate)" href="core-models.html#zenml.models.ServerSettingsUpdate">ServerSettingsUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Settings update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If trying to update admin properties without
admin permissions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerSettingsResponse (zenml.models.ServerSettingsResponse)" href="core-models.html#zenml.models.ServerSettingsResponse">ServerSettingsResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated settings.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="n">SERVER_SETTINGS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_server_settings</span><span class="p">(</span>
    <span class="n">settings_update</span><span class="p">:</span> <span class="n">ServerSettingsUpdate</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServerSettingsResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the settings of the server.</span>

<span class="sd">    Args:</span>
<span class="sd">        settings_update: Settings update.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If trying to update admin properties without</span>
<span class="sd">            admin permissions.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="n">will_update_admin_properties</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span>
            <span class="n">settings_update</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
                <span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;onboarding_state&quot;</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span> <span class="ow">and</span> <span class="n">will_update_admin_properties</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Only admins can update server settings.&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_server_settings</span><span class="p">(</span><span class="n">settings_update</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.server_endpoints.version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">version</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get version of the server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String representing the version of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/server_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/version&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">version</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get version of the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        String representing the version of the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zenml</span><span class="o">.</span><span class="n">__version__</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.service_accounts_endpoints" class="doc doc-heading">
            <code>service_accounts_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for API keys.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.service_accounts_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.service_accounts_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.create_api_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_api_key</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="n">APIKeyRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates an API key for a service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service account for which to create the
API key.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyRequest (zenml.models.APIKeyRequest)" href="core-models.html#zenml.models.APIKeyRequest">APIKeyRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>API key to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyResponse (zenml.models.APIKeyResponse)" href="core-models.html#zenml.models.APIKeyResponse">APIKeyResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created API key.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the service account was created via external
authentication.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">API_KEYS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_api_key</span><span class="p">(</span>
    <span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="n">APIKeyRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an API key for a service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_id: ID of the service account for which to create the</span>
<span class="sd">            API key.</span>
<span class="sd">        api_key: API key to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created API key.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the service account was created via external</span>
<span class="sd">            authentication.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_api_key_wrapper</span><span class="p">(</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="n">APIKeyRequest</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_api_key</span><span class="p">(</span>
            <span class="n">service_account_id</span><span class="o">=</span><span class="n">service_account_id</span><span class="p">,</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">_raise_deprecated_pro_service_accounts</span><span class="p">()</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">service_account</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="s2">&quot;Service accounts created via external authentication cannot &quot;</span>
            <span class="s2">&quot;have associated API keys.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">create_api_key_wrapper</span><span class="p">,</span>
        <span class="n">surrogate_models</span><span class="o">=</span><span class="p">[</span><span class="n">service_account</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.create_service_account" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_service_account</span><span class="p">(</span><span class="n">service_account</span><span class="p">:</span> <span class="n">ServiceAccountRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceAccountResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceAccountRequest (zenml.models.ServiceAccountRequest)" href="core-models.html#zenml.models.ServiceAccountRequest">ServiceAccountRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Service account to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceAccountResponse (zenml.models.ServiceAccountResponse)" href="core-models.html#zenml.models.ServiceAccountResponse">ServiceAccountResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created service account.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_service_account</span><span class="p">(</span>
    <span class="n">service_account</span><span class="p">:</span> <span class="n">ServiceAccountRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceAccountResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account: Service account to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created service account.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_raise_deprecated_pro_service_accounts</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">service_account</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_service_account</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.delete_api_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_api_key</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes an API key.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service account to which the API key
belongs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the API key to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">API_KEYS</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{api_key_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_api_key</span><span class="p">(</span>
    <span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes an API key.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_id: ID of the service account to which the API key</span>
<span class="sd">            belongs.</span>
<span class="sd">        api_key_name_or_id: Name or ID of the API key to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_api_key</span><span class="p">(</span>
        <span class="n">service_account_id</span><span class="o">=</span><span class="n">service_account_id</span><span class="p">,</span>
        <span class="n">api_key_name_or_id</span><span class="o">=</span><span class="n">api_key_name_or_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.delete_service_account" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_service_account</span><span class="p">(</span><span class="n">service_account_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete a specific service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the service account.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the service account was created via external
authentication.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_service_account</span><span class="p">(</span>
    <span class="n">service_account_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a specific service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_name_or_id: Name or ID of the service account.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the service account was created via external</span>
<span class="sd">            authentication.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span>
        <span class="n">service_account_name_or_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">service_account</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="s2">&quot;Service accounts created via external authentication cannot &quot;</span>
            <span class="s2">&quot;be deleted.&quot;</span>
        <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">DELETE</span><span class="p">)</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_service_account</span><span class="p">(</span><span class="n">service_account_name_or_id</span><span class="p">)</span>

    <span class="n">delete_model_resource</span><span class="p">(</span><span class="n">service_account</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.get_api_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_api_key</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested API key.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service account to which the API key
belongs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the API key to return.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyResponse (zenml.models.APIKeyResponse)" href="core-models.html#zenml.models.APIKeyResponse">APIKeyResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested API key.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">API_KEYS</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{api_key_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_api_key</span><span class="p">(</span>
    <span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested API key.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_id: ID of the service account to which the API key</span>
<span class="sd">            belongs.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        api_key_name_or_id: Name or ID of the API key to return.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested API key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span>
        <span class="n">service_account_id</span><span class="o">=</span><span class="n">service_account_id</span><span class="p">,</span>
        <span class="n">api_key_name_or_id</span><span class="o">=</span><span class="n">api_key_name_or_id</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">api_key</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.get_service_account" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceAccountResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns a specific service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the service account.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceAccountResponse (zenml.models.ServiceAccountResponse)" href="core-models.html#zenml.models.ServiceAccountResponse">ServiceAccountResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service account matching the given name or ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service_account</span><span class="p">(</span>
    <span class="n">service_account_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceAccountResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a specific service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_name_or_id: Name or ID of the service account.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The service account matching the given name or ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">service_account_name_or_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.list_api_keys" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_api_keys</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">filter_model</span><span class="p">:</span> <span class="n">APIKeyFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">APIKeyFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">APIKeyResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>List API keys associated with a service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service account to which the API keys
belong.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyFilter (zenml.models.APIKeyFilter)" href="core-models.html#zenml.models.APIKeyFilter">APIKeyFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="APIKeyFilter (zenml.models.APIKeyFilter)" href="core-models.html#zenml.models.APIKeyFilter">APIKeyFilter</a>))</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="APIKeyResponse (zenml.models.APIKeyResponse)" href="core-models.html#zenml.models.APIKeyResponse">APIKeyResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All API keys matching the filter and associated with the supplied</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="APIKeyResponse (zenml.models.APIKeyResponse)" href="core-models.html#zenml.models.APIKeyResponse">APIKeyResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>service account.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">API_KEYS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_api_keys</span><span class="p">(</span>
    <span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">APIKeyFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">APIKeyFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">APIKeyResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List API keys associated with a service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_id: ID of the service account to which the API keys</span>
<span class="sd">            belong.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering</span>

<span class="sd">    Returns:</span>
<span class="sd">        All API keys matching the filter and associated with the supplied</span>
<span class="sd">        service account.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_api_keys</span><span class="p">(</span>
        <span class="n">service_account_id</span><span class="o">=</span><span class="n">service_account_id</span><span class="p">,</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.list_service_accounts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_service_accounts</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">ServiceAccountFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceAccountFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ServiceAccountResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns a list of service accounts.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceAccountFilter (zenml.models.ServiceAccountFilter)" href="core-models.html#zenml.models.ServiceAccountFilter">ServiceAccountFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Model that takes care of filtering, sorting and
pagination.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ServiceAccountFilter (zenml.models.ServiceAccountFilter)" href="core-models.html#zenml.models.ServiceAccountFilter">ServiceAccountFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ServiceAccountResponse (zenml.models.ServiceAccountResponse)" href="core-models.html#zenml.models.ServiceAccountResponse">ServiceAccountResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of service accounts matching the filter.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_service_accounts</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">ServiceAccountFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceAccountFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ServiceAccountResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list of service accounts.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: Model that takes care of filtering, sorting and</span>
<span class="sd">            pagination.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of service accounts matching the filter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_ACCOUNT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_service_accounts</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.rotate_api_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rotate_api_key</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">rotate_request</span><span class="p">:</span> <span class="n">APIKeyRotateRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Rotate an API key.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service account to which the API key
belongs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the API key to rotate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rotate_request</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyRotateRequest (zenml.models.APIKeyRotateRequest)" href="core-models.html#zenml.models.APIKeyRotateRequest">APIKeyRotateRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>API key rotation request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyResponse (zenml.models.APIKeyResponse)" href="core-models.html#zenml.models.APIKeyResponse">APIKeyResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated API key.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the service account was created via external
authentication.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_id}</span><span class="s2">&quot;</span>
    <span class="o">+</span> <span class="n">API_KEYS</span>
    <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{api_key_name_or_id}</span><span class="s2">&quot;</span>
    <span class="o">+</span> <span class="n">API_KEY_ROTATE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">rotate_api_key</span><span class="p">(</span>
    <span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">rotate_request</span><span class="p">:</span> <span class="n">APIKeyRotateRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rotate an API key.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_id: ID of the service account to which the API key</span>
<span class="sd">            belongs.</span>
<span class="sd">        api_key_name_or_id: Name or ID of the API key to rotate.</span>
<span class="sd">        rotate_request: API key rotation request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated API key.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the service account was created via external</span>
<span class="sd">            authentication.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_raise_deprecated_pro_service_accounts</span><span class="p">()</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">service_account</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="s2">&quot;Service accounts created via external authentication cannot &quot;</span>
            <span class="s2">&quot;have associated API keys.&quot;</span>
        <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">rotate_api_key</span><span class="p">(</span>
        <span class="n">service_account_id</span><span class="o">=</span><span class="n">service_account_id</span><span class="p">,</span>
        <span class="n">api_key_name_or_id</span><span class="o">=</span><span class="n">api_key_name_or_id</span><span class="p">,</span>
        <span class="n">rotate_request</span><span class="o">=</span><span class="n">rotate_request</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.update_api_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_api_key</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">api_key_update</span><span class="p">:</span> <span class="n">APIKeyUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates an API key for a service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service account to which the API key
belongs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the API key to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyUpdate (zenml.models.APIKeyUpdate)" href="core-models.html#zenml.models.APIKeyUpdate">APIKeyUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>API key update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="APIKeyResponse (zenml.models.APIKeyResponse)" href="core-models.html#zenml.models.APIKeyResponse">APIKeyResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated API key.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the service account was created via external
authentication.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">API_KEYS</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{api_key_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_api_key</span><span class="p">(</span>
    <span class="n">service_account_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">api_key_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">api_key_update</span><span class="p">:</span> <span class="n">APIKeyUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">APIKeyResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates an API key for a service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_id: ID of the service account to which the API key</span>
<span class="sd">            belongs.</span>
<span class="sd">        api_key_name_or_id: Name or ID of the API key to update.</span>
<span class="sd">        api_key_update: API key update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated API key.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the service account was created via external</span>
<span class="sd">            authentication.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_raise_deprecated_pro_service_accounts</span><span class="p">()</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span><span class="n">service_account_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">service_account</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="s2">&quot;Service accounts created via external authentication cannot &quot;</span>
            <span class="s2">&quot;have associated API keys.&quot;</span>
        <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_api_key</span><span class="p">(</span>
        <span class="n">service_account_id</span><span class="o">=</span><span class="n">service_account_id</span><span class="p">,</span>
        <span class="n">api_key_name_or_id</span><span class="o">=</span><span class="n">api_key_name_or_id</span><span class="p">,</span>
        <span class="n">api_key_update</span><span class="o">=</span><span class="n">api_key_update</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_accounts_endpoints.update_service_account" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_service_account</span><span class="p">(</span><span class="n">service_account_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">service_account_update</span><span class="p">:</span> <span class="n">ServiceAccountUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceAccountResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a specific service account.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_account_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the service account.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>service_account_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceAccountUpdate (zenml.models.ServiceAccountUpdate)" href="core-models.html#zenml.models.ServiceAccountUpdate">ServiceAccountUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the service account to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceAccountResponse (zenml.models.ServiceAccountResponse)" href="core-models.html#zenml.models.ServiceAccountResponse">ServiceAccountResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated service account.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the service account was created via external
authentication.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_accounts_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_account_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_service_account</span><span class="p">(</span>
    <span class="n">service_account_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">service_account_update</span><span class="p">:</span> <span class="n">ServiceAccountUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceAccountResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a specific service account.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_account_name_or_id: Name or ID of the service account.</span>
<span class="sd">        service_account_update: the service account to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated service account.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the service account was created via external</span>
<span class="sd">            authentication.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_raise_deprecated_pro_service_accounts</span><span class="p">()</span>
    <span class="n">service_account</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_account</span><span class="p">(</span>
        <span class="n">service_account_name_or_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">service_account</span><span class="o">.</span><span class="n">external_user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="s2">&quot;Service accounts created via external authentication cannot &quot;</span>
            <span class="s2">&quot;be updated.&quot;</span>
        <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">service_account</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_service_account</span><span class="p">(</span>
        <span class="n">service_account_name_or_id</span><span class="p">,</span> <span class="n">service_account_update</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.service_connectors_endpoints" class="doc doc-heading">
            <code>service_connectors_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for service connectors.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.service_connectors_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.service_connectors_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.create_service_connector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_service_connector</span><span class="p">(</span><span class="n">connector</span><span class="p">:</span> <span class="n">ServiceConnectorRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a service connector.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorRequest (zenml.models.ServiceConnectorRequest)" href="core-models.html#zenml.models.ServiceConnectorRequest">ServiceConnectorRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Service connector to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResponse (zenml.models.ServiceConnectorResponse)" href="core-models.html#zenml.models.ServiceConnectorResponse">ServiceConnectorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created service connector.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SERVICE_CONNECTORS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;service_connectors&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_service_connector</span><span class="p">(</span>
    <span class="n">connector</span><span class="p">:</span> <span class="n">ServiceConnectorRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a service connector.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector: Service connector to register.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created service connector.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_service_connector</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.delete_service_connector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_service_connector</span><span class="p">(</span><span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a service connector.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service connector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{connector_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_service_connector</span><span class="p">(</span>
    <span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a service connector.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_id: ID of the service connector.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">connector_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_service_connector</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.get_resources_based_on_service_connector_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_resources_based_on_service_connector_info</span><span class="p">(</span><span class="n">connector_info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorInfo</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">connector_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResourcesInfo</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets the list of resources that a service connector can access.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_info</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ServiceConnectorInfo (zenml.models.ServiceConnectorInfo)" href="core-models.html#zenml.models.ServiceConnectorInfo">ServiceConnectorInfo</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service connector info.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>connector_uuid</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service connector uuid.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResourcesInfo (zenml.models.ServiceConnectorResourcesInfo)" href="core-models.html#zenml.models.ServiceConnectorResourcesInfo">ServiceConnectorResourcesInfo</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of resources that the service connector configuration has</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResourcesInfo (zenml.models.ServiceConnectorResourcesInfo)" href="core-models.html#zenml.models.ServiceConnectorResourcesInfo">ServiceConnectorResourcesInfo</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>access to and consumable from UI/CLI.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If both connector_info and connector_uuid are provided.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If neither connector_info nor connector_uuid are provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">SERVICE_CONNECTOR_FULL_STACK</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_resources_based_on_service_connector_info</span><span class="p">(</span>
    <span class="n">connector_info</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceConnectorInfo</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">connector_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResourcesInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the list of resources that a service connector can access.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_info: The service connector info.</span>
<span class="sd">        connector_uuid: The service connector uuid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The list of resources that the service connector configuration has</span>
<span class="sd">        access to and consumable from UI/CLI.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If both connector_info and connector_uuid are provided.</span>
<span class="sd">        ValueError: If neither connector_info nor connector_uuid are provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">connector_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">connector_uuid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Only one of connector_info or connector_uuid must be provided.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">connector_info</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">connector_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Either connector_info or connector_uuid must be provided.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">connector_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">connector_uuid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">connector_uuid</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">get_resources_options_from_resource_model_for_full_stack</span><span class="p">(</span>
        <span class="n">connector_details</span><span class="o">=</span><span class="n">connector_info</span> <span class="ow">or</span> <span class="n">connector_uuid</span>  <span class="c1"># type: ignore[arg-type]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.get_service_connector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service_connector</span><span class="p">(</span><span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">expand_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested service connector.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service connector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expand_secrets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to expand secrets or not.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResponse (zenml.models.ServiceConnectorResponse)" href="core-models.html#zenml.models.ServiceConnectorResponse">ServiceConnectorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested service connector.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{connector_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service_connector</span><span class="p">(</span>
    <span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">expand_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested service connector.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_id: ID of the service connector.</span>
<span class="sd">        expand_secrets: Whether to expand secrets or not.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested service connector.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connector</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span>
        <span class="n">connector_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span> <span class="n">expand_secrets</span><span class="o">=</span><span class="n">expand_secrets</span>
    <span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">connector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">expand_secrets</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">has_permissions_for_model</span><span class="p">(</span>
        <span class="n">connector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ_SECRET_VALUE</span>
    <span class="p">):</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">remove_secrets</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">connector</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.get_service_connector_client" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service_connector_client</span><span class="p">(</span><span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a service connector client for a service connector and given resource.</p>
<p>This requires the service connector implementation to be installed
on the ZenML server, otherwise a 501 Not Implemented error will be
returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service connector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of the resource to list.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource to list.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResponse (zenml.models.ServiceConnectorResponse)" href="core-models.html#zenml.models.ServiceConnectorResponse">ServiceConnectorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A service connector client that can be used to access the given</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResponse (zenml.models.ServiceConnectorResponse)" href="core-models.html#zenml.models.ServiceConnectorResponse">ServiceConnectorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>resource.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{connector_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SERVICE_CONNECTOR_CLIENT</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service_connector_client</span><span class="p">(</span>
    <span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a service connector client for a service connector and given resource.</span>

<span class="sd">    This requires the service connector implementation to be installed</span>
<span class="sd">    on the ZenML server, otherwise a 501 Not Implemented error will be</span>
<span class="sd">    returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_id: ID of the service connector.</span>
<span class="sd">        resource_type: Type of the resource to list.</span>
<span class="sd">        resource_id: ID of the resource to list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A service connector client that can be used to access the given</span>
<span class="sd">        resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connector</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span><span class="n">connector_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector_client</span><span class="p">(</span>
        <span class="n">service_connector_id</span><span class="o">=</span><span class="n">connector_id</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.get_service_connector_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service_connector_type</span><span class="p">(</span><span class="n">connector_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorTypeModel</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested service connector type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the service connector type identifier.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorTypeModel (zenml.models.ServiceConnectorTypeModel)" href="core-models.html#zenml.models.ServiceConnectorTypeModel">ServiceConnectorTypeModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested service connector type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@types_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{connector_type}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service_connector_type</span><span class="p">(</span>
    <span class="n">connector_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorTypeModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested service connector type.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_type: the service connector type identifier.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested service connector type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector_type</span><span class="p">(</span><span class="n">connector_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.list_service_connector_resources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_service_connector_resources</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">ServiceConnectorFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceConnectorFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ServiceConnectorResourcesModel</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>List resources that can be accessed by service connectors.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorFilter (zenml.models.ServiceConnectorFilter)" href="core-models.html#zenml.models.ServiceConnectorFilter">ServiceConnectorFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter model to use when fetching service
connectors.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ServiceConnectorFilter (zenml.models.ServiceConnectorFilter)" href="core-models.html#zenml.models.ServiceConnectorFilter">ServiceConnectorFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="ServiceConnectorResourcesModel (zenml.models.ServiceConnectorResourcesModel)" href="core-models.html#zenml.models.ServiceConnectorResourcesModel">ServiceConnectorResourcesModel</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching list of resources that available service</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="ServiceConnectorResourcesModel (zenml.models.ServiceConnectorResourcesModel)" href="core-models.html#zenml.models.ServiceConnectorResourcesModel">ServiceConnectorResourcesModel</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>connectors have access to.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">SERVICE_CONNECTOR_RESOURCES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SERVICE_CONNECTOR_RESOURCES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;service_connectors&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_service_connector_resources</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">ServiceConnectorFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceConnectorFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ServiceConnectorResourcesModel</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List resources that can be accessed by service connectors.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: The filter model to use when fetching service</span>
<span class="sd">            connectors.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The matching list of resources that available service</span>
<span class="sd">        connectors have access to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span>
    <span class="p">)</span>
    <span class="n">filter_model</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">allowed_ids</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_service_connector_resources</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.list_service_connector_types" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_service_connector_types</span><span class="p">(</span><span class="n">connector_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ServiceConnectorTypeModel</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a list of service connector types.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter by connector type.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter by resource type.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_method</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter by auth method.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="ServiceConnectorTypeModel (zenml.models.ServiceConnectorTypeModel)" href="core-models.html#zenml.models.ServiceConnectorTypeModel">ServiceConnectorTypeModel</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of service connector types.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@types_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_service_connector_types</span><span class="p">(</span>
    <span class="n">connector_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ServiceConnectorTypeModel</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a list of service connector types.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_type: Filter by connector type.</span>
<span class="sd">        resource_type: Filter by resource type.</span>
<span class="sd">        auth_method: Filter by auth method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of service connector types.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connector_types</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_service_connector_types</span><span class="p">(</span>
        <span class="n">connector_type</span><span class="o">=</span><span class="n">connector_type</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
        <span class="n">auth_method</span><span class="o">=</span><span class="n">auth_method</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">connector_types</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.list_service_connectors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_service_connectors</span><span class="p">(</span><span class="n">connector_filter_model</span><span class="p">:</span> <span class="n">ServiceConnectorFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceConnectorFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">expand_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ServiceConnectorResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a list of all service connectors.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorFilter (zenml.models.ServiceConnectorFilter)" href="core-models.html#zenml.models.ServiceConnectorFilter">ServiceConnectorFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ServiceConnectorFilter (zenml.models.ServiceConnectorFilter)" href="core-models.html#zenml.models.ServiceConnectorFilter">ServiceConnectorFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expand_secrets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to expand secrets or not.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ServiceConnectorResponse (zenml.models.ServiceConnectorResponse)" href="core-models.html#zenml.models.ServiceConnectorResponse">ServiceConnectorResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page with list of service connectors matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SERVICE_CONNECTORS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;service_connectors&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_service_connectors</span><span class="p">(</span>
    <span class="n">connector_filter_model</span><span class="p">:</span> <span class="n">ServiceConnectorFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceConnectorFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">expand_secrets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ServiceConnectorResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a list of all service connectors.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        expand_secrets: Whether to expand secrets or not.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page with list of service connectors matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connectors</span> <span class="o">=</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">connector_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_service_connectors</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
        <span class="n">expand_secrets</span><span class="o">=</span><span class="n">expand_secrets</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">expand_secrets</span><span class="p">:</span>
        <span class="c1"># This will be `None` if the user is allowed to read secret values</span>
        <span class="c1"># for all service connectors</span>
        <span class="n">allowed_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ_SECRET_VALUE</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">connector</span> <span class="ow">in</span> <span class="n">connectors</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">allowed_ids</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">is_owned_by_authenticated_user</span><span class="p">(</span>
                <span class="n">connector</span>
            <span class="p">):</span>
                <span class="c1"># The user either owns the connector or has permissions to</span>
                <span class="c1"># read secret values for all service connectors</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">connector</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_ids</span><span class="p">:</span>
                <span class="c1"># The user is not allowed to read secret values for this</span>
                <span class="c1"># connector. We remove the secrets from the connector.</span>
                <span class="n">connector</span><span class="o">.</span><span class="n">remove_secrets</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">connectors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.update_service_connector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_service_connector</span><span class="p">(</span><span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">connector_update</span><span class="p">:</span> <span class="n">ServiceConnectorUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a service connector.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the service connector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>connector_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorUpdate (zenml.models.ServiceConnectorUpdate)" href="core-models.html#zenml.models.ServiceConnectorUpdate">ServiceConnectorUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Service connector to use to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResponse (zenml.models.ServiceConnectorResponse)" href="core-models.html#zenml.models.ServiceConnectorResponse">ServiceConnectorResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated service connector.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{connector_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_service_connector</span><span class="p">(</span>
    <span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">connector_update</span><span class="p">:</span> <span class="n">ServiceConnectorUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a service connector.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_id: ID of the service connector.</span>
<span class="sd">        connector_update: Service connector to use to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Updated service connector.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">connector_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">connector_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_service_connector</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.validate_and_verify_service_connector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_and_verify_service_connector</span><span class="p">(</span><span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">list_resources</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResourcesModel</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verifies if a service connector instance has access to one or more resources.</p>
<p>This requires the service connector implementation to be installed
on the ZenML server, otherwise a 501 Not Implemented error will be
returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the service connector to verify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of resource to verify access to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the resource to verify access to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>list_resources</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the list of all resources accessible
through the service connector and matching the supplied resource
type and ID are returned.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResourcesModel (zenml.models.ServiceConnectorResourcesModel)" href="core-models.html#zenml.models.ServiceConnectorResourcesModel">ServiceConnectorResourcesModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of resources that the service connector has access to, scoped</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResourcesModel (zenml.models.ServiceConnectorResourcesModel)" href="core-models.html#zenml.models.ServiceConnectorResourcesModel">ServiceConnectorResourcesModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>to the supplied resource type and ID, if provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{connector_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SERVICE_CONNECTOR_VERIFY</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_and_verify_service_connector</span><span class="p">(</span>
    <span class="n">connector_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">list_resources</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResourcesModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if a service connector instance has access to one or more resources.</span>

<span class="sd">    This requires the service connector implementation to be installed</span>
<span class="sd">    on the ZenML server, otherwise a 501 Not Implemented error will be</span>
<span class="sd">    returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector_id: The ID of the service connector to verify.</span>
<span class="sd">        resource_type: The type of resource to verify access to.</span>
<span class="sd">        resource_id: The ID of the resource to verify access to.</span>
<span class="sd">        list_resources: If True, the list of all resources accessible</span>
<span class="sd">            through the service connector and matching the supplied resource</span>
<span class="sd">            type and ID are returned.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The list of resources that the service connector has access to, scoped</span>
<span class="sd">        to the supplied resource type and ID, if provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connector</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span><span class="n">connector_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">verify_service_connector</span><span class="p">(</span>
        <span class="n">service_connector_id</span><span class="o">=</span><span class="n">connector_id</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span>
        <span class="n">list_resources</span><span class="o">=</span><span class="n">list_resources</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_connectors_endpoints.validate_and_verify_service_connector_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_and_verify_service_connector_config</span><span class="p">(</span><span class="n">connector</span><span class="p">:</span> <span class="n">ServiceConnectorRequest</span><span class="p">,</span> <span class="n">list_resources</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResourcesModel</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Verifies if a service connector configuration has access to resources.</p>
<p>This requires the service connector implementation to be installed
on the ZenML server, otherwise a 501 Not Implemented error will be
returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connector</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorRequest (zenml.models.ServiceConnectorRequest)" href="core-models.html#zenml.models.ServiceConnectorRequest">ServiceConnectorRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service connector configuration to verify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>list_resources</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the list of all resources accessible
through the service connector is returned.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResourcesModel (zenml.models.ServiceConnectorResourcesModel)" href="core-models.html#zenml.models.ServiceConnectorResourcesModel">ServiceConnectorResourcesModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of resources that the service connector configuration has</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceConnectorResourcesModel (zenml.models.ServiceConnectorResourcesModel)" href="core-models.html#zenml.models.ServiceConnectorResourcesModel">ServiceConnectorResourcesModel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>access to.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_connectors_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">SERVICE_CONNECTOR_VERIFY</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_and_verify_service_connector_config</span><span class="p">(</span>
    <span class="n">connector</span><span class="p">:</span> <span class="n">ServiceConnectorRequest</span><span class="p">,</span>
    <span class="n">list_resources</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceConnectorResourcesModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if a service connector configuration has access to resources.</span>

<span class="sd">    This requires the service connector implementation to be installed</span>
<span class="sd">    on the ZenML server, otherwise a 501 Not Implemented error will be</span>
<span class="sd">    returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        connector: The service connector configuration to verify.</span>
<span class="sd">        list_resources: If True, the list of all resources accessible</span>
<span class="sd">            through the service connector is returned.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The list of resources that the service connector configuration has</span>
<span class="sd">        access to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">verify_service_connector_config</span><span class="p">(</span>
        <span class="n">service_connector</span><span class="o">=</span><span class="n">connector</span><span class="p">,</span>
        <span class="n">list_resources</span><span class="o">=</span><span class="n">list_resources</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.service_endpoints" class="doc doc-heading">
            <code>service_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for services.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.service_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.service_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_endpoints.create_service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_service</span><span class="p">(</span><span class="n">service</span><span class="p">:</span> <span class="n">ServiceRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a new service.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceRequest (zenml.models.v2.core.service.ServiceRequest)" href="core-models.html#zenml.models.v2.core.service.ServiceRequest">ServiceRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The service to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceResponse (zenml.models.ServiceResponse)" href="core-models.html#zenml.models.ServiceResponse">ServiceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created service.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">SERVICES</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;services&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_service</span><span class="p">(</span>
    <span class="n">service</span><span class="p">:</span> <span class="n">ServiceRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new service.</span>

<span class="sd">    Args:</span>
<span class="sd">        service: The service to create.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created service.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_name_or_id</span><span class="p">:</span>
        <span class="n">project</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">)</span>
        <span class="n">service</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_service</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_endpoints.delete_service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific service.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the service to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_service</span><span class="p">(</span>
    <span class="n">service_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific service.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_id: The ID of the service to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_service</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_endpoints.get_service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a specific service using its unique ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the service to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceResponse (zenml.models.ServiceResponse)" href="core-models.html#zenml.models.ServiceResponse">ServiceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific service object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_service</span><span class="p">(</span>
    <span class="n">service_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a specific service using its unique ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_id: The ID of the service to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific service object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_endpoints.list_services" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_services</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">ServiceFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ServiceResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Gets a page of service objects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceFilter (zenml.models.ServiceFilter)" href="core-models.html#zenml.models.ServiceFilter">ServiceFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ServiceFilter (zenml.models.ServiceFilter)" href="core-models.html#zenml.models.ServiceFilter">ServiceFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ServiceResponse (zenml.models.ServiceResponse)" href="core-models.html#zenml.models.ServiceResponse">ServiceResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page of service objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_services</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">ServiceFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ServiceFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ServiceResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a page of service objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page of service objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_services</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.service_endpoints.update_service" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_service</span><span class="p">(</span><span class="n">service_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">update</span><span class="p">:</span> <span class="n">ServiceUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ServiceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a service.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the service to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceUpdate (zenml.models.ServiceUpdate)" href="core-models.html#zenml.models.ServiceUpdate">ServiceUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model containing the attributes to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServiceResponse (zenml.models.ServiceResponse)" href="core-models.html#zenml.models.ServiceResponse">ServiceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated service object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/service_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{service_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_service</span><span class="p">(</span>
    <span class="n">service_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">update</span><span class="p">:</span> <span class="n">ServiceUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ServiceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a service.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_id: The ID of the service to update.</span>
<span class="sd">        update: The model containing the attributes to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated service object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">service_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_service</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.stack_components_endpoints" class="doc doc-heading">
            <code>stack_components_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for stack components.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.stack_components_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.stack_components_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_components_endpoints.create_stack_component" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_stack_component</span><span class="p">(</span><span class="n">component</span><span class="p">:</span> <span class="n">ComponentRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ComponentResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a stack component.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>component</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ComponentRequest (zenml.models.ComponentRequest)" href="core-models.html#zenml.models.ComponentRequest">ComponentRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack component to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ComponentResponse (zenml.models.ComponentResponse)" href="core-models.html#zenml.models.ComponentResponse">ComponentResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created stack component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_components_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STACK_COMPONENTS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stack_components&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_stack_component</span><span class="p">(</span>
    <span class="n">component</span><span class="p">:</span> <span class="n">ComponentRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComponentResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a stack component.</span>

<span class="sd">    Args:</span>
<span class="sd">        component: Stack component to register.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rbac_read_checks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">component</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
        <span class="n">service_connector</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span>
            <span class="n">component</span><span class="o">.</span><span class="n">connector</span>
        <span class="p">)</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">service_connector</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">component</span><span class="o">.</span><span class="n">secrets</span><span class="p">:</span>
        <span class="n">secrets</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">secrets</span>
        <span class="p">]</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span>
        <span class="n">component</span><span class="o">.</span><span class="n">secrets</span> <span class="o">=</span> <span class="p">[</span><span class="n">secret</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">secrets</span><span class="p">]</span>

    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">rbac_read_checks</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.stack.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_stack_component_config</span>

    <span class="n">validated_config</span> <span class="o">=</span> <span class="n">validate_stack_component_config</span><span class="p">(</span>
        <span class="n">configuration_dict</span><span class="o">=</span><span class="n">component</span><span class="o">.</span><span class="n">configuration</span><span class="p">,</span>
        <span class="n">flavor</span><span class="o">=</span><span class="n">component</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
        <span class="n">component_type</span><span class="o">=</span><span class="n">component</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
        <span class="n">zen_store</span><span class="o">=</span><span class="n">zen_store</span><span class="p">(),</span>
        <span class="c1"># We allow custom flavors to fail import on the server side.</span>
        <span class="n">validate_custom_flavors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">validated_config</span><span class="p">:</span>
        <span class="n">component</span><span class="o">.</span><span class="n">configuration</span> <span class="o">=</span> <span class="n">validated_config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">component</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_stack_component</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_components_endpoints.deregister_stack_component" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deregister_stack_component</span><span class="p">(</span><span class="n">component_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a stack component.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>component_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the stack component.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_components_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{component_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">deregister_stack_component</span><span class="p">(</span>
    <span class="n">component_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a stack component.</span>

<span class="sd">    Args:</span>
<span class="sd">        component_id: ID of the stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">component_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack_component</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_stack_component</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_components_endpoints.get_stack_component" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stack_component</span><span class="p">(</span><span class="n">component_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ComponentResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested stack component.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>component_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the stack component.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ComponentResponse (zenml.models.ComponentResponse)" href="core-models.html#zenml.models.ComponentResponse">ComponentResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested stack component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_components_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{component_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stack_component</span><span class="p">(</span>
    <span class="n">component_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComponentResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested stack component.</span>

<span class="sd">    Args:</span>
<span class="sd">        component_id: ID of the stack component.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">component_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack_component</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_components_endpoints.get_stack_component_types" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stack_component_types</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a list of all stack component types.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stack components.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_components_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@types_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stack_component_types</span><span class="p">(</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a list of all stack component types.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of stack components.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">StackComponentType</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_components_endpoints.list_stack_components" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_stack_components</span><span class="p">(</span><span class="n">component_filter_model</span><span class="p">:</span> <span class="n">ComponentFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">ComponentFilter</span><span class="p">)),</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ComponentResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a list of all stack components.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>component_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ComponentFilter (zenml.models.ComponentFilter)" href="core-models.html#zenml.models.ComponentFilter">ComponentFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="ComponentFilter (zenml.models.ComponentFilter)" href="core-models.html#zenml.models.ComponentFilter">ComponentFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="ComponentResponse (zenml.models.ComponentResponse)" href="core-models.html#zenml.models.ComponentResponse">ComponentResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stack components matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_components_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STACK_COMPONENTS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stack_components&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_stack_components</span><span class="p">(</span>
    <span class="n">component_filter_model</span><span class="p">:</span> <span class="n">ComponentFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">ComponentFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">ComponentResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a list of all stack components.</span>

<span class="sd">    Args:</span>
<span class="sd">        component_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of stack components matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">component_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_stack_components</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_components_endpoints.update_stack_component" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_stack_component</span><span class="p">(</span><span class="n">component_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">component_update</span><span class="p">:</span> <span class="n">ComponentUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ComponentResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a stack component.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>component_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the stack component.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>component_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ComponentUpdate (zenml.models.ComponentUpdate)" href="core-models.html#zenml.models.ComponentUpdate">ComponentUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack component to use to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ComponentResponse (zenml.models.ComponentResponse)" href="core-models.html#zenml.models.ComponentResponse">ComponentResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated stack component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_components_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{component_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_stack_component</span><span class="p">(</span>
    <span class="n">component_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">component_update</span><span class="p">:</span> <span class="n">ComponentUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComponentResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a stack component.</span>

<span class="sd">    Args:</span>
<span class="sd">        component_id: ID of the stack component.</span>
<span class="sd">        component_update: Stack component to use to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Updated stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">component_update</span><span class="o">.</span><span class="n">configuration</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.stack.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_stack_component_config</span>

        <span class="n">existing_component</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack_component</span><span class="p">(</span><span class="n">component_id</span><span class="p">)</span>
        <span class="n">validated_config</span> <span class="o">=</span> <span class="n">validate_stack_component_config</span><span class="p">(</span>
            <span class="n">configuration_dict</span><span class="o">=</span><span class="n">component_update</span><span class="o">.</span><span class="n">configuration</span><span class="p">,</span>
            <span class="n">flavor</span><span class="o">=</span><span class="n">existing_component</span><span class="o">.</span><span class="n">flavor_name</span><span class="p">,</span>
            <span class="n">component_type</span><span class="o">=</span><span class="n">existing_component</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="n">zen_store</span><span class="o">=</span><span class="n">zen_store</span><span class="p">(),</span>
            <span class="c1"># We allow custom flavors to fail import on the server side.</span>
            <span class="n">validate_custom_flavors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">validated_config</span><span class="p">:</span>
            <span class="n">component_update</span><span class="o">.</span><span class="n">configuration</span> <span class="o">=</span> <span class="n">validated_config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
                <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>

    <span class="n">rbac_read_checks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">component_update</span><span class="o">.</span><span class="n">connector</span><span class="p">:</span>
        <span class="n">service_connector</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span>
            <span class="n">component_update</span><span class="o">.</span><span class="n">connector</span>
        <span class="p">)</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">service_connector</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">component_update</span><span class="o">.</span><span class="n">add_secrets</span><span class="p">:</span>
        <span class="n">secrets</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">component_update</span><span class="o">.</span><span class="n">add_secrets</span>
        <span class="p">]</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span>
        <span class="n">component_update</span><span class="o">.</span><span class="n">add_secrets</span> <span class="o">=</span> <span class="p">[</span><span class="n">secret</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">secrets</span><span class="p">]</span>

    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">rbac_read_checks</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">component_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">component_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack_component</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_stack_component</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.stack_deployment_endpoints" class="doc doc-heading">
            <code>stack_deployment_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for stack deployments.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.stack_deployment_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.stack_deployment_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_deployment_endpoints.get_deployed_stack" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_deployed_stack</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span> <span class="n">StackDeploymentProvider</span><span class="p">,</span> <span class="n">stack_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">terraform</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DeployedStack</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Return a matching ZenML stack that was deployed and registered.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>provider</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackDeploymentProvider (zenml.enums.StackDeploymentProvider)" href="core-enums.html#zenml.enums.StackDeploymentProvider">StackDeploymentProvider</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stack deployment provider.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stack_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the stack.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The location where the stack should be deployed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_start</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="datetime.datetime">datetime</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date when the deployment started.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>terraform</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the stack was deployed using Terraform.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="DeployedStack (zenml.models.DeployedStack)" href="core-models.html#zenml.models.DeployedStack">DeployedStack</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML stack that was deployed and registered or None if the stack</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="DeployedStack (zenml.models.DeployedStack)" href="core-models.html#zenml.models.DeployedStack">DeployedStack</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>was not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">STACK</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_deployed_stack</span><span class="p">(</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">StackDeploymentProvider</span><span class="p">,</span>
    <span class="n">stack_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">date_start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">terraform</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DeployedStack</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a matching ZenML stack that was deployed and registered.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider: The stack deployment provider.</span>
<span class="sd">        stack_name: The name of the stack.</span>
<span class="sd">        location: The location where the stack should be deployed.</span>
<span class="sd">        date_start: The date when the deployment started.</span>
<span class="sd">        terraform: Whether the stack was deployed using Terraform.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML stack that was deployed and registered or None if the stack</span>
<span class="sd">        was not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stack_deployment_class</span> <span class="o">=</span> <span class="n">get_stack_deployment_class</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stack_deployment_class</span><span class="p">(</span>
        <span class="n">terraform</span><span class="o">=</span><span class="n">terraform</span><span class="p">,</span>
        <span class="n">stack_name</span><span class="o">=</span><span class="n">stack_name</span><span class="p">,</span>
        <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
        <span class="c1"># These fields are not needed for this operation</span>
        <span class="n">zenml_server_url</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">zenml_server_api_token</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">get_stack</span><span class="p">(</span><span class="n">date_start</span><span class="o">=</span><span class="n">date_start</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_deployment_endpoints.get_stack_deployment_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stack_deployment_config</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n">StackDeploymentProvider</span><span class="p">,</span> <span class="n">stack_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">terraform</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StackDeploymentConfig</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Return the URL to deploy the ZenML stack to the specified cloud provider.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The FastAPI request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>provider</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackDeploymentProvider (zenml.enums.StackDeploymentProvider)" href="core-enums.html#zenml.enums.StackDeploymentProvider">StackDeploymentProvider</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stack deployment provider.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stack_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the stack.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The location where the stack should be deployed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>terraform</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the stack should be deployed using Terraform.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackDeploymentConfig (zenml.models.StackDeploymentConfig)" href="core-models.html#zenml.models.StackDeploymentConfig">StackDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The cloud provider console URL where the stack will be deployed and</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackDeploymentConfig (zenml.models.StackDeploymentConfig)" href="core-models.html#zenml.models.StackDeploymentConfig">StackDeploymentConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the configuration for the stack deployment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">CONFIG</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stack_deployment_config</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">StackDeploymentProvider</span><span class="p">,</span>
    <span class="n">stack_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">terraform</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackDeploymentConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the URL to deploy the ZenML stack to the specified cloud provider.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The FastAPI request object.</span>
<span class="sd">        provider: The stack deployment provider.</span>
<span class="sd">        stack_name: The name of the stack.</span>
<span class="sd">        location: The location where the stack should be deployed.</span>
<span class="sd">        terraform: Whether the stack should be deployed using Terraform.</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The cloud provider console URL where the stack will be deployed and</span>
<span class="sd">        the configuration for the stack deployment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permission</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span>
    <span class="p">)</span>
    <span class="n">verify_permission</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">verify_permission</span><span class="p">(</span><span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>

    <span class="n">stack_deployment_class</span> <span class="o">=</span> <span class="n">get_stack_deployment_class</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">server_url</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">server_url</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Get the base server URL used to call this FastAPI endpoint</span>
        <span class="n">url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
            <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s2">&quot;https&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="n">token</span> <span class="o">=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">access_token</span>
    <span class="k">assert</span> <span class="n">token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="c1"># A new API token is generated for the stack deployment</span>
    <span class="n">api_token</span> <span class="o">=</span> <span class="n">generate_access_token</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">token</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">expires_in</span><span class="o">=</span><span class="n">STACK_DEPLOYMENT_API_TOKEN_EXPIRATION</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">access_token</span>

    <span class="k">return</span> <span class="n">stack_deployment_class</span><span class="p">(</span>
        <span class="n">terraform</span><span class="o">=</span><span class="n">terraform</span><span class="p">,</span>
        <span class="n">stack_name</span><span class="o">=</span><span class="n">stack_name</span><span class="p">,</span>
        <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
        <span class="n">zenml_server_url</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span>
        <span class="n">zenml_server_api_token</span><span class="o">=</span><span class="n">api_token</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">get_deployment_config</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stack_deployment_endpoints.get_stack_deployment_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stack_deployment_info</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span> <span class="n">StackDeploymentProvider</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StackDeploymentInfo</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get information about a stack deployment provider.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>provider</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackDeploymentProvider (zenml.enums.StackDeploymentProvider)" href="core-enums.html#zenml.enums.StackDeploymentProvider">StackDeploymentProvider</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stack deployment provider.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackDeploymentInfo (zenml.models.StackDeploymentInfo)" href="core-models.html#zenml.models.StackDeploymentInfo">StackDeploymentInfo</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Information about the stack deployment provider.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stack_deployment_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">INFO</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stack_deployment_info</span><span class="p">(</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">StackDeploymentProvider</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackDeploymentInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get information about a stack deployment provider.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider: The stack deployment provider.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Information about the stack deployment provider.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stack_deployment_class</span> <span class="o">=</span> <span class="n">get_stack_deployment_class</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stack_deployment_class</span><span class="o">.</span><span class="n">get_deployment_info</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.stacks_endpoints" class="doc doc-heading">
            <code>stacks_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for stacks.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.stacks_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.stacks_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stacks_endpoints.create_stack" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_stack</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="n">StackRequest</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StackResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a stack.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stack</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackRequest (zenml.models.StackRequest)" href="core-models.html#zenml.models.StackRequest">StackRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackResponse (zenml.models.StackResponse)" href="core-models.html#zenml.models.StackResponse">StackResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created stack.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stacks_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STACKS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stacks&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_stack</span><span class="p">(</span>
    <span class="n">stack</span><span class="p">:</span> <span class="n">StackRequest</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a stack.</span>

<span class="sd">    Args:</span>
<span class="sd">        stack: Stack to register.</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created stack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rbac_read_checks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Check the service connector creation</span>
    <span class="n">is_connector_create_needed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">connector_id_or_info</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">service_connectors</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connector_id_or_info</span><span class="p">,</span> <span class="n">UUID</span><span class="p">):</span>
            <span class="n">service_connector</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_connector</span><span class="p">(</span>
                <span class="n">connector_id_or_info</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">service_connector</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">is_connector_create_needed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Check the component creation</span>
    <span class="k">if</span> <span class="n">is_connector_create_needed</span><span class="p">:</span>
        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">SERVICE_CONNECTOR</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span>
        <span class="p">)</span>
    <span class="n">is_component_create_needed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">components</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">component_id_or_info</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component_id_or_info</span><span class="p">,</span> <span class="n">UUID</span><span class="p">):</span>
                <span class="n">component</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack_component</span><span class="p">(</span>
                    <span class="n">component_id_or_info</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">)</span>
                <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">is_component_create_needed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">is_component_create_needed</span><span class="p">:</span>
        <span class="n">verify_permission</span><span class="p">(</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK_COMPONENT</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">stack</span><span class="o">.</span><span class="n">secrets</span><span class="p">:</span>
        <span class="n">secrets</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">stack</span><span class="o">.</span><span class="n">secrets</span>
        <span class="p">]</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">secrets</span> <span class="o">=</span> <span class="p">[</span><span class="n">secret</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">secrets</span><span class="p">]</span>

    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">rbac_read_checks</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="c1"># Check the stack creation</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">stack</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">CREATE</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_stack</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stacks_endpoints.delete_stack" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_stack</span><span class="p">(</span><span class="n">stack_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a stack.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stack_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the stack.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stacks_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{stack_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_stack</span><span class="p">(</span>
    <span class="n">stack_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a stack.</span>

<span class="sd">    Args:</span>
<span class="sd">        stack_id: Name of the stack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">stack_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_stack</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stacks_endpoints.get_stack" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stack</span><span class="p">(</span><span class="n">stack_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StackResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested stack.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stack_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the stack.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackResponse (zenml.models.StackResponse)" href="core-models.html#zenml.models.StackResponse">StackResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested stack.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stacks_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{stack_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_stack</span><span class="p">(</span>
    <span class="n">stack_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested stack.</span>

<span class="sd">    Args:</span>
<span class="sd">        stack_id: ID of the stack.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested stack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">stack_id</span><span class="p">,</span> <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stacks_endpoints.list_stacks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_stacks</span><span class="p">(</span><span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stack_filter_model</span><span class="p">:</span> <span class="n">StackFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">StackFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">StackResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns all stacks.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional name or ID of the project to filter by.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stack_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackFilter (zenml.models.StackFilter)" href="core-models.html#zenml.models.StackFilter">StackFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="StackFilter (zenml.models.StackFilter)" href="core-models.html#zenml.models.StackFilter">StackFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="StackResponse (zenml.models.StackResponse)" href="core-models.html#zenml.models.StackResponse">StackResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All stacks matching the filter criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stacks_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="c1"># TODO: the workspace scoped endpoint is only kept for dashboard compatibility</span>
<span class="c1"># and can be removed after the migration</span>
<span class="nd">@workspace_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{project_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STACKS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stacks&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_stacks</span><span class="p">(</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stack_filter_model</span><span class="p">:</span> <span class="n">StackFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">StackFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">StackResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all stacks.</span>

<span class="sd">    Args:</span>
<span class="sd">        project_name_or_id: Optional name or ID of the project to filter by.</span>
<span class="sd">        stack_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All stacks matching the filter criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">stack_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">STACK</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_stacks</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.stacks_endpoints.update_stack" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_stack</span><span class="p">(</span><span class="n">stack_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">stack_update</span><span class="p">:</span> <span class="n">StackUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StackResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a stack.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>stack_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the stack.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stack_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackUpdate (zenml.models.StackUpdate)" href="core-models.html#zenml.models.StackUpdate">StackUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StackResponse (zenml.models.StackResponse)" href="core-models.html#zenml.models.StackResponse">StackResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated stack.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/stacks_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{stack_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_stack</span><span class="p">(</span>
    <span class="n">stack_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">stack_update</span><span class="p">:</span> <span class="n">StackUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a stack.</span>

<span class="sd">    Args:</span>
<span class="sd">        stack_id: Name of the stack.</span>
<span class="sd">        stack_update: Stack to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated stack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rbac_read_checks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">stack_update</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack_component</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ids</span> <span class="ow">in</span> <span class="n">stack_update</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ids</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">stack_update</span><span class="o">.</span><span class="n">add_secrets</span><span class="p">:</span>
        <span class="n">secrets</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_secret_by_name_or_id</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">stack_update</span><span class="o">.</span><span class="n">add_secrets</span>
        <span class="p">]</span>
        <span class="n">rbac_read_checks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span>
        <span class="n">stack_update</span><span class="o">.</span><span class="n">add_secrets</span> <span class="o">=</span> <span class="p">[</span><span class="n">secret</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">secret</span> <span class="ow">in</span> <span class="n">secrets</span><span class="p">]</span>

    <span class="n">batch_verify_permissions_for_models</span><span class="p">(</span><span class="n">rbac_read_checks</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">stack_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">stack_update</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_stack</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_stack</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.steps_endpoints" class="doc doc-heading">
            <code>steps_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for steps (and artifacts) of pipeline runs.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.steps_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.steps_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.create_run_step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_run_step</span><span class="p">(</span><span class="n">step</span><span class="p">:</span> <span class="n">StepRunRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StepRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a run step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunRequest (zenml.models.StepRunRequest)" href="core-models.html#zenml.models.StepRunRequest">StepRunRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The run step to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunResponse (zenml.models.StepRunResponse)" href="core-models.html#zenml.models.StepRunResponse">StepRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created run step.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_run_step</span><span class="p">(</span>
    <span class="n">step</span><span class="p">:</span> <span class="n">StepRunRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a run step.</span>

<span class="sd">    Args:</span>
<span class="sd">        step: The run step to create.</span>
<span class="sd">        _: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created run step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">step</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_run_step</span><span class="p">,</span>
        <span class="n">surrogate_models</span><span class="o">=</span><span class="p">[</span><span class="n">pipeline_run</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.get_step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StepRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get one specific step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the step to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunResponse (zenml.models.StepRunResponse)" href="core-models.html#zenml.models.StepRunResponse">StepRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The step.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{step_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_step</span><span class="p">(</span>
    <span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get one specific step.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_id: ID of the step to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># We always fetch the step hydrated because we need the pipeline_run_id</span>
    <span class="c1"># for the permission checks. If the user requested an unhydrated response,</span>
    <span class="c1"># we later remove the metadata</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">pipeline_run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">hydrate</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">step</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.get_step_configuration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_step_configuration</span><span class="p">(</span><span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the configuration of a specific step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the step to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The step configuration.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{step_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STEP_CONFIGURATION</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_step_configuration</span><span class="p">(</span>
    <span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the configuration of a specific step.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_id: ID of the step to get.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The step configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">pipeline_run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">step</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.get_step_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_step_logs</span><span class="p">(</span><span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get log entries for a step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the step for which to get the logs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="LogEntry (zenml.logging.step_logging.LogEntry)" href="core-logging.html#zenml.logging.step_logging.LogEntry">LogEntry</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of log entries.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no logs are available for this step.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{step_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">LOGS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">400</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_step_logs</span><span class="p">(</span>
    <span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get log entries for a step.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_id: ID of the step for which to get the logs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of log entries.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If no logs are available for this step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">pipeline_run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="n">store</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span>

    <span class="c1"># Verify that logs are available for this step</span>
    <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">logs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No logs available for this step.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fetch_log_records</span><span class="p">(</span>
        <span class="n">zen_store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span>
        <span class="n">artifact_store_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">logs</span><span class="o">.</span><span class="n">artifact_store_id</span><span class="p">,</span>
        <span class="n">logs_uri</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">logs</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.get_step_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_step_status</span><span class="p">(</span><span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">ExecutionStatus</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get the status of a specific step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the step for which to get the status.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ExecutionStatus (zenml.enums.ExecutionStatus)" href="core-enums.html#zenml.enums.ExecutionStatus">ExecutionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The status of the step.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{step_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">STATUS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_step_status</span><span class="p">(</span>
    <span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExecutionStatus</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the status of a specific step.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_id: ID of the step for which to get the status.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The status of the step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">pipeline_run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">step</span><span class="o">.</span><span class="n">status</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.list_run_steps" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_run_steps</span><span class="p">(</span><span class="n">step_run_filter_model</span><span class="p">:</span> <span class="n">StepRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">StepRunFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">StepRunResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get run steps according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_run_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunFilter (zenml.models.StepRunFilter)" href="core-models.html#zenml.models.StepRunFilter">StepRunFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="StepRunFilter (zenml.models.StepRunFilter)" href="core-models.html#zenml.models.StepRunFilter">StepRunFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="StepRunResponse (zenml.models.StepRunResponse)" href="core-models.html#zenml.models.StepRunResponse">StepRunResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The run steps according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_run_steps</span><span class="p">(</span>
    <span class="n">step_run_filter_model</span><span class="p">:</span> <span class="n">StepRunFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">StepRunFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">StepRunResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get run steps according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_run_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run steps according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># A project scoped request must always be scoped to a specific</span>
    <span class="c1"># project. This is required for the RBAC check to work.</span>
    <span class="n">set_filter_project_scope</span><span class="p">(</span><span class="n">step_run_filter_model</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step_run_filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="n">UUID</span><span class="p">)</span>

    <span class="n">allowed_pipeline_run_ids</span> <span class="o">=</span> <span class="n">get_allowed_resource_ids</span><span class="p">(</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">PIPELINE_RUN</span><span class="p">,</span>
        <span class="n">project_id</span><span class="o">=</span><span class="n">step_run_filter_model</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">step_run_filter_model</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
        <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">pipeline_run_id</span><span class="o">=</span><span class="n">allowed_pipeline_run_ids</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">page</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_run_steps</span><span class="p">(</span>
        <span class="n">step_run_filter_model</span><span class="o">=</span><span class="n">step_run_filter_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_page</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.steps_endpoints.update_step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">step_model</span><span class="p">:</span> <span class="n">StepRunUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">StepRunResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the step.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>step_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunUpdate (zenml.models.StepRunUpdate)" href="core-models.html#zenml.models.StepRunUpdate">StepRunUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Step model to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="StepRunResponse (zenml.models.StepRunResponse)" href="core-models.html#zenml.models.StepRunResponse">StepRunResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated step model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/steps_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{step_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_step</span><span class="p">(</span>
    <span class="n">step_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">step_model</span><span class="p">:</span> <span class="n">StepRunUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepRunResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a step.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_id: ID of the step.</span>
<span class="sd">        step_model: Step model to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated step model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">pipeline_run_id</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">pipeline_run</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">updated_step</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_run_step</span><span class="p">(</span>
        <span class="n">step_run_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">,</span> <span class="n">step_run_update</span><span class="o">=</span><span class="n">step_model</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.tag_resource_endpoints" class="doc doc-heading">
            <code>tag_resource_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for the link between tags and resources.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.tag_resource_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.tag_resource_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tag_resource_endpoints.batch_create_tag_resource" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_create_tag_resource</span><span class="p">(</span><span class="n">tag_resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TagResourceRequest</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TagResourceResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Attach different tags to different resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_resources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="TagResourceRequest (zenml.models.TagResourceRequest)" href="core-models.html#zenml.models.TagResourceRequest">TagResourceRequest</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tag resource requests.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="TagResourceResponse (zenml.models.TagResourceResponse)" href="core-models.html#zenml.models.TagResourceResponse">TagResourceResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tag resource responses.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tag_resource_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">BATCH</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">batch_create_tag_resource</span><span class="p">(</span>
    <span class="n">tag_resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TagResourceRequest</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TagResourceResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Attach different tags to different resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_resources: A list of tag resource requests.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of tag resource responses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_tag_resource</span><span class="p">(</span><span class="n">tag_resource</span><span class="o">=</span><span class="n">tag_resource</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tag_resource</span> <span class="ow">in</span> <span class="n">tag_resources</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tag_resource_endpoints.batch_delete_tag_resource" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_delete_tag_resource</span><span class="p">(</span><span class="n">tag_resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TagResourceRequest</span><span class="p">],</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Detach different tags from different resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_resources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="TagResourceRequest (zenml.models.TagResourceRequest)" href="core-models.html#zenml.models.TagResourceRequest">TagResourceRequest</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tag resource requests.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tag_resource_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="n">BATCH</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">batch_delete_tag_resource</span><span class="p">(</span>
    <span class="n">tag_resources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TagResourceRequest</span><span class="p">],</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Detach different tags from different resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_resources: A list of tag resource requests.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">batch_delete_tag_resource</span><span class="p">(</span><span class="n">tag_resources</span><span class="o">=</span><span class="n">tag_resources</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tag_resource_endpoints.create_tag_resource" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_tag_resource</span><span class="p">(</span><span class="n">tag_resource</span><span class="p">:</span> <span class="n">TagResourceRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TagResourceResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Attach different tags to different resources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagResourceRequest (zenml.models.TagResourceRequest)" href="core-models.html#zenml.models.TagResourceRequest">TagResourceRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tag resource request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagResourceResponse (zenml.models.TagResourceResponse)" href="core-models.html#zenml.models.TagResourceResponse">TagResourceResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tag resource response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tag_resource_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_tag_resource</span><span class="p">(</span>
    <span class="n">tag_resource</span><span class="p">:</span> <span class="n">TagResourceRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagResourceResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Attach different tags to different resources.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_resource: A tag resource request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tag resource response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_tag_resource</span><span class="p">(</span><span class="n">tag_resource</span><span class="o">=</span><span class="n">tag_resource</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tag_resource_endpoints.delete_tag_resource" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_tag_resource</span><span class="p">(</span><span class="n">tag_resource</span><span class="p">:</span> <span class="n">TagResourceRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Detach a tag from a resource.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_resource</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagResourceRequest (zenml.models.TagResourceRequest)" href="core-models.html#zenml.models.TagResourceRequest">TagResourceRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tag resource relationship to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tag_resource_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_tag_resource</span><span class="p">(</span>
    <span class="n">tag_resource</span><span class="p">:</span> <span class="n">TagResourceRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Detach a tag from a resource.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_resource: The tag resource relationship to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_tag_resource</span><span class="p">(</span><span class="n">tag_resource</span><span class="o">=</span><span class="n">tag_resource</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.tags_endpoints" class="doc doc-heading">
            <code>tags_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for tags.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.tags_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.tags_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tags_endpoints.create_tag" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span> <span class="n">TagRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TagResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Create a new tag.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagRequest (zenml.models.TagRequest)" href="core-models.html#zenml.models.TagRequest">TagRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tag to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagResponse (zenml.models.TagResponse)" href="core-models.html#zenml.models.TagResponse">TagResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created tag.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tags_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_tag</span><span class="p">(</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">TagRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag: The tag to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created tag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tags_endpoints.delete_tag" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_tag</span><span class="p">(</span><span class="n">tag_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Delete a tag by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the tag to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tags_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{tag_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_tag</span><span class="p">(</span>
    <span class="n">tag_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a tag by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_id: The ID of the tag to delete.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">tag_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_tag</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_tag</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tags_endpoints.get_tag" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_tag</span><span class="p">(</span><span class="n">tag_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TagResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get a tag by ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the tag to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagResponse (zenml.models.TagResponse)" href="core-models.html#zenml.models.TagResponse">TagResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tag with the given ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tags_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{tag_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_tag</span><span class="p">(</span>
    <span class="n">tag_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a tag by ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_id: The ID of the tag to get.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The tag with the given ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">tag_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_tag</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tags_endpoints.list_tags" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_tags</span><span class="p">(</span><span class="n">tag_filter_model</span><span class="p">:</span> <span class="n">TagFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">TagFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">TagResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Get tags according to query filters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagFilter (zenml.models.TagFilter)" href="core-models.html#zenml.models.TagFilter">TagFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="TagFilter (zenml.models.TagFilter)" href="core-models.html#zenml.models.TagFilter">TagFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="TagResponse (zenml.models.TagResponse)" href="core-models.html#zenml.models.TagResponse">TagResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tags according to query filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tags_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_tags</span><span class="p">(</span>
    <span class="n">tag_filter_model</span><span class="p">:</span> <span class="n">TagFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">TagFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">TagResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get tags according to query filters.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The tags according to query filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_tags</span><span class="p">(</span>
        <span class="n">tag_filter_model</span><span class="o">=</span><span class="n">tag_filter_model</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.tags_endpoints.update_tag" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_tag</span><span class="p">(</span><span class="n">tag_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">tag_update_model</span><span class="p">:</span> <span class="n">TagUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TagResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a tag.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tag_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the tag to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tag_update_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagUpdate (zenml.models.TagUpdate)" href="core-models.html#zenml.models.TagUpdate">TagUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tag to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TagResponse (zenml.models.TagResponse)" href="core-models.html#zenml.models.TagResponse">TagResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated tag.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/tags_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{tag_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_tag</span><span class="p">(</span>
    <span class="n">tag_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">tag_update_model</span><span class="p">:</span> <span class="n">TagUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag_id: ID of the tag to update.</span>
<span class="sd">        tag_update_model: Tag to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated tag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_update_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">tag_id</span><span class="p">,</span>
        <span class="n">update_model</span><span class="o">=</span><span class="n">tag_update_model</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_tag</span><span class="p">,</span>
        <span class="n">update_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_tag</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.triggers_endpoints" class="doc doc-heading">
            <code>triggers_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for triggers.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.triggers_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.triggers_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.create_trigger" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_trigger</span><span class="p">(</span><span class="n">trigger</span><span class="p">:</span> <span class="n">TriggerRequest</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TriggerResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a trigger.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerRequest (zenml.TriggerRequest)" href="core-client.html#zenml.client.TriggerRequest">TriggerRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Trigger to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerResponse (zenml.models.TriggerResponse)" href="core-models.html#zenml.models.TriggerResponse">TriggerResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created trigger.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the action flavor/subtype combination is not actually a webhook event source</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_trigger</span><span class="p">(</span>
    <span class="n">trigger</span><span class="p">:</span> <span class="n">TriggerRequest</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a trigger.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger: Trigger to register.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created trigger.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the action flavor/subtype combination is not actually a webhook event source</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">trigger</span><span class="o">.</span><span class="n">event_source_id</span> <span class="ow">and</span> <span class="n">trigger</span><span class="o">.</span><span class="n">event_filter</span><span class="p">:</span>
        <span class="n">event_source</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
            <span class="n">event_source_id</span><span class="o">=</span><span class="n">trigger</span><span class="o">.</span><span class="n">event_source_id</span>
        <span class="p">)</span>

        <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
            <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
            <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Validate that the flavor and plugin_type correspond to an event source</span>
        <span class="c1"># implementation</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event source &quot;</span>
                <span class="s2">&quot;handler implementation.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Validate the trigger event filter</span>
        <span class="n">event_source_handler</span><span class="o">.</span><span class="n">validate_event_filter_configuration</span><span class="p">(</span>
            <span class="n">trigger</span><span class="o">.</span><span class="n">event_filter</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">verify_permissions_and_create_entity</span><span class="p">(</span>
        <span class="n">request_model</span><span class="o">=</span><span class="n">trigger</span><span class="p">,</span>
        <span class="n">create_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_trigger</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.delete_trigger" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_trigger</span><span class="p">(</span><span class="n">trigger_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a trigger.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the trigger.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{trigger_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_trigger</span><span class="p">(</span>
    <span class="n">trigger_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a trigger.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_id: Name of the trigger.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">trigger_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_trigger</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_trigger</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.delete_trigger_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_trigger_execution</span><span class="p">(</span><span class="n">trigger_execution_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a trigger execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_execution_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the trigger execution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@executions_router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{trigger_execution_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_trigger_execution</span><span class="p">(</span>
    <span class="n">trigger_execution_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a trigger execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_execution_id: ID of the trigger execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verify_permissions_and_delete_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">trigger_execution_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_trigger_execution</span><span class="p">,</span>
        <span class="n">delete_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_trigger_execution</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.get_trigger" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_trigger</span><span class="p">(</span><span class="n">trigger_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TriggerResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested trigger.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the trigger.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerResponse (zenml.models.TriggerResponse)" href="core-models.html#zenml.models.TriggerResponse">TriggerResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested trigger.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{trigger_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_trigger</span><span class="p">(</span>
    <span class="n">trigger_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested trigger.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_id: ID of the trigger.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested trigger.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trigger</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_trigger</span><span class="p">(</span><span class="n">trigger_id</span><span class="o">=</span><span class="n">trigger_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">)</span>
    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">trigger</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">READ</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">trigger</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.get_trigger_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_trigger_execution</span><span class="p">(</span><span class="n">trigger_execution_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TriggerExecutionResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the requested trigger execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_execution_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the trigger execution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerExecutionResponse (zenml.models.TriggerExecutionResponse)" href="core-models.html#zenml.models.TriggerExecutionResponse">TriggerExecutionResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested trigger execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@executions_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{trigger_execution_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_trigger_execution</span><span class="p">(</span>
    <span class="n">trigger_execution_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerExecutionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the requested trigger execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_execution_id: ID of the trigger execution.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The requested trigger execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_get_entity</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">trigger_execution_id</span><span class="p">,</span>
        <span class="n">get_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_trigger_execution</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.list_trigger_executions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_trigger_executions</span><span class="p">(</span><span class="n">trigger_execution_filter_model</span><span class="p">:</span> <span class="n">TriggerExecutionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">TriggerExecutionFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">TriggerExecutionResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>List trigger executions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_execution_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerExecutionFilter (zenml.models.TriggerExecutionFilter)" href="core-models.html#zenml.models.TriggerExecutionFilter">TriggerExecutionFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination,
sorting, filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="TriggerExecutionFilter (zenml.models.TriggerExecutionFilter)" href="core-models.html#zenml.models.TriggerExecutionFilter">TriggerExecutionFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="TriggerExecutionResponse (zenml.models.TriggerExecutionResponse)" href="core-models.html#zenml.models.TriggerExecutionResponse">TriggerExecutionResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Page of trigger executions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@executions_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_trigger_executions</span><span class="p">(</span>
    <span class="n">trigger_execution_filter_model</span><span class="p">:</span> <span class="n">TriggerExecutionFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">TriggerExecutionFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">TriggerExecutionResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List trigger executions.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_execution_filter_model: Filter model used for pagination,</span>
<span class="sd">            sorting, filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Page of trigger executions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">trigger_execution_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER_EXECUTION</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_trigger_executions</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.list_triggers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_triggers</span><span class="p">(</span><span class="n">trigger_filter_model</span><span class="p">:</span> <span class="n">TriggerFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">TriggerFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">TriggerResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns all triggers.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerFilter (zenml.models.TriggerFilter)" href="core-models.html#zenml.models.TriggerFilter">TriggerFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter model used for pagination, sorting,
filtering.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="TriggerFilter (zenml.models.TriggerFilter)" href="core-models.html#zenml.models.TriggerFilter">TriggerFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="TriggerResponse (zenml.models.TriggerResponse)" href="core-models.html#zenml.models.TriggerResponse">TriggerResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All triggers.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_triggers</span><span class="p">(</span>
    <span class="n">trigger_filter_model</span><span class="p">:</span> <span class="n">TriggerFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span>
        <span class="n">make_dependable</span><span class="p">(</span><span class="n">TriggerFilter</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">TriggerResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all triggers.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_filter_model: Filter model used for pagination, sorting,</span>
<span class="sd">            filtering.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All triggers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">verify_permissions_and_list_entities</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">trigger_filter_model</span><span class="p">,</span>
        <span class="n">resource_type</span><span class="o">=</span><span class="n">ResourceType</span><span class="o">.</span><span class="n">TRIGGER</span><span class="p">,</span>
        <span class="n">list_method</span><span class="o">=</span><span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_triggers</span><span class="p">,</span>
        <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.triggers_endpoints.update_trigger" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_trigger</span><span class="p">(</span><span class="n">trigger_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">trigger_update</span><span class="p">:</span> <span class="n">TriggerUpdate</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">TriggerResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a trigger.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trigger_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the trigger.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>trigger_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerUpdate (zenml.models.TriggerUpdate)" href="core-models.html#zenml.models.TriggerUpdate">TriggerUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Trigger to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TriggerResponse (zenml.models.TriggerResponse)" href="core-models.html#zenml.models.TriggerResponse">TriggerResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated trigger.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the action flavor/subtype combination is not actually a webhook event source</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/triggers_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{trigger_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_trigger</span><span class="p">(</span>
    <span class="n">trigger_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">trigger_update</span><span class="p">:</span> <span class="n">TriggerUpdate</span><span class="p">,</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a trigger.</span>

<span class="sd">    Args:</span>
<span class="sd">        trigger_id: Name of the trigger.</span>
<span class="sd">        trigger_update: Trigger to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated trigger.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the action flavor/subtype combination is not actually a webhook event source</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trigger</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_trigger</span><span class="p">(</span><span class="n">trigger_id</span><span class="o">=</span><span class="n">trigger_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">trigger_update</span><span class="o">.</span><span class="n">event_filter</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">trigger</span><span class="o">.</span><span class="n">event_source</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Trying to set event filter for trigger without event source.&quot;</span>
            <span class="p">)</span>

        <span class="n">event_source</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span>
            <span class="n">event_source_id</span><span class="o">=</span><span class="n">trigger</span><span class="o">.</span><span class="n">event_source</span><span class="o">.</span><span class="n">id</span>
        <span class="p">)</span>

        <span class="n">event_source_handler</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="p">,</span>
            <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
            <span class="n">subtype</span><span class="o">=</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Validate that the flavor and plugin_type correspond to an event source</span>
        <span class="c1"># implementation</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event_source_handler</span><span class="p">,</span> <span class="n">BaseEventSourceHandler</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Event source plugin </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">plugin_subtype</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;for flavor </span><span class="si">{</span><span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> is not a valid event source &quot;</span>
                <span class="s2">&quot;handler implementation.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Validate the trigger event filter</span>
        <span class="n">event_source_handler</span><span class="o">.</span><span class="n">validate_event_filter_configuration</span><span class="p">(</span>
            <span class="n">trigger_update</span><span class="o">.</span><span class="n">event_filter</span>
        <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">trigger</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">)</span>

    <span class="n">updated_trigger</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_trigger</span><span class="p">(</span>
        <span class="n">trigger_id</span><span class="o">=</span><span class="n">trigger_id</span><span class="p">,</span> <span class="n">trigger_update</span><span class="o">=</span><span class="n">trigger_update</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_trigger</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.users_endpoints" class="doc doc-heading">
            <code>users_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for users.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.users_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.users_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.activate_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">activate_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">user_update</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Activates a specific user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserUpdate (zenml.models.UserUpdate)" href="core-models.html#zenml.models.UserUpdate">UserUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the user to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@activation_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{user_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">ACTIVATE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">activate_user</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">user_update</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Activates a specific user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: Name or ID of the user.</span>
<span class="sd">        user_update: the user to use for the update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>

    <span class="c1"># Use a separate object to compute the update that will be applied to</span>
    <span class="c1"># the user to avoid giving the API requester direct control over the</span>
    <span class="c1"># user attributes that are updated.</span>
    <span class="c1">#</span>
    <span class="c1"># Exclude attributes that cannot be updated through this endpoint:</span>
    <span class="c1">#</span>
    <span class="c1"># - activation_token</span>
    <span class="c1"># - external_user_id</span>
    <span class="c1"># - is_admin</span>
    <span class="c1"># - active</span>
    <span class="c1"># - old_password</span>
    <span class="c1">#</span>
    <span class="n">safe_user_update</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">create_copy</span><span class="p">(</span>
        <span class="n">exclude</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;activation_token&quot;</span><span class="p">,</span>
            <span class="s2">&quot;external_user_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;active&quot;</span><span class="p">,</span>
            <span class="s2">&quot;old_password&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="c1"># NOTE: if the activation token is not set, this will raise an</span>
    <span class="c1"># exception</span>
    <span class="n">authenticate_credentials</span><span class="p">(</span>
        <span class="n">user_name_or_id</span><span class="o">=</span><span class="n">user_name_or_id</span><span class="p">,</span>
        <span class="n">activation_token</span><span class="o">=</span><span class="n">user_update</span><span class="o">.</span><span class="n">activation_token</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Activate the user: set active to True and clear the activation token</span>
    <span class="n">safe_user_update</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">safe_user_update</span><span class="o">.</span><span class="n">activation_token</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_user</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user_update</span><span class="o">=</span><span class="n">safe_user_update</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.create_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_user</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">UserRequest</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Creates a user.</p>
<h6 id="zenml.zen_server.routers.users_endpoints.create_user--noqa-dar401">noqa: DAR401</h6>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserRequest (zenml.models.UserRequest)" href="core-models.html#zenml.models.UserRequest">UserRequest</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">409</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">UserRequest</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a user.</span>

<span class="sd">    # noqa: DAR401</span>

<span class="sd">    Args:</span>
<span class="sd">        user: User to create.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Two ways of creating a new user:</span>
    <span class="c1"># 1. Create a new user with a password and have it immediately active</span>
    <span class="c1"># 2. Create a new user without a password and have it activated at a</span>
    <span class="c1"># later time with an activation token</span>

    <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">user</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">generate_activation_token</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">verify_admin_status_if_no_rbac</span><span class="p">(</span>
        <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span> <span class="s2">&quot;create user&quot;</span>
    <span class="p">)</span>

    <span class="c1"># new_user = verify_permissions_and_create_entity(</span>
    <span class="c1">#     request_model=user,</span>
    <span class="c1">#     create_method=zen_store().create_user,</span>
    <span class="c1"># )</span>
    <span class="n">new_user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="c1"># add back the original unhashed activation token, if generated, to</span>
    <span class="c1"># send it back to the client</span>
    <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
        <span class="n">new_user</span><span class="o">.</span><span class="n">get_body</span><span class="p">()</span><span class="o">.</span><span class="n">activation_token</span> <span class="o">=</span> <span class="n">token</span>
    <span class="k">return</span> <span class="n">new_user</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.deactivate_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deactivate_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deactivates a user and generates a new activation token for it.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generated activation token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the user is trying to deactivate
themselves.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{user_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">DEACTIVATE</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">deactivate_user</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deactivates a user and generates a new activation token for it.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: Name or ID of the user.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The generated activation token.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: if the user is trying to deactivate</span>
<span class="sd">            themselves.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span><span class="s2">&quot;Cannot deactivate yourself.&quot;</span><span class="p">)</span>
    <span class="n">verify_admin_status_if_no_rbac</span><span class="p">(</span>
        <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span> <span class="s2">&quot;deactivate user&quot;</span>
    <span class="p">)</span>
    <span class="c1"># verify_permission_for_model(</span>
    <span class="c1">#     user,</span>
    <span class="c1">#     action=Action.UPDATE,</span>
    <span class="c1"># )</span>

    <span class="n">user_update</span> <span class="o">=</span> <span class="n">UserUpdate</span><span class="p">(</span>
        <span class="n">active</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">generate_activation_token</span><span class="p">()</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_user</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user_update</span><span class="o">=</span><span class="n">user_update</span>
    <span class="p">)</span>
    <span class="c1"># add back the original unhashed activation token</span>
    <span class="n">user</span><span class="o">.</span><span class="n">get_body</span><span class="p">()</span><span class="o">.</span><span class="n">activation_token</span> <span class="o">=</span> <span class="n">token</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.delete_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Deletes a specific user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the user is not authorized to delete the user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{user_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_user</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: Name or ID of the user.</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the user is not authorized to delete the user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
            <span class="s2">&quot;You cannot delete the user account currently used to authenticate &quot;</span>
            <span class="s2">&quot;to the ZenML server. If you wish to delete this account, &quot;</span>
            <span class="s2">&quot;please authenticate with another account or contact your ZenML &quot;</span>
            <span class="s2">&quot;administrator.&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">verify_admin_status_if_no_rbac</span><span class="p">(</span>
            <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span> <span class="s2">&quot;delete user&quot;</span>
        <span class="p">)</span>
        <span class="c1"># verify_permission_for_model(</span>
        <span class="c1">#     user,</span>
        <span class="c1">#     action=Action.DELETE,</span>
        <span class="c1"># )</span>

    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="o">=</span><span class="n">user_name_or_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.email_opt_in_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">email_opt_in_response</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">user_response</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Sets the response of the user to the email prompt.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_response</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserUpdate (zenml.models.UserUpdate)" href="core-models.html#zenml.models.UserUpdate">UserUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User Response to email prompt</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context of the user</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthorizationException(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.AuthorizationException)" href="core-exceptions.html#zenml.exceptions.AuthorizationException">AuthorizationException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the user does not have the required
permissions</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{user_name_or_id}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">EMAIL_ANALYTICS</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">email_opt_in_response</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">user_response</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the response of the user to the email prompt.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: Name or ID of the user.</span>
<span class="sd">        user_response: User Response to email prompt</span>
<span class="sd">        auth_context: The authentication context of the user</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated user.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AuthorizationException: if the user does not have the required</span>
<span class="sd">            permissions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">):</span>
        <span class="n">user_update</span> <span class="o">=</span> <span class="n">UserUpdate</span><span class="p">(</span>
            <span class="n">email</span><span class="o">=</span><span class="n">user_response</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
            <span class="n">email_opted_in</span><span class="o">=</span><span class="n">user_response</span><span class="o">.</span><span class="n">email_opted_in</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">user_response</span><span class="o">.</span><span class="n">email_opted_in</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">email_opt_int</span><span class="p">(</span>
                <span class="n">opted_in</span><span class="o">=</span><span class="n">user_response</span><span class="o">.</span><span class="n">email_opted_in</span><span class="p">,</span>
                <span class="n">email</span><span class="o">=</span><span class="n">user_response</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="s2">&quot;zenml server&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">updated_user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_user</span><span class="p">(</span>
            <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user_update</span><span class="o">=</span><span class="n">user_update</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_user</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>
            <span class="s2">&quot;Users can not opt in on behalf of another user.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.get_current_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_user</span><span class="p">(</span><span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns the model of the authenticated user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model of the authenticated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@current_user_router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/current-user&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_current_user</span><span class="p">(</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the model of the authenticated user.</span>

<span class="sd">    Args:</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model of the authenticated user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.get_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns a specific user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A specific user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{user_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a specific user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: Name or ID of the user.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A specific user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span>
        <span class="n">user_name_or_id</span><span class="o">=</span><span class="n">user_name_or_id</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="n">verify_admin_status_if_no_rbac</span><span class="p">(</span>
            <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span> <span class="s2">&quot;get other user&quot;</span>
        <span class="p">)</span>
        <span class="c1"># verify_permission_for_model(</span>
        <span class="c1">#     user,</span>
        <span class="c1">#     action=Action.READ,</span>
        <span class="c1"># )</span>

    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.list_users" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_users</span><span class="p">(</span><span class="n">user_filter_model</span><span class="p">:</span> <span class="n">UserFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">UserFilter</span><span class="p">)),</span> <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">UserResponse</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Returns a list of all users.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserFilter (zenml.models.UserFilter)" href="core-models.html#zenml.models.UserFilter">UserFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Model that takes care of filtering, sorting and
pagination.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="make_dependable(cls: Type[BaseModel]) -> Callable[..., Any] (zenml.zen_server.utils.make_dependable)" href="#zenml.zen_server.utils.make_dependable">make_dependable</a>(<a class="autorefs autorefs-internal" title="UserFilter (zenml.models.UserFilter)" href="core-models.html#zenml.models.UserFilter">UserFilter</a>))</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hydrate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag deciding whether to hydrate the output model(s)
by including metadata fields in the response.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (zenml.models.Page)" href="core-models.html#zenml.models.Page">Page</a>[<a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of all users.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span> <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_users</span><span class="p">(</span>
    <span class="n">user_filter_model</span><span class="p">:</span> <span class="n">UserFilter</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">make_dependable</span><span class="p">(</span><span class="n">UserFilter</span><span class="p">)),</span>
    <span class="n">hydrate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">[</span><span class="n">UserResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list of all users.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_filter_model: Model that takes care of filtering, sorting and</span>
<span class="sd">            pagination.</span>
<span class="sd">        hydrate: Flag deciding whether to hydrate the output model(s)</span>
<span class="sd">            by including metadata fields in the response.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of all users.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># allowed_ids = get_allowed_resource_ids(resource_type=ResourceType.USER)</span>
    <span class="c1"># if allowed_ids is not None:</span>
    <span class="c1">#     # Make sure users can see themselves</span>
    <span class="c1">#     allowed_ids.add(auth_context.user.id)</span>
    <span class="c1"># else:</span>
    <span class="c1">#     if not auth_context.user.is_admin and not server_config().rbac_enabled:</span>
    <span class="c1">#         allowed_ids = {auth_context.user.id}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="n">user_filter_model</span><span class="o">.</span><span class="n">configure_rbac</span><span class="p">(</span>
            <span class="n">authenticated_user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="p">{</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">},</span>
        <span class="p">)</span>

    <span class="n">page</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">list_users</span><span class="p">(</span>
        <span class="n">user_filter_model</span><span class="o">=</span><span class="n">user_filter_model</span><span class="p">,</span> <span class="n">hydrate</span><span class="o">=</span><span class="n">hydrate</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_page</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.update_myself" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_myself</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a specific user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserUpdate (zenml.models.UserUpdate)" href="core-models.html#zenml.models.UserUpdate">UserUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the user to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the current password is not supplied when
changing the password or if the current password is incorrect.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@current_user_router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/current-user&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_myself</span><span class="p">(</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a specific user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user: the user to use for the update.</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        auth_context: The authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated user.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: if the current password is not supplied when</span>
<span class="sd">            changing the password or if the current password is incorrect.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use a separate object to compute the update that will be applied to</span>
    <span class="c1"># the user to avoid giving the API requester direct control over the</span>
    <span class="c1"># user attributes that are updated.</span>
    <span class="c1">#</span>
    <span class="c1"># Exclude attributes that cannot be updated through this endpoint:</span>
    <span class="c1">#</span>
    <span class="c1"># - activation_token</span>
    <span class="c1"># - external_user_id</span>
    <span class="c1"># - admin</span>
    <span class="c1"># - is_active</span>
    <span class="c1"># - old_password</span>
    <span class="c1">#</span>
    <span class="n">safe_user_update</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">create_copy</span><span class="p">(</span>
        <span class="n">exclude</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;activation_token&quot;</span><span class="p">,</span>
            <span class="s2">&quot;external_user_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;active&quot;</span><span class="p">,</span>
            <span class="s2">&quot;old_password&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="c1"># Validate a password change</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># If the user is updating their password, we need to verify</span>
        <span class="c1"># the old password</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">old_password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;The current password must be supplied when changing the &quot;</span>
                <span class="s2">&quot;password.&quot;</span>
            <span class="p">)</span>
        <span class="k">with</span> <span class="n">pass_change_limiter</span><span class="o">.</span><span class="n">limit_failed_requests</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
            <span class="n">auth_user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_auth_user</span><span class="p">(</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">UserAuthModel</span><span class="o">.</span><span class="n">verify_password</span><span class="p">(</span>
                <span class="n">user</span><span class="o">.</span><span class="n">old_password</span><span class="p">,</span> <span class="n">auth_user</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                    <span class="s2">&quot;The current password is incorrect.&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Accept the password update</span>
        <span class="n">safe_user_update</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span>

    <span class="n">updated_user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_user</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user_update</span><span class="o">=</span><span class="n">safe_user_update</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_user</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.update_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span> <span class="n">user_update</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates a specific user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or ID of the user.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_update</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserUpdate (zenml.models.UserUpdate)" href="core-models.html#zenml.models.UserUpdate">UserUpdate</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the user to use for the update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="starlette.requests.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="UserResponse (zenml.models.UserResponse)" href="core-models.html#zenml.models.UserResponse">UserResponse</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the user tries change admin status,
while not an admin, if the user tries to change the password
of another user, or if the user tries to change their own
password without providing the old password or providing
an incorrect old password.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{user_name_or_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_user</span><span class="p">(</span>
    <span class="n">user_name_or_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">],</span>
    <span class="n">user_update</span><span class="p">:</span> <span class="n">UserUpdate</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a specific user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_name_or_id: Name or ID of the user.</span>
<span class="sd">        user_update: the user to use for the update.</span>
<span class="sd">        request: The request object.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated user.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: if the user tries change admin status,</span>
<span class="sd">            while not an admin, if the user tries to change the password</span>
<span class="sd">            of another user, or if the user tries to change their own</span>
<span class="sd">            password without providing the old password or providing</span>
<span class="sd">            an incorrect old password.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">auth_scheme</span> <span class="o">==</span> <span class="n">AuthScheme</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">:</span>
        <span class="c1"># For external auth, we only allow updating the default project</span>
        <span class="n">user_update</span> <span class="o">=</span> <span class="n">UserUpdate</span><span class="p">(</span>
            <span class="n">default_project_id</span><span class="o">=</span><span class="n">user_update</span><span class="o">.</span><span class="n">default_project_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>

    <span class="c1"># Use a separate object to compute the update that will be applied to</span>
    <span class="c1"># the user to avoid giving the API requester direct control over the</span>
    <span class="c1"># user attributes that are updated.</span>
    <span class="c1">#</span>
    <span class="c1"># Exclude attributes that cannot be updated through this endpoint:</span>
    <span class="c1">#</span>
    <span class="c1"># - activation_token</span>
    <span class="c1"># - external_user_id</span>
    <span class="c1"># - old_password</span>
    <span class="c1">#</span>
    <span class="c1"># Exclude things that are not always safe to update and need to be</span>
    <span class="c1"># validated first:</span>
    <span class="c1">#</span>
    <span class="c1"># - admin</span>
    <span class="c1"># - active</span>
    <span class="c1"># - password</span>
    <span class="c1"># - email_opted_in + email</span>
    <span class="c1">#</span>
    <span class="n">safe_user_update</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">create_copy</span><span class="p">(</span>
        <span class="n">exclude</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;activation_token&quot;</span><span class="p">,</span>
            <span class="s2">&quot;external_user_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;active&quot;</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">,</span>
            <span class="s2">&quot;old_password&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email_opted_in&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="n">verify_admin_status_if_no_rbac</span><span class="p">(</span>
            <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">,</span> <span class="s2">&quot;update other user account&quot;</span>
        <span class="p">)</span>
        <span class="c1"># verify_permission_for_model(</span>
        <span class="c1">#     user,</span>
        <span class="c1">#     action=Action.UPDATE,</span>
        <span class="c1"># )</span>

    <span class="c1"># Validate a password change</span>
    <span class="k">if</span> <span class="n">user_update</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Users cannot change the password of other users. Use the &quot;</span>
                <span class="s2">&quot;account deactivation and activation flow instead.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># If the user is updating their own password, we need to verify</span>
        <span class="c1"># the old password</span>
        <span class="k">if</span> <span class="n">user_update</span><span class="o">.</span><span class="n">old_password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;The current password must be supplied when changing the &quot;</span>
                <span class="s2">&quot;password.&quot;</span>
            <span class="p">)</span>

        <span class="k">with</span> <span class="n">pass_change_limiter</span><span class="o">.</span><span class="n">limit_failed_requests</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
            <span class="n">auth_user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_auth_user</span><span class="p">(</span><span class="n">user_name_or_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">UserAuthModel</span><span class="o">.</span><span class="n">verify_password</span><span class="p">(</span>
                <span class="n">user_update</span><span class="o">.</span><span class="n">old_password</span><span class="p">,</span> <span class="n">auth_user</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                    <span class="s2">&quot;The current password is incorrect.&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Accept the password update</span>
        <span class="n">safe_user_update</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">password</span>

    <span class="c1"># Validate an admin status change</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">user_update</span><span class="o">.</span><span class="n">is_admin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">is_admin</span> <span class="o">!=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">is_admin</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot change the admin status of your own user account.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Only admins are allowed to change the admin status of &quot;</span>
                <span class="s2">&quot;other user accounts.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Accept the admin status update</span>
        <span class="n">safe_user_update</span><span class="o">.</span><span class="n">is_admin</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">is_admin</span>

    <span class="c1"># Validate an active status change</span>
    <span class="k">if</span> <span class="n">user_update</span><span class="o">.</span><span class="n">active</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">active</span> <span class="o">!=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot change the active status of your own user account.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Only admins are allowed to change the active status of &quot;</span>
                <span class="s2">&quot;other user accounts.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Accept the admin status update</span>
        <span class="n">safe_user_update</span><span class="o">.</span><span class="n">is_admin</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">is_admin</span>

    <span class="c1"># Validate changes to private user account information</span>
    <span class="k">if</span> <span class="n">user_update</span><span class="o">.</span><span class="n">email_opted_in</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">user_update</span><span class="o">.</span><span class="n">email</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot change the private user account information for &quot;</span>
                <span class="s2">&quot;another user account.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Accept the private user account information update</span>
        <span class="k">if</span> <span class="n">safe_user_update</span><span class="o">.</span><span class="n">email_opted_in</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">safe_user_update</span><span class="o">.</span><span class="n">email_opted_in</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">email_opted_in</span>
            <span class="n">safe_user_update</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">user_update</span><span class="o">.</span><span class="n">email</span>

    <span class="n">updated_user</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">update_user</span><span class="p">(</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">user_update</span><span class="o">=</span><span class="n">safe_user_update</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dehydrate_response_model</span><span class="p">(</span><span class="n">updated_user</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.users_endpoints.update_user_resource_membership" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_user_resource_membership</span><span class="p">(</span><span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Updates resource memberships of a user.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of the resource for which to update the
membership.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resource_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the resource for which to update the membership.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>actions</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of actions that the user should be able to perform on
the resource. If the user currently has permissions to perform
actions which are not passed in this list, the permissions will
be removed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the user for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>team_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the team for which to update the membership.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>auth_context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication context.</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Security">Security</span>(<span title="zenml.zen_server.auth.authorize">authorize</span>)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a user tries to update their own membership.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no resource with the given type and ID exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/users_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/resource_membership&quot;</span><span class="p">,</span>
    <span class="n">responses</span><span class="o">=</span><span class="p">{</span>
        <span class="mi">401</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">404</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
        <span class="mi">422</span><span class="p">:</span> <span class="n">error_response</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_user_resource_membership</span><span class="p">(</span>
    <span class="n">resource_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resource_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">team_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auth_context</span><span class="p">:</span> <span class="n">AuthContext</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">authorize</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates resource memberships of a user.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_type: Type of the resource for which to update the</span>
<span class="sd">            membership.</span>
<span class="sd">        resource_id: ID of the resource for which to update the membership.</span>
<span class="sd">        actions: List of actions that the user should be able to perform on</span>
<span class="sd">            the resource. If the user currently has permissions to perform</span>
<span class="sd">            actions which are not passed in this list, the permissions will</span>
<span class="sd">            be removed.</span>
<span class="sd">        user_id: ID of the user for which to update the membership.</span>
<span class="sd">        team_id: ID of the team for which to update the membership.</span>
<span class="sd">        auth_context: Authentication context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If a user tries to update their own membership.</span>
<span class="sd">        KeyError: If no resource with the given type and ID exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">user_id</span>
        <span class="ow">and</span> <span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span>
        <span class="ow">and</span> <span class="n">user_id</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">external_user_id</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Not allowed to call endpoint with the authenticated user.&quot;</span>
        <span class="p">)</span>

    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">ResourceType</span><span class="p">(</span><span class="n">resource_type</span><span class="p">)</span>
    <span class="n">schema_class</span> <span class="o">=</span> <span class="n">get_schema_for_resource_type</span><span class="p">(</span><span class="n">resource_type</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_entity_by_id</span><span class="p">(</span>
        <span class="n">entity_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">schema_class</span><span class="o">=</span><span class="n">schema_class</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Resource of type </span><span class="si">{</span><span class="n">resource_type</span><span class="si">}</span><span class="s2"> with ID </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2"> does &quot;</span>
            <span class="s2">&quot;not exist.&quot;</span>
        <span class="p">)</span>

    <span class="n">project_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ProjectScopedResponse</span><span class="p">):</span>
        <span class="n">project_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">id</span>

    <span class="n">resource</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">resource_type</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span>
    <span class="p">)</span>

    <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="o">.</span><span class="n">SHARE</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
        <span class="c1"># Make sure users aren&#39;t able to share permissions they don&#39;t have</span>
        <span class="c1"># themselves</span>
        <span class="n">verify_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">Action</span><span class="p">(</span><span class="n">action</span><span class="p">))</span>

    <span class="n">update_resource_membership</span><span class="p">(</span>
        <span class="n">sharing_user</span><span class="o">=</span><span class="n">auth_context</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
        <span class="n">resource</span><span class="o">=</span><span class="n">resource</span><span class="p">,</span>
        <span class="n">actions</span><span class="o">=</span><span class="p">[</span><span class="n">Action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">],</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">team_id</span><span class="o">=</span><span class="n">team_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h6 id="zenml.zen_server.routers.webhook_endpoints" class="doc doc-heading">
            <code>webhook_endpoints</code>


</h6>

    <div class="doc doc-contents ">

        <p>Endpoint definitions for webhooks.</p>










  <div class="doc doc-children">







<h7 id="zenml.zen_server.routers.webhook_endpoints-classes">Classes</h7>
<h7 id="zenml.zen_server.routers.webhook_endpoints-functions">Functions</h7>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.webhook_endpoints.get_body" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_body</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h8>


    <div class="doc doc-contents ">

        <p>Get access to the raw body.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The raw request body.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/webhook_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_body</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get access to the raw body.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request</span>

<span class="sd">    Returns:</span>
<span class="sd">        The raw request body.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h8 id="zenml.zen_server.routers.webhook_endpoints.webhook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">webhook</span><span class="p">(</span><span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">background_tasks</span><span class="p">:</span> <span class="n">BackgroundTasks</span><span class="p">,</span> <span class="n">raw_body</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_body</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

</h8>


    <div class="doc doc-contents ">

        <p>Webhook to receive events from external event sources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_source_id</code>
            </td>
            <td>
                  <code><span title="uuid.UUID">UUID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The event_source_id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_tasks</code>
            </td>
            <td>
                  <code><span title="fastapi.BackgroundTasks">BackgroundTasks</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background task handler</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>raw_body</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The raw request body</p>
              </div>
            </td>
            <td>
                  <code><span title="fastapi.Depends">Depends</span>(<a class="autorefs autorefs-internal" title="get_body(request: Request) -> bytes

  
      async
   (zenml.zen_server.routers.webhook_endpoints.get_body)" href="#zenml.zen_server.routers.webhook_endpoints.get_body">get_body</a>)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Static dict stating that event is received.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="AuthorizationException(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.AuthorizationException)" href="core-exceptions.html#zenml.exceptions.AuthorizationException">AuthorizationException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the Event Source does not exist.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no appropriate Plugin found in the plugin registry</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the id of the Event Source is not actually a webhook event source</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="WebhookInactiveError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.WebhookInactiveError)" href="core-exceptions.html#zenml.exceptions.WebhookInactiveError">WebhookInactiveError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>In case this webhook has been deactivated</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/routers/webhook_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{event_source_id}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<span class="p">)</span>
<span class="nd">@async_fastapi_endpoint_wrapper</span>
<span class="k">def</span><span class="w"> </span><span class="nf">webhook</span><span class="p">(</span>
    <span class="n">event_source_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span>
    <span class="n">background_tasks</span><span class="p">:</span> <span class="n">BackgroundTasks</span><span class="p">,</span>
    <span class="n">raw_body</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_body</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Webhook to receive events from external event sources.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_source_id: The event_source_id</span>
<span class="sd">        request: The request object</span>
<span class="sd">        background_tasks: Background task handler</span>
<span class="sd">        raw_body: The raw request body</span>

<span class="sd">    Returns:</span>
<span class="sd">        Static dict stating that event is received.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AuthorizationException: If the Event Source does not exist.</span>
<span class="sd">        KeyError: If no appropriate Plugin found in the plugin registry</span>
<span class="sd">        ValueError: If the id of the Event Source is not actually a webhook event source</span>
<span class="sd">        WebhookInactiveError: In case this webhook has been deactivated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the Event Source</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">event_source</span> <span class="o">=</span> <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">get_event_source</span><span class="p">(</span><span class="n">event_source_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Webhook HTTP request received for unknown event source &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">event_source_id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">AuthorizationException</span><span class="p">(</span>  <span class="c1"># TODO: Are we sure about this error message?</span>
            <span class="sa">f</span><span class="s2">&quot;No webhook is registered at &#39;</span><span class="si">{</span><span class="n">router</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">event_source_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">event_source</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">WebhookInactiveError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Webhook </span><span class="si">{</span><span class="n">event_source_id</span><span class="si">}</span><span class="s2"> is inactive.&quot;</span><span class="p">)</span>

    <span class="n">flavor</span> <span class="o">=</span> <span class="n">event_source</span><span class="o">.</span><span class="n">flavor</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">plugin</span> <span class="o">=</span> <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">flavor</span><span class="p">,</span>
            <span class="n">_type</span><span class="o">=</span><span class="n">PluginType</span><span class="o">.</span><span class="n">EVENT_SOURCE</span><span class="p">,</span>
            <span class="n">subtype</span><span class="o">=</span><span class="n">PluginSubType</span><span class="o">.</span><span class="n">WEBHOOK</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Webhook HTTP request received for event source &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">event_source_id</span><span class="si">}</span><span class="s2">&#39; and flavor </span><span class="si">{</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> but no matching &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;plugin was found.&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No listener plugin found for event source </span><span class="si">{</span><span class="n">event_source_id</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">BaseWebhookEventSourceHandler</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Event Source </span><span class="si">{</span><span class="n">event_source_id</span><span class="si">}</span><span class="s2"> is not a valid Webhook event &quot;</span>
            <span class="s2">&quot;source!&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Pass the raw event and headers to the plugin</span>
    <span class="n">background_tasks</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span>
        <span class="n">plugin</span><span class="o">.</span><span class="n">process_webhook_event</span><span class="p">,</span>
        <span class="n">event_source</span><span class="o">=</span><span class="n">event_source</span><span class="p">,</span>
        <span class="n">raw_body</span><span class="o">=</span><span class="n">raw_body</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Event Received.&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.secure_headers" class="doc doc-heading">
            <code>secure_headers</code>


</h4>

    <div class="doc doc-contents ">

        <p>Secure headers for the ZenML Server.</p>










  <div class="doc doc-children">








<h5 id="zenml.zen_server.secure_headers-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.secure_headers.initialize_secure_headers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_secure_headers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the secure headers component.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/secure_headers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_secure_headers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the secure headers component.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_secure_headers</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>

    <span class="c1"># For each of the secure headers supported by the `secure` library, we</span>
    <span class="c1"># check if the corresponding configuration is set in the server</span>
    <span class="c1"># configuration:</span>
    <span class="c1">#</span>
    <span class="c1"># - if set to `True`, we use the default value for the header</span>
    <span class="c1"># - if set to a string, we use the string as the value for the header</span>
    <span class="c1"># - if set to `False`, we don&#39;t set the header</span>

    <span class="n">server</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">Server</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_server</span><span class="p">:</span>
        <span class="n">server</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">Server</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_server</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">server</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_server</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">server</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">deployment_id</span><span class="p">))</span>

    <span class="n">hsts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">StrictTransportSecurity</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_hsts</span><span class="p">:</span>
        <span class="n">hsts</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">StrictTransportSecurity</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_hsts</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">hsts</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_hsts</span><span class="p">)</span>

    <span class="n">xfo</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">XFrameOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_xfo</span><span class="p">:</span>
        <span class="n">xfo</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">XFrameOptions</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_xfo</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">xfo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_xfo</span><span class="p">)</span>

    <span class="n">csp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">ContentSecurityPolicy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_csp</span><span class="p">:</span>
        <span class="n">csp</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">ContentSecurityPolicy</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_csp</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">csp</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_csp</span><span class="p">)</span>

    <span class="n">xcto</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">XContentTypeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_content</span><span class="p">:</span>
        <span class="n">xcto</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">XContentTypeOptions</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">xcto</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_content</span><span class="p">)</span>

    <span class="n">referrer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">ReferrerPolicy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_referrer</span><span class="p">:</span>
        <span class="n">referrer</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">ReferrerPolicy</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_referrer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">referrer</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_referrer</span><span class="p">)</span>

    <span class="n">cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">CacheControl</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_cache</span><span class="p">:</span>
        <span class="n">cache</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">CacheControl</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_cache</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_cache</span><span class="p">)</span>

    <span class="n">permissions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">secure</span><span class="o">.</span><span class="n">PermissionsPolicy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_permissions</span><span class="p">:</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">PermissionsPolicy</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">secure_headers_permissions</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># This one is special, because it doesn&#39;t allow setting the</span>
            <span class="c1"># value as a string, but rather as a list of directives, so we</span>
            <span class="c1"># hack our way around it by setting the private _default_value</span>
            <span class="c1"># attribute.</span>
            <span class="n">permissions</span><span class="o">.</span><span class="n">_default_value</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">secure_headers_permissions</span>

    <span class="n">_secure_headers</span> <span class="o">=</span> <span class="n">secure</span><span class="o">.</span><span class="n">Secure</span><span class="p">(</span>
        <span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">,</span>
        <span class="n">hsts</span><span class="o">=</span><span class="n">hsts</span><span class="p">,</span>
        <span class="n">xfo</span><span class="o">=</span><span class="n">xfo</span><span class="p">,</span>
        <span class="n">csp</span><span class="o">=</span><span class="n">csp</span><span class="p">,</span>
        <span class="n">xcto</span><span class="o">=</span><span class="n">xcto</span><span class="p">,</span>
        <span class="n">referrer</span><span class="o">=</span><span class="n">referrer</span><span class="p">,</span>
        <span class="n">cache</span><span class="o">=</span><span class="n">cache</span><span class="p">,</span>
        <span class="n">permissions</span><span class="o">=</span><span class="n">permissions</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.secure_headers.secure_headers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">secure_headers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">secure</span><span class="o">.</span><span class="n">Secure</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the secure headers component.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="secure.Secure">Secure</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The secure headers component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the secure headers component is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/secure_headers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">secure_headers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">secure</span><span class="o">.</span><span class="n">Secure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the secure headers component.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The secure headers component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the secure headers component is not initialized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_secure_headers</span>
    <span class="k">if</span> <span class="n">_secure_headers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Secure headers component not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_secure_headers</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.utils" class="doc doc-heading">
            <code>utils</code>


</h4>

    <div class="doc doc-contents ">

        <p>Util functions for the ZenML Server.</p>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.utils-classes">Classes</h5>
<h5 id="zenml.zen_server.utils-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.async_fastapi_endpoint_wrapper" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">async_fastapi_endpoint_wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">deduplicate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]]</span></code>

</h6>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">async_fastapi_endpoint_wrapper</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">async_fastapi_endpoint_wrapper</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">deduplicate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span>
    <span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Decorator for FastAPI endpoints.</p>
<p>This decorator for FastAPI endpoints does the following:
- Converts exceptions to HTTPExceptions with the correct status code.
- Uses the request manager to deduplicate requests and to convert the sync
endpoint function to a coroutine.
- Optionally enables idempotency for the endpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[<span title="zenml.zen_server.utils.P">P</span>, <span title="zenml.zen_server.utils.R">R</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function to decorate.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deduplicate</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to enable or disable request deduplication for
this endpoint. If not specified, by default, the deduplication is
enabled for POST requests and disabled for other requests.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="typing.Callable">Callable</span>[<span title="zenml.zen_server.utils.P">P</span>, <span title="typing.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]], <span title="typing.Callable">Callable</span>[[<span title="typing.Callable">Callable</span>[<span title="zenml.zen_server.utils.P">P</span>, <span title="zenml.zen_server.utils.R">R</span>]], <span title="typing.Callable">Callable</span>[<span title="zenml.zen_server.utils.P">P</span>, <span title="typing.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decorated function.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">async_fastapi_endpoint_wrapper</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">deduplicate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">Callable</span><span class="p">[[</span><span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span>
<span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator for FastAPI endpoints.</span>

<span class="sd">    This decorator for FastAPI endpoints does the following:</span>
<span class="sd">    - Converts exceptions to HTTPExceptions with the correct status code.</span>
<span class="sd">    - Uses the request manager to deduplicate requests and to convert the sync</span>
<span class="sd">    endpoint function to a coroutine.</span>
<span class="sd">    - Optionally enables idempotency for the endpoint.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: Function to decorate.</span>
<span class="sd">        deduplicate: Whether to enable or disable request deduplication for</span>
<span class="sd">            this endpoint. If not specified, by default, the deduplication is</span>
<span class="sd">            enabled for POST requests and disabled for other requests.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Decorated function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]:</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
                <span class="c1"># These imports can&#39;t happen at module level as this module is also</span>
                <span class="c1"># used by the CLI when installed without the `server` extra</span>
                <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>
                <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.responses</span><span class="w"> </span><span class="kn">import</span> <span class="n">JSONResponse</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">OAuthError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                    <span class="c1"># The OAuthError is special because it needs to have a JSON response</span>
                    <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">(</span>
                        <span class="n">status_code</span><span class="o">=</span><span class="n">error</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
                        <span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">HTTPException</span><span class="p">:</span>
                    <span class="k">raise</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;API error&quot;</span><span class="p">)</span>
                    <span class="n">http_exception</span> <span class="o">=</span> <span class="n">http_exception_from_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">http_exception</span>

            <span class="k">return</span> <span class="k">await</span> <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="n">decorated</span><span class="p">,</span>
                <span class="n">deduplicate</span><span class="p">,</span>
                <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">async_decorated</span>

    <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">decorator</span>
    <span class="k">return</span> <span class="n">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.cleanup_request_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cleanup_request_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Cleanup the request manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cleanup_request_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cleanup the request manager.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_request_manager</span>
    <span class="k">if</span> <span class="n">_request_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">_request_manager</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
        <span class="n">_request_manager</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.feature_gate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">feature_gate</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FeatureGateInterface</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the initialized Feature Gate component.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the RBAC component is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FeatureGateInterface (zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface)" href="#zenml.zen_server.feature_gate.feature_gate_interface.FeatureGateInterface">FeatureGateInterface</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The RBAC component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">feature_gate</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FeatureGateInterface</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the initialized Feature Gate component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the RBAC component is not initialized.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The RBAC component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_feature_gate</span>
    <span class="k">if</span> <span class="n">_feature_gate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Feature gate component not initialized.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_feature_gate</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.get_auth_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_auth_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AuthContext</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the authentication context for the current request.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="AuthContext (zenml.zen_server.auth.AuthContext)" href="#zenml.zen_server.auth.AuthContext">AuthContext</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The authentication context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_auth_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AuthContext&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the authentication context for the current request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The authentication context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_context</span> <span class="o">=</span> <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">current_request</span>
    <span class="k">return</span> <span class="n">request_context</span><span class="o">.</span><span class="n">auth_context</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.get_current_request_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_request_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">RequestContext</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the current request context.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RequestContext(request: Request) (zenml.zen_server.request_management.RequestContext)" href="#zenml.zen_server.request_management.RequestContext">RequestContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current request context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_current_request_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">RequestContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current request context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The current request context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">request_manager</span><span class="p">()</span><span class="o">.</span><span class="n">current_request</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.get_ip_location" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_ip_location</span><span class="p">(</span><span class="n">ip_address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the location of the given IP address.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ip_address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The IP address to get the location for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="str">str</span>, <span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple of city, region, country.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_ip_location</span><span class="p">(</span><span class="n">ip_address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the location of the given IP address.</span>

<span class="sd">    Args:</span>
<span class="sd">        ip_address: The IP address to get the location for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple of city, region, country.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">ipinfo</span>  <span class="c1"># type: ignore[import-untyped]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">ipinfo</span><span class="o">.</span><span class="n">getHandler</span><span class="p">()</span>
        <span class="n">details</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">getDetails</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">details</span><span class="o">.</span><span class="n">city</span><span class="p">,</span>
            <span class="n">details</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="n">details</span><span class="o">.</span><span class="n">country_name</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not get IP location for </span><span class="si">{</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.get_system_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_system_metrics</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get comprehensive system metrics.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict containing system metrics</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_system_metrics</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get comprehensive system metrics.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict containing system metrics</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get active requests count</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.middleware</span><span class="w"> </span><span class="kn">import</span> <span class="n">active_requests_count</span>

    <span class="c1"># Memory limits</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">memory_info</span><span class="p">()</span>

    <span class="c1"># File descriptors</span>
    <span class="n">open_fds</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;N/A&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">open_fds</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">num_fds</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="s2">&quot;num_fds&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;N/A&quot;</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># Current thread name/ID</span>
    <span class="n">current_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span>
    <span class="n">current_thread_name</span> <span class="o">=</span> <span class="n">current_thread</span><span class="o">.</span><span class="n">name</span>
    <span class="n">current_thread_id</span> <span class="o">=</span> <span class="n">current_thread</span><span class="o">.</span><span class="n">ident</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;memory_used_mb&quot;</span><span class="p">:</span> <span class="n">memory</span><span class="o">.</span><span class="n">rss</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span>
        <span class="s2">&quot;open_fds&quot;</span><span class="p">:</span> <span class="n">open_fds</span><span class="p">,</span>
        <span class="s2">&quot;fd_limit&quot;</span><span class="p">:</span> <span class="n">fd_limit</span><span class="p">,</span>
        <span class="s2">&quot;active_requests&quot;</span><span class="p">:</span> <span class="n">active_requests_count</span><span class="p">,</span>
        <span class="s2">&quot;thread_count&quot;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">(),</span>
        <span class="s2">&quot;max_worker_threads&quot;</span><span class="p">:</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">thread_pool_size</span><span class="p">,</span>
        <span class="s2">&quot;current_thread_name&quot;</span><span class="p">:</span> <span class="n">current_thread_name</span><span class="p">,</span>
        <span class="s2">&quot;current_thread_id&quot;</span><span class="p">:</span> <span class="n">current_thread_id</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.get_system_metrics_log_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Request</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the system metrics as a string for logging.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="fastapi.Request">Request</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request object.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The system metrics as a string for debugging logging.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_system_metrics_log_str</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Request&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the system metrics as a string for logging.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The system metrics as a string for debugging logging.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">request</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="p">[</span><span class="n">HEALTH</span><span class="p">,</span> <span class="n">READY</span><span class="p">]:</span>
        <span class="c1"># Don&#39;t log system metrics for health and ready endpoints to keep them</span>
        <span class="c1"># fast</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">get_system_metrics</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="s2">&quot; [ &quot;</span>
        <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">metrics</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="o">+</span> <span class="s2">&quot; ]&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.get_zenml_headers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_zenml_headers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the ZenML specific headers to be included in requests made by the server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML specific headers.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_zenml_headers</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the ZenML specific headers to be included in requests made by the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML specific headers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;zenml-server-id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_external_server_id</span><span class="p">()),</span>
        <span class="s2">&quot;zenml-server-version&quot;</span><span class="p">:</span> <span class="n">zenml_version</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">server_url</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;zenml-server-url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">server_url</span>

    <span class="k">return</span> <span class="n">headers</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_feature_gate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_feature_gate</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the Feature Gate component.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_feature_gate</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the Feature Gate component.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_feature_gate</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">feature_gate_source</span>
        <span class="o">:=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">feature_gate_implementation_source</span>
    <span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">source_utils</span>

        <span class="n">implementation_class</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load_and_validate_class</span><span class="p">(</span>
            <span class="n">feature_gate_source</span><span class="p">,</span> <span class="n">expected_class</span><span class="o">=</span><span class="n">FeatureGateInterface</span>
        <span class="p">)</span>
        <span class="n">_feature_gate</span> <span class="o">=</span> <span class="n">implementation_class</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_memcache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_memcache</span><span class="p">(</span><span class="n">max_capacity</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">default_expiry</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the memory cache.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>max_capacity</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum capacity of the cache.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_expiry</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default expiry time in seconds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_memcache</span><span class="p">(</span><span class="n">max_capacity</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">default_expiry</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the memory cache.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_capacity: The maximum capacity of the cache.</span>
<span class="sd">        default_expiry: The default expiry time in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_memcache</span>
    <span class="n">_memcache</span> <span class="o">=</span> <span class="n">MemoryCache</span><span class="p">(</span><span class="n">max_capacity</span><span class="p">,</span> <span class="n">default_expiry</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_plugins" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_plugins</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the event plugins registry.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_plugins</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the event plugins registry.&quot;&quot;&quot;</span>
    <span class="n">plugin_flavor_registry</span><span class="p">()</span><span class="o">.</span><span class="n">initialize_plugins</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_rbac" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_rbac</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the RBAC component.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_rbac</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the RBAC component.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_rbac</span>

    <span class="k">if</span> <span class="n">rbac_source</span> <span class="o">:=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_implementation_source</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">source_utils</span>

        <span class="n">implementation_class</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load_and_validate_class</span><span class="p">(</span>
            <span class="n">rbac_source</span><span class="p">,</span> <span class="n">expected_class</span><span class="o">=</span><span class="n">RBACInterface</span>
        <span class="p">)</span>
        <span class="n">_rbac</span> <span class="o">=</span> <span class="n">implementation_class</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_request_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_request_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the request manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_request_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the request manager.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_request_manager</span>
    <span class="n">_request_manager</span> <span class="o">=</span> <span class="n">RequestManager</span><span class="p">(</span>
        <span class="n">deduplicate</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">request_deduplication</span><span class="p">,</span>
        <span class="n">transaction_ttl</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">request_cache_timeout</span><span class="p">,</span>
        <span class="n">request_timeout</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">request_timeout</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">_request_manager</span><span class="o">.</span><span class="n">startup</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_snapshot_executor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_snapshot_executor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the snapshot executor.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_snapshot_executor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the snapshot executor.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_snapshot_executor</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.pipeline_execution.utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">BoundedThreadPoolExecutor</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">_snapshot_executor</span> <span class="o">=</span> <span class="n">BoundedThreadPoolExecutor</span><span class="p">(</span>
        <span class="n">max_workers</span><span class="o">=</span><span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">max_concurrent_snapshot_runs</span><span class="p">,</span>
        <span class="n">thread_name_prefix</span><span class="o">=</span><span class="s2">&quot;zenml-snapshot-executor&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_workload_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_workload_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the workload manager component.</p>
<p>This does not fail if the source can't be loaded but only logs a warning.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_workload_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the workload manager component.</span>

<span class="sd">    This does not fail if the source can&#39;t be loaded but only logs a warning.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_workload_manager</span>

    <span class="k">if</span> <span class="n">source</span> <span class="o">:=</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">workload_manager_implementation_source</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">source_utils</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">workload_manager_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">WorkloadManagerInterface</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">source_utils</span><span class="o">.</span><span class="n">load_and_validate_class</span><span class="p">(</span>
                    <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">expected_class</span><span class="o">=</span><span class="n">WorkloadManagerInterface</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ModuleNotFoundError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unable to load workload manager source.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_workload_manager</span> <span class="o">=</span> <span class="n">workload_manager_class</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.initialize_zen_store" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_zen_store</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the ZenML Store.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the ZenML Store is using a REST back-end.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_zen_store</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the ZenML Store.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the ZenML Store is using a REST back-end.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing ZenML Store for FastAPI...&quot;</span><span class="p">)</span>

    <span class="c1"># Use an environment variable to flag the instance as a server</span>
    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">ENV_ZENML_SERVER</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>

    <span class="n">zen_store_</span> <span class="o">=</span> <span class="n">GlobalConfiguration</span><span class="p">()</span><span class="o">.</span><span class="n">zen_store</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">zen_store_</span><span class="p">,</span> <span class="n">SqlZenStore</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Server cannot be started with a REST store type. Make sure you &quot;</span>
            <span class="s2">&quot;configure ZenML to use a non-networked store backend &quot;</span>
            <span class="s2">&quot;when trying to start the ZenML Server.&quot;</span>
        <span class="p">)</span>

    <span class="k">global</span> <span class="n">_zen_store</span>
    <span class="n">_zen_store</span> <span class="o">=</span> <span class="n">zen_store_</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.is_same_or_subdomain" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_same_or_subdomain</span><span class="p">(</span><span class="n">source_domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Check if the source domain is the same or a subdomain of the target domain.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>is_same_or_subdomain("example.com", "example.com") -&gt; True
is_same_or_subdomain("alpha.example.com", "example.com") -&gt; True
is_same_or_subdomain("alpha.example.com", ".example.com") -&gt; True
is_same_or_subdomain("example.com", "alpha.example.com") -&gt; False
is_same_or_subdomain("alpha.beta.example.com", "beta.example.com") -&gt; True
is_same_or_subdomain("alpha.beta.example.com", "alpha.example.com") -&gt; False
is_same_or_subdomain("alphabeta.gamma.example", "beta.gamma.example") -&gt; False</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_domain</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source domain to check.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_domain</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The target domain to compare against.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the source domain is the same or a subdomain of the target</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>domain, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_same_or_subdomain</span><span class="p">(</span><span class="n">source_domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the source domain is the same or a subdomain of the target domain.</span>

<span class="sd">    Examples:</span>
<span class="sd">        is_same_or_subdomain(&quot;example.com&quot;, &quot;example.com&quot;) -&gt; True</span>
<span class="sd">        is_same_or_subdomain(&quot;alpha.example.com&quot;, &quot;example.com&quot;) -&gt; True</span>
<span class="sd">        is_same_or_subdomain(&quot;alpha.example.com&quot;, &quot;.example.com&quot;) -&gt; True</span>
<span class="sd">        is_same_or_subdomain(&quot;example.com&quot;, &quot;alpha.example.com&quot;) -&gt; False</span>
<span class="sd">        is_same_or_subdomain(&quot;alpha.beta.example.com&quot;, &quot;beta.example.com&quot;) -&gt; True</span>
<span class="sd">        is_same_or_subdomain(&quot;alpha.beta.example.com&quot;, &quot;alpha.example.com&quot;) -&gt; False</span>
<span class="sd">        is_same_or_subdomain(&quot;alphabeta.gamma.example&quot;, &quot;beta.gamma.example&quot;) -&gt; False</span>

<span class="sd">    Args:</span>
<span class="sd">        source_domain: The source domain to check.</span>
<span class="sd">        target_domain: The target domain to compare against.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the source domain is the same or a subdomain of the target</span>
<span class="sd">        domain, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">tldextract</span>

    <span class="c1"># Extract the registered domain and suffix for both</span>
    <span class="n">src_parts</span> <span class="o">=</span> <span class="n">tldextract</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">source_domain</span><span class="p">)</span>
    <span class="n">tgt_parts</span> <span class="o">=</span> <span class="n">tldextract</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">target_domain</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">src_parts</span> <span class="o">==</span> <span class="n">tgt_parts</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Same domain</span>

    <span class="c1"># Reconstruct the base domains (e.g., example.com)</span>
    <span class="n">src_base_domain</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src_parts</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">src_parts</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">tgt_base_domain</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tgt_parts</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">tgt_parts</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">src_base_domain</span> <span class="o">!=</span> <span class="n">tgt_base_domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># Different base domains</span>

    <span class="k">if</span> <span class="n">tgt_parts</span><span class="o">.</span><span class="n">subdomain</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Subdomain</span>

    <span class="k">if</span> <span class="n">src_parts</span><span class="o">.</span><span class="n">subdomain</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">tgt_parts</span><span class="o">.</span><span class="n">subdomain</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Subdomain of subdomain</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.is_user_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_user_request</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Determine if the incoming request is a user request.</p>
<p>This function checks various aspects of the request to determine
if it's a user-initiated request or a system request.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming FastAPI request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if it's a user request, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_user_request</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="s2">&quot;Request&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine if the incoming request is a user request.</span>

<span class="sd">    This function checks various aspects of the request to determine</span>
<span class="sd">    if it&#39;s a user-initiated request or a system request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The incoming FastAPI request object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if it&#39;s a user request, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Define system paths that should be excluded</span>
    <span class="n">system_paths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;/health&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/ready&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/metrics&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/docs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/redoc&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/openapi.json&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">user_prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API</span><span class="si">}{</span><span class="n">VERSION_1</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">excluded_user_apis</span> <span class="o">=</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span>
    <span class="c1"># Check if this is not an excluded endpoint</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="n">user_prefix</span> <span class="o">+</span> <span class="n">suffix</span> <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">excluded_user_apis</span>
    <span class="p">]:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check if this is other user request</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">user_prefix</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># Exclude system paths</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">system_paths</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Exclude requests with specific headers</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X-System-Request&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Exclude requests from certain user agents (e.g., monitoring tools)</span>
    <span class="n">user_agent</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">system_agents</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;prometheus&quot;</span><span class="p">,</span> <span class="s2">&quot;datadog&quot;</span><span class="p">,</span> <span class="s2">&quot;newrelic&quot;</span><span class="p">,</span> <span class="s2">&quot;pingdom&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">agent</span> <span class="ow">in</span> <span class="n">user_agent</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">system_agents</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check for internal IP addresses</span>
    <span class="n">client_host</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span> <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">client_host</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">client_host</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;10.&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">client_host</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;192.168.&quot;</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Exclude OPTIONS requests (often used for CORS preflight)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Exclude specific query parameters that might indicate system requests</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system_check&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># If none of the above conditions are met, consider it a user request</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.make_dependable" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">make_dependable</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>This function makes a pydantic model usable for fastapi query parameters.</p>
<p>Additionally, it converts <code>InternalServerError</code>s that would happen due to
<code>pydantic.ValidationError</code> into 422 responses that signal an invalid
request.</p>
<p>Check out https://github.com/tiangolo/fastapi/issues/1474 for context.</p>


<details class="usage" open>
  <summary>Usage</summary>
  <p>def f(model: Model = Depends(make_dependable(Model))):
    ...</p>
</details>        <p>UPDATE: Function from above mentioned Github issue was extended to support
multi-input parameters, e.g. tags: List[str]. It needs a default set to Query(<default>),
rather just plain <default>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cls</code>
            </td>
            <td>
                  <code><span title="typing.Type">Type</span>[<span title="pydantic.BaseModel">BaseModel</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The model class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[..., <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function to use in FastAPI <code>Depends</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">make_dependable</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function makes a pydantic model usable for fastapi query parameters.</span>

<span class="sd">    Additionally, it converts `InternalServerError`s that would happen due to</span>
<span class="sd">    `pydantic.ValidationError` into 422 responses that signal an invalid</span>
<span class="sd">    request.</span>

<span class="sd">    Check out https://github.com/tiangolo/fastapi/issues/1474 for context.</span>

<span class="sd">    Usage:</span>
<span class="sd">        def f(model: Model = Depends(make_dependable(Model))):</span>
<span class="sd">            ...</span>

<span class="sd">    UPDATE: Function from above mentioned Github issue was extended to support</span>
<span class="sd">    multi-input parameters, e.g. tags: List[str]. It needs a default set to Query(&lt;default&gt;),</span>
<span class="sd">    rather just plain &lt;default&gt;.</span>

<span class="sd">    Args:</span>
<span class="sd">        cls: The model class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Function to use in FastAPI `Depends`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Query</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.zen_server.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">error_detail</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_cls_and_handle_errors</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseModel</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPException</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">init_cls_and_handle_errors</span><span class="p">)</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">detail</span> <span class="o">=</span> <span class="n">error_detail</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">exception_type</span><span class="o">=</span><span class="ne">ValueError</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="mi">422</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">)</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">values</span><span class="p">()}</span>
    <span class="n">query_params</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;API_MULTI_INPUT_PARAMS&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">for</span> <span class="n">qp</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">qp</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="n">qp</span><span class="p">]</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">params</span><span class="p">[</span><span class="n">qp</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="n">Query</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">qp</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">),</span>
                <span class="n">kind</span><span class="o">=</span><span class="n">params</span><span class="p">[</span><span class="n">qp</span><span class="p">]</span><span class="o">.</span><span class="n">kind</span><span class="p">,</span>
                <span class="n">annotation</span><span class="o">=</span><span class="n">params</span><span class="p">[</span><span class="n">qp</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="n">init_cls_and_handle_errors</span><span class="o">.</span><span class="n">__signature__</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">init_cls_and_handle_errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.memcache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">memcache</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">MemoryCache</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the memory cache.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="MemoryCache(max_capacity: int, default_expiry: int) (zenml.zen_server.cache.MemoryCache)" href="#zenml.zen_server.cache.MemoryCache">MemoryCache</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The memory cache.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the memory cache is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">memcache</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">MemoryCache</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the memory cache.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The memory cache.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the memory cache is not initialized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">_memcache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Memory cache not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_memcache</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.plugin_flavor_registry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plugin_flavor_registry</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PluginFlavorRegistry</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the plugin flavor registry.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PluginFlavorRegistry() (zenml.plugins.plugin_flavor_registry.PluginFlavorRegistry)" href="core-plugins.html#zenml.plugins.plugin_flavor_registry.PluginFlavorRegistry">PluginFlavorRegistry</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The plugin flavor registry.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plugin_flavor_registry</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PluginFlavorRegistry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the plugin flavor registry.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The plugin flavor registry.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_plugin_flavor_registry</span>

    <span class="k">if</span> <span class="n">_plugin_flavor_registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_plugin_flavor_registry</span> <span class="o">=</span> <span class="n">PluginFlavorRegistry</span><span class="p">()</span>
        <span class="n">_plugin_flavor_registry</span><span class="o">.</span><span class="n">initialize_plugins</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_plugin_flavor_registry</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.rbac" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rbac</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">RBACInterface</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the initialized RBAC component.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the RBAC component is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RBACInterface (zenml.zen_server.rbac.rbac_interface.RBACInterface)" href="#zenml.zen_server.rbac.rbac_interface.RBACInterface">RBACInterface</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The RBAC component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rbac</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">RBACInterface</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the initialized RBAC component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the RBAC component is not initialized.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The RBAC component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_rbac</span>
    <span class="k">if</span> <span class="n">_rbac</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;RBAC component not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_rbac</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.request_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">request_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">RequestManager</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the request manager.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="RequestManager(transaction_ttl: int, request_timeout: float, deduplicate: bool = True) (zenml.zen_server.request_management.RequestManager)" href="#zenml.zen_server.request_management.RequestManager">RequestManager</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request manager.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request manager is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">request_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">RequestManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the request manager.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The request manager.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the request manager is not initialized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_request_manager</span>
    <span class="k">if</span> <span class="n">_request_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Request manager not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_request_manager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.server_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">server_config</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ServerConfiguration</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Returns the ZenML Server configuration.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerConfiguration (zenml.config.server_config.ServerConfiguration)" href="core-config.html#zenml.config.server_config.ServerConfiguration">ServerConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML Server configuration.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">server_config</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ServerConfiguration</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the ZenML Server configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML Server configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_server_config</span>
    <span class="k">if</span> <span class="n">_server_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_server_config</span> <span class="o">=</span> <span class="n">ServerConfiguration</span><span class="o">.</span><span class="n">get_server_config</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_server_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.set_filter_project_scope" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_filter_project_scope</span><span class="p">(</span><span class="n">filter_model</span><span class="p">:</span> <span class="n">ProjectScopedFilter</span><span class="p">,</span> <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">UUID</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Set the project scope of the filter model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filter_model</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ProjectScopedFilter (zenml.models.v2.base.scoped.ProjectScopedFilter)" href="core-models.html#zenml.models.v2.base.scoped.ProjectScopedFilter">ProjectScopedFilter</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter model to set the scope for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name_or_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="uuid.UUID">UUID</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The project to set the scope for. If not
provided, the project scope is determined from the request
project filter or the default project, in that order.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_filter_project_scope</span><span class="p">(</span>
    <span class="n">filter_model</span><span class="p">:</span> <span class="n">ProjectScopedFilter</span><span class="p">,</span>
    <span class="n">project_name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">UUID</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the project scope of the filter model.</span>

<span class="sd">    Args:</span>
<span class="sd">        filter_model: The filter model to set the scope for.</span>
<span class="sd">        project_name_or_id: The project to set the scope for. If not</span>
<span class="sd">            provided, the project scope is determined from the request</span>
<span class="sd">            project filter or the default project, in that order.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">zen_store</span><span class="p">()</span><span class="o">.</span><span class="n">set_filter_project_id</span><span class="p">(</span>
        <span class="n">filter_model</span><span class="o">=</span><span class="n">filter_model</span><span class="p">,</span>
        <span class="n">project_name_or_id</span><span class="o">=</span><span class="n">project_name_or_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.snapshot_executor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">snapshot_executor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">BoundedThreadPoolExecutor</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the initialized snapshot executor.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the snapshot executor is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="BoundedThreadPoolExecutor(max_workers: int, **kwargs: Any) (zenml.zen_server.pipeline_execution.utils.BoundedThreadPoolExecutor)" href="#zenml.zen_server.pipeline_execution.utils.BoundedThreadPoolExecutor">BoundedThreadPoolExecutor</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The snapshot executor.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">snapshot_executor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedThreadPoolExecutor&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the initialized snapshot executor.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the snapshot executor is not initialized.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The snapshot executor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_snapshot_executor</span>
    <span class="k">if</span> <span class="n">_snapshot_executor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Snapshot executor not initialized&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_snapshot_executor</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.start_event_loop_lag_monitor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_event_loop_lag_monitor</span><span class="p">(</span><span class="n">threshold_ms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Start the event loop lag monitor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>threshold_ms</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The threshold in milliseconds for the event loop lag.</p>
              </div>
            </td>
            <td>
                  <code>50</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_event_loop_lag_monitor</span><span class="p">(</span><span class="n">threshold_ms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the event loop lag monitor.</span>

<span class="sd">    Args:</span>
<span class="sd">        threshold_ms: The threshold in milliseconds for the event loop lag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">event_loop_lag_monitor_task</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">monitor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="k">if</span> <span class="n">delay</span> <span class="o">&gt;</span> <span class="n">threshold_ms</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;⚠️  Event loop lag detected: </span><span class="si">{</span><span class="n">delay</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">ms&quot;</span>
                    <span class="s2">&quot;If you see this message, it means that the ZenML server is &quot;</span>
                    <span class="s2">&quot;under heavy load and the clients might start experiencing &quot;</span>
                    <span class="s2">&quot;connection reset errors. Please consider scaling up the &quot;</span>
                    <span class="s2">&quot;server.&quot;</span>
                <span class="p">)</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="n">event_loop_lag_monitor_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">monitor</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.stop_event_loop_lag_monitor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_event_loop_lag_monitor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Stop the event loop lag monitor.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop_event_loop_lag_monitor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the event loop lag monitor.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">event_loop_lag_monitor_task</span>
    <span class="k">if</span> <span class="n">event_loop_lag_monitor_task</span><span class="p">:</span>
        <span class="n">event_loop_lag_monitor_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="n">event_loop_lag_monitor_task</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.verify_admin_status_if_no_rbac" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_admin_status_if_no_rbac</span><span class="p">(</span><span class="n">admin_status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Validate the admin status for sensitive requests.</p>
<p>Only add this check in endpoints meant for admin use only.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>admin_status</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the user is an admin or not. This is only used
if explicitly specified in the call and even if passed will be
ignored, if RBAC is enabled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The action that is being performed, used for output only.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="IllegalOperationError(message: Optional[str] = None, url: Optional[str] = None) (zenml.exceptions.IllegalOperationError)" href="core-exceptions.html#zenml.exceptions.IllegalOperationError">IllegalOperationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the admin status is not valid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_admin_status_if_no_rbac</span><span class="p">(</span>
    <span class="n">admin_status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
    <span class="n">action</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the admin status for sensitive requests.</span>

<span class="sd">    Only add this check in endpoints meant for admin use only.</span>

<span class="sd">    Args:</span>
<span class="sd">        admin_status: Whether the user is an admin or not. This is only used</span>
<span class="sd">            if explicitly specified in the call and even if passed will be</span>
<span class="sd">            ignored, if RBAC is enabled.</span>
<span class="sd">        action: The action that is being performed, used for output only.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IllegalOperationError: If the admin status is not valid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="p">()</span><span class="o">.</span><span class="n">rbac_enabled</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">action</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s2">&quot;this action&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;`&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">`&quot;</span>

        <span class="k">if</span> <span class="n">admin_status</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IllegalOperationError</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Only admin users can perform </span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;without RBAC enabled.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.workload_manager" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">workload_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WorkloadManagerInterface</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return the initialized workload manager component.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the workload manager component is not initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="WorkloadManagerInterface (zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface)" href="#zenml.zen_server.pipeline_execution.workload_manager_interface.WorkloadManagerInterface">WorkloadManagerInterface</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The workload manager component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">workload_manager</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WorkloadManagerInterface</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the initialized workload manager component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the workload manager component is not initialized.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The workload manager component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_workload_manager</span>
    <span class="k">if</span> <span class="n">_workload_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Workload manager component not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_workload_manager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.utils.zen_store" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">zen_store</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SqlZenStore</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the ZenML Store.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SqlZenStore(skip_default_registrations: bool = False, **kwargs: Any) (zenml.zen_stores.sql_zen_store.SqlZenStore)" href="core-zen_stores.html#zenml.zen_stores.sql_zen_store.SqlZenStore">SqlZenStore</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML Store.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the ZenML Store has not been initialized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">zen_store</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="s2">&quot;SqlZenStore&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the ZenML Store.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML Store.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the ZenML Store has not been initialized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_zen_store</span>
    <span class="k">if</span> <span class="n">_zen_store</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;ZenML Store not initialized&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_zen_store</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="zenml.zen_server.zen_server_api" class="doc doc-heading">
            <code>zen_server_api</code>


</h4>

    <div class="doc doc-contents ">

        <p>Zen Server API.</p>
<p>To run this file locally, execute:</p>
<pre><code>```
uvicorn zenml.zen_server.zen_server_api:app --reload
```
</code></pre>










  <div class="doc doc-children">







<h5 id="zenml.zen_server.zen_server_api-classes">Classes</h5>
<h5 id="zenml.zen_server.zen_server_api-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.catch_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">catch_all</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Dashboard endpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to a file in the dashboard root folder.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML dashboard.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/{file_path:path}&quot;</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">catch_all</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dashboard endpoint.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: Request object.</span>
<span class="sd">        file_path: Path to a file in the dashboard root folder.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML dashboard.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">DASHBOARD_REDIRECT_URL</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">RedirectResponse</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">DASHBOARD_REDIRECT_URL</span><span class="p">)</span>
    <span class="c1"># some static files need to be served directly from the root dashboard</span>
    <span class="c1"># directory</span>
    <span class="k">if</span> <span class="n">file_path</span> <span class="ow">and</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">root_static_files</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Returning static file: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">relative_path</span><span class="p">(</span><span class="n">DASHBOARD_DIRECTORY</span><span class="p">),</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FileResponse</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span>

    <span class="c1"># everything else is directed to the index.html file that hosts the</span>
    <span class="c1"># single-page application</span>
    <span class="k">return</span> <span class="n">templates</span><span class="o">.</span><span class="n">TemplateResponse</span><span class="p">(</span><span class="s2">&quot;index.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.dashboard" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dashboard</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Dashboard endpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="fastapi.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ZenML dashboard.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the dashboard files are not included.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dashboard</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dashboard endpoint.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: Request object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The ZenML dashboard.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: If the dashboard files are not included.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">DASHBOARD_REDIRECT_URL</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">RedirectResponse</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">DASHBOARD_REDIRECT_URL</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">relative_path</span><span class="p">(</span><span class="n">DASHBOARD_DIRECTORY</span><span class="p">),</span> <span class="s2">&quot;index.html&quot;</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">templates</span><span class="o">.</span><span class="n">TemplateResponse</span><span class="p">(</span><span class="s2">&quot;index.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.get_root_static_files" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_root_static_files</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the list of static files in the root dashboard directory.</p>
<p>These files are static files that are not in the /static subdirectory
that need to be served as static files under the root URL path.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of static files in the root directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_root_static_files</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the list of static files in the root dashboard directory.</span>

<span class="sd">    These files are static files that are not in the /static subdirectory</span>
<span class="sd">    that need to be served as static files under the root URL path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of static files in the root directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root_path</span> <span class="o">=</span> <span class="n">relative_path</span><span class="p">(</span><span class="n">DASHBOARD_DIRECTORY</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">root_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">root_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">file</span> <span class="o">==</span> <span class="s2">&quot;index.html&quot;</span><span class="p">:</span>
            <span class="c1"># this is served separately</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_path</span><span class="p">,</span> <span class="n">file</span><span class="p">)):</span>
            <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">files</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.health" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">health</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Get health status of the server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String representing the health status of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">HEALTH</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HEALTH</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">health</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get health status of the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        String representing the health status of the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;OK&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.initialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the ZenML server.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;startup&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the ZenML server.&quot;&quot;&quot;</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">server_config</span><span class="p">()</span>
    <span class="c1"># Set the maximum number of worker threads</span>
    <span class="n">to_thread</span><span class="o">.</span><span class="n">current_default_thread_limiter</span><span class="p">()</span><span class="o">.</span><span class="n">total_tokens</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">thread_pool_size</span>
    <span class="p">)</span>
    <span class="c1"># IMPORTANT: these need to be run before the fastapi app starts, to avoid</span>
    <span class="c1"># race conditions</span>
    <span class="k">await</span> <span class="n">initialize_request_manager</span><span class="p">()</span>
    <span class="n">initialize_zen_store</span><span class="p">()</span>
    <span class="n">service_connector_registry</span><span class="o">.</span><span class="n">register_builtin_service_connectors</span><span class="p">()</span>
    <span class="n">initialize_rbac</span><span class="p">()</span>
    <span class="n">initialize_feature_gate</span><span class="p">()</span>
    <span class="n">initialize_workload_manager</span><span class="p">()</span>
    <span class="n">initialize_snapshot_executor</span><span class="p">()</span>
    <span class="n">initialize_plugins</span><span class="p">()</span>
    <span class="n">initialize_secure_headers</span><span class="p">()</span>
    <span class="n">initialize_memcache</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">memcache_max_capacity</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">memcache_default_expiry</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cfg</span><span class="o">.</span><span class="n">deployment_type</span> <span class="o">==</span> <span class="n">ServerDeploymentType</span><span class="o">.</span><span class="n">CLOUD</span><span class="p">:</span>
        <span class="c1"># Send a workspace status update to the Cloud API to indicate that the</span>
        <span class="c1"># ZenML server is running or to update the version and server URL.</span>
        <span class="n">send_pro_workspace_status_update</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="n">start_event_loop_lag_monitor</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.invalid_api" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">invalid_api</span><span class="p">(</span><span class="n">invalid_api_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Invalid API endpoint.</p>
<p>All API endpoints that are not defined in the API routers will be
redirected to this endpoint and will return a 404 error.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>invalid_api_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Invalid API path.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>404 error.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">API</span> <span class="o">+</span> <span class="s2">&quot;/{invalid_api_path:path}&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">invalid_api</span><span class="p">(</span><span class="n">invalid_api_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invalid API endpoint.</span>

<span class="sd">    All API endpoints that are not defined in the API routers will be</span>
<span class="sd">    redirected to this endpoint and will return a 404 error.</span>

<span class="sd">    Args:</span>
<span class="sd">        invalid_api_path: Invalid API path.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: 404 error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid API path requested: </span><span class="si">{</span><span class="n">invalid_api_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.ready" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ready</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Get readiness status of the server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String representing the readiness status of the server.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">READY</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">READY</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">ready</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get readiness status of the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        String representing the readiness status of the server.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;OK&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.relative_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">relative_path</span><span class="p">(</span><span class="n">rel</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the absolute path of a path relative to the ZenML server module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>rel</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Relative path.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Absolute path.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">relative_path</span><span class="p">(</span><span class="n">rel</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the absolute path of a path relative to the ZenML server module.</span>

<span class="sd">    Args:</span>
<span class="sd">        rel: Relative path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Absolute path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="n">rel</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.shutdown" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">shutdown</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">

        <p>Shutdown the ZenML server.</p>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;shutdown&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shutdown the ZenML server.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="n">stop_event_loop_lag_monitor</span><span class="p">()</span>
    <span class="n">snapshot_executor</span><span class="p">()</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">cleanup_request_manager</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="zenml.zen_server.zen_server_api.validation_exception_handler" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validation_exception_handler</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ORJSONResponse</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Custom validation exception handler.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exc</code>
            </td>
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exception.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.responses.ORJSONResponse">ORJSONResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The error response formatted using the ZenML API conventions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/zenml/zen_server/zen_server_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">exception_handler</span><span class="p">(</span><span class="n">RequestValidationError</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validation_exception_handler</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="ne">Exception</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ORJSONResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom validation exception handler.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The request.</span>
<span class="sd">        exc: The exception.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The error response formatted using the ZenML API conventions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ORJSONResponse</span><span class="p">(</span><span class="n">error_detail</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">422</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>
<h5 id="zenml.zen_server.zen_server_api-modules">Modules</h5>


  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 ZenML GmbH – <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>